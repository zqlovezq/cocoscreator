{"version":3,"sources":["assets/Script/Tools.js"],"names":["cc","Tools","dot","event","pro","sys","isNative","jsb","reflection","callStaticMethod","JSON","stringify","getDevice","pram","data","DeviceInfo","parse","adCallBack","_pram","split","ecpm","type","console","log","getUserEcpm","then","emitEvent","Event","emit","showJiliAd","ad_scene","Number","showBanner","hideBanner","showTableScreen","hideTableScreen","wxLogin","wxLoginResult","errCode","wxLoginResultcode","serverEcpm","parseInt","priceEcpm","Promise","resolve","reject","ad_price_1","sendData","Date","getTime","createSignData","sendRequest","res","ad_type","zm","ad","videoAd","redPack","sortList","key","hasOwnProperty","value","item","push","sort","strToJiaMi","forEach","userInfo","sc1","hex_md5","require","sign","screenAdapter","canvas","find","getComponent","Canvas","winSize","view","getVisibleSize","height","width","fitHeight","fitWidth","showTips","n","str","tips","getChildByName","Label","string","stopAllActions","y","tween","to","opacity","delay","start","url","xhr","XMLHttpRequest","requestURL","open","setRequestHeader","wxToken","onreadystatechange","readyState","status","response","_response","code","message","onerror","Error","statusText","send"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Tools = {\n    /**\n     * @param {*} event 数数打点的事件名称\n     * @param {*} pro 数数打点的关联属性\n    */\n    dot(event, pro) {\n        if (cc.sys.isNative) {\n        \n            if (pro) {\n                jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"dot\", \"(Ljava/lang/String;Ljava/lang/String;)V\", event, JSON.stringify(pro));\n            } else {\n                jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"dot\", \"(Ljava/lang/String;)V\", event);\n            }\n        }\n    },\n    getDevice(pram,data){\n        cc.Tools.DeviceInfo = JSON.parse(data);\n    },\n    /**\n     * 看视频回调\n     *  //type 1体力补充 2--过关奖励 3--签到 4--转盘 5--开局增益 6--插屏 7--开屏\n     */\n    adCallBack(pram) {\n        let _pram = pram.split(\",\");\n        let ecpm = _pram[0];\n        let type = _pram[1];\n        console.log(\"cocos ecpm=\", ecpm);\n        this.getUserEcpm(ecpm, type).then(() => {\n            switch (type) {\n                case \"1\":\n                     // 看视频得体力\n                    this.emitEvent(\"getPower\");\n                    break;\n                case \"2\":\n                    // 看视频得红包\n                    this.emitEvent(\"getRedPackage\");\n                    break;\n                case \"3\":\n                     // 看视频签到\n                    this.emitEvent(\"getSign\");\n                    break;\n                case \"4\":\n                     // 看视频转盘\n                    this.emitEvent(\"getTable\");\n                    break;\n                case \"5\":\n                    // 看视频得道具\n                    this.emitEvent(\"getWeapon\");\n                    break;\n                case \"6\":\n                    break;\n                case \"7\":\n                    break;\n                default:\n                    break;\n            }\n        })\n    },\n    emitEvent(event){\n        cc.Tools.Event.emit(event);\n    },\n    // 显示激励视频\n    showJiliAd(type) {\n        let data = [\"体力补充\", \"过关奖励\", \"签到\", \"转盘\", \"开局增益\"];\n        cc.Tools.dot(\"ad_show\", { ad_scene: data[Number(type) - 1] });\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showAd\", \"(Ljava/lang/String;)V\", \"\" + type);\n        }\n    },\n    // 显示banner\n    showBanner() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showBanner\", \"()V\");\n        }\n    },\n    // 隐藏banner\n    hideBanner() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hideBanner\", \"()V\");\n        }\n    },\n    // 显示插屏广告\n    showTableScreen() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showTableScreen\", \"()V\");\n        }\n    },\n    // 隐藏插屏广告\n    hideTableScreen() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hideTableScreen\", \"()V\");\n        }\n    },\n    // 微信登陆\n    wxLogin() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"weixin_login\", \"(Ljava/lang/String;)V\", \"weixin_login\");\n        }\n    },\n    /**\n    * 接收native微信授权的code\n    * @param errCode \n    */\n    wxLoginResult(errCode) {\n        cc.wxLoginResultcode = errCode;\n        cc.Tools.emitEvent(\"getCode\");\n    },\n    /**\n     * 看广告之后刷新一下ecpm\n     */\n    getUserEcpm(ecpm, type) {\n        // 获取ecpm之后像服务器发的是ecpm/100\n        let serverEcpm = parseInt(ecpm/100);\n        // 单价\n        let priceEcpm = Number(ecpm/(10*10000));\n        return new Promise(function (resolve, reject) {\n            if (type === \"6\") {\n                cc.Tools.dot(\"ad_flow\", { ecpm: serverEcpm,ad_price_1: priceEcpm});\n                resolve();\n            } else if (type === \"7\") {\n                cc.Tools.dot(\"ad_open_screen\", { ecpm: serverEcpm,ad_price_1: priceEcpm});\n                resolve();\n            } else {\n                let sendData = {\n                    \"ecpm\": Number(ecpm)/100,\n                    \"ts\": new Date().getTime()//时间戳\n                };\n                let data = cc.Tools.createSignData(sendData);\n                cc.Tools.sendRequest(\"pit.v1.PitSvc/Rc\", \"POST\", data).then((res) => {\n                    let data = [\"体力补充\", \"过关奖励\", \"签到\", \"转盘\", \"开局增益\"];\n                    cc.Tools.dot(\"ad\", { ad_type: \"激励视频\", ecpm: serverEcpm, ad_price_1: priceEcpm});\n                    cc.Tools.dot(\"ad_start\", { ad_scene: data[Number(type) - 1], ecpm: serverEcpm });\n                    cc.zm.ad = res.data.ad;\n                    if (cc.zm.videoAd.redPack) {\n                        cc.zm.videoAd.redPack.ad = cc.zm.ad;\n                    }\n                    resolve();\n                })\n            }\n        })\n    },\n    /**\n     * \n     * @param {*} data 需要签名数据\n     * @returns \n     */\n    createSignData: function (data) {\n        var sortList = [];\n        for (var key in data) {\n            if (data.hasOwnProperty(key) && key != \"sign\") {\n                var value = data[key];\n                var item = {};\n                item.key = key;\n                item.value = value;\n                sortList.push(key);\n            }\n        }\n        sortList.sort();\n        var strToJiaMi = \"\";\n        sortList.forEach(function (key) {\n            strToJiaMi += \"&\" + key + \"=\" + data[key];\n        }, this);\n        strToJiaMi = \"token=\" + cc.zm.userInfo.sc1 + strToJiaMi;\n        var hex_md5 = require(\"MD5\")\n        strToJiaMi = hex_md5(strToJiaMi);\n        data.sign = strToJiaMi;\n        return data;\n\n    },\n    // 适配屏幕\n    screenAdapter() {\n        let canvas = cc.find(\"Canvas\").getComponent(cc.Canvas);\n        let winSize = cc.view.getVisibleSize();\n\n        if (winSize.height / winSize.width <= 720 / 1280) {\n            canvas.fitHeight = true;\n            canvas.fitWidth = false;\n        }\n        else {\n            canvas.fitHeight = false;\n            canvas.fitWidth = true;\n        }\n    },\n    /**\n     * \n     * @param {*} n node节点\n     * @param {*} str  显示的tips内容\n     */\n    showTips(n, str) {\n        let tips = n.getChildByName(\"Tips\");\n        tips.getComponent(cc.Label).string = str;\n        tips.stopAllActions();\n        tips.y = 145;\n        cc.tween(tips).to(0.1, { opacity: 255 }).to(1, { y: 300 }).delay(0.5).to(0.1, { opacity: 0 }).start()\n    },\n    /**\n     * \n     * @param {*} url 请求接口的url----pit.v1.PitSvc/UserInfo\n     * @param {*} type 请求接口的类型 只能是GET--POST\n     * @param {*} data 请求接口所需要的数据\n     * @returns \n     */\n    sendRequest: function (url, type, data) {\n        return new Promise(function (resolve, reject) {\n            let xhr = new XMLHttpRequest();\n            let requestURL = \"https://pit.api.jiankangzhuan.com/\" + url;\n            xhr.open(type, requestURL, true);\n            if (cc.sys.isNative) {\n                xhr.setRequestHeader(\"Accept-Encodeing\", \"gzip,deflate\");\n            }\n            if (cc.wxToken) {\n                xhr.setRequestHeader(\"Authorization\", cc.wxToken);\n            }\n            xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n            console.log(\"cocos----xhr=\", requestURL);\n            console.log(\"cocos----data=\", JSON.stringify(data));\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4 && xhr.status == 200) {\n                    console.log(\"cocos----http res:\" + xhr.response);\n                    // 统一处理\n                    let _response = JSON.parse(xhr.response);\n                    if (_response.code === 0) {\n                        console.log(\"cocos----http success\");\n                        resolve(_response)\n                    } else {\n                        console.log(\"cocos----http fail\"+_response.message);\n                        reject(_response.message);\n                    }\n                }\n            }\n            xhr.onerror = function () {\n                reject(new Error(xhr.statusText))\n            }\n            xhr.send(JSON.stringify(data));\n        })\n    }\n}"]}