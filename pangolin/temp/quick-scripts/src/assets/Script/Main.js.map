{"version":3,"sources":["assets/Script/Main.js"],"names":["cc","Class","Component","properties","speed","displayName","rotateSpeed","HookRange","Prefabs","type","Prefab","InitTime","CollisionAudio","AudioClip","AddScroeAudio","PropSpriteFrames","SpriteFrame","Boom","HookFrames","HeroFrames","LotteryFramse","onLoad","init","director","preloadScene","setGuide","index","guideIndex","guide","find","getChildByName","active","nextGuide","e","msg","guide_1","guide_2","guide_3","sys","localStorage","setItem","ResumeGameLayer","hideNeedLayer","Tools","sendRequest","then","res","sendDta","prop","zm","LevelInfo","data","NeedLayer","handleDaoju","adjusBoomLayout","hideLotteryLayer","LotteryLayer","showBackLayer","BackLayer","PauseGameLayer","Miner","Hook","HookHeight","height","HookState","curScore","pauseGame","MinerSp","getComponent","seeVideoLayer","Score","Label","TargetScore","Time","Checkpoint","PropNode","itemArea","manager","getCollisionManager","enabled","forEach","item","_name","emitHook","Mask","on","Node","EventType","TOUCH_END","CloseMask","bind","emitHookBtn","boomNumber","liquidNumber","screenAdapter","videoAd","clickWeapon","ResetInfo","StartTime","SetLevel","CreateTargetScore","CreateItem","redPack","levelInfo","extarRedPack","parseInt","getItem","Event","getWeaponFunc","getRedPackageFunc","needScore","needLevel","string","score","id","arr","rdm","createRandm","LotteryProp","icon","Sprite","spriteFrame","LookVideoGetAward","showJiliAd","weapon","i","length","num","clockNumber","handbookNumber","cloverNumber","HookRoTate","angle","Math","abs","setAnimation","children","childrenCount","Handle","addAnimation","StopHookMove","PullBackHook","SetSpeed","other","promote","ItemAttr","node","name","victory","timer","unschedule","GameOver","schedule","Level","stage","current_score","dot","newItemArr","newCreateCalc","instantiate","XY","randomXY","parent","extra","setPosition","boom","addChild","v2","x","y","mouse","split","mouseNumber","Number","randX","width","random","randY","pos","moveMouse","DrillMouseNumber","_moveTime","time","tween","to","start","scheduleOnce","scaleX","repeatForever","delay","call","createItemArr","_arr","obj","push","_prop","rmd","good","info","scoreArr","_info","percent","newArr","createByType","_scoreArr","sort","a","b","totalScore","maxScore","_score","scoreCig","widthCig","__score","_key","floor","key","k","groundY","rect","Rect","isPeng","n","boundingBox","getBoundingBox","intersects","destroyTnt","Tnt","_pos","getPosition","contains","removeFromParent","destroy","m","items","AddProp","AddScore","RemoveItem","layout","isNaN","showMestery","addAnim","showMusic","audioEngine","play","extraRedPack","mestery","stopAllActions","opacity","add","ShowMask","Fail","Success","level_num","level_result","lbl","sendData","status","curr_pass_stage","need_pass_stage","curr_sign_in","need_sign_in","curr_ad","need_ad","awrad","ever_pass","extatAward","str","handleNumber","Date","getTime","createSignData","scale","numb","newKey","slice","Reload","loadScene","Next","userInfo","power","endCountTime","ExitGame","AwardVideo","pack","ad","seeVideoAward","enterGame","target","closeLayer","paused","s","console","log","LotteryAward","award","update","dt","useProp","showShake","isNative","jsb","Device","vibrate","_node","convertToWorldSpaceAR","size","view","getVisibleSize","Animation"],"mappings":"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","sourceRoot":"/","sourcesContent":["//引入 得分等配置 太长 所以换个文件写\nimport ItemAttr from './Config';\nimport Level from './Level';\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //钩子速度\n        speed: {\n            default: 3,\n            displayName: '钩子速度'\n        },\n        //钩子旋转速度\n        rotateSpeed: {\n            default: 1,\n            displayName: '钩子旋转速度'\n        },\n        //钩子范围\n        HookRange: {\n            default: 70,\n            displayName: '钩子旋转角度范围'\n        },\n        //所有的prefab 这种方式是同步的 代码比较好写 就是难拖\n        Prefabs: {\n            default: [],\n            type: cc.Prefab\n        },\n        InitTime: {\n            default: 10,\n        },\n        //钩子触碰到物品的声音\n        CollisionAudio: {\n            type: cc.AudioClip,\n            default: null,\n        },\n        //加分的声音\n        AddScroeAudio: {\n            type: cc.AudioClip,\n            default: null,\n        },\n        // 道具的纹理\n        PropSpriteFrames: {\n            type: cc.SpriteFrame,\n            default: [],\n        },\n        Boom: {\n            type: cc.Prefab,\n            default: null,\n        },\n        HookFrames: {\n            type: cc.SpriteFrame,\n            default: [],\n        },\n        HeroFrames: {\n            type: cc.SpriteFrame,\n            default: [],\n        },\n        LotteryFramse: {\n            type: cc.SpriteFrame,\n            default: [],\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        /**\n         * 初始化\n         */\n        this.init();\n\n        //加载首页资源\n        cc.director.preloadScene('Index');\n    },\n    setGuide() {\n        let index = this.guideIndex;\n        if (index <= 3) {\n            let guide = cc.find('Canvas/Guide')\n            guide.getChildByName(\"guide_\" + index).active = true;\n        } else {\n            this.guide = false;\n            cc.find('Canvas/Guide').active = false;\n        }\n    },\n    nextGuide(e, msg) {\n        let guide = cc.find('Canvas/Guide');\n        let guide_1 = guide.getChildByName(\"guide_1\");\n        let guide_2 = guide.getChildByName(\"guide_2\");\n        let guide_3 = guide.getChildByName(\"guide_3\");\n        guide_1.active = false;\n        guide_2.active = false;\n        guide_3.active = false;\n        if (msg === \"2\") {\n            cc.sys.localStorage.setItem(\"guide\", 2);\n            guide.getChildByName(\"guide_2\").active = true;\n        } else if (msg === \"3\") {\n            cc.sys.localStorage.setItem(\"guide\", 3);\n            guide.getChildByName(\"guide_3\").active = true;\n        } else if (msg === \"4\") {\n            this.guide = false;\n            this.ResumeGameLayer();\n            cc.sys.localStorage.setItem(\"guide\", 4);\n            cc.find('Canvas/Guide').active = false;\n        }\n    },\n    hideNeedLayer() {\n        // 如果开始游戏 那么刷新一下道具数据\n        cc.Tools.sendRequest(\"pit.v1.PitSvc/Stage\", \"GET\", {}).then((res) => {\n            let sendDta = {\n                prop: 4\n            }\n            cc.Tools.sendRequest(\"pit.v1.PitSvc/Prop\", \"POST\", sendDta).then((res) => {\n               \n            });\n            cc.zm.LevelInfo = res.data;\n            // 关闭界面开始游戏\n            this.NeedLayer.active = false;\n            // 点击开始游戏之前 重新同步一下道具信息\n             // 隐藏banner\n            // cc.Tools.hideBanner();\n            this.handleDaoju();\n            this.adjusBoomLayout();\n            this.ResumeGameLayer();\n            // 对关卡进行打点\n        });\n    },\n    hideLotteryLayer() {\n        this.LotteryLayer.active = false;\n    },\n    showBackLayer() {\n        this.BackLayer.active = true;\n        this.PauseGameLayer();\n    },\n    /**\n     * @description 初始化 各种需要的比变量\n     */\n    init() {\n        //钩子矿工\n        this.Miner = cc.find('Canvas/Header/Miner');\n        //矿工动画 \n        //获取钩子\n        this.Hook = cc.find('Canvas/Header/Miner/Hook');\n        //获取钩子初始长度\n        this.HookHeight = this.Hook.height;\n        //放下钩子开关 0 停止 1 发射 2拉回\n        this.HookState = 0;\n        this.curScore = 0;\n        this.pauseGame = false;\n        // 初始化矿工的精灵帧\n        this.MinerSp = this.Miner.getComponent(\"sp.Skeleton\");\n        // 看视频得体力界面\n        this.seeVideoLayer = cc.find('Canvas/SeeVideolayer')\n        //得分累计\n        this.Score = cc.find('Canvas/ScoreAndTarget/Score').getComponent(cc.Label);\n        //通关目标分数\n        this.TargetScore = cc.find('Canvas/ScoreAndTarget/Target').getComponent(cc.Label);\n        //倒计时\n        this.Time = cc.find('Canvas/CheckpointAndTime/Time').getComponent(cc.Label);\n        //关卡数\n        this.Checkpoint = cc.find('Canvas/CheckpointAndTime/Checkpoint').getComponent(cc.Label);\n        this.NeedLayer = cc.find('Canvas/NeedLayer');\n        this.BackLayer = cc.find('Canvas/BackLayer');\n        this.PropNode = cc.find('Canvas/Header/Prop');\n        this.LotteryLayer = this.NeedLayer.getChildByName(\"LotteryLayer\");\n        //物品区域\n        this.itemArea = cc.find('Canvas/ItemArea');\n        //开启碰撞\n        this.manager = cc.director.getCollisionManager();\n        this.manager.enabled = true;\n        // this.manager.enabledDebugDraw = true;\n        // manager.enabledDrawBoundingBox = true;\n\n        //重组prefab数组 方便查询\n        this.Prefab = {};\n        this.Prefabs.forEach(item => {\n            this.Prefab[item._name] = item;\n        });\n\n        //发射钩子按钮\n        let emitHook = cc.find('Canvas/emitHookBtn');\n        //弹出框\n        this.Mask = cc.find('Canvas/Mask');\n        //游戏结束按钮 包括过关/结束游戏\n        this.Mask.on(cc.Node.EventType.TOUCH_END, this.CloseMask.bind(this));\n        emitHook.on(cc.Node.EventType.TOUCH_END, this.emitHookBtn.bind(this));\n        this.boomNumber = -1;\n        this.liquidNumber = 0;\n        this.adjusBoomLayout();\n        cc.Tools.screenAdapter();\n        cc.zm.videoAd.clickWeapon = true;\n        this.ResetInfo();\n        this.StartTime();\n        this.SetLevel();\n        this.CreateTargetScore();\n        this.CreateItem();\n        this.redPack = this.levelInfo.redPack;\n        this.extarRedPack = 0;\n        // 是否新手引导\n        this.guideIndex = parseInt(cc.sys.localStorage.getItem(\"guide\"));\n\n        cc.Tools.Event.on('getWeapon', this.getWeaponFunc, this);\n        cc.Tools.Event.on('getRedPackage', this.getRedPackageFunc, this);\n        if (this.guideIndex < 4 && this.guideIndex >= 1) {\n            this.guide = true;\n            // 有新手引导暂停游戏\n            this.PauseGameLayer();\n            cc.find('Canvas/Guide').active = true;\n            this.setGuide();\n        } else {\n            this.guide = false;\n            this.PauseGameLayer();\n            cc.find('Canvas/Guide').active = false;\n            // cc.Tools.showBanner();\n            this.NeedLayer.active = true;\n            let needScore = this.NeedLayer.getChildByName(\"needScore\").getComponent(cc.Label);\n            let needLevel = this.NeedLayer.getChildByName(\"needLevel\").getComponent(cc.Label);\n            needScore.string = `要求分数：${this.levelInfo.score}`\n            needLevel.string = `第${this.levelInfo.id}关`;\n            // 抽奖选关卡\n            // 前端随机一个道具\n            // 炸弹：10 11时钟 13药水\n            let arr = [10, 11, 13];\n            let rdm = this.createRandm(0, 2);\n            let prop = arr[rdm];\n            this.LotteryProp = prop;\n            let icon = this.LotteryLayer.getChildByName(\"icon\").getComponent(cc.Sprite);\n            if (prop === 10) {\n                // 当前是炸弹\n                icon.spriteFrame = this.LotteryFramse[2]\n            } else if (prop === 11) {\n                icon.spriteFrame = this.LotteryFramse[0]\n            } else if (prop === 13) {\n                icon.spriteFrame = this.LotteryFramse[1]\n            }\n        }\n    },\n    LookVideoGetAward() {\n        cc.Tools.showJiliAd(5);\n    },\n    // 使用道具\n    handleDaoju() {\n        // 道具的数量为\n        let weapon = cc.zm.LevelInfo.weapon;\n        // prop类型 10.炸弹 11.时钟 12.石化手册 13.药水 14.三叶草\n        // 处理道具 道具分别为 炸弹 boomNumber 时钟 clockNumber 石化手册 handbookNumber 药水 liquidNumber 三叶草 cloverNumber\n        let data = {\n            \"1\": \"体力\",\n            \"10\": \"炸弹\",\n            \"11\": \"时钟\",\n            \"12\": \"石化手册\",\n            \"13\": \"药水\",\n            \"14\": \"三叶草\"\n        }\n        for (let i = 0; i < weapon.length; i++) {\n            if (weapon[i].prop === 10) {\n                // 当前是炸弹\n                this.boomNumber = weapon[i].num - 1;\n            } else {\n                // 如果是其他物品那么直接使用\n                if (weapon[i].num) {\n                    // 直接使用\n                    let sendDta = {\n                        prop: weapon[i].prop\n                    }\n                    cc.Tools.sendRequest(\"pit.v1.PitSvc/Prop\", \"POST\", sendDta).then((res) => {\n                        \n                    });\n                }\n            }\n            if (weapon[i].prop === 11) {\n                this.clockNumber = weapon[i].num\n            }\n            if (weapon[i].prop === 12) {\n                this.handbookNumber = weapon[i].num\n            }\n            if (weapon[i].prop === 13) {\n                this.liquidNumber = weapon[i].num\n            }\n            if (weapon[i].prop === 14) {\n                this.cloverNumber = weapon[i].num\n            }\n        }\n\n    },\n    /**\n     * @description 钩子旋转\n     */\n    HookRoTate() {\n        if (this.HookState) return;\n\n        //限制范围 只能在 70 与 -70 之间\n        if (this.Hook.angle >= 70) {\n            this.rotateSpeed = -this.rotateSpeed;\n        } else if (this.Hook.angle <= -70) {\n            this.rotateSpeed = Math.abs(this.rotateSpeed);\n        };\n\n        this.Hook.angle += this.rotateSpeed;\n    },\n\n    /**\n     * @description 发射钩子按钮事件\n     */\n    emitHookBtn() {\n        //TODO 停止钩子旋转\n        //打开/关闭 钩子开关 没有拉回之前 当前position ！= 初始位置时 不允许操作\n        if (this.HookState) return;\n        // 当前发射绳子\n        this.MinerSp.setAnimation(0, \"fang\", true);\n        this.HookState = 1;\n    },\n\n    /**\n     * @description 发射钩子\n     */\n    emitHook() {\n        switch (this.HookState) {\n            case 1:\n                this.Hook.height += this.speed;\n                break;\n            case 2:\n                if (this.Hook.height <= this.HookHeight) {\n\n                    //检测是否拉回物品\n                    if (this.Hook.children[0]) {\n                        if (this.Hook.children[0].childrenCount) {\n                            this.Handle(this.Hook.children[0].children);\n                            //停止播放拉回动画\n                            this.MinerSp.setAnimation(0, \"idle3\", false);\n                            this.MinerSp.addAnimation(0, \"idle\", true);\n                        } else {\n                            this.MinerSp.setAnimation(0, \"idle\", true);\n                        }\n                    }\n                    this.StopHookMove();\n                } else {\n                    this.Hook.height -= this.speed;\n                };\n                break;\n        };\n    },\n\n    /**\n     * @description 拉回钩子\n     */\n    PullBackHook() {\n        //播放拉回钩子动画\n        // 将钩子的图片转化\n        this.MinerSp.setAnimation(0, \"la\", true);\n        this.HookState = 2;\n    },\n\n    /**\n     * 设置钩子拉回的速度\n     */\n    SetSpeed(other) {\n        // 是否有药水效果 如果有那么speed速度增加10%\n        let promote = 1;\n        ItemAttr[other.node.name] = ItemAttr[other.node.name] || {};\n        if (this.liquidNumber) {\n            promote = 1.1\n        }\n        this.speed = ItemAttr[other.node.name].speed * promote || 10;\n    },\n\n    /**\n     * 重置所有分数信息\n     */\n    ResetInfo() {\n        //this.victory 游戏胜利失败状态 0 = 游戏中 1 = 成功 2 = 失败\n        this.victory =\n            this.Score.string =\n            this.Time.string =\n            this.Checkpoint.string =\n            this.TargetScore.string = 0;\n    },\n\n    /**\n     * 启动倒计时\n     */\n    StartTime() {\n        // 是否存在时钟 存在时钟 this.InitTime+10秒\n        if (this.clockNumber) {\n            this.clockNumber = 0;\n            this.InitTime += 10;\n        }\n        this.Time.string = this.InitTime;\n        this.timer = function () {\n            this.InitTime--;\n            this.Time.string = this.InitTime;\n            if (this.InitTime <= 0) {\n                this.unschedule(this.timer);\n                this.GameOver();\n            };\n        }\n        this.schedule(this.timer, 1)\n    },\n\n    /**\n     * 设置关卡数\n     */\n    SetLevel() {\n        this.levelInfo = Level[\"level\" + cc.zm.LevelInfo.stage]\n        // this.levelInfo = Level[\"level15\"]\n        this.Score.string = cc.zm.LevelInfo.current_score;\n        this.Checkpoint.string = `${cc.zm.LevelInfo.stage}`;\n        if(cc.zm.LevelInfo.stage<=5){\n            cc.Tools.dot(\"start_\"+cc.zm.LevelInfo.stage)\n        }\n    },\n\n    /**\n     * 确定过关目标分数\n     * 目标分数根据关卡关数确定 难度累加率为\n     *  基数 1000\n     *  每关递增500分\n     * \n     * 最大 5000分\n     */\n    CreateTargetScore() {\n        this.TargetScore.string = this.levelInfo.score;\n    },\n\n    /**\n     * 生成物品 需要根据目标分来生成 生成的所有物品总分必须比目标过关分数高20%\n     * 生成的物品数量在 10-30\n     */\n    CreateItem() {\n        let newItemArr = this.newCreateCalc();\n        // 写一个算法 根据分数先将arr 排序 总分不能超过最大分数 如果超了 则从小开始减少 直到分数小于最大分数\n        //生成相应的Prfab\n        newItemArr.forEach(item => {\n            let node = cc.instantiate(this.Prefab[item.name]);\n            let XY = this.randomXY(node);\n            node.parent = this.itemArea;\n            if (item.score) {\n                node.score = item.score;\n            }\n            if (item.prop) {\n                node.extra = item.prop;\n            }\n            node.setPosition(XY);\n            if (item.name === \"Tnt\") {\n                let boom = cc.instantiate(this.Boom);\n                this.node.addChild(boom);\n                boom.name = \"tntBoom\";\n                boom.setPosition(cc.v2(XY.x, XY.y - 218));\n                node.boom = boom;\n            }\n        });\n        // todo先不创建老鼠试试\n        if (this.levelInfo.mouse) {\n            let data = this.levelInfo.mouse.split(\",\");\n            // 普通老鼠\n            let mouseNumber = Number(data[0]);\n            if (mouseNumber > 0) {\n                for (let i = 0; i < mouseNumber; i++) {\n                    let node = cc.instantiate(this.Prefab[\"Mouse\"]);\n                    let randX = (this.itemArea.width - 30) / 2 * ((Math.random() - 0.5) * 2);\n                    let randY = (this.itemArea.height - 30) / 2 * ((Math.random() - 0.5) * 2);\n                    let pos = cc.v2(randX, randY);\n                    node.parent = this.itemArea;\n                    node.score = 50;\n                    node.setPosition(pos);\n                    this.moveMouse(node);\n                }\n            }\n            let DrillMouseNumber = Number(data[1]);\n            if (DrillMouseNumber > 0) {\n                for (let i = 0; i < DrillMouseNumber; i++) {\n                    let node = cc.instantiate(this.Prefab[\"DrillMouse\"]);\n                    let randX = (this.itemArea.width - 30) / 2 * ((Math.random() - 0.5) * 2);\n                    let randY = (this.itemArea.height - 30) / 2 * ((Math.random() - 0.5) * 2);\n                    let pos = cc.v2(randX, randY);\n                    node.parent = this.itemArea;\n                    node.score = 700;\n                    node.setPosition(pos);\n                    this.moveMouse(node);\n                }\n            }\n        }\n    },\n    // 生成的物品是可动的\n    moveMouse(mouse) {\n        // 先将老鼠移动到最右边 时间为600/距离*5\n        let _moveTime = 10\n        let time = (parseInt(300 - mouse.x) / 600) * _moveTime\n        cc.tween(mouse).to(time, { x: 300 }).start()\n        this.scheduleOnce(() => {\n            // 现在开始 老鼠做规律运动先将老鼠反转\n            if (mouse.name !== \"\") {\n                mouse.scaleX = -1;\n                cc.tween(mouse).repeatForever(cc.tween().to(_moveTime, { x: -300 }).delay(1).call(() => {\n                    mouse.scaleX = 1;\n                }).to(_moveTime, { x: 300 }).delay(1).call(() => {\n                    mouse.scaleX = -1;\n                })).start()\n            }\n        }, time + 1)\n    },\n    // 写一个算法。。一只有一个总数量 可以得到 各个物品的数量\n    newCreateCalc() {\n        let createItemArr = [];\n        // 先生成红包跟神秘物品\n        if (this.levelInfo.extra) {\n            let extra = this.levelInfo.extra.split(\",\");\n            // 0是红包 创建一个红包\n            if (extra[0]) {\n                let _arr = [];\n                let obj = {\n                    \"name\": \"Red\",\n                    // 开出的红包金额\n                    \"prop\": 0.1,\n                    \"width\": 70\n                }\n                _arr.push(obj);\n                createItemArr = [...createItemArr, ..._arr]\n            }\n            if (extra[1]) {\n                let _arr = [];\n                let _prop = null;\n                // 当前是神秘物品 先随机出物品 是否有三叶草 如果有 药水的随机概率增加\n                if (this.cloverNumber) {\n                    let arr = [\"炸弹\", \"3元红包\", \"5元红包\", \"药水\", \"药水\"];\n                    let rmd = this.createRandm(0, 4);\n                    _prop = arr[rmd]\n                } else {\n                    let arr = [\"炸弹\", \"3元红包\", \"5元红包\", \"药水\"];\n                    let rmd = this.createRandm(0, 3);\n                    _prop = arr[rmd]\n                }\n                let obj = {\n                    \"name\": \"Mystery\",\n                    // 开出的红包金额\n                    \"prop\": _prop,\n                    \"width\": 71\n                }\n                _arr.push(obj);\n                createItemArr = [...createItemArr, ..._arr]\n            }\n        }\n        if (this.levelInfo.boom) {\n            for (let i = 0; i < this.levelInfo.boom; i++) {\n                let _arr = [];\n                let obj = {\n                    \"name\": \"Tnt\",\n                    \"width\": 77\n                }\n                _arr.push(obj);\n                createItemArr = [...createItemArr, ..._arr]\n            }\n        }\n        // 根据积分 生成对应个数\n        if (!this.levelInfo.good) {\n            return createItemArr;\n        }\n        let info = this.levelInfo.good.split(\",\");\n        // let maxScore = this.levelInfo.maxScore;\n        let scoreArr = [];\n        for (let i = 0; i < info.length; i++) {\n            let _info = info[i].split(\"|\");\n            let type = _info[0];\n            let percent = Number(_info[1])\n            let newArr = this.createByType(type, percent);\n            scoreArr = [...scoreArr, ...newArr]\n        }\n        // 将积分数组排序\n        let _scoreArr = scoreArr.sort((a, b) => {\n            if (a.score > b.score) {\n                return -1\n            }\n            if (a.score < b.score) {\n                return 1\n            }\n            return 0\n        })\n        // 计算所有arr中的分数是不是超过 本关的最大值 如果超过那么从后往前计算值\n        let newArr = [];\n        let totalScore = this.levelInfo.maxScore;\n        let _score = 0;\n        for (let i = 0; i < _scoreArr.length; i++) {\n            _score += _scoreArr[i].score;\n            if (_score <= totalScore) {\n                newArr.push(_scoreArr[i])\n            } else {\n                break;\n            }\n        }\n        createItemArr = [...createItemArr, ...newArr];\n        // 将createItemArr排序按照宽度\n        createItemArr = createItemArr.sort((a, b) => {\n            if (a.width > b.width) {\n                return -1\n            }\n            if (a.width < b.width) {\n                return 1\n            }\n            return 0\n        })\n        return createItemArr;\n    },\n    // 根据积分跟类型生成数量name\n    createByType(type, score) {\n        let arr = [];\n        let _score = 0;\n        switch (type) {\n            case \"b\":\n                // 当前是石块 是否有化石手册 如果有 石头的价值提升20% todo\n                let promote = 1;\n                if (this.handbookNumber) {\n                    promote = 1.2\n                }\n                for (let i = 0; i < 30; i++) {\n                    let name = \"Stone-\"\n                    let scoreCig = [20, 30, 40];\n                    let widthCig = [42, 89, 154];\n                    let rdm = this.createRandm(0, 2);\n                    _score += scoreCig[rdm];\n                    if (_score > score) {\n                        break;\n                    }\n                    let obj = {\n                        \"name\": name + rdm,\n                        \"score\": scoreCig[rdm] * promote,\n                        \"width\": widthCig[rdm]\n                    }\n                    arr.push(obj);\n                }\n                break;\n            case \"g\":\n                // 当前是黄金\n                for (let i = 0; i < 30; i++) {\n                    let name = \"Gold-\"\n                    let scoreCig = [];\n                    // 根据当前积分的最大值动态生成数组\n                    let __score = score - _score;\n                    if (__score >= 300) {\n                        scoreCig = [50, 100, 150, 200, 300];\n                    } else {\n                        let _key = Math.floor(__score / 50)\n                        let key = _key > 4 ? 4 : _key\n                        for (let k = 0; k < key; k++) {\n                            scoreCig.push(50 * (1 + k));\n                        }\n                    }\n                    let width = {\n                        \"50\": 36,\n                        \"100\": 62,\n                        \"150\": 83,\n                        \"200\": 108,\n                        \"300\": 146\n                    }\n                    let rdm = this.createRandm(0, scoreCig.length - 1);\n                    _score += scoreCig[rdm];\n                    if (_score > score) {\n                        break;\n                    }\n                    if (scoreCig.length === 0) {\n                        break;\n                    }\n                    let obj = {\n                        \"name\": name + rdm,\n                        \"score\": scoreCig[rdm],\n                        \"width\": width[\"\" + scoreCig[rdm]]\n                    }\n                    arr.push(obj);\n                }\n                break;\n            case \"d\":\n                // 当前是钻石\n                for (let i = 0; i < 30; i++) {\n                    let name = \"Drill\"\n                    _score += 400;\n                    if (_score > score) {\n                        break;\n                    }\n                    let obj = {\n                        \"name\": name,\n                        \"score\": 400,\n                        \"width\": 29\n                    }\n                    arr.push(obj);\n                }\n                break;\n            case \"m\":\n                // 当前是神秘物品\n                for (let i = 0; i < 30; i++) {\n                    let name = \"Mystery\"\n                    let scoreCig = null;\n                    if (score - _score > 200) {\n                        scoreCig = this.createRandm(30, 200);\n                    } else if (score - _score > 30) {\n                        scoreCig = this.createRandm(30, score - _score);\n                    } else {\n                        scoreCig = 30;\n                    }\n                    _score += scoreCig;\n                    if (_score > score) {\n                        break;\n                    }\n                    let obj = {\n                        \"name\": name,\n                        \"prop\": scoreCig,\n                        \"width\": 71\n                    }\n                    arr.push(obj);\n                }\n                break\n        }\n        return arr;\n    },\n    /**\n     * 随机坐标 判断这个坐标产生的rect是否跟其他的所有的物品的rect相接触 如果没有返回坐标 如果接触重新随机\n     */\n    randomXY(item) {\n        //x = 屏幕宽度 / 2 * 随机数\n        //y = 地平面位置 + 随机数cc.random0To1() +高度范围（可以说是Y的最小点）\n        //地平面位置 = 地面y + 地面 高度 / 2\n        // - 30是因为物品锚点在中间位置 设置坐标到范围定点的时候 会有部分超出\n        let groundY = this.itemArea.y + this.itemArea.height / 2;\n        let randX = (this.itemArea.width - 30) / 2 * ((Math.random() - 0.5) * 2);\n        let randY = (this.itemArea.height - 30) / 2 * ((Math.random() - 0.5) * 2);\n        // 随机生成的一个坐标\n        let pos = cc.v2(randX, randY);\n        let rect = new cc.Rect(pos.x - item.width / 2, pos.y - item.height / 2, item.width, item.height);\n        if (this.itemArea.children.length >= 1) {\n            let isPeng = false;\n            for (let i = 0; i < this.itemArea.children.length; i++) {\n                let n = this.itemArea.children[i];\n                let boundingBox = n.getBoundingBox();\n                if (boundingBox.intersects(rect)) {\n                    isPeng = true;\n                    break;\n                }\n            }\n            if (isPeng) {\n                return this.randomXY(item)\n            } else {\n                return pos;\n            }\n        } else {\n            return pos;\n        }\n    },\n    /**\n     * @description 炸弹范围的物品进行销毁\n     * @param {cc.Node} Tnt\n     * @returns \n     */\n    destroyTnt(Tnt) {\n        // 遍历this.itemArea内所有的节点 当节点的中心节点在炸弹内 则销毁\n        for (let i = this.itemArea.children.length - 1; i >= 0; i--) {\n            let n = this.itemArea.children[i];\n            if (n !== Tnt) {\n                // 通过Tnt的中心位置 创建一个rect区域\n                let _pos = Tnt.getPosition(cc.v2());\n                let rect = new cc.Rect(_pos.x - 125, _pos.y - 125, 250, 250);\n                let pos = n.getPosition(cc.v2());\n                if (rect.contains(pos)) {\n                    n.removeFromParent();\n                    n.destroy();\n                    n = null;\n                }\n            }\n        }\n    },\n    /**\n     * 生成n-m随机数\n     */\n    createRandm(n, m) {\n        m += 1;\n        let a = m - n;\n        let num = Math.random() * a + n;\n        return parseInt(num);\n    },\n\n    /**\n     * @description 关闭绳子状态\n     */\n    StopHookMove() {\n        this.HookState = 0;\n        this.Hook.height = this.HookHeight;\n        //重置发射钩子速度\n        this.speed = 6;\n        this.Hook.getChildByName(\"hook_1\").getComponent(cc.Sprite).spriteFrame = this.HookFrames[0]\n    },\n\n    /**\n     * @description 处理拉回的物品，删除物品以及添加得分\n     */\n    Handle(items) {\n        this.AddProp(items);\n        this.AddScore(items);\n        this.RemoveItem(items);\n        // 判断是否还有物品在地图上 如果没有那么结算 结束\n        if (this.itemArea.children.length === 0) {\n            // 地图物品消失 结算\n            // todo\n            this.GameOver();\n        }\n        if (this.node.getChildByName(\"boom\")) {\n            let boom = this.node.getChildByName(\"boom\")\n            boom.removeFromParent();\n            boom.destroy();\n            boom = null;\n        }\n    },\n    // 调整现有的炸弹的现实效果\n    adjusBoomLayout() {\n        let layout = this.PropNode.getChildByName(\"Layout\");\n        layout.active = true;\n        if (this.boomNumber >= 2) {\n            this.boomNumber = 2;\n        }\n        for (let i = 0; i < 3; i++) {\n            let boom = layout.children[i];\n            if (i <= this.boomNumber) {\n                boom.active = true;\n            } else {\n                boom.active = false;\n            }\n        }\n    },\n    /**\n     * @description 获得道具\n     */\n    AddProp(items) {\n        if (!items[0]) return;\n        if (items[0].name === \"Mystery\") {\n            let prop = items[0].extra;\n            if (isNaN(prop)) {\n                switch (prop) {\n                    case \"炸弹\":\n                        this.boomNumber++;\n                        this.adjusBoomLayout();\n                        this.showMestery(0)\n                        break;\n                    case \"3元红包\":\n                        this.showMestery(1);\n                        this.extarRedPack += 3;\n                        break;\n                    case \"5元红包\":\n                        this.showMestery(2);\n                        this.extarRedPack += 5;\n                        break;\n                    case \"药水\":\n                        this.showMestery(3);\n                        break;\n                }\n            } else {\n                // 当前是积分\n                this.Score.string = parseInt(this.Score.string) + (prop || 0);\n                this.curScore += (prop || 0);\n                this.addAnim(\"score\", prop)\n            }\n            if (cc.zm.showMusic) {\n                cc.audioEngine.play(this.AddScroeAudio);\n            }\n        } else if (items[0].name === \"Red\") {\n            // 随机3-8块钱 2位有效小数\n            let extraRedPack = (Math.floor(this.createRandm(300, 800))) / 100;\n            this.extarRedPack += extraRedPack;\n            this.addAnim(\"red\", extraRedPack);\n            if (cc.zm.showMusic) {\n                cc.audioEngine.play(this.AddScroeAudio);\n            }\n        }\n    },\n    showMestery(type) {\n        // [\"炸弹\",\"3元红包\",\"5元红包\",\"药水\"]\n        let mestery = this.PropNode.getChildByName(\"Mestery\");\n        mestery.active = true;\n        mestery.getComponent(cc.Sprite).spriteFrame = this.PropSpriteFrames[type];\n        mestery.stopAllActions();\n        cc.tween(mestery).to(2, { y: mestery.y + 100, opacity: 0 }).call(() => {\n            mestery.opacity = 255;\n            mestery.y -= 100;\n            mestery.active = false;\n        }).start()\n    },\n    /**\n     * @description 删除物品\n     */\n    RemoveItem(items) {\n        items.forEach(item => {\n            if (item) {\n                item.destroy();\n                item = null;\n            }\n        });\n    },\n    /**\n     * @description 添加得分\n     */\n    AddScore(items) {\n        if (!items[0]) return;\n        if (!items[0].score) return;\n        // let scoreCon = ItemAttr[items[0].name] || {};\n        this.Score.string = parseInt(this.Score.string) + (items[0].score || 0);\n        this.curScore += (items[0].score || 0);\n        //播放得分音效\n        if (cc.zm.showMusic) {\n            cc.audioEngine.play(this.AddScroeAudio);\n        }\n        // 增加一个增加积分飘向--->Score位置点动画\n        this.addAnim(\"score\", items[0].score)\n    },\n    // 做一个增加积分点动画\n    addAnim(type, score) {\n        let add = null;\n        if (type === \"score\") {\n            add = this.Score.node.parent.getChildByName(\"addScore\");\n        } else if (type === \"red\") {\n            add = this.Score.node.parent.getChildByName(\"addRed\");\n        }\n        add.getComponent(cc.Label).string = \"+\" + score;\n        add.stopAllActions();\n        add.opacity = 0;\n        add.y = -132;\n        cc.tween(add).to(0.1, { opacity: 255 }).to(1, { y: 42 }).to(0.1, { opacity: 0 }).start()\n    },\n    /**\n     * 显示Mask victory=0 victory=1胜利 victory=2失败\n     */\n    ShowMask() {\n        //显示弹出框\n        // cc.Tools.showBanner();\n        this.Mask.active = true;\n        // this.PauseGameLayer()\n        let Fail = this.Mask.getChildByName(\"Fail\");\n        let Success = this.Mask.getChildByName(\"Success\");\n        Fail.active = false;\n        Success.active = false;\n        if(cc.zm.LevelInfo.stage<=5){\n            cc.Tools.dot(\"end_\"+cc.zm.LevelInfo.stage)\n        }\n        if (this.victory === 1) {\n            Success.active = true;\n            // 通关成功打点\n            cc.Tools.dot(\"through\",{\n                level_num:cc.zm.LevelInfo.stage,\n                level_result:\"成功\"\n            })\n            // 设置目标内容\n            let lbl = Success.getChildByName(\"lbl\").getComponent(cc.Label);\n            // 像服务器发送每日任务请求\n            cc.Tools.sendRequest(\"pit.v1.PitSvc/Missions\", \"GET\", sendData).then((res) => {\n                let items = res.data.items;\n                let item = null;\n                for (let i = 0; i < items.length; i++) {\n                    if (!items[i].status) {\n                        // 未领取\n                        item = items[i]\n                        break;\n                    }\n                }\n                // lbl.string = `每日任务达成条件，看广告${item.curr_ad}/+${item.need_ad},需要通关${item.curr_pass_stage}/+${item.need_pass_stage}`\n                // 判断各种条件\n                // 先判断用户关卡条件\n                lbl.string = \"\";\n                if (item.curr_pass_stage < item.need_pass_stage) {\n                    // 当前关卡等级小于需要关卡等级\n                    lbl.string = `通关${item.need_pass_stage}关后可提现`\n                } else {\n                    // 关卡等级达成 判断第二条件 \n                    if (item.curr_sign_in < item.need_sign_in) {\n                        lbl.string = `完成今日签到可提现`\n                    } else {\n                        if (item.curr_ad < item.need_ad) {\n                            lbl.string = `再看${item.need_ad - item.curr_ad}个视频可提现`\n                        }\n                    }\n                }\n            })\n            let awrad = Success.getChildByName(\"award\").getComponent(cc.Label);\n            awrad.string = `奖励红包+${this.redPack}`;\n            if (cc.zm.LevelInfo.ever_pass) {\n                awrad.node.active = false;\n            }\n            let extatAward = Success.getChildByName(\"layout\").getChildByName(\"extraAward\").getComponent(cc.Label);\n            if (this.extarRedPack) {\n                let str = this.handleNumber(this.extarRedPack);\n                extatAward.node.parent.active = true;\n                extatAward.string = `+${str}`;\n            } else {\n                extatAward.node.parent.active = false;\n            }\n            // 成功或者失败发送数据 red_pack:红包 score:分数 ts：时间戳 sign MD5数据\n            // \n            let sendData = {\n                \"bomb\": this.boomNumber + 1,//炸弹个数\n                \"potion\": this.liquidNumber,//药水\n                \"score\": this.curScore,//分数\n                \"ts\": new Date().getTime()//时间戳\n            }\n            let data = cc.Tools.createSignData(sendData);\n            cc.Tools.sendRequest(\"pit.v1.PitSvc/Pass\", \"POST\", data).then((res) => {\n                \n            });\n        } else if (this.victory === 2) {\n            Fail.active = true;\n            cc.Tools.dot(\"through\",{\n                level_num:cc.zm.LevelInfo.stage,\n                level_result:\"失败\"\n            })\n            // 通关失败不用告诉服务器\n        }\n        cc.tween(this.Mask).to(0.3, { scale: 1 }).call(() => {\n            this.PauseGameLayer();\n        }).start()\n    },\n    /**\n     * 处理小数精度问题\n     * @returns \n     */\n     handleNumber(numb){\n        // 先讲数字转换成字符串\n        let str = \"\"+numb;\n        let key = str.split(\".\");\n        let newKey = key[0]+\".\"+key[1].slice(0,2);\n        return newKey;\n    },\n    /**\n     * 恢复游戏，关闭弹出框\n     * 如果是游戏通关原因而打开的弹出框不予理睬\n     */\n    CloseMask() {\n        if (this.victory) return;\n        this.ResumeGameLayer()\n    },\n\n    /**\n     * 重玩本关\n     */\n    Reload() {\n        //停止倒计时\n        this.timer && this.unschedule(this.timer);\n        //重载场景\n        cc.director.loadScene('Game');\n    },\n\n    /**\n     * 继续下一关\n     */\n    Next() {\n\n        switch (this.victory) {\n            case 0:\n                //继续游戏\n                this.CloseMask();\n                break;\n            case 1:\n                // 过关成功点击进入下一关之前 先获取用户信息 看用户是否有体力\n                let sendData = {};\n                cc.Tools.sendRequest(\"pit.v1.PitSvc/UserInfo\", \"GET\", sendData).then((res) => {\n                    cc.zm.userInfo = res.data;\n                    // 如果体力大于0 进入下一关\n                    if (cc.zm.userInfo.power > 0) {\n                        cc.Tools.sendRequest(\"pit.v1.PitSvc/Stage\", \"GET\", {}).then((res) => {\n                            cc.zm.LevelInfo = res.data;\n                            if (cc.zm.LevelInfo.stage < 30) {\n                                this.Reload();\n                            } else {\n                                // 直接返回主界面\n                                // cc.Tools.hideBanner();\n                                cc.endCountTime = new Date().getTime();\n                                cc.director.loadScene('Index');\n                            }\n                        });\n                    } else {\n                        // 小于0 弹出看视频获得体力的接口\n                        this.seeVideoLayer.active = true;\n                        cc.Tools.sendRequest(\"pit.v1.PitSvc/Stage\", \"GET\", {}).then((res) => {\n                            cc.zm.LevelInfo = res.data;\n                        });\n                    }\n                })\n                break;\n            case 2:\n                //退出游戏\n                this.ExitGame();\n                break;\n        };\n    },\n    // 看视频得红包\n    AwardVideo(e) {\n        cc.Tools.showJiliAd(2);\n        let pack = cc.zm.LevelInfo.ever_pass ? 0 : this.redPack;\n        let sendData = {\n            \"red_pack\": parseInt((pack + this.extarRedPack) * 100),//红包\n            \"ad\": cc.zm.ad\n        }\n        cc.zm.videoAd.redPack = sendData;\n        this.timer && this.unschedule(this.timer);\n    },\n    // 看视频得体力\n    seeVideoAward(e) {\n        cc.zm.videoAd.enterGame = true;\n        cc.Tools.showJiliAd(1);\n        let target = e.target\n        this.timer && this.unschedule(this.timer);\n        target.parent.active = false;\n    },\n    closeLayer(e) {\n        let target = e.target\n        target.parent.active = false;\n    },\n    /**\n     * 退出游戏 返回上一个场景\n     */\n    ExitGame() {\n        cc.endCountTime = new Date().getTime();\n        cc.director.loadScene('Index');\n    },\n    ResumeGameLayer() {\n        this.BackLayer.active = false;\n        this.pauseGame = false;\n        this.StartTime();\n        this.MinerSp.paused = false;\n    },\n    // 暂停当前界面\n    PauseGameLayer() {\n        this.pauseGame = true;\n        this.unschedule(this.timer);\n        this.MinerSp.paused = true;\n    },\n    /**\n     * 游戏结束\n     * 胜利或失败都视为游戏结束\n     */\n    GameOver() {\n        //判断用户得分是否超过目标分\n        let s = 0;\n\n        if (parseInt(this.Score.string) >= parseInt(this.TargetScore.string)) {\n            s = 1;\n        } else {\n            //游戏失败\n            s = 2;\n        };\n        this.victory = s;\n        this.ShowMask();\n    },\n    getRedPackageFunc(){\n        console.log(\"cocos--看视频得红包\")\n        if (cc.zm.videoAd.redPack) {\n            cc.Tools.sendRequest(\"pit.v1.PitSvc/PassAd\", \"POST\", cc.zm.videoAd.redPack).then((res) => {\n                let sendData = {};\n                cc.Tools.sendRequest(\"pit.v1.PitSvc/UserInfo\", \"GET\", sendData).then((res) => {\n                    cc.zm.userInfo = res.data;\n                    // 如果体力大于0 进入下一关\n                    if (cc.zm.userInfo.power > 0) {\n                        cc.Tools.sendRequest(\"pit.v1.PitSvc/Stage\", \"GET\", {}).then((res) => {\n                            cc.zm.LevelInfo = res.data;\n                            cc.zm.videoAd.redPack = null;\n                            if (cc.zm.LevelInfo.stage < 30) {\n                                cc.director.loadScene('Game');\n                            } else {\n                                // 直接返回主界面\n                                cc.director.loadScene('Index');\n                            }\n                        });\n                    } else {\n                        // 小于0 弹出看视频获得体力的接口\n                        cc.director.loadScene('Index');\n                    }\n                })\n            });\n        }\n    },\n    getWeaponFunc(){\n        // 像服务发送请求看视频得道具\n        console.log(\"cocos--看视频得道具\");\n        let sendData = {\n            \"ad\": cc.zm.ad,\n            \"weapon\": this.LotteryProp\n        }\n        cc.Tools.sendRequest(\"pit.v1.PitSvc/Lottery2\", \"POST\", sendData).then((res) => {\n            // 炸弹：10 11时钟 13药水\n            this.LotteryAward = res.data.award;\n            this.hideLotteryLayer();\n        });\n    },\n    update(dt) {\n        if (this.pauseGame) {\n            return;\n        }\n        if (this.NeedLayer.active) {\n            return;\n        }\n        // this.moveMouse();\n        this.emitHook();\n        this.HookRoTate();\n    },\n    // 使用道具\n    useProp(e, msg) {\n        // 如果是炸弹\n        switch (msg) {\n            case \"炸弹\":\n                // 当前的状态必须是绳子处于能拉回的状态\n                // 检测是否有物品\n                if (this.Hook.children[0].children[0] && this.boomNumber > -1) {\n                    // 使用炸弹像服务器发送消息\n                    if (cc.zm.showShake) {\n                        if (cc.sys.isNative) {\n                            jsb.Device.vibrate(0.3);\n                        }\n                    }\n                    // 先提前前端使用 是画面同步\n                    this.boomNumber--;\n                    this.adjusBoomLayout();\n                    // 获取拉去的物品的位置\n                    let _node = this.Hook.children[0].children[0]\n                    let pos = _node.convertToWorldSpaceAR(cc.v2(0, 0));\n                    // 添加炸弹效果\n                    let boom = cc.instantiate(this.Boom);\n                    boom.name = \"boom\"\n                    this.node.addChild(boom);\n                    let size = cc.view.getVisibleSize()\n                    boom.setPosition(cc.v2(pos.x - size.width / 2, pos.y - size.height / 2));\n                    boom.active = true;\n                    boom.getComponent(cc.Animation).play(\"boom\");\n\n                    _node.destroy();\n                    _node = null;\n                    this.speed = 10;\n                    let sendDta = {\n                        prop: 10\n                    }\n                    cc.Tools.sendRequest(\"pit.v1.PitSvc/Prop\", \"POST\", sendDta);\n                }\n                break;\n            default:\n                break;\n        }\n    },\n});\n"]}