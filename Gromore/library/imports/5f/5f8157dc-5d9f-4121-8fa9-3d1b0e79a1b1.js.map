{"version":3,"sources":["assets/Script/Tools.js"],"names":["cc","Tools","dot","event","pro","sys","isNative","console","log","jsb","reflection","callStaticMethod","JSON","stringify","adCallBack","ecpm","getUserEcpm","then","zm","userInfo","power","sendData","ad","sendRequest","res","data","value","videoAd","enterGame","director","loadScene","redPack","LevelInfo","stage","clickSign","clickTable","showJiliAd","showBanner","hideBanner","showTableScreen","hideTableScreen","wxLogin","wxLoginResult","errCode","wxLoginResultcode","Promise","resolve","reject","parseInt","Date","getTime","createSignData","sortList","key","hasOwnProperty","item","push","sort","strToJiaMi","forEach","sc1","hex_md5","require","sign","screenAdapter","canvas","find","getComponent","Canvas","winSize","view","getVisibleSize","height","width","fitHeight","fitWidth","showTips","n","str","tips","getChildByName","Label","string","stopAllActions","y","tween","to","opacity","delay","start","url","type","xhr","XMLHttpRequest","requestURL","open","setRequestHeader","wxToken","onreadystatechange","readyState","status","response","_response","parse","code","message","onerror","Error","statusText","send"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Tools = {\n    /**\n     * @param {*} event 数数打点的事件名称\n     * @param {*} pro 数数打点的关联属性\n    */\n    dot(event, pro) {\n        if (cc.sys.isNative) {\n            console.log(\"cocos----注册打点\" + event);\n            // jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"dot\", \"(Ljava/lang/String;)V\", event, JSON.stringify(pro));\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"dot\", \"(Ljava/lang/String;Ljava/lang/String;)V\", event,JSON.stringify(pro));\n        }\n    },\n\n    /**\n     * 看视频回调\n     */\n    adCallBack(ecpm) {\n        console.log(\"cocos----观看视频回调\");\n        // 获取广告ad之前先用epcr\n        // 看视频得体力\n        this.getUserEcpm(ecpm).then(()=>{\n            console.log(\"cocos----获取ecpm之后才调用\");\n            if (cc.zm.userInfo.power<=0) {\n                console.log(\"cocos----体力接口\");\n                let sendData = {\n                    ad: cc.zm.ad\n                }\n                cc.Tools.sendRequest(\"pit.v1.PitSvc/GrowPower\", \"POST\", sendData).then((res) => {\n                    console.log(\"cocos----获取体力奖励\")\n                    cc.zm.userInfo.power = res.data.value;\n                    if(cc.zm.videoAd.enterGame){\n                        cc.director.loadScene('Game');\n                    }\n                });\n            }\n            // 看视频得红包\n            if (cc.zm.videoAd.redPack) {\n                console.log(\"cocos----获取红包接口\");\n                cc.Tools.sendRequest(\"pit.v1.PitSvc/PassAd\", \"POST\", cc.zm.videoAd.redPack).then((res) => {\n                    console.log(\"cocos----获取红包奖励\", res);\n                    let sendData = {};\n                    cc.Tools.sendRequest(\"pit.v1.PitSvc/UserInfo\", \"GET\", sendData).then((res) => {\n                        cc.zm.userInfo = res.data;\n                        // 如果体力大于0 进入下一关\n                        if (cc.zm.userInfo.power > 0) {\n                            cc.Tools.sendRequest(\"pit.v1.PitSvc/Stage\", \"GET\", {}).then((res) => {\n                                cc.zm.LevelInfo = res.data;\n                                cc.zm.videoAd.redPack = null;\n                                if (cc.zm.LevelInfo.stage < 30) {\n                                    cc.director.loadScene('Game');\n                                } else {\n                                    // 直接返回主界面\n                                    cc.director.loadScene('Index');\n                                }\n                            });\n                        } else {\n                            // 小于0 弹出看视频获得体力的接口\n                            cc.director.loadScene('Index');\n                        }\n                    })\n                });\n            }\n            if(cc.zm.videoAd.clickSign){\n                console.log(\"cocos----签到接口\");\n                cc.zm.videoAd.clickSign = false;\n            }\n            if(cc.zm.videoAd.clickTable){\n                console.log(\"cocos----转盘接口\");\n                cc.zm.videoAd.clickTable = false;\n            }\n        })\n    },\n    // 显示激励视频\n    showJiliAd() {\n        console.log(\"cocos----点击显示激励视频\")\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showAd\", \"()V\");\n        }\n    },\n    // 显示banner\n    showBanner() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showBanner\", \"()V\");\n        }\n    },\n    // 隐藏banner\n    hideBanner() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hideBanner\", \"()V\");\n        }\n    },\n    // 显示插屏广告\n    showTableScreen() {\n        console.log(\"cococ----触发插屏\");\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showTableScreen\", \"()V\");\n        }\n    },\n    // 隐藏插屏广告\n    hideTableScreen() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hideTableScreen\", \"()V\");\n        }\n    },\n    // 微信登陆\n    wxLogin() {\n        console.log(\"cocos----wxLogin\");\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"weixin_login\", \"(Ljava/lang/String;)V\", \"weixin_login\");\n        }\n    },\n    /**\n    * 接收native微信授权的code\n    * @param errCode \n    */\n    wxLoginResult(errCode) {\n        console.log(\"cocos----wxLoginResultcode=\" + errCode)\n        cc.wxLoginResultcode = errCode;\n    },\n    /**\n     * 看广告之后刷新一下ecpm\n     */\n     getUserEcpm(ecpm) {\n         if(!cc.zm){\n             return;\n         }\n         console.log(\"cocos----调用ecpm=\",ecpm);\n         return new Promise(function (resolve, reject){\n            let sendData = {\n                \"ecpm\": parseInt(ecpm),\n                \"ts\": new Date().getTime()//时间戳\n            };\n            let data = cc.Tools.createSignData(sendData);\n            cc.Tools.sendRequest(\"pit.v1.PitSvc/Rc\", \"POST\", data).then((res) => {\n                console.log(\"cocos----Ecpm成功\", res.data);\n                cc.zm.ad = res.data.ad;\n                resolve();\n            }).catch((res)=>{\n                console.log(\"cocos----Ecpm失败\", res);\n                reject(res);\n            })\n         })\n    },\n    /**\n     * \n     * @param {*} data 需要签名数据\n     * @returns \n     */\n    createSignData: function (data) {\n        var sortList = [];\n        for (var key in data) {\n            if (data.hasOwnProperty(key) && key != \"sign\") {\n                var value = data[key];\n                var item = {};\n                item.key = key;\n                item.value = value;\n                sortList.push(key);\n            }\n        }\n        sortList.sort();\n        var strToJiaMi = \"\";\n        sortList.forEach(function (key) {\n            strToJiaMi += \"&\" + key + \"=\" + data[key];\n        }, this);\n        strToJiaMi = \"token=\" + cc.zm.userInfo.sc1 + strToJiaMi;\n        var hex_md5 = require(\"MD5\")\n        strToJiaMi = hex_md5(strToJiaMi);\n        data.sign = strToJiaMi;\n        return data;\n\n    },\n    // 适配屏幕\n    screenAdapter() {\n        let canvas = cc.find(\"Canvas\").getComponent(cc.Canvas);\n        let winSize = cc.view.getVisibleSize();\n\n        if (winSize.height / winSize.width <= 720 / 1280) {\n            canvas.fitHeight = true;\n            canvas.fitWidth = false;\n        }\n        else {\n            canvas.fitHeight = false;\n            canvas.fitWidth = true;\n        }\n    },\n    /**\n     * \n     * @param {*} n node节点\n     * @param {*} str  显示的tips内容\n     */\n    showTips(n,str) {\n        let tips = n.getChildByName(\"Tips\");\n        tips.getComponent(cc.Label).string =str;\n        tips.stopAllActions();\n        tips.y = 145;\n        cc.tween(tips).to(0.1, { opacity: 255 }).to(1, { y: 300 }).delay(0.5).to(0.1, { opacity: 0 }).start()\n    },\n    /**\n     * \n     * @param {*} url 请求接口的url----pit.v1.PitSvc/UserInfo\n     * @param {*} type 请求接口的类型 只能是GET--POST\n     * @param {*} data 请求接口所需要的数据\n     * @returns \n     */\n    sendRequest: function (url, type,data) {\n        return new Promise(function (resolve, reject) {\n            let xhr = new XMLHttpRequest();\n            let requestURL = \"https://pit.api.jiankangzhuan.com/\" + url;\n            xhr.open(type, requestURL, true);\n            if (cc.sys.isNative) {\n                xhr.setRequestHeader(\"Accept-Encodeing\", \"gzip,deflate\");\n            }\n            if(cc.wxToken){\n                xhr.setRequestHeader(\"Authorization\", cc.wxToken);\n            }\n            xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n            console.log(\"cocos----requestURL=\", requestURL);\n            console.log(\"cocos----data=\", JSON.stringify(data));\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4 && xhr.status == 200) {\n                    console.log(\"cocos----http res:\" + xhr.response);\n                    // 统一处理\n                    let _response = JSON.parse(xhr.response);\n                    if(_response.code===0){\n                        resolve(_response)\n                    }else{\n                        console.log(\"cocos----\"+_response.message);\n                        reject(_response.message);\n                    }\n                }\n            }\n            xhr.onerror = function () {\n                reject(new Error(xhr.statusText))\n            }\n            xhr.send(JSON.stringify(data));\n        })\n    }\n}"]}