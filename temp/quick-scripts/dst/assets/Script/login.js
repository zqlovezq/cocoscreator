
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/login.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '6b7cdHix81Ol6r4h+cnHYQh', 'login');
// Script/login.js

"use strict";

var http = require("Http");

cc.Class({
  "extends": cc.Component,
  properties: {},
  // LIFE-CYCLE CALLBACKS:
  // onLoad () {},
  start: function start() {
    this.protocol = false;
    this.needLogin = true;
    this.time = 0; //    获取用户信息
    //  cc.sys.localStorage.setItem("token","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxMDAxMTcxLCJvcGVuX2lkIjoib1FXNFI1OVVSRlF1YTNSWjlvX3lfdGJ6UEdLNCIsIm5pY2tfbmFtZSI6Iua1t-ebl-iIuemVvzIuMCIsImdlbmRlciI6MSwiYXZhdGFyIjoiaHR0cHM6Ly90aGlyZHd4LnFsb2dvLmNuL21tb3Blbi92aV8zMi9mR0xkR1pneG5wVmtJQldjaWEzeWljaWJ6aWJFQ0J0VzFhQkhEbUdhWmV6cTAycWdQUUN3STN5OGljVE5nWEtCcDBOcExBNUJFdDZ6UEdsSG1VTWY5bHd4Qk1nLzEzMiIsImNyZWF0ZV90aW1lIjowLCJjaGFubmVsIjoiMSIsImRpc3RpbmN0X2lkIjoiMSJ9.K5C9XSkEEjBBfPFn1m5BoXGu11ubPc9lSvDRAHkv_V4")

    if (cc.sys.localStorage.getItem("token")) {
      this.needLogin = false;
      cc.wxToken = cc.sys.localStorage.getItem("token");
      cc.director.loadScene('Index');
    }
  },
  onLoginWX: function onLoginWX() {
    if (cc.sys.isNative) {
      if (this.protocol) {
        cc.wxLogin.wxLogin();
      } else {
        this.showTips();
      }
    } // this.schedule(()=>{
    //     // cc.wxLoginInfo.wxLoginResultcode = {};
    // },1)

  },
  // 选择用户协议
  clickProtocol: function clickProtocol(e) {
    var target = e.target;
    var right = target.getChildByName("right");

    if (this.protocol) {
      right.active = false;
      this.protocol = false;
    } else {
      right.active = true;
      this.protocol = true;
    }
  },
  showTips: function showTips() {
    var tips = this.node.getChildByName("tips");
    tips.y = 0;
    tips.active = true;
    cc.tween(tips).to(1, {
      y: 100
    }).delay(0.5).call(function () {
      tips.active = false;
    }).start();
  },
  update: function update(dt) {
    this.time += dt;

    if (!this.needLogin) {
      return;
    }

    if (this.time >= 1) {
      this.time = 0;

      if (cc.wxLoginResultcode && this.protocol) {
        this.protocol = false;
        var data = {
          "channel": "1",
          "imei": "1",
          "mac": "1",
          "distinct_id": "1",
          "oaid": "1",
          "android_id": "1",
          "code": cc.wxLoginResultcode
        };
        http.sendRequest("pit.v1/register", "POST", data).then(function (res) {
          // this.token.string = JSON.stringify(res)
          cc.wxToken = res.data.token;
          cc.sys.localStorage.setItem("token", res.data.token);
          cc.director.loadScene('Index');
        });
      }
    }
  },
  // 显示用户协议
  showUserProtocol: function showUserProtocol() {
    var protocol = this.node.getChildByName("user_protocol");
    protocol.active = true;
  },
  hideUserProtocol: function hideUserProtocol() {
    var protocol = this.node.getChildByName("user_protocol");
    protocol.active = false;
  },
  // 显示隐私政策
  showUserPrivacy: function showUserPrivacy() {
    var privacy = this.node.getChildByName("user_privacy");
    privacy.active = true;
  },
  hideUserPrivacy: function hideUserPrivacy() {
    var privacy = this.node.getChildByName("user_privacy");
    privacy.active = false;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvbG9naW4uanMiXSwibmFtZXMiOlsiaHR0cCIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsInN0YXJ0IiwicHJvdG9jb2wiLCJuZWVkTG9naW4iLCJ0aW1lIiwic3lzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInd4VG9rZW4iLCJkaXJlY3RvciIsImxvYWRTY2VuZSIsIm9uTG9naW5XWCIsImlzTmF0aXZlIiwid3hMb2dpbiIsInNob3dUaXBzIiwiY2xpY2tQcm90b2NvbCIsImUiLCJ0YXJnZXQiLCJyaWdodCIsImdldENoaWxkQnlOYW1lIiwiYWN0aXZlIiwidGlwcyIsIm5vZGUiLCJ5IiwidHdlZW4iLCJ0byIsImRlbGF5IiwiY2FsbCIsInVwZGF0ZSIsImR0Iiwid3hMb2dpblJlc3VsdGNvZGUiLCJkYXRhIiwic2VuZFJlcXVlc3QiLCJ0aGVuIiwicmVzIiwidG9rZW4iLCJzZXRJdGVtIiwic2hvd1VzZXJQcm90b2NvbCIsImhpZGVVc2VyUHJvdG9jb2wiLCJzaG93VXNlclByaXZhY3kiLCJwcml2YWN5IiwiaGlkZVVzZXJQcml2YWN5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0FDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRSxFQUhQO0FBT0w7QUFFQTtBQUVBQyxFQUFBQSxLQVhLLG1CQVdJO0FBQ04sU0FBS0MsUUFBTCxHQUFnQixLQUFoQjtBQUNBLFNBQUtDLFNBQUwsR0FBaUIsSUFBakI7QUFDQSxTQUFLQyxJQUFMLEdBQVksQ0FBWixDQUhNLENBSVQ7QUFDSTs7QUFDQSxRQUFHUCxFQUFFLENBQUNRLEdBQUgsQ0FBT0MsWUFBUCxDQUFvQkMsT0FBcEIsQ0FBNEIsT0FBNUIsQ0FBSCxFQUF3QztB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OUM7QUFDQXRDLFVBQUFBLEVBQUUsQ0FBQ1ksUUFBSCxDQUFZQyxTQUFaLENBQXNCLE9BQXRCO0FBQ0gsU0FMQTtBQU1KO0FBQ0o7QUFDSixHQWxGSTtBQW1GTDtBQUNBMkIsRUFBQUEsZ0JBcEZLLDhCQW9GYTtBQUNkLFFBQUluQyxRQUFRLEdBQUcsS0FBS29CLElBQUwsQ0FBVUgsY0FBVixDQUF5QixlQUF6QixDQUFmO0FBQ0FqQixJQUFBQSxRQUFRLENBQUNrQixNQUFULEdBQWtCLElBQWxCO0FBQ0gsR0F2Rkk7QUF3RkxrQixFQUFBQSxnQkF4RkssOEJBd0ZhO0FBQ2QsUUFBSXBDLFFBQVEsR0FBRyxLQUFLb0IsSUFBTCxDQUFVSCxjQUFWLENBQXlCLGVBQXpCLENBQWY7QUFDQWpCLElBQUFBLFFBQVEsQ0FBQ2tCLE1BQVQsR0FBa0IsS0FBbEI7QUFDSCxHQTNGSTtBQTRGTDtBQUNBbUIsRUFBQUEsZUE3RkssNkJBNkZZO0FBQ2IsUUFBSUMsT0FBTyxHQUFHLEtBQUtsQixJQUFMLENBQVVILGNBQVYsQ0FBeUIsY0FBekIsQ0FBZDtBQUNBcUIsSUFBQUEsT0FBTyxDQUFDcEIsTUFBUixHQUFpQixJQUFqQjtBQUNILEdBaEdJO0FBaUdMcUIsRUFBQUEsZUFqR0ssNkJBaUdZO0FBQ2IsUUFBSUQsT0FBTyxHQUFHLEtBQUtsQixJQUFMLENBQVVILGNBQVYsQ0FBeUIsY0FBekIsQ0FBZDtBQUNBcUIsSUFBQUEsT0FBTyxDQUFDcEIsTUFBUixHQUFpQixLQUFqQjtBQUNIO0FBcEdJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGh0dHAgPSByZXF1aXJlKFwiSHR0cFwiKTtcbmNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIFxuICAgIH0sXG5cbiAgICAvLyBMSUZFLUNZQ0xFIENBTExCQUNLUzpcblxuICAgIC8vIG9uTG9hZCAoKSB7fSxcblxuICAgIHN0YXJ0ICgpIHtcbiAgICAgICB0aGlzLnByb3RvY29sID0gZmFsc2U7XG4gICAgICAgdGhpcy5uZWVkTG9naW4gPSB0cnVlO1xuICAgICAgIHRoaXMudGltZSA9IDA7XG4gICAgLy8gICAg6I635Y+W55So5oi35L+h5oGvXG4gICAgICAgIC8vICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b2tlblwiLFwiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SjFjMlZ5WDJsa0lqb3hNREF4TVRjeExDSnZjR1Z1WDJsa0lqb2liMUZYTkZJMU9WVlNSbEYxWVROU1dqbHZYM2xmZEdKNlVFZExOQ0lzSW01cFkydGZibUZ0WlNJNkl1YTF0LWVibC1pSXVlbVZ2ekl1TUNJc0ltZGxibVJsY2lJNk1Td2lZWFpoZEdGeUlqb2lhSFIwY0hNNkx5OTBhR2x5WkhkNExuRnNiMmR2TG1OdUwyMXRiM0JsYmk5MmFWOHpNaTltUjB4a1IxcG5lRzV3Vm10SlFsZGphV0V6ZVdsamFXSjZhV0pGUTBKMFZ6RmhRa2hFYlVkaFdtVjZjVEF5Y1dkUVVVTjNTVE41T0dsalZFNW5XRXRDY0RCT2NFeEJOVUpGZERaNlVFZHNTRzFWVFdZNWJIZDRRazFuTHpFek1pSXNJbU55WldGMFpWOTBhVzFsSWpvd0xDSmphR0Z1Ym1Wc0lqb2lNU0lzSW1ScGMzUnBibU4wWDJsa0lqb2lNU0o5Lks1QzlYU2tFRWpCQmZQRm4xbTVCb1hHdTExdWJQYzlsU3ZEUkFIa3ZfVjRcIilcbiAgICAgICAgaWYoY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9rZW5cIikpe1xuICAgICAgICAgICAgdGhpcy5uZWVkTG9naW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGNjLnd4VG9rZW4gPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0b2tlblwiKTtcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnSW5kZXgnKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25Mb2dpbldYKCl7XG4gICAgICAgIGlmKGNjLnN5cy5pc05hdGl2ZSl7XG4gICAgICAgICAgICBpZih0aGlzLnByb3RvY29sKXtcbiAgICAgICAgICAgICAgICBjYy53eExvZ2luLnd4TG9naW4oKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RpcHMoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMuc2NoZWR1bGUoKCk9PntcbiAgICAgICAgLy8gICAgIC8vIGNjLnd4TG9naW5JbmZvLnd4TG9naW5SZXN1bHRjb2RlID0ge307XG4gICAgICAgICAgIFxuICAgICAgICAvLyB9LDEpXG4gICAgfSxcbiAgICAvLyDpgInmi6nnlKjmiLfljY/orq5cbiAgICBjbGlja1Byb3RvY29sKGUpe1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGxldCByaWdodCA9IHRhcmdldC5nZXRDaGlsZEJ5TmFtZShcInJpZ2h0XCIpO1xuICAgICAgICBpZih0aGlzLnByb3RvY29sKXtcbiAgICAgICAgICAgIHJpZ2h0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcm90b2NvbCA9IGZhbHNlO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJpZ2h0LmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnByb3RvY29sID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2hvd1RpcHMoKXtcbiAgICAgICAgbGV0IHRpcHMgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ0aXBzXCIpO1xuICAgICAgICB0aXBzLnkgPSAwO1xuICAgICAgICB0aXBzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGNjLnR3ZWVuKHRpcHMpLnRvKDEse3k6MTAwfSkuZGVsYXkoMC41KS5jYWxsKCgpPT57XG4gICAgICAgICAgICB0aXBzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9KS5zdGFydCgpXG4gICAgfSxcbiAgICB1cGRhdGUoZHQpe1xuICAgICAgICB0aGlzLnRpbWUrPWR0O1xuICAgICAgICBpZighdGhpcy5uZWVkTG9naW4pe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMudGltZT49MSl7XG4gICAgICAgICAgICB0aGlzLnRpbWUgPSAwO1xuICAgICAgICAgICAgaWYoY2Mud3hMb2dpblJlc3VsdGNvZGUmJnRoaXMucHJvdG9jb2wpe1xuICAgICAgICAgICAgICAgIHRoaXMucHJvdG9jb2wgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJjaGFubmVsXCI6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBcImltZWlcIjogXCIxXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibWFjXCI6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBcImRpc3RpbmN0X2lkXCI6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBcIm9haWRcIjogXCIxXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYW5kcm9pZF9pZFwiOiBcIjFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJjb2RlXCI6IGNjLnd4TG9naW5SZXN1bHRjb2RlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICBodHRwLnNlbmRSZXF1ZXN0KFwicGl0LnYxL3JlZ2lzdGVyXCIsIFwiUE9TVFwiLCBkYXRhKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy50b2tlbi5zdHJpbmcgPSBKU09OLnN0cmluZ2lmeShyZXMpXG4gICAgICAgICAgICAgICAgICAgIGNjLnd4VG9rZW4gPSByZXMuZGF0YS50b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9rZW5cIiwgcmVzLmRhdGEudG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ0luZGV4Jyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8g5pi+56S655So5oi35Y2P6K6uXG4gICAgc2hvd1VzZXJQcm90b2NvbCgpe1xuICAgICAgICBsZXQgcHJvdG9jb2wgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ1c2VyX3Byb3RvY29sXCIpO1xuICAgICAgICBwcm90b2NvbC5hY3RpdmUgPSB0cnVlO1xuICAgIH0sXG4gICAgaGlkZVVzZXJQcm90b2NvbCgpe1xuICAgICAgICBsZXQgcHJvdG9jb2wgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ1c2VyX3Byb3RvY29sXCIpO1xuICAgICAgICBwcm90b2NvbC5hY3RpdmUgPSBmYWxzZTtcbiAgICB9LFxuICAgIC8vIOaYvuekuumakOengeaUv+etllxuICAgIHNob3dVc2VyUHJpdmFjeSgpe1xuICAgICAgICBsZXQgcHJpdmFjeSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInVzZXJfcHJpdmFjeVwiKTtcbiAgICAgICAgcHJpdmFjeS5hY3RpdmUgPSB0cnVlO1xuICAgIH0sXG4gICAgaGlkZVVzZXJQcml2YWN5KCl7XG4gICAgICAgIGxldCBwcml2YWN5ID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwidXNlcl9wcml2YWN5XCIpO1xuICAgICAgICBwcml2YWN5LmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbn0pO1xuXG5cbiJdfQ==