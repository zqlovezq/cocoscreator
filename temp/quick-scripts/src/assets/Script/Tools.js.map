{"version":3,"sources":["assets/Script/Tools.js"],"names":["cc","Tools","dot","event","pro","sys","isNative","log","jsb","reflection","callStaticMethod","adCallBack","zm","ad","power","sendData","http","sendRequest","then","res","director","loadScene","redPack","console","userInfo","data","LevelInfo","stage","showJiliAd","showBanner","hideBanner","showTableScreen","hideTableScreen","wxLogin","wxLoginResult","errCode","wxLoginResultcode","getUserEcpm","ecpm","Date","getTime","createSignData"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Tools = {\n    /**\n     * 打点\n    */\n    dot(event, pro) {\n        if (cc.sys.isNative) {\n            cc.log(\"注册打点\" + event);\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"dot\", \"(Ljava/lang/String;)V\", event, pro);\n        }\n    },\n\n    /**\n     * 看视频回调\n     * @param errCode \n     */\n    adCallBack() {\n        cc.log(\"观看视频回调\");\n        if (cc.zm.ad.power) {\n            let sendData = {\n                ad: cc.zm.ad\n            }\n            http.sendRequest(\"pit.v1.PitSvc/GrowPower\", \"POST\", sendData).then((res) => {\n                cc.zm.ad.power = false;\n                cc.director.loadScene('Game');\n            });\n        }\n        if (cc.zm.ad.redPack) {\n            http.sendRequest(\"pit.v1.PitSvc/PassAd\", \"POST\", cc.zm.ad.redPack).then((res) => {\n                console.log(\"PassAd返回信息\", res);\n                let sendData = {};\n                http.sendRequest(\"pit.v1.PitSvc/UserInfo\", \"GET\", sendData).then((res) => {\n                    cc.zm.userInfo = res.data;\n                    // 如果体力大于0 进入下一关\n                    if (cc.zm.userInfo.power > 0) {\n                        http.sendRequest(\"pit.v1.PitSvc/Stage\", \"GET\", {}).then((res) => {\n                            cc.zm.LevelInfo = res.data;\n                            cc.zm.ad.redPack = null;\n                            // console.log(\"关卡信息=\", cc.zm.LevelInfo);\n                            if (cc.zm.LevelInfo.stage < 30) {\n                                cc.director.loadScene('Game');\n                            } else {\n                                // 直接返回主界面\n                                cc.director.loadScene('Index');\n                            }\n                        });\n                    } else {\n                        // 小于0 弹出看视频获得体力的接口\n                        cc.director.loadScene('Index');\n                    }\n                })\n            });\n        }\n    },\n    // 显示激励视频\n    showJiliAd() {\n        cc.log(\"点击显示激励视频\")\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showAd\", \"()V\");\n        }\n    },\n    // 显示banner\n    showBanner() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showBanner\", \"()V\");\n        }\n    },\n    // 隐藏banner\n    hideBanner() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hideBanner\", \"()V\");\n        }\n    },\n    // 显示插屏广告\n    showTableScreen() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showTableScreen\", \"()V\");\n        }\n    },\n    // 隐藏插屏广告\n    hideTableScreen() {\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hideTableScreen\", \"()V\");\n        }\n    },\n    // 微信登陆\n    wxLogin() {\n        cc.log(\"wxLogin\");\n        if (cc.sys.isNative) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"weixin_login\", \"(Ljava/lang/String;)V\", \"weixin_login\");\n        }\n    },\n    /**\n    * 接收native微信授权的code\n    * @param errCode \n    */\n    wxLoginResult(errCode) {\n        cc.log(\"wxLoginResultcode=\" + errCode)\n        cc.wxLoginResultcode = errCode;\n    },\n    /**\n     * 看广告之后刷新一下ecpm\n     */\n     getUserEcpm(ecpm) {\n        let sendData = {\n            \"ecpm\": ecpm,\n            \"ts\": new Date().getTime()//时间戳\n        };\n        let data = this.createSignData(sendData);\n        http.sendRequest(\"pit.v1.PitSvc/Rc\", \"POST\", data).then((res) => {\n            console.log(\"刷新用户的Ecpm\", res.data);\n            cc.zm.ad = res.data.ad;\n        })\n    },\n}"]}