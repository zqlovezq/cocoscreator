{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/rank/RankTopItem.ts"],"names":["_decorator","Component","Label","Node","RichText","Sprite","tab","LangMgr","HeroItem","HeroInfo","UIMgr","ViewName","RANKING_TYPE","PlayerHeadItem","SimpleRoleInfo","GameUtil","getTimeTXT","refreshFlagImg","HeroStar","ccclass","property","RankTopItem","_heroData","_playerData","_guildData","_rankType","NONE","initHeroData","data","node_no_rank","active","node_player","node_association","node_hero","createHeroData","node_server_txt","initHeroPlayerData","rankType","createPlayerData","initGuildData","createGuildData","itemId","itemTab","getData","ItemTableById","getValue","heroTab","HeroTableById","lbl_power_score","string","getLab","convertNumber","powerScore","lbl_hero_Name","Name","lbl_player_Name","roleName","heroInfo","star","id","level","hero_item","UpdateContent","setTouchCallBack","ins","show","viewName","CheckRoleInfoHeroPop","heroData","lbl_player_node_force","node","lbl_player_node_damage","lbl_player_node_level","lbl_player_node_chapter","rankData","score","chapterInfo","Math","floor","times","level_txt","getChildByName","getComponent","time_txt","lbl_player_node_name","simple","name","playerInfo","merge","palyerHerdItem","initHeadInfo","roleInfo","setCloseCallBack","CheckRoleInfoPop","LEVEL","getCombineString","String","POWER","CHAPTER","Fight","table","QuestLogTableByLevel","reputation","lbl_plaer_node_reputation","flagId","sp_guild_flag","lbl_guild_name","lbl_guild_force","onClickGuild","AssociationMainPop","onDisable","Node_StarItem"],"mappings":"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","sourcesContent":["/*\r\n * @Date: 2024-06-12 17:43:32\r\n * @LastEditors: wzq\r\n * @LastEditTime: 2024-10-30 16:33:28\r\n */\r\n\r\nimport { _decorator, Component, Label, Node, RichText, Sprite } from 'cc';\r\nimport { proto } from 'client_protocol';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { HeroItem } from '../item/HeroItem';\r\nimport { HeroInfo } from '../hero/HeroInfo';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { RANKING_TYPE } from '../../../Common/script/EnumTypeMgr';\r\nimport { PlayerHeadItem } from '../common/PlayerHeadItem';\r\nimport { SimpleRoleInfo } from '../friends/SimpleRoleInfo';\r\nimport { GameUtil, getTimeTXT, refreshFlagImg, setTextTime_3 } from '../../utils/GameUtil';\r\nimport { HeroStar } from '../hero/HeroStar';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RankTopItem')\r\nexport class RankTopItem extends Component {\r\n    @property(Node)\r\n    node_player: Node = null;\r\n    @property(Node)\r\n    node_hero: Node = null;\r\n    @property(Node)\r\n    node_association: Node = null;\r\n    @property(Node)\r\n    node_no_rank: Node = null;\r\n    @property(Node)\r\n    node_server_txt: Node = null;\r\n    @property(Label)\r\n    lbl_power_score: Label = null;\r\n    @property(Label)\r\n    lbl_hero_Name: Label = null;\r\n    @property(Label)\r\n    lbl_player_Name: Label = null;\r\n    @property(HeroItem)\r\n    hero_item: HeroItem = null;\r\n\r\n    @property(Label)\r\n    lbl_player_node_name: Label = null;\r\n    @property(Label)\r\n    lbl_player_node_force: Label = null;\r\n    @property(PlayerHeadItem)\r\n    palyerHerdItem: PlayerHeadItem = null;\r\n    @property(Node)\r\n    lbl_player_node_chapter: Node = null;\r\n    @property(Label)\r\n    lbl_player_node_level: Label = null;\r\n    @property(Label)\r\n    lbl_player_node_damage: Label = null;\r\n    @property(RichText)\r\n    lbl_plaer_node_reputation: RichText = null;\r\n    @property(HeroStar)\r\n    Node_StarItem: HeroStar = null;\r\n    @property(Sprite)\r\n    sp_guild_flag: Sprite = null;\r\n    @property(Label)\r\n    lbl_guild_name: Label = null;\r\n    @property(Label)\r\n    lbl_guild_force: Label = null;\r\n\r\n    private _heroData: proto.ISimpleHero = null;\r\n    private _playerData: proto.ISimpleRank = null;\r\n    private _guildData: proto.ISimpleGuild = null;\r\n    private _rankType: RANKING_TYPE = RANKING_TYPE.NONE;\r\n    initHeroData(data: proto.ISimpleHero) {\r\n        if (data) {\r\n            this.node_no_rank.active = false;\r\n            this._heroData = data;\r\n            this.node_player.active = false;\r\n            this.node_association.active = false;\r\n            this.node_hero.active = true;\r\n            this.createHeroData();\r\n        } else {\r\n            this.node_hero.active = false;\r\n            this.node_association.active = false;\r\n            this.node_player.active = false;\r\n            this.node_server_txt.active = false;\r\n            this.node_no_rank.active = true;\r\n        }\r\n    }\r\n    initHeroPlayerData(data: proto.ISimpleRank, rankType: RANKING_TYPE) {\r\n        this._rankType = rankType;\r\n        if (data) {\r\n            this.node_player.active = true;\r\n            this.node_hero.active = false;\r\n            this.node_no_rank.active = false;\r\n            this.node_association.active = false;\r\n            this._playerData = data;\r\n            this.createPlayerData();\r\n        } else {\r\n            this.node_hero.active = false;\r\n            this.node_association.active = false;\r\n            this.node_player.active = false;\r\n            this.node_server_txt.active = false;\r\n            this.node_no_rank.active = true;\r\n        }\r\n    }\r\n    initGuildData(data: proto.ISimpleGuild) {\r\n        if (data) {\r\n            this.node_no_rank.active = false;\r\n            this._guildData = data;\r\n            this.node_player.active = false;\r\n            this.node_hero.active = false;\r\n            this.node_association.active = true;\r\n            this.createGuildData();\r\n        } else {\r\n            this.node_hero.active = false;\r\n            this.node_association.active = false;\r\n            this.node_player.active = false;\r\n            this.node_server_txt.active = false;\r\n            this.node_no_rank.active = true;\r\n        }\r\n    }\r\n    // 如果是英雄\r\n    createHeroData() {\r\n        // 头像\r\n        this.node_association.active = false;\r\n        this.node_server_txt.active = false;\r\n        const itemId = this._heroData.itemId;\r\n        const itemTab = tab.getData().ItemTableById.getValue(itemId);\r\n        const heroTab = tab.getData().HeroTableById.getValue(itemId);\r\n        // 显示战斗力\r\n        //this.lbl_power_score.string = String(this._heroData.powerScore);\r\n        this.lbl_power_score.string = LangMgr.getLab(\"ui_commondesc_43\") + GameUtil.convertNumber(this._heroData.powerScore);\r\n        this.lbl_hero_Name.string = \"[ \" + LangMgr.getLab(itemTab.Name) + \" ]\";\r\n        this.lbl_player_Name.string = this._heroData.roleName;\r\n\r\n        const heroInfo = new HeroInfo();\r\n        heroInfo.itemId = itemId;\r\n        heroInfo.star = this._heroData.star;\r\n        heroInfo.id = 0;\r\n        heroInfo.level = this._heroData.level;\r\n        this.hero_item.UpdateContent(heroInfo);\r\n        this.hero_item.setTouchCallBack(() => {\r\n            UIMgr.ins.show({\r\n                viewName: ViewName.CheckRoleInfoHeroPop, data: {\r\n                    heroData: this._heroData\r\n                }\r\n            })\r\n        })\r\n    }\r\n    // 如果是玩家\r\n    createPlayerData() {\r\n        this.lbl_player_node_force.node.active = false;\r\n        this.lbl_player_node_damage.node.active = false;\r\n        this.lbl_player_node_level.node.active = false;\r\n        this.lbl_player_node_chapter.active = false;\r\n        const rankData = this._playerData;\r\n        if (rankData.score) {\r\n            // 用关卡通关时间和关卡Id拼接得分202000540\r\n            // score := int64(stageId)*1000000 + int64(alive)%1000000\r\n            const chapterInfo = Math.floor(rankData.score / 1000000);\r\n            const times = rankData.score % 1000000;\r\n            const level_txt = this.lbl_player_node_chapter.getChildByName(\"level_txt\").getComponent(Label);\r\n            const time_txt = this.lbl_player_node_chapter.getChildByName(\"time_txt\").getComponent(Label);\r\n            time_txt.string = getTimeTXT(times);\r\n            level_txt.string = Math.floor(chapterInfo / 100) + \"-\" + chapterInfo % 100\r\n        }\r\n        // 玩家名字\r\n        this.lbl_player_node_name.string = rankData.simple.name;\r\n        const playerInfo = new SimpleRoleInfo();\r\n        playerInfo.merge(rankData.simple);\r\n        this.palyerHerdItem.initHeadInfo({ roleInfo: playerInfo });\r\n        this.palyerHerdItem.setCloseCallBack(() => {\r\n            UIMgr.ins.show({ viewName: ViewName.CheckRoleInfoPop, data: { \"rankData\": playerInfo } })\r\n        })\r\n        if (this._rankType === RANKING_TYPE.LEVEL) {\r\n            // 等级榜\r\n            this.lbl_player_node_level.node.active = true;\r\n            //this.lbl_player_node_level.string = String(rankData.simple.level);\r\n            this.lbl_player_node_level.string = LangMgr.getCombineString(\"ui_heroresonancepop_3\", [String(rankData.simple.level)]);\r\n        } else if (this._rankType === RANKING_TYPE.POWER) {\r\n            this.lbl_player_node_force.node.active = true;\r\n            //this.lbl_player_node_force.string = String(rankData.simple.powerScore);\r\n            this.lbl_player_node_force.string = LangMgr.getLab(\"ui_commondesc_43\") + GameUtil.convertNumber(rankData.simple.powerScore);\r\n        } else if (this._rankType === RANKING_TYPE.CHAPTER) {\r\n            this.lbl_player_node_chapter.active = true;\r\n        } else if (this._rankType === RANKING_TYPE.Fight) {\r\n            this.lbl_player_node_force.node.active = true;\r\n            this.lbl_player_node_force.string =  LangMgr.getCombineString(\"ui_fincafight_13\", [String(this._playerData.score)]);\r\n        }\r\n\r\n        let table = tab.getData().QuestLogTableByLevel.getValue(rankData.simple.reputation);\r\n        if (table) {\r\n            this.lbl_plaer_node_reputation.string = LangMgr.getLab(table.Name);\r\n        } else {\r\n            this.lbl_plaer_node_reputation.node.active = false;\r\n        }\r\n    }\r\n    createGuildData() {\r\n        refreshFlagImg(this._guildData ? this._guildData.flagId : 0, this.sp_guild_flag);\r\n        this.lbl_guild_name.string = this._guildData ? this._guildData.name : \"\";\r\n        this.lbl_guild_force.string = GameUtil.convertNumber(this._guildData.powerScore)\r\n    }\r\n    onClickGuild() {\r\n        if (this._guildData.id) {\r\n            UIMgr.ins.show({ viewName: ViewName.AssociationMainPop, data: { \"rankData\": this._guildData } })\r\n        }\r\n    }\r\n    protected onDisable(): void {\r\n        this.Node_StarItem.onDisable();\r\n    }\r\n}\r\n\r\n\r\n"]}