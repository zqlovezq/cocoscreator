{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/view/common/FightWeaponTeam.ts"],"names":["_decorator","Component","Node","FightWeaponTeamItem","RogueControl","FincaFightData","tab","ccclass","property","FightWeaponTeam","items","books","onLoad","index","team_layout","children","length","v","push","getComponent","refresh","isTouch","list","ins","getSelectWeapon","head","role","setData","setBooks","prestigeLevel","_fincaFightTeamTab","getTeamTab","bookId","setBookId","UnlockWeapon","activeBookIndex","activeBook","setRogueIds","rogues","rogueId","rogueTab","getData","RogueTableById","getValue","BookId","btn","enabled","cdBar","progress"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab } from \"cc\";\nimport { PlayerControl } from \"../../base/obj/role/role/PlayerControl\";\nimport { FightWeaponTeamItem } from \"./FightWeaponTeamItem\";\nimport { RogueControl } from \"../rogue/RogueControl\";\nimport { FincaFightData } from \"../../../model/fincaFight/FincaFightData\";\nimport { tab } from \"../../../../Table/table_gen\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('FightWeaponTeam')\nexport class FightWeaponTeam extends Component {\n    @property(Node)\n    team_layout: Node = null\n\n    items: FightWeaponTeamItem[] = [];\n\n    books: number[] = [];\n    protected onLoad(): void {\n        for (let index = 0; index < this.team_layout.children.length; index++) {\n            const v = this.team_layout.children[index];\n            this.items.push(v.getComponent(FightWeaponTeamItem));\n        }\n    }\n\n    refresh(isTouch = false) {\n        let list = RogueControl.ins.getSelectWeapon()\n\n        for (let index = 0; index < this.items.length; index++) {\n            let head = this.items[index];\n            let role = list[index];\n            head.setData(role, isTouch)\n        }\n    }\n\n    setBooks(books: number[], prestigeLevel: number) {\n        this.books = books\n        let _fincaFightTeamTab: tab.FincaFightTeam = FincaFightData.ins.getTeamTab(prestigeLevel || 1)\n        for (let index = 0; index < this.items.length; index++) {\n            let head = this.items[index];\n            let bookId = this.books[index];\n            head.setBookId((_fincaFightTeamTab.UnlockWeapon > index ? bookId || 0 : -1))\n        }\n    }\n\n    activeBookIndex(index: number) {\n        this.items[index] && this.items[index].activeBook()\n    }\n\n\n    setRogueIds(rogues: number[]) {\n        for (let index = 0; index < this.items.length; index++) {\n            let head = this.items[index];\n            let rogueId = rogues[index]\n            let rogueTab = tab.getData().RogueTableById.getValue(rogueId)\n            head.setBookId(rogueTab ? rogueTab.BookId : 0)\n            head.btn.enabled = true\n            head.cdBar.progress = 0\n        }\n    }\n}"]}