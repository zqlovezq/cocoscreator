{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/view/FightPausePop.ts"],"names":["_decorator","Toggle","tab","ViewPop","ShowTips","UIMgr","FightData","DropControl","FightRoleTeam","FightWeaponTeam","ViewName","CommonTipsPop","LangMgr","LocalEvent","EventMgr","SettingsManager","OpenFunctionMgr","ccclass","property","FightPausePop","create","ins","pause","show","viewName","hide","hideView","register","onShow","fightTeam","refresh","fightWeapon","autoToggle","isChecked","audoDropCollect","autoSelectToggle","getSetting","getIsAuto","onClickAuto","setAudoDropCollect","onClickAutoEvent","isOpen","checkFunctionIsOpen","OpenFunctionName","OpenFunctionName_AutoSelectRogue","getLab","onClickAutoSelect","setSetting","onClose","onExitFight","val","emitLocal","quitFight","onClickWeaponTuJian","WeaponPop","onClickDamageStat","event","FightDamageRankPop","data"],"mappings":"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","sourcesContent":["import { _decorator, Component, EventTouch, instantiate, Label, Node, Prefab, Toggle, UITransform } from 'cc';\nimport { tab } from '../../../Table/table_gen';\nimport { ViewPop } from '../../../framework/base/ViewPop';\nimport { ShowTips, UIMgr } from '../../mgr/UIMgr';\nimport { FightData } from '../data/FightData';\nimport { DropControl } from '../drop/DropControl';\nimport { FightRoleTeam } from './common/FightRoleTeam';\nimport { FightWeaponTeam } from './common/FightWeaponTeam';\nimport { RogueBaseItem } from './rogue/RogueBaseItem';\nimport { RogueSelect, RogueControl } from './rogue/RogueControl';\nimport { RogueInfo } from './rogue/RogueInfo';\nimport { FightRootControl } from '../FightRootControl';\nimport { ViewName } from '../../define/ViewDefine';\nimport { Func } from '../../utils/Func';\nimport { CommonTipsPop } from '../../model/common/CommonTipsPop';\nimport { LangMgr } from '../../mgr/LangMgr';\nimport { LocalEvent } from '../../define/LocalEvent';\nimport { EventMgr } from '../../mgr/EventMgr';\nimport { SettingsManager } from '../../model/role/SettingsManager';\nimport { OpenFunctionMgr } from '../../../Common/component/OpenFunctionMgr';\n\nconst { ccclass, property } = _decorator;\n\n/** 战斗暂停界面 */\n@ccclass('FightPausePop')\nexport class FightPausePop extends ViewPop {\n\n\n    static async create() {\n        if (FightData.ins.pause){\n            return\n        }\n        FightData.ins.pause = true\n        await UIMgr.ins.show({ viewName: \"FightPausePop\" })\n    }\n\n    static hide() {\n        FightData.ins.pause = false\n        UIMgr.ins.hideView(\"FightPausePop\")\n    }\n\n    @property(FightRoleTeam)\n    fightTeam: FightRoleTeam = null\n    @property(FightWeaponTeam)\n    fightWeapon: FightWeaponTeam = null\n    @property(Toggle)\n    autoToggle: Toggle = null;\n    @property(Toggle)\n    autoSelectToggle: Toggle = null;\n\n    register(): void {\n        // audoDropCollect\n    }\n\n    onShow(): void {\n        this.fightTeam.refresh(true);\n        this.fightWeapon.refresh(true);\n        this.autoToggle.isChecked = DropControl.ins.audoDropCollect\n        this.autoSelectToggle.isChecked = SettingsManager.ins.getSetting(\"isAutoSelectRogue\");\n    }\n    /**\n     * 是否自动拾取\n     * @returns \n     */\n    getIsAuto() {\n        return this.autoToggle.isChecked;\n    }\n    onClickAuto() {\n        DropControl.ins.setAudoDropCollect(this.autoToggle.isChecked)\n    }\n    onClickAutoEvent(){\n        const isOpen = OpenFunctionMgr.ins.checkFunctionIsOpen(tab.OpenFunctionName.OpenFunctionName_AutoSelectRogue);\n        if(!isOpen){\n            ShowTips(LangMgr.getLab(\"ui_fight_22\"));\n        }\n    }\n    onClickAutoSelect(){\n        const isOpen = OpenFunctionMgr.ins.checkFunctionIsOpen(tab.OpenFunctionName.OpenFunctionName_AutoSelectRogue);\n        if(isOpen){\n            SettingsManager.ins.setSetting(\"isAutoSelectRogue\", this.autoSelectToggle.isChecked);\n        }else{\n            this.autoSelectToggle.isChecked = false;\n        }\n    }\n    onClose(): void {\n        FightPausePop.hide()\n    }\n\n    onExitFight() {\n        // 弹窗窗口\n        CommonTipsPop.create(LangMgr.getLab(\"Tips_fight_1\"), ((val) => {\n            if (val) {\n                this.onClose()\n                EventMgr.emitLocal(LocalEvent.quitFight)\n            }\n        }))\n    }\n    /**点击武器图鉴 */\n    onClickWeaponTuJian() {\n        UIMgr.ins.show({ viewName: ViewName.WeaponPop })\n    }\n    /**点击伤害统计 */\n    onClickDamageStat(event: EventTouch) {\n        UIMgr.ins.show({ viewName: ViewName.FightDamageRankPop, data: { event: event } })\n\n    }\n}"]}