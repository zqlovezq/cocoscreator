{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/jianghu/topWar/TopWarRankRewardPop.ts"],"names":["_decorator","instantiate","Label","Node","Prefab","ViewPop","tab","TopWarRankRewardItem","GameUtil","GameplayViewDataMgr","LangMgr","ccclass","property","TopWarRankRewardPop","register","onShow","tables","getData","RankRewardTableById","getValue","RankType","RankType_WorldBoss","ranks","Ranking","key","item","itemPrefab","parent","contentNode","rewards","getRewardsByDropId","DropId","str","split","getComponent","initView","Number","rank","ins","worldBossMsg","ranking","myRankLab","string","getLab"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;;AACjDC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,G,iBAAAA,G;;AAEAC,MAAAA,oB,iBAAAA,oB;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,mB,iBAAAA,mB;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;qCAGjBa,mB,WADZF,OAAO,CAAC,qBAAD,C,UAEHC,QAAQ,CAACT,IAAD,C,UAERS,QAAQ,CAACV,KAAD,C,UAERU,QAAQ,CAACR,MAAD,C,2BANb,MACaS,mBADb;AAAA;AAAA,8BACiD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAO7CC,QAAAA,QAAQ,GAAS,CAEhB;;AACDC,QAAAA,MAAM,GAAS;AACX,cAAIC,MAAM,GAAC;AAAA;AAAA,0BAAIC,OAAJ,GAAcC,mBAAd,CAAkCC,QAAlC,CAA2C;AAAA;AAAA,0BAAIC,QAAJ,CAAaC,kBAAxD,CAAX;AACA,cAAIC,KAAK,GAACN,MAAM,CAACO,OAAjB;;AACA,eAAI,IAAIC,GAAR,IAAeF,KAAf,EAAqB;AACjB,gBAAIG,IAAI,GAACxB,WAAW,CAAC,KAAKyB,UAAN,CAApB;AACAD,YAAAA,IAAI,CAACE,MAAL,GAAY,KAAKC,WAAjB;AACA,gBAAIC,OAAO,GAAC;AAAA;AAAA,sCAASC,kBAAT,CAA4Bd,MAAM,CAACe,MAAP,CAAcP,GAAd,CAA5B,CAAZ,CAHiB,CAIjB;AACA;AACA;AACA;AACA;;AACA,gBAAIQ,GAAG,GAACV,KAAK,CAACE,GAAD,CAAL,CAAWS,KAAX,CAAiB,GAAjB,CAAR;AACAR,YAAAA,IAAI,CAACS,YAAL;AAAA;AAAA,8DAAwCC,QAAxC,CAAiDC,MAAM,CAACJ,GAAG,CAAC,CAAD,CAAJ,CAAvD,EAAgEI,MAAM,CAACJ,GAAG,CAAC,CAAD,CAAJ,CAAtE,EAA+EH,OAA/E;AACH;;AACD,cAAIQ,IAAI,GAAC;AAAA;AAAA,0DAAoBC,GAApB,CAAwBC,YAAxB,CAAqCC,OAA9C,CAfW,CAgBX;;AACA,eAAKC,SAAL,CAAeC,MAAf,GAAsBL,IAAI,GAAC,CAAC,CAAN,GAASA,IAAI,GAAC,CAAN,GAAS,EAAjB,GAAoB;AAAA;AAAA,kCAAQM,MAAR,CAAe,gBAAf,CAA1C;AACH;;AA5B4C,O;;;;;iBAE5B,I;;;;;;;iBAED,I;;;;;;;iBAEE,I","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, Prefab } from 'cc';\r\nimport { ViewPop } from '../../../../framework/base/ViewPop';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { ItemInfo } from '../../item/ItemInfo';\r\nimport { TopWarRankRewardItem } from './TopWarRankRewardItem';\r\nimport { GameUtil } from '../../../utils/GameUtil';\r\nimport { GameplayViewDataMgr } from '../GameplayViewDataMgr';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TopWarRankRewardPop')\r\nexport class TopWarRankRewardPop extends ViewPop {\r\n    @property(Node)\r\n    contentNode:Node=null;\r\n    @property(Label)\r\n    myRankLab:Label=null;\r\n    @property(Prefab)\r\n    itemPrefab:Prefab=null;\r\n    register(): void {\r\n        \r\n    }\r\n    onShow(): void {\r\n        let tables=tab.getData().RankRewardTableById.getValue(tab.RankType.RankType_WorldBoss);\r\n        let ranks=tables.Ranking;\r\n        for(let key in ranks){\r\n            let item=instantiate(this.itemPrefab);\r\n            item.parent=this.contentNode;\r\n            let rewards=GameUtil.getRewardsByDropId(tables.DropId[key]);\r\n            // for(let k2 in tables[key].RewardItemIds){\r\n            //     let info=new ItemInfo();\r\n            //     info.initItemData(tables[key].RewardItemIds[k2],tables[key].RewardtemNum[k2]);\r\n            //     rewards.push(info);\r\n            // }\r\n            let str=ranks[key].split(\";\");\r\n            item.getComponent(TopWarRankRewardItem).initView(Number(str[0]),Number(str[1]),rewards);\r\n        }\r\n        let rank=GameplayViewDataMgr.ins.worldBossMsg.ranking;\r\n        //this.myRankLab.string=rank>-1?(rank+1)+\"\":\"未上榜\";\r\n        this.myRankLab.string=rank>-1?(rank+1)+\"\":LangMgr.getLab(\"ui_worldboss_5\");\r\n    }\r\n}\r\n\r\n\r\n"]}