{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/base/skill/SkillPowerControl.ts"],"names":["_decorator","AbsControl","tab","ccclass","property","SkillPowerControl","ins","_instance","init","skillPowerBySkill","roleInfo","skill","isPower","SkillEnhanceIds","length","index","skillPower","getData","SkillPowerTableById","getValue","skillPowers","addPower","console","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,U,iBAAAA,U;;AAEAC,MAAAA,G,iBAAAA,G;;;;;;;;;OAKH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;mCAGjBK,iB,WADZF,OAAO,CAAC,mBAAD,C,2BAAR,MACaE,iBADb;AAAA;AAAA,oCACkD;AAEzB,mBAAHC,GAAG,GAAG;AACpB,cAAI,QAAQ,KAAKC,SAAjB,EAA4B;AACxB,iBAAKA,SAAL,GAAiB,IAAIF,iBAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKE,SAAZ;AACH;;AAEDC,QAAAA,IAAI,GAAS,CAEZ;;AAEDC,QAAAA,iBAAiB,CAACC,QAAD,EAAwBC,KAAxB,EAAyC;AACtD,cAAIA,KAAK,CAACC,OAAV,EAAmB;AACf;AACA;AACH;;AACD,cAAID,KAAK,CAACE,eAAN,CAAsBC,MAAtB,IAAgC,CAApC,EAAuC;AACnC;AACH,WAPqD,CAQtD;;;AACAH,UAAAA,KAAK,CAACC,OAAN,GAAgB,IAAhB;;AACA,eAAK,IAAIG,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGJ,KAAK,CAACE,eAAN,CAAsBC,MAAlD,EAA0DC,KAAK,EAA/D,EAAmE;AAC/D,gBAAIC,UAAU,GAAG;AAAA;AAAA,4BAAIC,OAAJ,GAAcC,mBAAd,CAAkCC,QAAlC,CAA2CR,KAAK,CAACE,eAAN,CAAsBE,KAAtB,CAA3C,CAAjB;;AACA,gBAAIC,UAAJ,EAAgB;AACZN,cAAAA,QAAQ,CAACU,WAAT,CAAqBC,QAArB,CAA8BL,UAA9B,EAA0C,IAA1C;AACH,aAFD,MAEO;AACHM,cAAAA,OAAO,CAACC,KAAR,CAAc,aAAd,EAA6BZ,KAAK,CAACE,eAAN,CAAsBE,KAAtB,CAA7B;AACH;AACJ;AACJ;;AA/B6C,O,UAC/BR,S","sourcesContent":["import { _decorator, CCInteger, Color, Component, instantiate, Label, Node, Prefab, Quat, Rect, sp, Sprite, tween, UITransform, v3, Vec2, Vec3, view } from 'cc';\nimport { AbsControl } from '../../../../framework/base/IAbs';\nimport { AbsRole } from '../obj/role/AbsRole';\nimport { tab } from '../../../../Table/table_gen';\nimport { EffectTab } from '../../power/powerTab/EffectTab';\nimport { SkillTab } from '../../power/powerTab/SkillTab';\nimport { AbsRoleInfo } from '../obj/role/AbsRoleInfo';\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('SkillPowerControl')\nexport class SkillPowerControl extends AbsControl {\n    private static _instance: SkillPowerControl;\n    public static get ins() {\n        if (null == this._instance) {\n            this._instance = new SkillPowerControl();\n        }\n        return this._instance;\n    }\n\n    init(): void {\n\n    }\n\n    skillPowerBySkill(roleInfo: AbsRoleInfo, skill: SkillTab) {\n        if (skill.isPower) {\n            // console.log(\"技能已处理增强--\", skill.Id, skill.SkillEnhanceIds)\n            return\n        }\n        if (skill.SkillEnhanceIds.length == 0) {\n            return\n        }\n        // console.log(\"处理技能增强--\", roleInfo.configId, skill.Id, skill.SkillEnhanceIds)\n        skill.isPower = true\n        for (let index = 0; index < skill.SkillEnhanceIds.length; index++) {\n            let skillPower = tab.getData().SkillPowerTableById.getValue(skill.SkillEnhanceIds[index])\n            if (skillPower) {\n                roleInfo.skillPowers.addPower(skillPower, true)\n            } else {\n                console.error(\"技能增强id不存在--\", skill.SkillEnhanceIds[index])\n            }\n        }\n    }\n}\n\n"]}