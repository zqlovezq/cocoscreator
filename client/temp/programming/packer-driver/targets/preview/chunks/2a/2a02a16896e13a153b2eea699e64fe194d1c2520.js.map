{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/rareBook/RareBookSmallItem.ts"],"names":["_decorator","Button","Component","Label","Sprite","HeroStar","tab","ccclass","property","RareBookSmallItem","touchCallBack","info","initView","isTouch","isPreView","button","enabled","bookSpr","setTexture","itemTable","Icon","atpTab","getData","HeroAptitudeTableByHeroAptitude","getValue","bookTable","Aptitude","qualitySpr","qualityBgSpr","BookBgSmall","heroclass","HeroClassTableByHeroClass","Class","vocationTypeSpr","qualitytab","ItemQualityTableByQuality","Quality","qualityframeSpr","HeroStarBg","booktypeImg","node","active","PlaystyleName","starItem","showStar","star","level","levelLv","string","onClickItem","onDisable"],"mappings":"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","sourcesContent":["import { _decorator, Button, Component, Label, Node, Sprite } from 'cc';\r\nimport { HeroStar } from '../hero/HeroStar';\r\nimport { RareBookInfo } from './RareBookInfo';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * RareBookSmallItem\r\n * zhudingchao\r\n * Fri May 24 2024 16:13:40 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/rareBook/RareBookSmallItem.ts\r\n *\r\n */\r\n\r\n@ccclass('RareBookSmallItem')\r\nexport class RareBookSmallItem extends Component {\r\n\r\n\r\n    @property(Sprite)\r\n    bookSpr: Sprite = null;\r\n    @property(Sprite)\r\n    qualitySpr: Sprite = null;\r\n    @property(Sprite)\r\n    qualityBgSpr: Sprite = null;\r\n    @property(Sprite)\r\n    qualityframeSpr:Sprite=null;\r\n    @property(Sprite)\r\n    booktypeImg: Sprite = null;\r\n    @property(Sprite)\r\n    vocationTypeSpr: Sprite = null;\r\n    @property(Label)\r\n    levelLv: Label = null;\r\n    @property(HeroStar)\r\n    starItem: HeroStar = null;\r\n    @property(Button)\r\n    button: Button = null;\r\n    private touchCallBack: Function;\r\n    private info: RareBookInfo;\r\n\r\n\r\n    initView(info: RareBookInfo, isTouch: boolean = false, touchCallBack: Function = null, isPreView: boolean = false) {\r\n        this.info = info;\r\n        this.button.enabled = isTouch;\r\n        this.touchCallBack = touchCallBack;\r\n        // this.bookNameLab.string = LangMgr.getLab(this.info.itemTable.Name);\r\n        this.bookSpr.setTexture(this.info.itemTable.Icon);\r\n        let atpTab = tab.getData().HeroAptitudeTableByHeroAptitude.getValue(this.info.bookTable.Aptitude);\r\n        this.qualitySpr.setTexture(atpTab.Icon);\r\n        this.qualityBgSpr.setTexture(atpTab.BookBgSmall);\r\n        let heroclass = tab.getData().HeroClassTableByHeroClass.getValue(this.info.bookTable.Class);\r\n        this.vocationTypeSpr.setTexture(heroclass.Icon);\r\n      \r\n        let qualitytab=tab.getData().ItemQualityTableByQuality.getValue(this.info.itemTable.Quality);\r\n        this.qualityframeSpr.setTexture(qualitytab.HeroStarBg);\r\n        this.booktypeImg.node.active = this.info.bookTable.PlaystyleName != \"\";\r\n        if( this.info.bookTable.PlaystyleName != \"\"){\r\n            this.booktypeImg.setTexture(this.info.bookTable.PlaystyleName);\r\n        }\r\n        // this.bookPlaystyleLab.node.active = this.info.bookTable.PlaystyleName != tab.Playstyle.Playstyle_None;\r\n        // this.bookPlaystyleLab.string = LangMgr.getLab(tab.Playstyle[this.info.bookTable.PlaystyleName]);\r\n\r\n        if (!isPreView) {\r\n            this.starItem.showStar(this.info.star);\r\n            if (this.info.level > 0) {\r\n                this.levelLv.node.active = true;\r\n                this.levelLv.string = \"+\" + this.info.level;\r\n            } else {\r\n                this.levelLv.node.active = false;\r\n            }\r\n        } else {\r\n            this.levelLv.node.active = false;\r\n            this.starItem.node.active = false;\r\n        }\r\n\r\n\r\n\r\n    }\r\n    onClickItem() {\r\n        if (this.touchCallBack) {\r\n            this.touchCallBack(this.info);\r\n        }\r\n    \r\n    }\r\n    protected onDisable(): void {\r\n        this.starItem.onDisable();\r\n    }\r\n}"]}