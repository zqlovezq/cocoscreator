{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/base/obj/AbsObjInfo.ts"],"names":["_decorator","AbsObjType","AbsObjFactory","FightData","ccclass","property","AbsObjInfoAttr","AbsObjInfo","objType","default","abs","isRecycle","configId","configTab","clientAttr","Map","destroy","clear","recycle","putData","reset","setAbs","_abs","setConfigId","id","setConfigTab","conf","init","updateFrame","dt","setObjAttr","key","count","holdTime","time","set","addObjAttr","addCount","getObjAttr","has","get","clearObjAttr"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACQC,MAAAA,U,iBAAAA,U;;AACRC,MAAAA,a,iBAAAA,a;;AAEAC,MAAAA,S,iBAAAA,S;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;gCAClBM,c,0BAAAA,c;AAAAA,QAAAA,c;AAAAA,QAAAA,c;AAAAA,QAAAA,c;AAAAA,QAAAA,c;AAAAA,QAAAA,c;AAAAA,QAAAA,c;AAAAA,QAAAA,c;AAAAA,QAAAA,c;eAAAA,c;;;4BAwBCC,U,WADZH,OAAO,CAAC,YAAD,C,gBAAR,MACaG,UADb,CACwB;AAAA;AAAA,eACpBC,OADoB,GACE;AAAA;AAAA,wCAAWC,OADb;AAAA,eAEpBC,GAFoB;AAAA,eAGpBC,SAHoB,GAGC,KAHD;AAAA,eAIpBC,QAJoB;AAAA,eAKpBC,SALoB;AAAA,eAOZC,UAPY,GAO8B,IAAIC,GAAJ,EAP9B;AAAA;;AAOwC;AAE5DC,QAAAA,OAAO,GAAG;AACN,eAAKN,GAAL,GAAW,IAAX;AACA,eAAKG,SAAL,GAAiB,IAAjB;AACA,eAAKC,UAAL,CAAgBG,KAAhB;AACH;AAED;;;AACAC,QAAAA,OAAO,GAAG;AACN;AAAA;AAAA,8CAAcC,OAAd,CAAsB,IAAtB;AACH;;AACDC,QAAAA,KAAK,GAAG;AACJ,eAAKN,UAAL,CAAgBG,KAAhB;AACA,eAAKP,GAAL,GAAW,IAAX;AACA,eAAKE,QAAL,GAAgB,CAAhB;AACA,eAAKC,SAAL,GAAiB,IAAjB;AACH;;AACDQ,QAAAA,MAAM,CAACC,IAAD,EAAe;AACjB,eAAKZ,GAAL,GAAWY,IAAX;AACH;;AAEDC,QAAAA,WAAW,CAACC,EAAD,EAAa;AACpB,eAAKZ,QAAL,GAAgBY,EAAhB;AAEH;;AAESC,QAAAA,YAAY,CAACC,IAAD,EAAY;AAC9B,eAAKb,SAAL,GAAiBa,IAAjB;AACH;;AAEDC,QAAAA,IAAI,GAAG,CAEN;;AACDC,QAAAA,WAAW,CAACC,EAAD,EAAa,CAEvB;AAED;;;AACAC,QAAAA,UAAU,CAACC,GAAD,EAAsBC,KAAtB,EAAyC;AAAA,cAAnBA,KAAmB;AAAnBA,YAAAA,KAAmB,GAAH,CAAG;AAAA;;AAC/C,cAAID,GAAG,IAAIzB,cAAc,CAAC2B,QAA1B,EAAoC;AAChCD,YAAAA,KAAK,GAAG;AAAA;AAAA,wCAAUE,IAAlB;AACH;;AACD,eAAKpB,UAAL,CAAgBqB,GAAhB,CAAoBJ,GAApB,EAAyBC,KAAzB;AACH;AAED;;;AACAI,QAAAA,UAAU,CAACL,GAAD,EAAsBM,QAAtB,EAA4C;AAAA,cAAtBA,QAAsB;AAAtBA,YAAAA,QAAsB,GAAH,CAAG;AAAA;;AAClD,eAAKvB,UAAL,CAAgBqB,GAAhB,CAAoBJ,GAApB,EAAyB,KAAKO,UAAL,CAAgBP,GAAhB,IAAuBM,QAAhD;AACH;AAED;;;AACAC,QAAAA,UAAU,CAACP,GAAD,EAA8B;AACpC,cAAI,CAAC,KAAKjB,UAAL,CAAgByB,GAAhB,CAAoBR,GAApB,CAAL,EAA+B;AAC3B,iBAAKD,UAAL,CAAgBC,GAAhB,EAAqB,CAArB;AACH;;AACD,iBAAO,KAAKjB,UAAL,CAAgB0B,GAAhB,CAAoBT,GAApB,CAAP;AACH;;AAEDU,QAAAA,YAAY,CAACV,GAAD,EAAsB;AAC9B,eAAKD,UAAL,CAAgBC,GAAhB,EAAqB,CAArB;AACH;;AApEmB,O","sourcesContent":["import { _decorator, Component } from \"cc\";\nimport { AbsObj, AbsObjType } from \"./AbsObj\";\nimport { AbsObjFactory } from \"./AbsObjFactory\";\nimport { EventMgr } from \"../../../mgr/EventMgr\";\nimport { FightData } from \"../../data/FightData\";\n\nconst { ccclass, property } = _decorator;\nexport enum AbsObjInfoAttr {\n    //------------角色------------\n    /** 命中次数 */\n    hitCount = \"hitCount\",\n    /** 弹射次数 */\n    catapultCount = \"catapultCount\",\n    /** 蓄力时间 */\n    holdTime = \"holdTime\",\n    /** 总累计损失生命比例 */\n    totalLossHpPer = \"totalLossHpPer\",\n    /** 每累计损失生命比例 */\n    EverylHpLostPe = \"EverylHpLostPe\",\n\n    //------------子弹------------\n    /** 是否为正向剑 */\n    isForwardArrow = \"isForwardArrow\",\n    /** 多向剑Y偏移 */\n    forwardArrowOffsetY = \"forwardArrowOffsetY\",\n\n    /** 子弹类型组id */\n    bulletGroupId = \"bulletGroupId\",\n}\n\n@ccclass('AbsObjInfo')\nexport class AbsObjInfo {\n    objType: AbsObjType = AbsObjType.default;\n    abs: AbsObj\n    isRecycle: boolean = false\n    configId: number\n    configTab: any\n\n    private clientAttr: Map<AbsObjInfoAttr, number> = new Map() //子弹属性 各种次数增加\n\n    destroy() {\n        this.abs = null\n        this.configTab = null\n        this.clientAttr.clear()\n    }\n\n    /** 回收 */\n    recycle() {\n        AbsObjFactory.putData(this)\n    }\n    reset() {\n        this.clientAttr.clear()\n        this.abs = null\n        this.configId = 0\n        this.configTab = null\n    }\n    setAbs(_abs: AbsObj) {\n        this.abs = _abs\n    }\n\n    setConfigId(id: number) {\n        this.configId = id\n\n    }\n\n    protected setConfigTab(conf: any) {\n        this.configTab = conf\n    }\n\n    init() {\n\n    }\n    updateFrame(dt: number) {\n\n    }\n\n    /** 属性设置 */\n    setObjAttr(key: AbsObjInfoAttr, count: number = 0) {\n        if (key == AbsObjInfoAttr.holdTime) {\n            count = FightData.time\n        }\n        this.clientAttr.set(key, count)\n    }\n\n    /** 属性增加 */\n    addObjAttr(key: AbsObjInfoAttr, addCount: number = 0) {\n        this.clientAttr.set(key, this.getObjAttr(key) + addCount)\n    }\n\n    /** 获取属性 */\n    getObjAttr(key: AbsObjInfoAttr): number {\n        if (!this.clientAttr.has(key)) {\n            this.setObjAttr(key, 0)\n        }\n        return this.clientAttr.get(key)\n    }\n\n    clearObjAttr(key: AbsObjInfoAttr) {\n        this.setObjAttr(key, 0)\n    }\n}"]}