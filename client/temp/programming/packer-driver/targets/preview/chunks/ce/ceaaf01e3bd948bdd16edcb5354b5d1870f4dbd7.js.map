{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/hero/herobag/HeroEquipSlotItem.ts"],"names":["_decorator","Component","Node","ItemPoolMgr","tab","ShowTips","UIMgr","ViewName","EquipmentItem","LangMgr","OpenFunctionMgr","RedMgr","RedDotType","ccclass","property","HeroEquipSlotItem","equipInfo","heroClass","equipType","comItem","isLock","start","initData","type","equip","emptyNode","active","equipItem","lockNode","node","ins","createEquipItem","getComponent","EquipType","EquipType_Max","EquipType_Feather","node_red","isRed","Wear_Jade","String","onClickItem","getLab","equipTable","Type","isOpen","checkFunctionIsOpen","OpenFunctionName","OpenFunctionName_Jade","show","viewName","JadeDetailPop","data","EquipmentDetailPop","JadeSelectPop","EquipmentView"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { EquipInfo } from '../../equip/EquipInfo';\r\nimport { CommonItem } from '../../item/CommonItem';\r\nimport { ItemPoolMgr } from '../../item/ItemPoolMgr';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { ShowTips, UIMgr } from '../../../mgr/UIMgr';\r\nimport { ViewName } from '../../../define/ViewDefine';\r\nimport { EquipmentItem } from '../../item/EquipmentItem';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nimport { OpenFunctionMgr } from '../../../../Common/component/OpenFunctionMgr';\r\nimport { RedMgr } from '../../../mgr/RedMgr';\r\nimport { RedDotType } from '../../../red/RedDotType';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HeroEquipSlotItem')\r\nexport class HeroEquipSlotItem extends Component {\r\n    @property(Node)\r\n    emptyNode: Node = null;\r\n    @property(Node)\r\n    lockNode: Node = null;\r\n    @property(Node)\r\n    equipItem: Node = null;\r\n    @property(Node)\r\n    node_red:Node = null;\r\n\r\n\r\n    private equipInfo: EquipInfo;\r\n    private heroClass: number;\r\n    private equipType: number;\r\n    private comItem: EquipmentItem;\r\n    private isLock:boolean;\r\n\r\n    start(): void {\r\n\r\n    }\r\n    initData(heroClass: number, type: number, equip: EquipInfo) {\r\n        this.isLock=true;\r\n        this.heroClass = heroClass;\r\n        this.equipType = type;\r\n        this.equipInfo = equip;\r\n        if (this.equipInfo) {\r\n            this.emptyNode.active=false;\r\n            this.equipItem.active=true;\r\n            this.lockNode.active=false;\r\n            if (!this.comItem) {\r\n                let node = ItemPoolMgr.ins.createEquipItem(this.equipInfo,this.equipItem,false);\r\n                this.comItem = node.getComponent(EquipmentItem);\r\n            } else {\r\n                this.comItem.initData(this.equipInfo,false);\r\n            }\r\n            // this.comItem.setIsTouchItem(false);\r\n        }else{\r\n            this.equipItem.active=false;\r\n            this.emptyNode.active=true;\r\n            if(this.equipType==tab.EquipType.EquipType_Max){\r\n                this.lockNode.active=true;\r\n                this.isLock=false;\r\n            }else{\r\n                this.lockNode.active=false;\r\n            } \r\n        }\r\n        if(this.equipType==tab.EquipType.EquipType_Feather){\r\n            this.node_red.active = RedMgr.ins.isRed(RedDotType.Wear_Jade, String(this.heroClass))\r\n        }\r\n    }\r\n\r\n    onClickItem() {\r\n        if(!this.isLock){\r\n            //ShowTips(\"暂未开启\")\r\n            ShowTips(LangMgr.getLab(\"ui_climbingtower_12\"))\r\n            return;\r\n        }\r\n        if (this.equipInfo) {\r\n            if(this.equipInfo.equipTable.Type==tab.EquipType.EquipType_Feather){\r\n                const isOpen = OpenFunctionMgr.ins.checkFunctionIsOpen(tab.OpenFunctionName.OpenFunctionName_Jade);\r\n                if(isOpen){\r\n                    UIMgr.ins.show({ viewName: ViewName.JadeDetailPop, data: this.equipInfo })\r\n\r\n                }else{\r\n                    ShowTips(LangMgr.getLab(\"ui_climbingtower_12\"))\r\n                }\r\n            }else{\r\n                UIMgr.ins.show({ viewName: ViewName.EquipmentDetailPop, data: this.equipInfo })\r\n            }\r\n        }else{\r\n            if(this.equipType==tab.EquipType.EquipType_Feather){\r\n                const isOpen = OpenFunctionMgr.ins.checkFunctionIsOpen(tab.OpenFunctionName.OpenFunctionName_Jade);\r\n                if(isOpen){\r\n                    UIMgr.ins.show({ viewName: ViewName.JadeSelectPop, data: {\"heroClass\":this.heroClass} })\r\n                }else{\r\n                    ShowTips(LangMgr.getLab(\"ui_climbingtower_12\"))\r\n                }\r\n            }else{\r\n                UIMgr.ins.show({viewName:ViewName.EquipmentView,data:{\"type\":3,\"heroClass\":this.heroClass,\"equipType\":this.equipType}});\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}