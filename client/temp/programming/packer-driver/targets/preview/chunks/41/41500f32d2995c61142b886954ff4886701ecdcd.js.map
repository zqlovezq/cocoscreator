{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/equip/EquipmentGrowthMaxItem.ts"],"names":["_decorator","Component","instantiate","Label","Node","Prefab","Sprite","tab","LangMgr","UIMgr","ViewName","ccclass","property","EquipmentGrowthMaxItem","type","initData","equipInfo","levelLab","string","enhanceLv","qhstr","getLab","EquipUpgradeType","EquipUpgradeType_Enhance","nameLab","getCombineString","initAttrItem","baseAttrInfos","refineLv","EquipUpgradeType_Refine","extraAttrInfos","attrs","level","contentNode","removeAllChildren","key","node","attrPrefab","parent","icon","getChildByName","getComponent","t","getData","HeroAttrClientTableByType","getValue","attrTable","AttrType","setTexture","Icon","add","getAddValueByLevel","Base","onClickHelpBtn","event","currentTarget","ins","show","viewName","CommonBlackTipsPop","data","worldPosition"],"mappings":"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","sourcesContent":["import { _decorator, Component, EventTouch, instantiate, Label, Node, Prefab, Sprite } from 'cc';\r\nimport { EquipInfo } from './EquipInfo';\r\nimport { EquipAttrInfo } from './EquipAttrInfo';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('EquipmentGrowthMaxItem')\r\nexport class EquipmentGrowthMaxItem extends Component {\r\n\r\n    @property(Label)\r\n    nameLab: Label = null;\r\n    @property(Label)\r\n    levelLab: Label = null;\r\n\r\n    @property(Node)\r\n    contentNode: Node = null;\r\n    @property(Prefab)\r\n    attrPrefab: Prefab = null;\r\n    private type:number;\r\n\r\n    initData(equipInfo: EquipInfo, type: number) {\r\n        if (type == 1) {\r\n            this.levelLab.string = equipInfo.enhanceLv + \"\"\r\n            let qhstr=LangMgr.getLab(tab.EquipUpgradeType[tab.EquipUpgradeType.EquipUpgradeType_Enhance])\r\n            // this.nameLab.string=\"强化等级(上限\"+limitLevel+\"级)\";\r\n            this.nameLab.string=LangMgr.getCombineString(\"ui_equip_1\",[qhstr]);\r\n            this.initAttrItem(equipInfo.baseAttrInfos,equipInfo.enhanceLv);\r\n        } else {\r\n            this.levelLab.string = equipInfo.refineLv + \"\"\r\n            let qhstr=LangMgr.getLab(tab.EquipUpgradeType[tab.EquipUpgradeType.EquipUpgradeType_Refine])\r\n            // this.nameLab.string=\"强化等级(上限\"+limitLevel+\"级)\";\r\n            this.nameLab.string=LangMgr.getCombineString(\"ui_equip_1\",[qhstr]);\r\n            this.initAttrItem(equipInfo.extraAttrInfos,equipInfo.refineLv);\r\n        }\r\n        this.type=type;\r\n\r\n    }\r\n    initAttrItem(attrs: Array<EquipAttrInfo>,level:number=0) {\r\n        this.contentNode.removeAllChildren();\r\n        for (let key in attrs) {\r\n            let node: Node = instantiate(this.attrPrefab);\r\n\r\n            node.parent = this.contentNode;\r\n            let icon = node.getChildByName(\"icon\").getComponent(Sprite);\r\n            let t = tab.getData().HeroAttrClientTableByType.getValue(attrs[key].attrTable.AttrType)\r\n            icon.setTexture(t.Icon)\r\n            let add=attrs[key].getAddValueByLevel(level);\r\n            node.getChildByName(\"now_txt\").getComponent(Label).string = (attrs[key].attrTable.Base+add) + \"\";\r\n\r\n        }\r\n    }\r\n    onClickHelpBtn(event:EventTouch) {\r\n        let node:Node=event.currentTarget;\r\n        let key=\"Tips_equip_1\"\r\n        if(this.type==1){\r\n            key=\"Tips_equip_1\"\r\n        }else{\r\n            key=\"Tips_equip_2\"\r\n        }\r\n        UIMgr.ins.show({ viewName: ViewName.CommonBlackTipsPop,data:{\"worldPos\":node.worldPosition,\"WordTableKey\":key }});\r\n    }\r\n}\r\n\r\n\r\n"]}