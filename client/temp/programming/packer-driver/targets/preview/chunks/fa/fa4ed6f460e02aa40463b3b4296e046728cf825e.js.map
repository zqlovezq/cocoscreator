{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/rareBook/RareBookSerieInfo.ts"],"names":["_decorator","proto","tab","ccclass","property","RareBookSerieInfo","BookSeriesData","_seriesTable","_needCount","merge","bookInfo","key","seriesTable","getData","BookSeriesTableById","getValue","id","isComplete","count","needCount","table","GroupId","BookId","length"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,K,oBAAAA,K;;AACAC,MAAAA,G,iBAAAA,G;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;mCAGaK,iB,WADZF,OAAO,CAAC,mBAAD,C,gBAAR,MACaE,iBADb,SACuC;AAAA;AAAA,0BAAMC,cAD7C,CAC4D;AAAA;AAAA;AAAA,eAMhDC,YANgD;AAAA,eAOhDC,UAPgD,GAO9B,CAAC,CAP6B;AAAA;;AACxDC,QAAAA,KAAK,CAACC,QAAD,EAAgB;AACjB,eAAK,IAAMC,GAAX,IAAkBD,QAAlB,EAA4B;AACxB,iBAAKC,GAAL,IAAYD,QAAQ,CAACC,GAAD,CAApB;AACH;AACJ;;AAE6B;AACf,YAAXC,WAAW,GAAE;AACb,cAAG,CAAC,KAAKL,YAAT,EAAsB;AAClB,iBAAKA,YAAL,GAAkB;AAAA;AAAA,4BAAIM,OAAJ,GAAcC,mBAAd,CAAkCC,QAAlC,CAA2C,KAAKC,EAAhD,CAAlB;AACH;;AACD,iBAAO,KAAKT,YAAZ;AACH;;AACDU,QAAAA,UAAU,GAAE;AACR,iBAAO,KAAKC,KAAL,IAAY,KAAKC,SAAxB;AACH;;AACY,YAATA,SAAS,GAAE;AACX,cAAG,KAAKX,UAAL,GAAgB,CAAnB,EAAqB;AACjB;AACA,gBAAIY,KAAK,GAAG;AAAA;AAAA,4BAAIP,OAAJ,GAAcC,mBAAd,CAAkCC,QAAlC,CAA2C,KAAKH,WAAL,CAAiBS,OAA5D,CAAZ;AACA,iBAAKb,UAAL,GAAgBY,KAAK,GAACA,KAAK,CAACE,MAAN,CAAaC,MAAd,GAAqB,CAA1C;AACH;;AACD,iBAAO,KAAKf,UAAZ;AACH;;AAxBuD,O","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { proto } from 'client_protocol';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { RareBookData } from './RareBookData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * RareBookSerieInfo\r\n * zhudingchao\r\n * Thu May 30 2024 15:57:22 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/rareBook/RareBookSerieInfo.ts\r\n *\r\n */\r\n\r\n@ccclass('RareBookSerieInfo')\r\nexport class RareBookSerieInfo extends proto.BookSeriesData {\r\n    merge(bookInfo: any) {\r\n        for (const key in bookInfo) {\r\n            this[key] = bookInfo[key]\r\n        }\r\n    }\r\n    private _seriesTable:tab.BookSeriesTable;\r\n    private _needCount:number=-1; //满足的数量\r\n    get seriesTable(){\r\n        if(!this._seriesTable){\r\n            this._seriesTable=tab.getData().BookSeriesTableById.getValue(this.id);\r\n        }\r\n        return this._seriesTable;\r\n    }\r\n    isComplete(){\r\n        return this.count>=this.needCount;\r\n    }\r\n    get needCount(){\r\n        if(this._needCount<0){\r\n            //let table=RareBookData.ins.getSerieTableByGroupId(this.seriesTable.GroupId);\r\n            let table = tab.getData().BookSeriesTableById.getValue(this.seriesTable.GroupId);\r\n            this._needCount=table?table.BookId.length:0;\r\n        }\r\n        return this._needCount;\r\n    }\r\n}"]}