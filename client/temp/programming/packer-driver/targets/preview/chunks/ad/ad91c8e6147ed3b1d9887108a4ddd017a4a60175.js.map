{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/rareBook/RareBookGetPop.ts"],"names":["_decorator","Label","ViewPop","WeaponInfoItem","RareBookData","tab","LangMgr","EventMgr","LocalEvent","ccclass","property","RareBookGetPop","itemId","mClosedCallBack","onShow","openData","itemTab","getData","ItemTableById","getValue","bookInfo","ins","getBookInfoByItemId","weaponItem","initData","bookAptitude","bookTable","Aptitude","AptitudeStr","getLab","lbl_aptitude","string","lbl_name","Name","register","unRegister","setCloseCallBack","closeFunc","onDestroy","emitLocal","showNewOver"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,K,OAAAA,K;;AACvBC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;gCAGjBW,c,WADZF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ;AAAA;AAAA,2C,UAERA,QAAQ,CAACT,KAAD,C,UAERS,QAAQ,CAACT,KAAD,C,2BANb,MACaU,cADb;AAAA;AAAA,8BAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAOhCC,MAPgC,GAOf,CAPe;AAAA,eAQhCC,eARgC,GAQJ,IARI;AAAA;;AASxCC,QAAAA,MAAM,GAAS;AACX,eAAKF,MAAL,GAAc,KAAKG,QAAL,CAAcH,MAA5B;AACA,cAAMI,OAAO,GAAG;AAAA;AAAA,0BAAIC,OAAJ,GAAcC,aAAd,CAA4BC,QAA5B,CAAqC,KAAKP,MAA1C,CAAhB;AACA,cAAMQ,QAAQ,GAAG;AAAA;AAAA,4CAAaC,GAAb,CAAiBC,mBAAjB,CAAqC,KAAKV,MAA1C,CAAjB;AACA,eAAKW,UAAL,CAAgBC,QAAhB,CAAyBJ,QAAzB,EAJW,CAKX;;AACA,cAAMK,YAAY,GAAGL,QAAQ,CAACM,SAAT,CAAmBC,QAAxC;AACA,cAAMC,WAAW,GAAG;AAAA;AAAA,kCAAQC,MAAR,CAAe,eAAaJ,YAA5B,CAApB;AACA,eAAKK,YAAL,CAAkBC,MAAlB,GAA2BH,WAA3B;AACA,eAAKI,QAAL,CAAcD,MAAd,GAAuB;AAAA;AAAA,kCAAQF,MAAR,CAAeb,OAAO,CAACiB,IAAvB,CAAvB;AACH;;AACDC,QAAAA,QAAQ,GAAS,CAEhB;;AACDC,QAAAA,UAAU,GAAS;AACf,gBAAMA,UAAN;AACH;;AACDC,QAAAA,gBAAgB,CAACC,SAAD,EAAsB;AAClC,eAAKxB,eAAL,GAAuBwB,SAAvB;AACH;;AACSC,QAAAA,SAAS,GAAS;AACxB,gBAAMA,SAAN;AACA;AAAA;AAAA,oCAASC,SAAT,CAAmB;AAAA;AAAA,wCAAWC,WAA9B;;AACA,cAAI,KAAK3B,eAAL,IAAwB,OAAO,KAAKA,eAAZ,IAA+B,UAA3D,EAAuE;AACnE,iBAAKA,eAAL;AACA,iBAAKA,eAAL,GAAuB,IAAvB;AACH;AACJ;;AApCuC,O;;;;;iBAEZ,I;;;;;;;iBAEX,I;;;;;;;iBAEI,I","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { WeaponInfoItem } from '../common/WeaponInfoItem';\r\nimport { RareBookData } from './RareBookData';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { EventMgr } from '../../mgr/EventMgr';\r\nimport { LocalEvent } from '../../define/LocalEvent';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RareBookGetPop')\r\nexport class RareBookGetPop extends ViewPop {\r\n    @property(WeaponInfoItem)\r\n    weaponItem:WeaponInfoItem = null;\r\n    @property(Label)\r\n    lbl_name:Label = null;\r\n    @property(Label)\r\n    lbl_aptitude:Label = null;\r\n    private itemId: number = 0;\r\n    private mClosedCallBack: Function = null;\r\n    onShow(): void {\r\n        this.itemId = this.openData.itemId;\r\n        const itemTab = tab.getData().ItemTableById.getValue(this.itemId);\r\n        const bookInfo = RareBookData.ins.getBookInfoByItemId(this.itemId);\r\n        this.weaponItem.initData(bookInfo)\r\n        // 品阶\r\n        const bookAptitude = bookInfo.bookTable.Aptitude;\r\n        const AptitudeStr = LangMgr.getLab(\"ui_weapon_\"+bookAptitude);\r\n        this.lbl_aptitude.string = AptitudeStr\r\n        this.lbl_name.string = LangMgr.getLab(itemTab.Name);\r\n    }\r\n    register(): void {\r\n        \r\n    }\r\n    unRegister(): void {\r\n        super.unRegister();\r\n    }\r\n    setCloseCallBack(closeFunc: Function) {\r\n        this.mClosedCallBack = closeFunc;\r\n    }\r\n    protected onDestroy(): void {\r\n        super.onDestroy();\r\n        EventMgr.emitLocal(LocalEvent.showNewOver);\r\n        if (this.mClosedCallBack && typeof this.mClosedCallBack == 'function') {\r\n            this.mClosedCallBack();\r\n            this.mClosedCallBack = null;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}