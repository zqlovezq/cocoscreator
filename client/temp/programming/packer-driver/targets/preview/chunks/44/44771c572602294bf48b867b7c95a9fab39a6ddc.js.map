{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/activity/limitedBenefits/LimitedBenefitsPop.ts"],"names":["_decorator","Node","ViewPop","ShowTips","UIMgr","ActivityData","ItemInfo","ItemPoolMgr","ActivityControl","EventMgr","proto","ViewName","tab","AdMgr","ccclass","property","LimitedBenefitsPop","register","onMsg","Ptl","GetLimitedRewardRsp","on_s2c_GetLimitedRewardRsp","onShow","initView","msg","ins","limitedRewardMsg","reward","itemId","num","item","merge","createItem","rewardNode","Error","onClose","onClickClaimBtn","playVideoAd","AdType","AdType_LimitedReward","requestLimitedReward","id","onClickJump","error","code","CommonErrorCode","Succeed","show","viewName","CongratulationPop","data"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,I,OAAAA,I;;AACvBC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Q,iBAAAA,Q;AAAUC,MAAAA,K,iBAAAA,K;;AACVC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,K,oBAAAA,K;;AACAC,MAAAA,Q,iBAAAA,Q;;AAEAC,MAAAA,G,kBAAAA,G;;AACAC,MAAAA,K,kBAAAA,K;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBf,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;oCAGagB,kB,WADZF,OAAO,CAAC,oBAAD,C,UAEHC,QAAQ,CAACd,IAAD,C,UAERc,QAAQ,CAACd,IAAD,C,2BAJb,MACae,kBADb;AAAA;AAAA,8BACgD;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAK5CC,QAAAA,QAAQ,GAAS;AACb;AAAA;AAAA,oCAASC,KAAT,CAAe;AAAA;AAAA,8BAAMC,GAAN,CAAUC,mBAAzB,EAA8C,KAAKC,0BAAnD,EAA+E,IAA/E;AACH;;AACDC,QAAAA,MAAM,GAAS;AACX,eAAKC,QAAL;AACH;;AACDA,QAAAA,QAAQ,GAAE;AACN,cAAIC,GAAG,GAAC;AAAA;AAAA,4CAAaC,GAAb,CAAiBC,gBAAzB;;AACA,cAAGF,GAAG,IAAEA,GAAG,CAACG,MAAJ,CAAWC,MAAX,IAAmB,CAAxB,IAA2BJ,GAAG,CAACG,MAAJ,CAAWE,GAAX,IAAgB,CAA9C,EAAgD;AAC5C,gBAAIC,IAAI,GAAC;AAAA;AAAA,uCAAT;AACAA,YAAAA,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACG,MAAf;AACA;AAAA;AAAA,4CAAYF,GAAZ,CAAgBO,UAAhB,CAA2BF,IAA3B,EAAgC,KAAKG,UAArC;AAEH,WALD,MAKK;AACDC,YAAAA,KAAK,CAAC,cAAD,CAAL;AACA,iBAAKC,OAAL;AACH;AACJ;;AACDC,QAAAA,eAAe,GAAG;AACd;AAAA;AAAA,8BAAMX,GAAN,CAAUY,WAAV,CAAsB;AAAA;AAAA,0BAAIC,MAAJ,CAAWC,oBAAjC,EAAsD,MAAI;AACtD;AAAA;AAAA,oDAAgBd,GAAhB,CAAoBe,oBAApB,CAAyC;AAAA;AAAA,8CAAaf,GAAb,CAAiBC,gBAAjB,CAAkCe,EAA3E;AACH,WAFD;AAIH;;AAEDC,QAAAA,WAAW,GAAG;AACV;AAAA;AAAA,oCAAS,QAAT;AACH,SAhC2C,CAiC5C;;;AACArB,QAAAA,0BAA0B,CAACG,GAAD,EAAqC;AAC3D,cAAI,CAACA,GAAG,CAACmB,KAAL,IAAcnB,GAAG,CAACmB,KAAJ,CAAUC,IAAV,IAAkB;AAAA;AAAA,8BAAMC,eAAN,CAAsBC,OAA1D,EAAmE;AAC/D;AAAA;AAAA,gCAAMrB,GAAN,CAAUsB,IAAV,CAAe;AAAEC,cAAAA,QAAQ,EAAE;AAAA;AAAA,wCAASC,iBAArB;AAAwCC,cAAAA,IAAI,EAAE,CAAC1B,GAAG,CAACG,MAAL;AAA9C,aAAf;AACA,iBAAKQ,OAAL;AACH;AACJ;;AAvC2C,O;;;;;iBAEzB,I;;;;;;;iBAEF,I","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { ViewPop } from '../../../../framework/base/ViewPop';\r\nimport { ShowTips, UIMgr } from '../../../mgr/UIMgr';\r\nimport { ActivityData } from '../ActivityData';\r\nimport { ItemInfo } from '../../item/ItemInfo';\r\nimport { ItemPoolMgr } from '../../item/ItemPoolMgr';\r\nimport { ActivityControl } from '../ActivityControl';\r\nimport { EventMgr } from '../../../mgr/EventMgr';\r\nimport { proto } from 'client_protocol';\r\nimport { ViewName } from '../../../define/ViewDefine';\r\nimport { PlatformMgr } from '../../../mgr/PlatformMgr';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { AdMgr } from '../../AdMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * LimitedBenefitsPop\r\n * zhudingchao\r\n * Wed Jun 19 2024 14:31:49 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/activity/limitedBenefits/LimitedBenefitsPop.ts\r\n *\r\n */\r\n\r\n@ccclass('LimitedBenefitsPop')\r\nexport class LimitedBenefitsPop extends ViewPop {\r\n    @property(Node)\r\n    rewardNode: Node = null;\r\n    @property(Node)\r\n    jumpNode: Node = null;\r\n    register(): void {\r\n        EventMgr.onMsg(proto.Ptl.GetLimitedRewardRsp, this.on_s2c_GetLimitedRewardRsp, this)\r\n    }\r\n    onShow(): void {\r\n        this.initView();\r\n    }\r\n    initView(){\r\n        let msg=ActivityData.ins.limitedRewardMsg;\r\n        if(msg&&msg.reward.itemId!=0&&msg.reward.num!=0){\r\n            let item=new ItemInfo()\r\n            item.merge(msg.reward);\r\n            ItemPoolMgr.ins.createItem(item,this.rewardNode);\r\n\r\n        }else{\r\n            Error(\"限时奖励数据错误关闭界面\");\r\n            this.onClose();\r\n        }\r\n    }\r\n    onClickClaimBtn() {\r\n        AdMgr.ins.playVideoAd(tab.AdType.AdType_LimitedReward,()=>{\r\n            ActivityControl.ins.requestLimitedReward(ActivityData.ins.limitedRewardMsg.id);\r\n        })\r\n       \r\n    }\r\n\r\n    onClickJump() {\r\n        ShowTips(\"前往月卡界面\")\r\n    }\r\n    // 限时奖励消息推送\r\n    on_s2c_GetLimitedRewardRsp(msg: proto.Msg_GetLimitedRewardRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: [msg.reward] });\r\n            this.onClose();\r\n        }\r\n    }\r\n}"]}