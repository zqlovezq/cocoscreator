{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/mail/MailListItem.ts"],"names":["_decorator","Label","Node","ComponentBase","TimeUtil","LangMgr","proto","ccclass","property","MailListItem","info","touchCallBcak","register","initData","selectNode","active","Type","SysMailType","Gm","nameLab","string","Title","nameLab2","getLab","timeLab","getCombineString","getLeftDay","Number","ExpireAt","timeLab2","setShowState","setSelectState","b","notRedaNode","readNode","gotNode","cangetNode","isRead","Rewards","length","IsRewardsReceived","onClickBtn"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\r\nimport { ComponentBase } from '../../../framework/base/ComponentBase';\r\nimport { MailInfo } from './MailInfo';\r\nimport { TimeUtil } from '../../utils/TimeUtil';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { proto } from 'client_protocol';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * MailListItem\r\n * zhudingchao\r\n * Mon Jun 03 2024 10:55:16 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/mail/MailListItem.ts\r\n *\r\n */\r\n\r\n@ccclass('MailListItem')\r\nexport class MailListItem extends ComponentBase {\r\n    @property(Label)\r\n    nameLab:Label=null;\r\n    @property(Label)\r\n    timeLab:Label=null;\r\n    @property(Label)\r\n    nameLab2:Label=null;\r\n    @property(Label)\r\n    timeLab2:Label=null;\r\n    @property(Node)\r\n    selectNode:Node=null;\r\n    @property(Node)\r\n    notSelectNode:Node=null;\r\n    @property(Node)\r\n    gotNode:Node=null;\r\n    @property(Node)\r\n    cangetNode:Node=null;\r\n    @property(Node)\r\n    readNode:Node=null;\r\n    @property(Node)\r\n    notRedaNode:Node=null;\r\n\r\n    public info:MailInfo;\r\n    private touchCallBcak:Function;\r\n\r\n\r\n    register(): void {\r\n        \r\n    }\r\n    initData(info:MailInfo,touchCallBcak:Function){\r\n        this.info=info;\r\n        this.selectNode.active=false;\r\n        if(info.Type==proto.SysMailType.Gm){\r\n            this.nameLab.string=info.Title;\r\n            this.nameLab2.string=info.Title;\r\n        }else{\r\n            this.nameLab.string=LangMgr.getLab(info.Title);\r\n            this.nameLab2.string=LangMgr.getLab(info.Title);\r\n        }\r\n    \r\n        //let timeLab=\"剩余\"+TimeUtil.getLeftDay(Number(info.ExpireAt))+\"天\";\r\n        let timeLab=LangMgr.getCombineString(\"ui_mail_3\", [TimeUtil.getLeftDay(Number(info.ExpireAt))]);\r\n        this.timeLab.string=timeLab;\r\n        this.timeLab2.string=timeLab;\r\n        this.touchCallBcak=touchCallBcak;\r\n        this.setShowState();\r\n        // this.gotNode\r\n\r\n    }\r\n    setSelectState(b:boolean){\r\n        this.selectNode.active=b;\r\n    }\r\n    setShowState(){\r\n        this.notRedaNode.active=false;\r\n        this.readNode.active=false;\r\n        this.gotNode.active=false;\r\n        this.cangetNode.active=false;\r\n        if(this.info.isRead){\r\n            if(this.info.Rewards.length>0){\r\n                if(this.info.IsRewardsReceived){\r\n                    this.gotNode.active=true;\r\n                }else{\r\n                    this.cangetNode.active=true;\r\n                }\r\n            }else{\r\n               this.readNode.active=true;\r\n            }\r\n        }else{\r\n            this.notRedaNode.active=true;\r\n        }\r\n    }\r\n\r\n    onClickBtn(){\r\n        if(this.touchCallBcak){\r\n            this.touchCallBcak(this);\r\n        }\r\n\r\n    }\r\n}"]}