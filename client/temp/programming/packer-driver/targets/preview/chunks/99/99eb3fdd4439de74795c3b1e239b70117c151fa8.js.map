{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/activity/wonderfulActivity/Hero7GiftPackPop.ts"],"names":["_decorator","Label","Node","Sprite","Toggle","ViewPop","DEVELOPTYPE","RoleData","HeroDataControl","UIMgr","ViewName","LangMgr","tab","ItemInfo","ItemPoolMgr","PayControl","PayData","ChannelMgr","RedMgr","RedDotType","ccclass","property","Hero7GiftPackPop","_view_type","NONE","_click_day","_cur_day","_tabID","node_day_toggle","register","unRegister","onShow","HERO","newDate","Date","ins","createTime","tomorrow","getFullYear","getMonth","getDate","times","getServerUtcTime","getTime","nowDay","Math","ceil","day","node","getChildByName","active","getComponent","isChecked","node_btn_toggle","setView","onDestroy","Number","clientData","SevenGiftPack","setClientData","String","refreshEvent","Seven_Gift_Pack","node_hero","node_weapon","node_sp_hero","node_sp_weapon","node_book_btn","setDay","giftData","getData","NewPlayerDailyGiftTableById","getValue","lbl_view_desc","string","getCombineString","CreateDay","node_price","node_got","payInfoMsg","newPlayerDailyGiftInfo","boughtGoodsIds","indexOf","Id","node_no_reach","rechargeTab","RechargeTableById","RechargeId","lbl_price","getSdkRechargeShowPrice","sp_value","setTexture","DiscountIcon","createAward","switchView","e","type","BOOK","switchDay","clickHeroDesc","hideView","refreshBookData","show","viewName","HeroBagView","data","viewType","zIndex","jumpLayer","Module","Module_RareBookView","node_layout","destroyAllChildren","i","RewardItemIds","length","awardInfo","itemId","num","RewardItemNum","createRewadItem","clicRMBkBuy","self","requestPay","push"],"mappings":"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","sourcesContent":["import { _decorator, Component, EventTouch, Label, Node, SpringJoint2D, Sprite, Toggle } from 'cc';\r\nimport { ViewPop } from '../../../../framework/base/ViewPop';\r\nimport { DEVELOPTYPE } from '../../../../Common/script/EnumTypeMgr';\r\nimport { RoleData } from '../../role/RoleData';\r\nimport { HeroDataControl } from '../../hero/herobag/HeroDataControl';\r\nimport { UIMgr } from '../../../mgr/UIMgr';\r\nimport { ViewName } from '../../../define/ViewDefine';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { ItemInfo } from '../../item/ItemInfo';\r\nimport { ItemPoolMgr } from '../../item/ItemPoolMgr';\r\nimport { PayControl } from '../../pay/PayControl';\r\nimport { PayData } from '../../pay/PayData';\r\nimport { HeroStar } from '../../hero/HeroStar';\r\nimport { ChannelMgr } from '../../../../channel/ChannelMgr';\r\nimport { RedMgr } from '../../../mgr/RedMgr';\r\nimport { RedDotType } from '../../../red/RedDotType';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Hero7GiftPackPop')\r\nexport class Hero7GiftPackPop extends ViewPop {\r\n    @property(Label)\r\n    lbl_hero_desc: Label = null;\r\n    @property(Label)\r\n    lbl_weapon_desc: Label = null;\r\n    @property(Node)\r\n    node_btn_toggle: Node = null;\r\n    @property(Node)\r\n    node_book_btn: Node = null;\r\n    @property(Node)\r\n    node_no_reach: Node = null;\r\n    @property(Node)\r\n    node_price: Node = null;\r\n    @property(Node)\r\n    node_got: Node = null;\r\n    @property(Label)\r\n    lbl_view_desc: Label = null;\r\n    @property(Node)\r\n    node_layout: Node = null;\r\n    @property(Label)\r\n    lbl_price: Label = null;\r\n    @property(Sprite)\r\n    sp_value: Sprite = null;\r\n    @property(Node)\r\n    node_hero: Node = null;\r\n    @property(Node)\r\n    node_weapon: Node = null;\r\n\r\n    @property(Node)\r\n    node_sp_hero: Node = null;\r\n    @property(Node)\r\n    node_sp_weapon: Node = null;\r\n    private _view_type: DEVELOPTYPE = DEVELOPTYPE.NONE\r\n    private _click_day: number = 0;\r\n    private _cur_day: number = 0;\r\n    private _tabID: number = 0;\r\n    private node_day_toggle:Node = null;\r\n    register(): void {\r\n\r\n    }\r\n    unRegister(): void {\r\n        super.unRegister()\r\n    }\r\n    onShow(): void {\r\n        // 进来默认为Hero界面\r\n        this._view_type = DEVELOPTYPE.HERO;\r\n        // \r\n        const newDate = new Date(RoleData.ins.createTime*1000);\r\n        const tomorrow = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate() + 1);\r\n        const times = RoleData.ins.getServerUtcTime() - tomorrow.getTime()/1000;\r\n        let nowDay = 1;\r\n        if(times>0){\r\n            nowDay = Math.ceil((RoleData.ins.getServerUtcTime()- tomorrow.getTime()/1000) / 86400) + 1;\r\n        }\r\n        const day = nowDay - (this._view_type - 1) * 7\r\n        this._cur_day = nowDay;\r\n        this._click_day = day > 7 ? 7 : day;\r\n        this.node.getChildByName(\"toggle_node1\").active = true;\r\n        this.node.getChildByName(\"toggle_node2\").active = false;\r\n        this.node_day_toggle = this.node.getChildByName(\"toggle_node\"+this._view_type)\r\n        this.node_day_toggle.getChildByName(\"Toggle\" + this._click_day).getComponent(Toggle).isChecked = true;\r\n        this.node_btn_toggle.getChildByName(\"hero_btn\").getComponent(Toggle).isChecked = true;\r\n        this.setView();\r\n    }\r\n    protected onDestroy(): void {\r\n        super.onDestroy()\r\n    }\r\n    setView() {\r\n        if(Number(RoleData.ins.clientData.SevenGiftPack)!==2){\r\n            RoleData.ins.setClientData(\"SevenGiftPack\",String(this._view_type));\r\n            RedMgr.refreshEvent(RedDotType.Seven_Gift_Pack);\r\n        }\r\n        this.node_hero.active = this._view_type === DEVELOPTYPE.HERO;\r\n        this.node_weapon.active = !this.node_hero.active;\r\n        this.node_sp_hero.active = this.node_hero.active\r\n        this.node_sp_weapon.active = !this.node_hero.active\r\n        this.node_book_btn.active = this._cur_day > 7\r\n        this.setDay();\r\n    }\r\n    setDay() {\r\n        this._tabID = this._view_type * 1000 + this._click_day;\r\n        const giftData = tab.getData().NewPlayerDailyGiftTableById.getValue(this._tabID);\r\n        this.lbl_view_desc.string = LangMgr.getCombineString(\"ui_hero7giftpackpop_1\", [giftData.CreateDay]);\r\n        this.node_price.active = this._cur_day >= this._click_day + (this._view_type - 1) * 7;\r\n        this.node_got.active = PayData.ins.payInfoMsg.newPlayerDailyGiftInfo.boughtGoodsIds.indexOf(giftData.Id) > -1;\r\n        this.node_no_reach.active = !this.node_price.active && !this.node_got.active;\r\n        this.lbl_view_desc.node.active = this.node_no_reach.active;\r\n        const rechargeTab = tab.getData().RechargeTableById.getValue(giftData.RechargeId);\r\n        this.lbl_price.string = ChannelMgr.getSdkRechargeShowPrice(rechargeTab);\r\n        this.sp_value.setTexture(giftData.DiscountIcon);\r\n        this.createAward();\r\n    }\r\n    switchView(e: EventTouch, type: string) {\r\n        if (Number(type) == this._view_type) {\r\n            return;\r\n        }\r\n        this._view_type = Number(type);\r\n        const day = this._cur_day - (this._view_type - 1) * 7;\r\n        this._click_day = day > 7 ? 7 : day;\r\n        this.node.getChildByName(\"toggle_node1\").active = this._view_type===DEVELOPTYPE.HERO;\r\n        this.node.getChildByName(\"toggle_node2\").active = this._view_type===DEVELOPTYPE.BOOK;\r\n        this.node_day_toggle = this.node.getChildByName(\"toggle_node\"+this._view_type);\r\n        this.node_day_toggle.getChildByName(\"Toggle\" + this._click_day).getComponent(Toggle).isChecked = true;\r\n        this.setView();\r\n    }\r\n    switchDay(e: EventTouch, day: string) {\r\n        // 根据天数跟viewType显示界面\r\n        if (this._click_day === Number(day)) {\r\n            return;\r\n        }\r\n        this._click_day = Number(day);\r\n        this.setDay();\r\n    }\r\n    // 点击侠客预览\r\n    clickHeroDesc() {\r\n        UIMgr.ins.hideView(\"Hero7GiftPackPop\");\r\n        if (this._view_type === DEVELOPTYPE.HERO) {\r\n            HeroDataControl.ins.refreshBookData(4401);\r\n            UIMgr.ins.show({ viewName: ViewName.HeroBagView, data: { viewType: 2 }, zIndex: 300 })\r\n        } else {\r\n            UIMgr.ins.jumpLayer(tab.Module.Module_RareBookView);\r\n        }\r\n    }\r\n    // 创建奖励\r\n    createAward() {\r\n        // 根据viewtype+day算出ID\r\n        this.node_layout.destroyAllChildren();\r\n        const giftData = tab.getData().NewPlayerDailyGiftTableById.getValue(this._tabID);\r\n        for (let i = 0; i < giftData.RewardItemIds.length; i++) {\r\n            const awardInfo = new ItemInfo();\r\n            awardInfo.itemId = giftData.RewardItemIds[i];\r\n            awardInfo.num = giftData.RewardItemNum[i];\r\n            ItemPoolMgr.ins.createRewadItem(awardInfo, this.node_layout);\r\n        }\r\n    }\r\n    // 点击购买奖励\r\n    clicRMBkBuy() {\r\n        var self = this;\r\n        const giftData = tab.getData().NewPlayerDailyGiftTableById.getValue(this._tabID);\r\n        PayControl.ins.requestPay(giftData.RechargeId, () => {\r\n            if (PayData.ins.payInfoMsg.newPlayerDailyGiftInfo.boughtGoodsIds.indexOf(giftData.Id) === -1) {\r\n                PayData.ins.payInfoMsg.newPlayerDailyGiftInfo.boughtGoodsIds.push(giftData.Id);\r\n            }\r\n            this.setDay();\r\n        })\r\n    }\r\n}\r\n\r\n\r\n"]}