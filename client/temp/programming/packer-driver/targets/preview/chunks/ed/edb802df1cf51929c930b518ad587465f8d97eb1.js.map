{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/view/rogue/RogueWeaponItem.ts"],"names":["_decorator","instantiate","Node","Prefab","RogueBaseItem","RogueWeaponHeroItem","WeaponInfoItem","RareBookData","ccclass","property","RogueBookItem","setData","info","heroItemId","nn","heroPfb","parentNode","addChild","getComponent","ifFullId","RogueFullPfb","weaponPfb","bookInfo","ins","getBookInfoByItemId","rogueTab","BookId","initData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAoBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;;AAGjDC,MAAAA,a,iBAAAA,a;;AAEAC,MAAAA,mB,iBAAAA,mB;;AACAC,MAAAA,c,iBAAAA,c;;AAEAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;+BAIjBU,a,WADZF,OAAO,CAAC,eAAD,C,UAEHC,QAAQ,CAACN,MAAD,C,UAGRM,QAAQ,CAACN,MAAD,C,UAERM,QAAQ,CAACN,MAAD,C,UAKRM,QAAQ,CAACP,IAAD,C,2BAZb,MACaQ,aADb;AAAA;AAAA,0CACiD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAe7CC,QAAAA,OAAO,CAACC,IAAD,EAAkB;AACrB,gBAAMD,OAAN,CAAcC,IAAd;;AAEA,cAAIA,IAAI,CAACC,UAAT,EAAqB;AACjB,gBAAIC,EAAE,GAAGb,WAAW,CAAC,KAAKc,OAAN,CAApB;AACA,iBAAKC,UAAL,CAAgBC,QAAhB,CAAyBH,EAAzB;AACAA,YAAAA,EAAE,CAACI,YAAH;AAAA;AAAA,4DAAqCP,OAArC,CAA6CC,IAA7C;AACH,WAJD,MAIM,IAAIA,IAAI,CAACO,QAAL,EAAJ,EAAoB;AACtB,gBAAIL,GAAE,GAAGb,WAAW,CAAC,KAAKmB,YAAN,CAApB;;AACA,iBAAKJ,UAAL,CAAgBC,QAAhB,CAAyBH,GAAzB;AACH,WAHK,MAGC;AACH,gBAAIA,IAAE,GAAGb,WAAW,CAAC,KAAKoB,SAAN,CAApB;;AACA,iBAAKL,UAAL,CAAgBC,QAAhB,CAAyBH,IAAzB;AAEA,gBAAIQ,QAAQ,GAAG;AAAA;AAAA,8CAAaC,GAAb,CAAiBC,mBAAjB,CAAqCZ,IAAI,CAACa,QAAL,CAAcC,MAAnD,CAAf,CAJG,CAKH;AACA;;AACAZ,YAAAA,IAAE,CAACI,YAAH;AAAA;AAAA,kDAAgCS,QAAhC,CAAyCL,QAAzC,EAAkDV,IAAlD;AACH;AAEJ;;AAnC4C,O;;;;;iBAEzB,I;;;;;;;iBAGF,I;;;;;;;iBAEK,I;;;;;;;iBAKJ,I","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, Prefab, sp, Sprite } from \"cc\";\nimport { RogueInfo } from \"./RogueInfo\";\nimport { tab } from \"../../../../Table/table_gen\";\nimport { RogueBaseItem } from \"./RogueBaseItem\";\nimport { LangMgr } from \"../../../mgr/LangMgr\";\nimport { RogueWeaponHeroItem } from \"./RogueWeaponHeroItem\";\nimport { WeaponInfoItem } from \"../../../model/common/WeaponInfoItem\";\nimport { RareBookInfo } from \"../../../model/rareBook/RareBookInfo\";\nimport { RareBookData } from \"../../../model/rareBook/RareBookData\";\nimport { ItemInfo } from \"../../../model/item/ItemInfo\";\n\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('RogueBookItem')\nexport class RogueBookItem extends RogueBaseItem {\n    @property(Prefab)\n    weaponPfb: Prefab = null\n\n    @property(Prefab)\n    heroPfb: Prefab = null\n    @property(Prefab)\n    RogueFullPfb: Prefab = null\n\n    \n\n    @property(Node)\n    parentNode: Node = null\n\n\n    setData(info: RogueInfo) {\n        super.setData(info)\n\n        if (info.heroItemId) {\n            let nn = instantiate(this.heroPfb)\n            this.parentNode.addChild(nn)\n            nn.getComponent(RogueWeaponHeroItem).setData(info)\n        }else if (info.ifFullId()){\n            let nn = instantiate(this.RogueFullPfb)\n            this.parentNode.addChild(nn)\n        } else {\n            let nn = instantiate(this.weaponPfb)\n            this.parentNode.addChild(nn)\n\n            let bookInfo = RareBookData.ins.getBookInfoByItemId(info.rogueTab.BookId)\n            // let bookInfo = new RareBookInfo()\n            // bookInfo.initItemId(info.rogueTab.BookId)\n            nn.getComponent(WeaponInfoItem).initData(bookInfo,info)\n        }\n\n    }\n}"]}