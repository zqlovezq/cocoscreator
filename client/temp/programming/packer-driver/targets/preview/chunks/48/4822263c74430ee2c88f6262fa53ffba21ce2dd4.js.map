{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/hero/herobag/HeroSkillPop.ts"],"names":["_decorator","instantiate","Label","Node","Prefab","Sprite","ViewPop","tab","HeroSkillPopItem","LangMgr","HeroSkillItem","ccclass","property","HeroSkillPop","_type","HeroStarDescType","HeroStarDescType_None","_heroInfo","register","onShow","openData","type","heroInfo","_skillData","getHeroSkillMap","get","_skillIcon","_bgIcon","heroAptitudeTable","SkillBg","isShort","HeroStarDescType_First","parentNode","node_short_content","node_long_content","node_short","active","node_long","idx","DescType","indexOf","hero_short_skill_item","initData","sp_short_bg","setTexture","lbl_short_skill_type","string","getLab","lbl_short_skill_name","StarName","split","hero_long_skill_item","sp_long_bg","lbl_long_skill_type","lbl_long_skill_name","removeAllChildren","i","length","item","pfb_skill_item","ts","getComponent","setData","parent","setSkillImgActive"],"mappings":"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","sourcesContent":["/*\r\n * @Date: 2024-05-14 15:09:51\r\n * @LastEditors: wzq\r\n * @LastEditTime: 2024-06-11 16:28:42\r\n */\r\n\r\nimport { _decorator, Component, instantiate, Label, Node, Prefab, Sprite } from 'cc';\r\nimport { ViewPop } from '../../../../framework/base/ViewPop';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { HeroSkillPopItem } from './HeroSkillPopItem';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nimport { HeroSkillItem } from './HeroSkillItem';\r\nimport { HeroInfo } from '../HeroInfo';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HeroSkillPop')\r\nexport class HeroSkillPop extends ViewPop {\r\n    @property(Prefab)\r\n    pfb_skill_item:Prefab = null;\r\n    \r\n    // @property(Sprite)\r\n    // sp_long_icon:Sprite = null;\r\n\r\n    @property(Label)\r\n    lbl_long_skill_name:Label = null;\r\n    @property(Label)\r\n    lbl_long_skill_type:Label = null;\r\n\r\n    // @property(Sprite)\r\n    // sp_short_icon:Sprite = null;\r\n    @property(Sprite)\r\n    sp_short_bg:Sprite = null;\r\n    @property(Sprite)\r\n    sp_long_bg:Sprite = null;\r\n\r\n    @property(Label)\r\n    lbl_short_skill_name:Label = null;\r\n    @property(Label)\r\n    lbl_short_skill_type:Label = null;\r\n\r\n    @property(Node)\r\n    node_short_content:Node = null;\r\n    @property(Node)\r\n    node_long_content:Node = null;\r\n    @property(Node)\r\n    node_short:Node = null;\r\n    @property(Node)\r\n    node_long:Node = null;\r\n\r\n    @property(HeroSkillItem)\r\n    hero_short_skill_item:HeroSkillItem = null;\r\n\r\n    @property(HeroSkillItem)\r\n    hero_long_skill_item:HeroSkillItem = null;\r\n\r\n    private _type:tab.HeroStarDescType = tab.HeroStarDescType.HeroStarDescType_None\r\n    private _heroInfo:HeroInfo = null;\r\n    register(): void {\r\n        \r\n    }\r\n    onShow(): void {\r\n        this._type = this.openData.type;\r\n        this._heroInfo = this.openData.heroInfo;\r\n\r\n        let _skillData = this._heroInfo.getHeroSkillMap().get(this._type);\r\n        let _skillIcon = this._heroInfo[\"SkillIcon\" + this._type];\r\n        let _bgIcon = this._heroInfo.heroAptitudeTable.SkillBg;\r\n\r\n        let isShort:boolean = this._type===tab.HeroStarDescType.HeroStarDescType_First;\r\n        let parentNode = isShort?this.node_short_content:this.node_long_content;\r\n        this.node_short.active = isShort;\r\n        this.node_long.active = !isShort;\r\n        let idx = _skillData[0].DescType.indexOf(this._type)\r\n        if(isShort){\r\n            this.hero_short_skill_item.initData(this._type,this._heroInfo);\r\n            this.sp_short_bg.setTexture(_bgIcon)\r\n            this.lbl_short_skill_type.string =  LangMgr.getLab(tab.HeroStarDescType[this._type]);\r\n            this.lbl_short_skill_name.string = LangMgr.getLab(_skillData[0].StarName[idx]).split(\"·\")[0]\r\n        }else{\r\n            this.hero_long_skill_item.initData(this._type,this._heroInfo);\r\n            this.sp_long_bg.setTexture(_bgIcon)\r\n            this.lbl_long_skill_type.string =  LangMgr.getLab(tab.HeroStarDescType[this._type]);\r\n            this.lbl_long_skill_name.string = LangMgr.getLab(_skillData[0].StarName[idx]).split(\"·\")[0]\r\n        }\r\n\r\n        parentNode.removeAllChildren();\r\n        for(let i=0;i<_skillData.length;i++){\r\n            let item = instantiate(this.pfb_skill_item);\r\n            let ts = item.getComponent(HeroSkillPopItem);\r\n            idx = _skillData[i].DescType.indexOf(this._type)\r\n            ts.setData(_skillData[i],this._heroInfo,idx);\r\n            item.parent = parentNode;\r\n        }\r\n        this.hero_short_skill_item.setSkillImgActive(false);\r\n        this.hero_long_skill_item.setSkillImgActive(false);\r\n    }\r\n}\r\n\r\n\r\n"]}