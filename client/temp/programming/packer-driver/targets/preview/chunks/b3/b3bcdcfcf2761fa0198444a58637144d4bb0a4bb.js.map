{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/activity/ActivityData.ts"],"names":["_decorator","tab","EventMgr","LocalEvent","RedDotType","RedMgr","OpenFunctionMgr","ActivityOpenInfo","DEVELOPTYPE","PayData","TaskData","ccclass","property","ActivityData","_limitedRewardMsg","_dailyRewardMap","_dailyRewardItemsMap","_heroCollectionMsg","_breakEggMsg","_redPointMap","_monthlyPassInfo","_vipMsg","_7GiftPackBuyState","Map","_heroGrowMap","_heroUpArray","_rechargeArray","_rechargeMap","_rechargeTabMap","_openActMap","ins","_instance","purge","limitedRewardMsg","msg","isShowLimit","reward","itemId","num","dailyRewardMap","addDailyRewardMsg","set","id","tables","getData","DailyRewardTable","table","find","a","Id","Type","DailyRewardType","DailyRewardType_NewServer","refreshEvent","NewPlayerSignIn","DailyRewardType_Daily","SignIn","getDailyRewardSucc","data","getDailyRewardMsgById","get","isOpenDailyAcivity","type","getDailyRewardMsgByType","checkFunctionIsOpen","OpenFunctionName","OpenFunctionName_NewServerSignIn","OpenFunctionName_DailySignIn","dailyRewardItemsMap","tabs","DailyRewardItemTable","key","list","push","forEach","value","getDailyRewrdItemsById","heroCollectionMsg","getHeroCollectionRewardSucc","rewardList","index","activatedList","indexOf","splice","isOpenHeroCollectio","isHeroCollectioRedPoint","length","breakEggMsg","emitLocal","BreakEgg_change","isOpenBreakEgg","monthlyPassInfo","vipMsg","initOpenActivityMap","actMsg","clear","info","merge","activityTable","isOpen","OpenFunctionName_ActivityGachaUp","OpenFunctionName_ActivityCumulativeRecharge","sort","act1","act2","endTime","openFunctions","GachaUpIsOpen","getAllUpData","getAllUpTasks","activityId","i","activityInfo","TabId","actTab","GachaUpTableById","getValue","Param1","TaskIds","getAllUpCanReceiveTasks","arr","tasks","taskInfo","getGachaUpTaskInfo","isCanReceived","getAllUpGotTaskProgress","max","cur","isReceived","getAllActivityGroup","OpenFunctionName_ActivityShowGroup","getActivityIsOpenByOPName","opName","has","refresh7GiftPackBuyState","HERO","BOOK","k","NewPlayerDailyGiftTable","_giftTab","Group","payInfoMsg","newPlayerDailyGiftInfo","boughtGoodsIds","console","log","get7GiftPackBuyState","getNewPlayerSignAwards","day","Index","initActivityHeroGrow","activityHeroGrowMap","initActivityRecharge","cumulativeRechargeMap","getRechargeServerData","getHeroGrowData","getRechargeData","refreshHeroGrowData","star","heroGrowData","receivedFreeRewardStars","getHeroGrowTabs","tabArr","ActivityHeroGrowTable","tabData","heroId","HeroId","boughtNotFreeRewardTimesMap","HeroStar","getMallItemTabsById","mallName","MallItemTabe","mallTab","MallId","getAllTabsByRechageId","tabId","ActivityCumulativeRechargeTable","rechargeTab","ActivityId","IndexId","getRechargeTabById"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { IClear } from '../../../framework/base/IAbs';\r\nimport { proto } from 'client_protocol';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { EventMgr } from '../../mgr/EventMgr';\r\nimport { LocalEvent } from '../../define/LocalEvent';\r\nimport { RedDotType } from '../../red/RedDotType';\r\nimport { RedMgr } from '../../mgr/RedMgr';\r\nimport { OpenFunctionMgr } from '../../../Common/component/OpenFunctionMgr';\r\nimport { ActivityOpenInfo } from './ActivityOpenInfo';\r\nimport { MALLNAME, DEVELOPTYPE } from '../../../Common/script/EnumTypeMgr';\r\nimport { PayData } from '../pay/PayData';\r\nimport { TaskData } from '../task/TaskData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * ActivityData\r\n * zhudingchao\r\n * Wed Jun 19 2024 14:53:46 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/activity/ActivityData.ts\r\n *\r\n */\r\n\r\n@ccclass('ActivityData')\r\nexport class ActivityData implements IClear {\r\n    private static _instance: ActivityData;\r\n    private _limitedRewardMsg: proto.Msg_LimitedRewardPush;\r\n    private _dailyRewardMap: Map<number, proto.Msg_DailyRewardPush>;\r\n    private _dailyRewardItemsMap: Map<number, Array<tab.DailyRewardItemTable>>;\r\n    private _heroCollectionMsg: proto.Msg_HeroCollectionPush;\r\n    private _breakEggMsg: proto.Msg_BreakEggPush;\r\n    private _redPointMap: Map<tab.OpenFunctionName, boolean>;\r\n    private _monthlyPassInfo: proto.Msg_GetPrivilegeInfoRsp;\r\n    private _vipMsg: proto.Msg_GetVipInfoRsp;\r\n    private _7GiftPackBuyState: Map<number, boolean> = new Map();\r\n    private _heroGrowMap: Map<number, proto.HeroGrow> = new Map();\r\n    private _heroUpArray: ActivityOpenInfo[] = [];\r\n    private _rechargeArray:ActivityOpenInfo[] = [];\r\n    private _rechargeMap: Map<number, proto.CumulativeRecharge> = new Map();\r\n    private _rechargeTabMap: Map<number, tab.ActivityCumulativeRechargeTable> = new Map();\r\n\r\n    /**活动开启数据map */\r\n    private _openActMap: Map<tab.OpenFunctionName, ActivityOpenInfo>;\r\n    public static get ins() {\r\n        if (null == this._instance) {\r\n            this._instance = new ActivityData();\r\n        }\r\n        return this._instance;\r\n    }\r\n    purge() {\r\n\r\n    }\r\n    set limitedRewardMsg(msg: proto.Msg_LimitedRewardPush) {\r\n        this._limitedRewardMsg = msg;\r\n    }\r\n    /**\r\n     * 限时奖励消息\r\n     */\r\n    get limitedRewardMsg() {\r\n        return this._limitedRewardMsg;\r\n    }\r\n    /**\r\n     * 是否显示显示活动按钮\r\n     * @returns \r\n     */\r\n    isShowLimit() {\r\n        if (!this.limitedRewardMsg) {\r\n            return false;\r\n        }\r\n        return this.limitedRewardMsg.reward.itemId != 0 && this.limitedRewardMsg.reward.num != 0;\r\n\r\n    }\r\n    /**\r\n     * 每日奖励数据map\r\n     */\r\n    get dailyRewardMap() {\r\n        if (!this._dailyRewardMap) {\r\n            this._dailyRewardMap = new Map();\r\n        }\r\n        return this._dailyRewardMap;\r\n    }\r\n    addDailyRewardMsg(msg: proto.Msg_DailyRewardPush) {\r\n        this.dailyRewardMap.set(msg.id, msg);\r\n        let tables = tab.getData().DailyRewardTable;\r\n        let table = tables.find(a => a.Id == msg.id);\r\n        msg[\"type\"] = table ? table.Type : 0;\r\n        if (table) {\r\n            if (table.Type == tab.DailyRewardType.DailyRewardType_NewServer) {\r\n                RedMgr.refreshEvent(RedDotType.NewPlayerSignIn);\r\n            } else if (table.Type == tab.DailyRewardType.DailyRewardType_Daily) {\r\n                RedMgr.refreshEvent(RedDotType.SignIn);\r\n            }\r\n        }\r\n\r\n    }\r\n    getDailyRewardSucc(msg: proto.Msg_GetDailyRewardRsp) {\r\n        this.addDailyRewardMsg(msg.data as proto.Msg_DailyRewardPush)\r\n    }\r\n    getDailyRewardMsgById(id: number) {\r\n        return this.dailyRewardMap.get(id);\r\n    }\r\n    isOpenDailyAcivity(type: number) {\r\n        let msg = this.getDailyRewardMsgByType(type);\r\n        if (msg) {\r\n            if (type == tab.DailyRewardType.DailyRewardType_NewServer) {\r\n                return OpenFunctionMgr.ins.checkFunctionIsOpen(tab.OpenFunctionName.OpenFunctionName_NewServerSignIn)\r\n            } else if (type == tab.DailyRewardType.DailyRewardType_Daily) {\r\n                return OpenFunctionMgr.ins.checkFunctionIsOpen(tab.OpenFunctionName.OpenFunctionName_DailySignIn)\r\n            }\r\n\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    private get dailyRewardItemsMap() {\r\n        if (!this._dailyRewardItemsMap) {\r\n            this._dailyRewardItemsMap = new Map();\r\n            let tabs = tab.getData().DailyRewardItemTable;\r\n            for (let key in tabs) {\r\n                let list = this._dailyRewardItemsMap.get(tabs[key].Id);\r\n                if (!list) {\r\n                    list = [];\r\n                    this._dailyRewardItemsMap.set(tabs[key].Id, list);\r\n                }\r\n                list.push(tabs[key]);\r\n            }\r\n        }\r\n        return this._dailyRewardItemsMap;\r\n    }\r\n    getDailyRewardMsgByType(type: number) {\r\n        let msg: proto.Msg_DailyRewardPush = null;\r\n        this.dailyRewardMap.forEach((value) => {\r\n            if (value[\"type\"] == type) {\r\n                msg = value;\r\n                return msg;\r\n            }\r\n        })\r\n        return msg;\r\n    }\r\n    getDailyRewrdItemsById(id: number) {\r\n        return this.dailyRewardItemsMap.get(id);\r\n    }\r\n\r\n    /**舰队启航活动数据 */\r\n    get heroCollectionMsg() {\r\n        return this._heroCollectionMsg;\r\n    }\r\n    /**舰队启航活动数据 */\r\n    set heroCollectionMsg(msg: proto.Msg_HeroCollectionPush) {\r\n        this._heroCollectionMsg = msg;\r\n    }\r\n    /**\r\n     * 领取舰队启航奖励成功\r\n     * @param id \r\n     */\r\n    getHeroCollectionRewardSucc(id: number) {\r\n        if (this.heroCollectionMsg) {\r\n            this.heroCollectionMsg.rewardList.push(id);\r\n            let index = this.heroCollectionMsg.activatedList.indexOf(id);\r\n            if (index >= 0) {\r\n                this.heroCollectionMsg.activatedList.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 是否开启舰队启航活动\r\n     */\r\n    isOpenHeroCollectio() {\r\n        return this.heroCollectionMsg ? true : false;\r\n    }\r\n    isHeroCollectioRedPoint() {\r\n        return this.heroCollectionMsg && this.heroCollectionMsg.activatedList.length > 0;\r\n    }\r\n\r\n    /**砸金蛋活动数据 */\r\n    get breakEggMsg() {\r\n        return this._breakEggMsg;\r\n    }\r\n    set breakEggMsg(msg: proto.Msg_BreakEggPush) {\r\n        this._breakEggMsg = msg;\r\n        EventMgr.emitLocal(LocalEvent.BreakEgg_change);\r\n    }\r\n    /**\r\n     * 是否开启砸金蛋活动\r\n     * @returns \r\n     */\r\n    isOpenBreakEgg() {\r\n        if (this._breakEggMsg) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    set monthlyPassInfo(msg: proto.Msg_GetPrivilegeInfoRsp) {\r\n        this._monthlyPassInfo = msg;\r\n    }\r\n    /**\r\n     * 月卡信息\r\n     */\r\n    get monthlyPassInfo() {\r\n        return this._monthlyPassInfo;\r\n    }\r\n    get vipMsg() {\r\n        return this._vipMsg;\r\n    }\r\n    set vipMsg(msg: proto.Msg_GetVipInfoRsp) {\r\n        this._vipMsg = msg;\r\n    }\r\n\r\n    initOpenActivityMap(actMsg: proto.Activity[]) {\r\n        if (this._openActMap) {\r\n            this._openActMap.clear();\r\n        } else {\r\n            this._openActMap = new Map();\r\n        }\r\n\r\n        this._heroUpArray = [];\r\n\r\n        for (let key in actMsg) {\r\n            let info = new ActivityOpenInfo();\r\n            info.merge(actMsg[key]);\r\n            this._openActMap.set(info.activityTable.Type, info);\r\n\r\n            if (info.isOpen() && info.activityTable.Type === tab.OpenFunctionName.OpenFunctionName_ActivityGachaUp) {\r\n                this._heroUpArray.push(info);\r\n            }\r\n            if(info.isOpen()&&info.activityTable.Type===tab.OpenFunctionName.OpenFunctionName_ActivityCumulativeRecharge){\r\n                this._rechargeArray.push(info)\r\n            }\r\n        }\r\n        if(this._heroUpArray.length>1){\r\n            // 按照过期时间排序\r\n            this._heroUpArray.sort((act1,act2)=>{\r\n                return act1.endTime-act2.endTime;\r\n            })\r\n        }\r\n        EventMgr.emitLocal(LocalEvent.openFunctions);\r\n\r\n    }\r\n    GachaUpIsOpen(): boolean {\r\n        return this._heroUpArray.length > 0\r\n    }\r\n    // 获取所有英雄up活动数据\r\n    getAllUpData() {\r\n        return this._heroUpArray;\r\n    }\r\n    getAllUpTasks(activityId: number){\r\n        for (let i = 0; i < this._heroUpArray.length; i++) {\r\n            const activityInfo = this._heroUpArray[i];\r\n            if (activityInfo.TabId === activityId) {\r\n                const actTab = tab.getData().GachaUpTableById.getValue(activityInfo.activityTable.Param1);\r\n                return actTab.TaskIds;\r\n            }\r\n        }\r\n    }\r\n    getAllUpCanReceiveTasks(activityId: number) {\r\n        const arr = [];\r\n        const tasks = this.getAllUpTasks(activityId);\r\n        for(let i=0;i<tasks.length;i++){\r\n            const taskInfo = TaskData.ins.getGachaUpTaskInfo(tasks[i])\r\n            if(taskInfo.isCanReceived){\r\n                arr.push(taskInfo.id);\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n    // 获取所有已经领取的taskId\r\n    getAllUpGotTaskProgress(activityId: number):number{\r\n        const tasks = this.getAllUpTasks(activityId);\r\n        const max = tasks.length;\r\n        let cur = 0;\r\n        for(let i=0;i<tasks.length;i++){\r\n            const taskInfo = TaskData.ins.getGachaUpTaskInfo(tasks[i])\r\n            if(taskInfo.isReceived){\r\n                cur++;\r\n            }\r\n        }\r\n        return cur/max;\r\n    }\r\n    // 获取所有的活动分组\r\n    getAllActivityGroup() {\r\n        const arr: ActivityOpenInfo[] = [];\r\n        this._openActMap.forEach((value, key) => {\r\n            if (key === tab.OpenFunctionName.OpenFunctionName_ActivityShowGroup&&value.isOpen()) {\r\n                arr.push(value);\r\n            }\r\n        })\r\n        return arr;\r\n    }\r\n    getActivityIsOpenByOPName(opName: tab.OpenFunctionName) {\r\n        if (this._openActMap.has(opName)) {\r\n            return this._openActMap.get(opName).isOpen();\r\n        } else {\r\n            return true;\r\n        }\r\n\r\n    }\r\n    /* 判断7日英雄武器礼包是否购买完 */\r\n    refresh7GiftPackBuyState() {\r\n        this._7GiftPackBuyState.clear();\r\n        this._7GiftPackBuyState.set(DEVELOPTYPE.HERO, false);\r\n        this._7GiftPackBuyState.set(DEVELOPTYPE.BOOK, false)\r\n        for (let i = DEVELOPTYPE.HERO; i <= DEVELOPTYPE.BOOK; i++) {\r\n            for (let k = 0; k < tab.getData().NewPlayerDailyGiftTable.length; k++) {\r\n                const _giftTab: tab.NewPlayerDailyGiftTable = tab.getData().NewPlayerDailyGiftTable[k]\r\n                if (i === _giftTab.Group) {\r\n                    if (PayData.ins.payInfoMsg.newPlayerDailyGiftInfo.boughtGoodsIds.indexOf(_giftTab.Id) === -1) {\r\n                        this._7GiftPackBuyState.set(i, true)\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        console.log(this._7GiftPackBuyState);\r\n    }\r\n    get7GiftPackBuyState() {\r\n        return this._7GiftPackBuyState;\r\n    }\r\n    /* 是否有可领取的萌新签到奖励 */\r\n    getNewPlayerSignAwards(): boolean {\r\n        const msg = ActivityData.ins.getDailyRewardMsgByType(tab.DailyRewardType.DailyRewardType_NewServer);\r\n        if (!msg) {\r\n            return false;\r\n        }\r\n        const tabs = ActivityData.ins.getDailyRewrdItemsById(msg.id);\r\n        for (let i = 0; i < tabs.length; i++) {\r\n            let day = tabs[i].Index;\r\n            let index = msg.activatedList.indexOf(day);\r\n            if (index >= 0) {\r\n                return true\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    initActivityHeroGrow(msg: proto.Msg_GetActivityHeroGrowMapRsp) {\r\n        this._heroGrowMap.clear();\r\n        for (let key in msg.activityHeroGrowMap) {\r\n            const value = msg.activityHeroGrowMap[key];\r\n            this._heroGrowMap.set(value.activityId, value as proto.HeroGrow);\r\n        }\r\n    }\r\n    initActivityRecharge(msg: proto.Msg_GetCumulativeRechargeMapRsp){\r\n        this._rechargeMap.clear();\r\n        for (let key in msg.cumulativeRechargeMap) {\r\n            const value = msg.cumulativeRechargeMap[key];\r\n            this._rechargeMap.set(value.activityId, value as proto.CumulativeRecharge);\r\n        }\r\n    }\r\n    getRechargeServerData(activityId: number){\r\n        return this._rechargeMap.get(activityId);\r\n    }\r\n    getHeroGrowData(activityId: number) {\r\n        return this._heroGrowMap.get(activityId);\r\n    }\r\n    getRechargeData(activityId:number):ActivityOpenInfo{\r\n        for(let i=0;i<this._rechargeArray.length;i++){\r\n            if(activityId===this._rechargeArray[i].TabId){\r\n                return this._rechargeArray[i]\r\n            }\r\n        }\r\n    }\r\n    refreshHeroGrowData(activityId: number, star: number) {\r\n        const heroGrowData = this.getHeroGrowData(activityId);\r\n        heroGrowData.receivedFreeRewardStars.push(star);\r\n    }\r\n    // 获取当前养成计划数据列表\r\n    getHeroGrowTabs(activityId: number, itemId: number): tab.ActivityHeroGrowTable[] {\r\n        const tabArr = [];\r\n        const heroGrowData = this.getHeroGrowData(activityId);\r\n        for (let i = 0; i < tab.getData().ActivityHeroGrowTable.length; i++) {\r\n            const tabData: tab.ActivityHeroGrowTable = tab.getData().ActivityHeroGrowTable[i];\r\n            const heroId = tabData.HeroId;\r\n            if (heroId === itemId) {\r\n                tabArr.push(tabData);\r\n                if (!heroGrowData.boughtNotFreeRewardTimesMap[tabData.HeroStar]) {\r\n                    heroGrowData.boughtNotFreeRewardTimesMap[tabData.HeroStar] = 0;\r\n                }\r\n            }\r\n        }\r\n        return tabArr;\r\n    }\r\n    // 通过mallId获取mallItem数据\r\n    getMallItemTabsById(mallName: MALLNAME): tab.MallItemTabe[] {\r\n        const tabs = [];\r\n        for (let k = 0; k < tab.getData().MallItemTabe.length; k++) {\r\n            const mallTab = tab.getData().MallItemTabe[k];\r\n            if (mallTab.MallId === mallName) {\r\n                tabs.push(mallTab);\r\n            }\r\n        }\r\n        return tabs;\r\n    }\r\n    // 通过tabid获取所有的累充的表格数据\r\n    getAllTabsByRechageId(tabId:number):tab.ActivityCumulativeRechargeTable[]{\r\n        this._rechargeTabMap.clear();\r\n        const tabs = [];\r\n        for (let k = 0; k < tab.getData().ActivityCumulativeRechargeTable.length; k++) {\r\n            const rechargeTab:tab.ActivityCumulativeRechargeTable = tab.getData().ActivityCumulativeRechargeTable[k];\r\n            if (rechargeTab.ActivityId === tabId) {\r\n                tabs.push(rechargeTab);\r\n                this._rechargeTabMap.set(rechargeTab.IndexId,rechargeTab);\r\n            }\r\n        }\r\n        return tabs;\r\n    }\r\n    getRechargeTabById(id){\r\n        return this._rechargeTabMap.get(id);\r\n    }\r\n}"]}