{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/fengyunRanking/FengyunRankData.ts"],"names":["_decorator","RoleData","ccclass","property","FengyunRankData","honorRollMap","ins","_instance","purge","getMapData","initMapData","msg","getHonorRollInfoByActId","actId","isOpenActivity","endTime","activityEndTime","lastTimer","Number","getServerUtcTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AAKAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBH,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;iCAGaI,e,WADZF,OAAO,CAAC,iBAAD,C,2BAAR,MACaE,eADb,CAC+C;AAAA;AAAA,eAEnCC,YAFmC;AAAA;;AAItB,mBAAHC,GAAG,GAAG;AACpB,cAAI,QAAQ,KAAKC,SAAjB,EAA4B;AACxB,iBAAKA,SAAL,GAAiB,IAAIH,eAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKG,SAAZ;AACH;;AACDC,QAAAA,KAAK,GAAG,CAEP;;AACDC,QAAAA,UAAU,GAAG;AACT,iBAAO,KAAKJ,YAAZ;AACH;;AACDK,QAAAA,WAAW,CAACC,GAAD,EAAoC;AAC3C,eAAKN,YAAL,GAAoBM,GAAG,CAACN,YAAxB;AACH;;AACDO,QAAAA,uBAAuB,CAACC,KAAD,EAAgB;AACnC,iBAAO,KAAKR,YAAL,CAAkBQ,KAAlB,CAAP;AACH;;AACDC,QAAAA,cAAc,CAACD,KAAD,EAAgB;AAC1B,cAAI,KAAKR,YAAL,CAAkBQ,KAAlB,CAAJ,EAA8B;AAC1B,gBAAME,OAAO,GAAG,KAAKV,YAAL,CAAkBQ,KAAlB,EAAyBG,eAAzC;;AACA,gBAAID,OAAJ,EAAa;AACT,kBAAME,SAAS,GAAGC,MAAM,CAACH,OAAD,CAAN,GAAkB;AAAA;AAAA,wCAAST,GAAT,CAAaa,gBAAb,EAApC;AACA,qBAAOF,SAAS,GAAG,CAAnB;AACH;;AACD,mBAAO,KAAP;AACH,WAPD,MAOO;AACH,mBAAO,KAAP;AACH,WAVyB,CAW1B;;AACH;;AAlC0C,O,UAC5BV,S","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { IClear } from '../../../framework/base/IAbs';\r\nimport { proto } from 'client_protocol';\r\nimport { OpenFunctionMgr } from '../../../Common/component/OpenFunctionMgr';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { RoleData } from '../role/RoleData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * FengyunRankData\r\n * zhudingchao\r\n * Thu Jul 18 2024 10:15:40 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/fengyunRanking/FengyunRankData.ts\r\n *\r\n */\r\n\r\n@ccclass('FengyunRankData')\r\nexport class FengyunRankData implements IClear {\r\n    private static _instance: FengyunRankData;\r\n    private honorRollMap: { [k: string]: proto.IHonorRoll };\r\n\r\n    public static get ins() {\r\n        if (null == this._instance) {\r\n            this._instance = new FengyunRankData();\r\n        }\r\n        return this._instance;\r\n    }\r\n    purge() {\r\n\r\n    }\r\n    getMapData() {\r\n        return this.honorRollMap;\r\n    }\r\n    initMapData(msg: proto.Msg_GetHonorRollMapRsp) {\r\n        this.honorRollMap = msg.honorRollMap;\r\n    }\r\n    getHonorRollInfoByActId(actId: number) {\r\n        return this.honorRollMap[actId];\r\n    }\r\n    isOpenActivity(actId: number) {\r\n        if (this.honorRollMap[actId]) {\r\n            const endTime = this.honorRollMap[actId].activityEndTime;\r\n            if (endTime) {\r\n                const lastTimer = Number(endTime) - RoleData.ins.getServerUtcTime()\r\n                return lastTimer > 0;\r\n            }\r\n            return false;\r\n        } else {\r\n            return false;\r\n        }\r\n        // OpenFunctionMgr.ins.checkFunctionIsOpen(tab.OpenFunctionName.OpenFunctionName_AchievementTask)\r\n    }\r\n}"]}