{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/home/FunctionUnlockPop.ts"],"names":["_decorator","Animation","AnimationClip","log","ViewPop","tab","EventMgr","LocalEvent","ccclass","property","FunctionUnlockPop","functionName","register","onShow","openData","initView","opTab","getData","OpenFunctionTableByName","getValue","FunctionUnlockAnimation","node","getChildByName","active","anim","getComponent","clips","wrapMode","WrapMode","Normal","play","on","EventType","FINISHED","e","onClose","onDestroy","emitLocal","checkOpenFuncPop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA4BC,MAAAA,S,OAAAA,S;AAAeC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,G,OAAAA,G;;AAC1DC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,G,iBAAAA,G;;AAGAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;mCAGaU,iB,WADZF,OAAO,CAAC,mBAAD,C,gBAAR,MACaE,iBADb;AAAA;AAAA,8BAC+C;AAAA;AAAA;AAAA,eACnCC,YADmC;AAAA;;AAE3CC,QAAAA,QAAQ,GAAS,CAEhB;;AACDC,QAAAA,MAAM,GAAS;AACX,cAAI,KAAKC,QAAL,IAAiB,KAAKA,QAAL,CAAc,cAAd,CAArB,EAAoD;AAChD,iBAAKH,YAAL,GAAoB,KAAKG,QAAL,CAAc,cAAd,CAApB;AACA,iBAAKC,QAAL;AACH;AACJ;;AAEDA,QAAAA,QAAQ,GAAE;AAEN,cAAIC,KAAK,GAAC;AAAA;AAAA,0BAAIC,OAAJ,GAAcC,uBAAd,CAAsCC,QAAtC,CAA+C,KAAKR,YAApD,CAAV;;AACA,cAAGK,KAAH,EAAS;AACL,gBAAGA,KAAK,CAACI,uBAAT,EAAiC;AAC7B,kBAAIC,IAAI,GAAC,KAAKA,IAAL,CAAUC,cAAV,CAAyBN,KAAK,CAACI,uBAA/B,CAAT;;AACA,kBAAGC,IAAH,EAAQ;AACJA,gBAAAA,IAAI,CAACE,MAAL,GAAY,IAAZ;AACA,oBAAIC,IAAI,GAACH,IAAI,CAACI,YAAL,CAAkBxB,SAAlB,CAAT;AAEAuB,gBAAAA,IAAI,CAACE,KAAL,CAAW,CAAX,EAAcC,QAAd,GAAuBzB,aAAa,CAAC0B,QAAd,CAAuBC,MAA9C;AACAL,gBAAAA,IAAI,CAACM,IAAL;AACAN,gBAAAA,IAAI,CAACO,EAAL,CAAQ9B,SAAS,CAAC+B,SAAV,CAAoBC,QAA5B,EAAsCC,CAAC,IAAI;AACvC/B,kBAAAA,GAAG,CAAC,QAAD,CAAH;AACD,uBAAKgC,OAAL;AACF,iBAHD;AAIH;AACJ;AACJ;AACJ;;AAESC,QAAAA,SAAS,GAAS;AACxB,gBAAMA,SAAN;AACA;AAAA;AAAA,oCAASC,SAAT,CAAmB;AAAA;AAAA,wCAAWC,gBAA9B;AAEH;;AArC0C,O","sourcesContent":["import { _decorator, Component, Node,Animation, UI, AnimationClip, log } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { EventMgr } from '../../mgr/EventMgr';\r\nimport { LocalEvent } from '../../define/LocalEvent';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * FunctionUnlockPop\r\n * zhudingchao\r\n * Tue Jul 23 2024 13:58:19 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/home/FunctionUnlockPop.ts\r\n *\r\n */\r\n\r\n@ccclass('FunctionUnlockPop')\r\nexport class FunctionUnlockPop extends ViewPop {\r\n    private functionName:number;\r\n    register(): void {\r\n\r\n    }\r\n    onShow(): void {\r\n        if (this.openData && this.openData[\"functionName\"]) {\r\n            this.functionName = this.openData[\"functionName\"];\r\n            this.initView();\r\n        }\r\n    }\r\n\r\n    initView(){\r\n        \r\n        let opTab=tab.getData().OpenFunctionTableByName.getValue(this.functionName);\r\n        if(opTab){\r\n            if(opTab.FunctionUnlockAnimation){\r\n                let node=this.node.getChildByName(opTab.FunctionUnlockAnimation);\r\n                if(node){\r\n                    node.active=true;\r\n                    let anim=node.getComponent(Animation);\r\n                 \r\n                    anim.clips[0].wrapMode=AnimationClip.WrapMode.Normal;\r\n                    anim.play();\r\n                    anim.on(Animation.EventType.FINISHED, e => {\r\n                        log(\"动画播放完成\")\r\n                       this.onClose();\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    protected onDestroy(): void {\r\n        super.onDestroy();\r\n        EventMgr.emitLocal(LocalEvent.checkOpenFuncPop);\r\n      \r\n    }\r\n}"]}