{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/checkroleInfo/CheckRoleInfoHeroPop.ts"],"names":["_decorator","instantiate","Label","Node","Prefab","sp","Sprite","ViewPop","HeroStar","tab","LangMgr","HeroSkillItem","HeroInfo","HeroDataControl","ViewName","UIMgr","createAnimation","GameUtil","ItemPoolMgr","EquipInfo","RareBookInfo","RareBookSmallItem","EquipmentItem","ccclass","property","CheckRoleInfoHeroPop","Skeleton","heroData","_heroAllAttr","Map","equipComItems","onShow","openData","showAttrData","showAttrSkill","showAttrSimple","updateEquipSlot","updateBook","itemId","itemTab","getData","ItemTableById","getValue","heroTab","HeroTableById","heroClassTab","HeroClassTableByHeroClass","Class","heroAptitudeTab","HeroAptitudeTableByHeroAptitude","Aptitude","itemQualityTab","ins","getItemQualityTableByStar","star","node_star","getComponent","showStar","lbl_power","string","convertNumber","powerScore","lbl_hero_name","getLab","Name","sp_vocation","setTexture","Icon","sp_quality","sp_quality2_img","HeroBagGrowthQuality","lbl_speciality","Speciality","ske_hero","node","Idle","heroInfo","level","id","node_skill_layout","destroyAllChildren","skillMap","getHeroSkillMap","i","iconUrl","skillData","get","skill_item","pfb_skill_item","ts","initData","parent","clear","attrList","length","attr","set","type","Number","value","lbl_attr_atk","String","AttrType","AttrType_Attack","lbl_attr_hp","AttrType_Hp","lbl_attr_def","AttrType_Defence","key","putEquipItem","equals","equipList","equal","_EquipInfo","score","createEquipItem","node_equip_content_2","node_equip_content_1","itemTs","setLv","enhanceLv","refineLv","push","bookData","bookList","bookInfo","item","pfb_small_book","node_book_content","initView","show","viewName","RareBookInfoItemPop","data","clickShowAllAttr","HeroAttrPop","onDestroy","register","unRegister","onDisable"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, Prefab, sp, Sprite } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { proto } from 'client_protocol';\r\nimport { HeroStar } from '../hero/HeroStar';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { HeroSkillItem } from '../hero/herobag/HeroSkillItem';\r\nimport { HeroInfo } from '../hero/HeroInfo';\r\nimport { HeroDataControl } from '../hero/herobag/HeroDataControl';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { createAnimation, GameUtil } from '../../utils/GameUtil';\r\nimport { ItemPoolMgr } from '../item/ItemPoolMgr';\r\nimport { EquipInfo } from '../equip/EquipInfo';\r\nimport { RareBookInfo } from '../rareBook/RareBookInfo';\r\nimport { RareBookSmallItem } from '../rareBook/RareBookSmallItem';\r\nimport { EquipmentItem } from '../item/EquipmentItem';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CheckRoleInfoHeroPop')\r\nexport class CheckRoleInfoHeroPop extends ViewPop {\r\n    @property(Node)\r\n    node_star:Node = null;\r\n    @property(Label)\r\n    lbl_power:Label = null;\r\n    @property(Label)\r\n    lbl_hero_name:Label = null;\r\n    @property(Sprite)\r\n    sp_vocation:Sprite = null;\r\n    @property(Sprite)\r\n    sp_quality:Sprite = null;\r\n    @property(Sprite)\r\n    sp_quality2_img:Sprite = null;\r\n    @property(Label)\r\n    lbl_speciality:Label = null;\r\n    @property(Node)\r\n    node_skill_layout:Node = null;\r\n    @property(Prefab)\r\n    pfb_skill_item:Prefab = null;\r\n    @property(Label)\r\n    lbl_attr_atk:Label = null;\r\n    @property(Label)\r\n    lbl_attr_hp:Label = null;\r\n    @property(Label)\r\n    lbl_attr_def:Label = null;\r\n    @property(sp.Skeleton)\r\n    ske_hero: sp.Skeleton = null;\r\n    @property(Node)\r\n    node_equip_content_1:Node = null;\r\n    @property(Node)\r\n    node_equip_content_2:Node = null;\r\n    @property(Node)\r\n    node_book_content:Node = null;\r\n    @property(Prefab)\r\n    pfb_small_book:Prefab = null;\r\n    private heroData:proto.ISimpleHero = null;\r\n    private _heroAllAttr: Map<tab.AttrType, number> = new Map();\r\n    private equipComItems: Array<Node>;\r\n    onShow(): void {\r\n        this.heroData = this.openData.heroData;\r\n        this.showAttrData();\r\n        this.showAttrSkill();\r\n        this.showAttrSimple();\r\n        this.updateEquipSlot();\r\n        this.updateBook();\r\n    }\r\n    // 设置基本信息\r\n    showAttrData(){\r\n        const itemId = this.heroData.itemId;\r\n        let itemTab = tab.getData().ItemTableById.getValue(itemId);\r\n        let heroTab = tab.getData().HeroTableById.getValue(itemId);\r\n        let heroClassTab = tab.getData().HeroClassTableByHeroClass.getValue(heroTab.Class)\r\n        let heroAptitudeTab = tab.getData().HeroAptitudeTableByHeroAptitude.getValue(heroTab.Aptitude);\r\n        let itemQualityTab = HeroDataControl.ins.getItemQualityTableByStar(this.heroData.star);\r\n        // 星级\r\n        this.node_star.getComponent(HeroStar).showStar(this.heroData.star);\r\n        // 显示战斗力\r\n        this.lbl_power.string = GameUtil.convertNumber(this.heroData.powerScore);\r\n        // 英雄名称\r\n        this.lbl_hero_name.string = LangMgr.getLab(itemTab.Name);\r\n        // 职业\r\n        this.sp_vocation.setTexture(heroClassTab.Icon);\r\n        // 品质\r\n        this.sp_quality.setTexture(heroAptitudeTab.Icon);\r\n        this.sp_quality2_img.setTexture(itemQualityTab.HeroBagGrowthQuality);\r\n        // 职业描述\r\n        this.lbl_speciality.string = LangMgr.getLab(heroTab.Speciality);\r\n        createAnimation(this.ske_hero.node,heroTab.Idle);\r\n    }\r\n    /* 显示技能 */\r\n    showAttrSkill(){\r\n        const itemId = this.heroData.itemId;\r\n        const heroInfo = new HeroInfo();\r\n        heroInfo.star = this.heroData.star;\r\n        heroInfo.itemId = itemId;\r\n        heroInfo.level = this.heroData.level;\r\n        heroInfo.id = 0;\r\n        let heroTab = tab.getData().HeroTableById.getValue(itemId);\r\n        // 技能\r\n        this.node_skill_layout.destroyAllChildren();\r\n        let skillMap = heroInfo.getHeroSkillMap();\r\n        for (let i = 1; i <= 3; i++) {\r\n            let iconUrl = heroTab[\"SkillIcon\" + i];\r\n            if (iconUrl) {\r\n                let skillData: tab.HeroStarUpTable[] = skillMap.get(i);\r\n                if (skillData) {\r\n                    let skill_item = instantiate(this.pfb_skill_item);\r\n                    let ts = skill_item.getComponent(HeroSkillItem);\r\n                    ts.initData(i, heroInfo);\r\n                    skill_item.parent = this.node_skill_layout;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /* 显示简单属性 */\r\n    showAttrSimple(){\r\n        this._heroAllAttr.clear();\r\n        for(let i=0;i<this.heroData.attrList.length;i++){\r\n            const attr = this.heroData.attrList[i];\r\n            this._heroAllAttr.set(attr.type, Number(attr.value));\r\n        }\r\n        this.lbl_attr_atk.string = String(this._heroAllAttr.get(tab.AttrType.AttrType_Attack));\r\n        this.lbl_attr_hp.string = String(this._heroAllAttr.get(tab.AttrType.AttrType_Hp));\r\n        this.lbl_attr_def.string = String(this._heroAllAttr.get(tab.AttrType.AttrType_Defence));\r\n    }\r\n    /* 显示装备 */\r\n    updateEquipSlot() {\r\n        if (this.equipComItems) {\r\n            for (let key in this.equipComItems) {\r\n                ItemPoolMgr.ins.putEquipItem(this.equipComItems[key]);\r\n            }\r\n        }\r\n        this.equipComItems = [];\r\n        let equals: proto.ISimpleHeroEquip[] = this.heroData.equipList;\r\n        for (let key in equals) {\r\n            if (equals[key]) {\r\n                const equal:proto.ISimpleHeroEquip = equals[key]\r\n                const _EquipInfo = new EquipInfo();\r\n                _EquipInfo.itemId = equal.itemId;\r\n                _EquipInfo.score = equal.powerScore;\r\n                let node = null;\r\n                if(equal.itemId>=18012&&equal.itemId<=18014){\r\n                    // 羽毛\r\n                    node = ItemPoolMgr.ins.createEquipItem(_EquipInfo, this.node_equip_content_2);\r\n                }else{\r\n                    node = ItemPoolMgr.ins.createEquipItem(_EquipInfo, this.node_equip_content_1);\r\n                }\r\n                const itemTs = node.getComponent(EquipmentItem);\r\n                itemTs.setLv(equal.enhanceLv,equal.refineLv);\r\n                this.equipComItems.push(node);\r\n            }\r\n        }\r\n    }\r\n    /* 显示秘籍 */\r\n    updateBook(){\r\n        for(let i=0;i<this.heroData.bookList.length;i++){\r\n            const bookData:proto.ISimpleHeroBook = this.heroData.bookList[i];\r\n            const bookInfo = new RareBookInfo();\r\n            bookInfo.itemId = bookData.itemId;\r\n            bookInfo.level = bookData.level;\r\n            bookInfo.star = bookData.star;\r\n            bookInfo.powerScore = bookData.powerScore;\r\n            const item = instantiate(this.pfb_small_book);\r\n            item.parent = this.node_book_content;\r\n            const itemTs = item.getComponent(RareBookSmallItem);\r\n            itemTs.initView(bookInfo,true,()=>{\r\n                UIMgr.ins.show({ viewName: ViewName.RareBookInfoItemPop, data: { \"bookInfo\": bookInfo } });\r\n            })\r\n        }\r\n    }\r\n    /* 点击显示所有属性 */\r\n    clickShowAllAttr(){\r\n        UIMgr.ins.show({ viewName: ViewName.HeroAttrPop, data: { \"attrMap\": this._heroAllAttr } })\r\n    }\r\n    protected onDestroy(): void {\r\n        super.onDestroy();\r\n    }\r\n    register(): void {\r\n        \r\n    }\r\n    unRegister(): void {\r\n        super.unRegister();\r\n    }\r\n    protected onDisable(): void {\r\n        if (this.equipComItems) {\r\n            for (let key in this.equipComItems) {\r\n                ItemPoolMgr.ins.putEquipItem(this.equipComItems[key]);\r\n            }\r\n        }\r\n        this.node_star.getComponent(HeroStar).onDisable();\r\n    }\r\n}\r\n\r\n\r\n"]}