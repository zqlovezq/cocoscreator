{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/activity/ActivityControl.ts"],"names":["_decorator","log","AbsControl","EventMgr","proto","ActivityData","Net","LocalEvent","ActivityRed","RedMgr","RedDotType","RoleData","TaskData","UIMgr","ViewName","ccclass","property","ActivityControl","ins","_instance","purge","register","onMsg","Ptl","LimitedRewardPush","on_s2c_LimitedRewardPush","GetLimitedRewardRsp","on_s2c_GetLimitedRewardRsp","DailyRewardPush","on_s2c_DailyRewardPush","GetDailyRewardRsp","on_s2c_GetDailyRewardRsp","HeroCollectionPush","on_s2c_HeroCollectionPush","GetHeroCollectionRewardRsp","on_s2c_GetHeroCollectionRewardRsp","BreakEggPush","on_s2c_BreakEggPush","GetPrivilegeInfoRsp","on_s2c_GetMonthlyPassInfoRsp","ReceivePrivilegeDailyRewardsRsp","on_s2c_ReceiveMonthlyPassDailyRewardsRsp","ReceiveMonthlyPassAdditionalRewardsRsp","on_s2c_ReceiveMonthlyPassAllBoughtRewardsRsp","VipLevelUpPush","on_s2c_VipLevelUpPush","GetVipInfoRsp","on_s2c_GetVipInfoRsp","ReceiveVipDailyGiftRsp","on_s2c_ReceiveVipDailyGiftRsp","BuyVipGiftRsp","on_s2c_BuyVipGiftRsp","ActivitiesPush","GetActivityHeroGrowMapRsp","on_s2c_GetActivityHeroGrowMapRsp","GetActivityGachaUpMapRsp","on_s2c_GetActivityGachaUpMapRsp","ReceiveActivityGachaUpTasksRewardsRsp","on_s2c_ReceiveActivityGachaUpTasksRewardsRsp","GetCumulativeRechargeMapRsp","on_s2c_GetCumulativeRechargeMapRsp","init","request","requestGetMonthlyPassInfo","requesGetVipInfo","requestGetActivityHeroGrowInfo","requestGetActivityGachaUp","requesGetCumulativeRecharge","requestLimitedReward","id","msg","Msg_GetLimitedRewardReq","Send","GetLimitedRewardReq","requestGetDailyReward","day","Msg_GetDailyRewardReq","GetDailyRewardReq","requestReceiveActivityGachaUpTasksRewards","activityID","Msg_ReceiveActivityGachaUpTasksRewardsReq","activityId","taskIds","getAllUpCanReceiveTasks","ReceiveActivityGachaUpTasksRewardsReq","Msg_GetActivityGachaUpMapReq","GetActivityGachaUpMapReq","Msg_GetActivityHeroGrowMapReq","GetActivityHeroGrowMapReq","requestReceiveCumulativeRechargeReward","rewardId","Msg_ReceiveCumulativeRechargeRewardReq","ReceiveCumulativeRechargeRewardReq","Msg_GetPrivilegeInfoReq","GetPrivilegeInfoReq","requestGetHeroCollectionReward","Msg_GetHeroCollectionRewardReq","GetHeroCollectionRewardReq","requestReceiveMonthlyPassDailyRewards","type","Msg_ReceivePrivilegeDailyRewardsReq","ReceivePrivilegeDailyRewardsReq","requestReceiveMonthlyPassAllBoughtRewards","Msg_ReceiveMonthlyPassAdditionalRewardsReq","ReceiveMonthlyPassAdditionalRewardsReq","Msg_GetVipInfoReq","GetVipInfoReq","requesReceiveVipDailyGift","Msg_ReceiveVipDailyGiftReq","ReceiveVipDailyGiftReq","requesBuyVipGift","vipLevel","Msg_BuyVipGiftReq","BuyVipGiftReq","Msg_GetCumulativeRechargeMapReq","GetCumulativeRechargeMapReq","initActivityRecharge","refreshEvent","Combine_Recharge","limitedRewardMsg","error","code","CommonErrorCode","Succeed","emitLocal","LimitedBenefits_Change","addDailyRewardMsg","getDailyRewardSucc","heroCollectionMsg","HeroRoad","getHeroCollectionRewardSucc","breakEggMsg","monthlyPassInfo","MonthlyCard","info","PrivilegeMap","isDailyReceived","isReceivedMonthlyPassAddtional","vipMsg","VipLevel_Change","Vip_Buy","Vip","isDailyGiftReceived","boughtVipGifts","push","on_s2c_ActivitiesPush","initOpenActivityMap","activities","initActivityHeroGrow","activityGachaUpMap","initGachaTasks","show","viewName","CongratulationPop","data","rewards","receiveGachaUpTaskRewardSucc"],"mappings":"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","sourcesContent":["import { _decorator, Component, log, Node } from 'cc';\r\nimport { AbsControl } from '../../../framework/base/IAbs';\r\nimport { EventMgr } from '../../mgr/EventMgr';\r\nimport { proto } from 'client_protocol';\r\nimport { ActivityData } from './ActivityData';\r\nimport { Net } from '../../net/Net';\r\nimport { LocalEvent } from '../../define/LocalEvent';\r\nimport { ActivityRed } from './ActivityRed';\r\nimport { RedMgr } from '../../mgr/RedMgr';\r\nimport { RedDotType } from '../../red/RedDotType';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { RoleData } from '../role/RoleData';\r\nimport { TaskData } from '../task/TaskData';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * ActivityControl\r\n * zhudingchao\r\n * Wed Jun 19 2024 14:54:21 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/activity/ActivityControl.ts\r\n *\r\n */\r\n\r\n@ccclass('ActivityControl')\r\nexport class ActivityControl extends AbsControl {\r\n    private static _instance: ActivityControl;\r\n\r\n\r\n    public static get ins() {\r\n        if (null == this._instance) {\r\n            this._instance = new ActivityControl();\r\n        }\r\n        return this._instance;\r\n    }\r\n    purge(): void {\r\n    }\r\n\r\n    register(): void {\r\n        EventMgr.onMsg(proto.Ptl.LimitedRewardPush, this.on_s2c_LimitedRewardPush, this)\r\n        EventMgr.onMsg(proto.Ptl.GetLimitedRewardRsp, this.on_s2c_GetLimitedRewardRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.DailyRewardPush, this.on_s2c_DailyRewardPush, this)\r\n        EventMgr.onMsg(proto.Ptl.GetDailyRewardRsp, this.on_s2c_GetDailyRewardRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.HeroCollectionPush, this.on_s2c_HeroCollectionPush, this)\r\n        EventMgr.onMsg(proto.Ptl.GetHeroCollectionRewardRsp, this.on_s2c_GetHeroCollectionRewardRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.BreakEggPush, this.on_s2c_BreakEggPush, this)\r\n        EventMgr.onMsg(proto.Ptl.GetPrivilegeInfoRsp, this.on_s2c_GetMonthlyPassInfoRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.ReceivePrivilegeDailyRewardsRsp, this.on_s2c_ReceiveMonthlyPassDailyRewardsRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.ReceiveMonthlyPassAdditionalRewardsRsp, this.on_s2c_ReceiveMonthlyPassAllBoughtRewardsRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.VipLevelUpPush, this.on_s2c_VipLevelUpPush, this)\r\n        EventMgr.onMsg(proto.Ptl.GetVipInfoRsp, this.on_s2c_GetVipInfoRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.ReceiveVipDailyGiftRsp, this.on_s2c_ReceiveVipDailyGiftRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.BuyVipGiftRsp, this.on_s2c_BuyVipGiftRsp, this);\r\n        EventMgr.onMsg(proto.Ptl.ActivitiesPush, this.on_s2c_BuyVipGiftRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.GetActivityHeroGrowMapRsp, this.on_s2c_GetActivityHeroGrowMapRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.GetActivityGachaUpMapRsp, this.on_s2c_GetActivityGachaUpMapRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.ReceiveActivityGachaUpTasksRewardsRsp, this.on_s2c_ReceiveActivityGachaUpTasksRewardsRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.GetCumulativeRechargeMapRsp, this.on_s2c_GetCumulativeRechargeMapRsp, this)\r\n        ActivityRed.ins.init();\r\n\r\n\r\n    }\r\n    request() {\r\n        this.requestGetMonthlyPassInfo();\r\n        this.requesGetVipInfo();\r\n        this.requestGetActivityHeroGrowInfo();\r\n        this.requestGetActivityGachaUp();\r\n        this.requesGetCumulativeRecharge();\r\n    }\r\n\r\n    requestLimitedReward(id: number) {\r\n        let msg = new proto.Msg_GetLimitedRewardReq();\r\n        msg.id = id;\r\n        Net.Send(proto.Ptl.GetLimitedRewardReq, msg)\r\n    }\r\n\r\n    requestGetDailyReward(id: number, day: number) {\r\n        let msg = new proto.Msg_GetDailyRewardReq();\r\n        msg.id = id;\r\n        msg.day = day;\r\n        Net.Send(proto.Ptl.GetDailyRewardReq, msg)\r\n    }\r\n    /**\r\n     * 请求抽卡up活动\r\n     */\r\n    requestReceiveActivityGachaUpTasksRewards(activityID: number) {\r\n        let msg = new proto.Msg_ReceiveActivityGachaUpTasksRewardsReq();\r\n        msg.activityId = activityID;\r\n        msg.taskIds = ActivityData.ins.getAllUpCanReceiveTasks(activityID);\r\n        Net.Send(proto.Ptl.ReceiveActivityGachaUpTasksRewardsReq, msg)\r\n    }\r\n    /**\r\n   * 请求抽卡up活动\r\n   */\r\n    requestGetActivityGachaUp() {\r\n        let msg = new proto.Msg_GetActivityGachaUpMapReq();\r\n        Net.Send(proto.Ptl.GetActivityGachaUpMapReq, msg)\r\n    }\r\n    /**\r\n   * 请求养成活动信息\r\n   */\r\n    requestGetActivityHeroGrowInfo() {\r\n        let msg = new proto.Msg_GetActivityHeroGrowMapReq();\r\n        Net.Send(proto.Ptl.GetActivityHeroGrowMapReq, msg)\r\n    }\r\n    /**\r\n    * 请求领取累计充值奖励\r\n    */\r\n    requestReceiveCumulativeRechargeReward(rewardId:number) {\r\n        let msg = new proto.Msg_ReceiveCumulativeRechargeRewardReq();\r\n        msg.rewardId = rewardId;\r\n        Net.Send(proto.Ptl.ReceiveCumulativeRechargeRewardReq, msg)\r\n    }\r\n    /**\r\n     * 请求月卡信息\r\n     */\r\n    requestGetMonthlyPassInfo() {\r\n        let msg = new proto.Msg_GetPrivilegeInfoReq();\r\n        Net.Send(proto.Ptl.GetPrivilegeInfoReq, msg)\r\n    }\r\n    requestGetHeroCollectionReward(id: number) {\r\n        let msg = new proto.Msg_GetHeroCollectionRewardReq();\r\n        msg.id = id;\r\n        Net.Send(proto.Ptl.GetHeroCollectionRewardReq, msg)\r\n    }\r\n    /**\r\n     * 请求领取月卡每日奖励信息\r\n     */\r\n    requestReceiveMonthlyPassDailyRewards(type: tab.PrivilegedType) {\r\n        let msg = new proto.Msg_ReceivePrivilegeDailyRewardsReq();\r\n        msg.type = type;\r\n        Net.Send(proto.Ptl.ReceivePrivilegeDailyRewardsReq, msg)\r\n    }\r\n    /**\r\n      * 请求领取月卡加码奖励\r\n      */\r\n    requestReceiveMonthlyPassAllBoughtRewards() {\r\n        let msg = new proto.Msg_ReceiveMonthlyPassAdditionalRewardsReq();\r\n        Net.Send(proto.Ptl.ReceiveMonthlyPassAdditionalRewardsReq, msg)\r\n    }\r\n    /**\r\n     * 请求获取vip信息\r\n     */\r\n    requesGetVipInfo() {\r\n        let msg = new proto.Msg_GetVipInfoReq();\r\n        Net.Send(proto.Ptl.GetVipInfoReq, msg)\r\n    }\r\n\r\n    /**\r\n   * 请求领取Vip每日礼包\r\n   */\r\n    requesReceiveVipDailyGift() {\r\n        let msg = new proto.Msg_ReceiveVipDailyGiftReq();\r\n        Net.Send(proto.Ptl.ReceiveVipDailyGiftReq, msg)\r\n    }\r\n\r\n    /**\r\n   * 请求领取Vip每日礼包\r\n   */\r\n    requesBuyVipGift(vipLevel: number) {\r\n        let msg = new proto.Msg_BuyVipGiftReq();\r\n        msg.vipLevel = vipLevel;\r\n        Net.Send(proto.Ptl.BuyVipGiftReq, msg)\r\n    }\r\n    /**\r\n    * 获取累计充值活动信息\r\n    */\r\n    requesGetCumulativeRecharge() {\r\n        let msg = new proto.Msg_GetCumulativeRechargeMapReq();\r\n        Net.Send(proto.Ptl.GetCumulativeRechargeMapReq, msg)\r\n    }\r\n    on_s2c_GetCumulativeRechargeMapRsp(msg: proto.Msg_GetCumulativeRechargeMapRsp) {\r\n        ActivityData.ins.initActivityRecharge(msg);\r\n        RedMgr.refreshEvent(RedDotType.Combine_Recharge);\r\n    }\r\n    // 限时奖励消息推送\r\n    on_s2c_LimitedRewardPush(msg: proto.Msg_LimitedRewardPush) {\r\n\r\n        ActivityData.ins.limitedRewardMsg = msg;\r\n        log(\"收到限制奖励推送==\", msg)\r\n    }\r\n    // 限时奖励消息推送\r\n    on_s2c_GetLimitedRewardRsp(msg: proto.Msg_GetLimitedRewardRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            ActivityData.ins.limitedRewardMsg = null;\r\n            EventMgr.emitLocal(LocalEvent.LimitedBenefits_Change);\r\n        }\r\n    }\r\n\r\n    // 每日奖励推送\r\n    on_s2c_DailyRewardPush(msg: proto.Msg_DailyRewardPush) {\r\n        ActivityData.ins.addDailyRewardMsg(msg);\r\n        log(\"签到奖励=======\", msg)\r\n\r\n    }\r\n    // 领取每日奖励\r\n    on_s2c_GetDailyRewardRsp(msg: proto.Msg_GetDailyRewardRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            ActivityData.ins.getDailyRewardSucc(msg);\r\n        }\r\n    }\r\n\r\n    /**舰队启航 */\r\n    on_s2c_HeroCollectionPush(msg: proto.Msg_HeroCollectionPush) {\r\n        ActivityData.ins.heroCollectionMsg = msg;\r\n\r\n        RedMgr.refreshEvent(RedDotType.HeroRoad);\r\n\r\n        log(\"舰队启航数据\", msg);\r\n    }\r\n    // 领取舰队启航奖励\r\n    on_s2c_GetHeroCollectionRewardRsp(msg: proto.Msg_GetHeroCollectionRewardRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            ActivityData.ins.getHeroCollectionRewardSucc(msg.id);\r\n            RedMgr.refreshEvent(RedDotType.HeroRoad);\r\n        }\r\n    }\r\n    /**砸金鸡活动 */\r\n    on_s2c_BreakEggPush(msg: proto.Msg_BreakEggPush) {\r\n        ActivityData.ins.breakEggMsg = msg;\r\n        log(\"砸金鸡活动数据\", msg);\r\n    }\r\n    /**月卡信息 */\r\n    on_s2c_GetMonthlyPassInfoRsp(msg: proto.Msg_GetPrivilegeInfoRsp) {\r\n        ActivityData.ins.monthlyPassInfo = msg;\r\n        log(\"月卡数据==\", msg)\r\n        RedMgr.refreshEvent(RedDotType.MonthlyCard);\r\n    }\r\n    // 领取月卡每日奖励\r\n    on_s2c_ReceiveMonthlyPassDailyRewardsRsp(msg: proto.Msg_ReceivePrivilegeDailyRewardsRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            let info = ActivityData.ins.monthlyPassInfo.PrivilegeMap;\r\n            if (info[msg.type]) {\r\n                info[msg.type].isDailyReceived = true;\r\n            }\r\n            RedMgr.refreshEvent(RedDotType.MonthlyCard);\r\n        }\r\n    }\r\n    // 领取月卡加码奖励\r\n    on_s2c_ReceiveMonthlyPassAllBoughtRewardsRsp(msg: proto.Msg_ReceiveMonthlyPassAdditionalRewardsRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            ActivityData.ins.monthlyPassInfo.isReceivedMonthlyPassAddtional = true;\r\n            RedMgr.refreshEvent(RedDotType.MonthlyCard);\r\n        }\r\n    }\r\n    // vip等级提升\r\n    on_s2c_VipLevelUpPush(msg: proto.Msg_VipLevelUpPush) {\r\n        if (ActivityData.ins.vipMsg) {\r\n            ActivityData.ins.vipMsg.vipLevel = msg.vipLevel;\r\n            RoleData.ins.vipLevel = msg.vipLevel;\r\n            EventMgr.emitLocal(LocalEvent.VipLevel_Change);\r\n            RedMgr.refreshEvent(RedDotType.Vip_Buy);\r\n        }\r\n\r\n    }\r\n    // vip信息返回\r\n    on_s2c_GetVipInfoRsp(msg: proto.Msg_GetVipInfoRsp) {\r\n        ActivityData.ins.vipMsg = msg;\r\n        RedMgr.refreshEvent(RedDotType.Vip);\r\n        RedMgr.refreshEvent(RedDotType.Vip_Buy);\r\n    }\r\n    // vip每日礼包领取返回\r\n    on_s2c_ReceiveVipDailyGiftRsp(msg: proto.Msg_ReceiveVipDailyGiftRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            ActivityData.ins.vipMsg.isDailyGiftReceived = true;\r\n            RedMgr.refreshEvent(RedDotType.Vip);\r\n        }\r\n    }\r\n    // vip专属礼包购买返回\r\n    on_s2c_BuyVipGiftRsp(msg: proto.Msg_BuyVipGiftRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            ActivityData.ins.vipMsg.boughtVipGifts.push(msg.vipLevel);\r\n            RedMgr.refreshEvent(RedDotType.Vip_Buy);\r\n        }\r\n    }\r\n\r\n    on_s2c_ActivitiesPush(msg: proto.Msg_ActivitiesPush) {\r\n        ActivityData.ins.initOpenActivityMap(msg.activities as proto.Activity[])\r\n    }\r\n    // 养成活动信息返回\r\n    on_s2c_GetActivityHeroGrowMapRsp(msg: proto.Msg_GetActivityHeroGrowMapRsp) {\r\n        ActivityData.ins.initActivityHeroGrow(msg);\r\n    }\r\n    // 抽卡up活动\r\n    on_s2c_GetActivityGachaUpMapRsp(msg: proto.Msg_GetActivityGachaUpMapRsp) {\r\n        if (msg.activityGachaUpMap) {\r\n            TaskData.ins.initGachaTasks(msg);\r\n        }\r\n    }\r\n    // 领取抽卡奖励\r\n    on_s2c_ReceiveActivityGachaUpTasksRewardsRsp(msg: proto.Msg_ReceiveActivityGachaUpTasksRewardsRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: msg.rewards });\r\n            TaskData.ins.receiveGachaUpTaskRewardSucc(msg.taskIds);\r\n        }\r\n    }\r\n}"]}