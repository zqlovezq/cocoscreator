{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/pay/PayControl.ts"],"names":["_decorator","log","AbsControl","proto","Net","EventMgr","PayData","tab","ItemData","UIMgr","ViewName","ActivityData","ActivityControl","RoleData","LoginData","ChannelMgr","Global","P8PostEventName","Fixed","CommonTipsPop","CommonTipsPopCloseType","LangMgr","ccclass","property","PayControl","payCallBack","ins","_instance","purge","register","onMsg","Ptl","GetPayInfoRsp","on_s2c_GetPayInfoRsp","StartPayRsp","on_s2c_StartPayRsp","DeliverGoodsPush","on_s2c_DeliverGoodsPush","EndPayRsp","on_s2c_EndPayRsp","PayByVoucherRsp","on_s2c_PayByVoucherRsp","request","requestGetPayInfo","msg","Msg_GetPayInfoReq","Send","GetPayInfoReq","requestPay","rechargeId","callback","voucherNum","getCount","CurrencyType","CurrencyType_Voucher","rechargeTable","getData","RechargeTableById","getValue","price","channelTab","Currency","tips","getCombineString","create","closeType","confirm","Msg_PayByVoucherReq","PayByVoucherReq","console","Msg_StartPayReq","StartPayReq","payInfoMsg","Type","GoodsType","GoodsType_FirstRecharge","firstRechargeSucc","GoodsType_BreakEgg","breakEggMsg","GoodsType_MonthlyPass","requestGetMonthlyPassInfo","money","PriceDollar","postEvent","pay_0_99","pay_10","pay_50","pay_100","show","viewName","CongratulationPop","data","rewards","error","code","CommonErrorCode","Succeed","isDevChannel","sedMsg","Msg_EndPayReq","orderId","EndPayReq","t_obj","sdkRole","sign","mobile37Sign","time","mobile37SignTime","getServerUtcTime","onLineTime","objJson","gameOrderIdTst","isDebug","rechangeTab","productld","ProductType","ptPrice","getSdkRechargePrice","rmb","toFixed","productDesc","getLab","Desc","extraInfo","svc_group","loginGroup","JSON","stringify","ratio","goodNum","buyTitle","buyName","pay"],"mappings":"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","sourcesContent":["import { _decorator, Component, log, Node } from 'cc';\r\nimport { AbsControl } from '../../../framework/base/IAbs';\r\nimport { proto } from 'client_protocol';\r\nimport { Net } from '../../net/Net';\r\nimport { EventMgr } from '../../mgr/EventMgr';\r\nimport { PayData } from './PayData';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { ItemData } from '../item/ItemData';\r\nimport { ShowTips, UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { ActivityData } from '../activity/ActivityData';\r\nimport { ActivityControl } from '../activity/ActivityControl';\r\nimport { Role } from '../../fight/base/obj/role/role/Role';\r\nimport { RoleData } from '../role/RoleData';\r\nimport { LoginData } from '../login/LoginData';\r\nimport { ChannelMgr } from '../../../channel/ChannelMgr';\r\nimport { Global } from '../../../Global';\r\nimport { P8PostEventName } from '../../../channel/ChannelDefine';\r\nimport Fixed from '../../../framework/collision/Fixed';\r\nimport { CommonTipsPop, CommonTipsPopCloseType } from '../common/CommonTipsPop';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nconst { ccclass, property } = _decorator;\r\n/**\r\n * \r\n * PayControl\r\n * zhudingchao\r\n * Wed Jun 26 2024 10:38:41 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/pay/PayControl.ts\r\n *\r\n */\r\n\r\n@ccclass('PayControl')\r\nexport class PayControl extends AbsControl {\r\n    private static _instance: PayControl;\r\n    private payCallBack: Function;\r\n    public static get ins() {\r\n        if (null == this._instance) {\r\n            this._instance = new PayControl();\r\n        }\r\n        return this._instance;\r\n    }\r\n    purge(): void {\r\n    }\r\n    register(): void {\r\n        EventMgr.onMsg(proto.Ptl.GetPayInfoRsp, this.on_s2c_GetPayInfoRsp, this);\r\n        EventMgr.onMsg(proto.Ptl.StartPayRsp, this.on_s2c_StartPayRsp, this);\r\n        EventMgr.onMsg(proto.Ptl.DeliverGoodsPush, this.on_s2c_DeliverGoodsPush, this);\r\n        EventMgr.onMsg(proto.Ptl.EndPayRsp, this.on_s2c_EndPayRsp, this);\r\n        EventMgr.onMsg(proto.Ptl.PayByVoucherRsp, this.on_s2c_PayByVoucherRsp, this);\r\n\r\n    }\r\n    request() {\r\n        this.requestGetPayInfo();\r\n    }\r\n    requestGetPayInfo() {\r\n        let msg = new proto.Msg_GetPayInfoReq();\r\n        Net.Send(proto.Ptl.GetPayInfoReq, msg)\r\n    }\r\n\r\n\r\n\r\n    requestPay(rechargeId: number, callback: Function) {\r\n        let voucherNum = ItemData.ins.getCount(tab.CurrencyType.CurrencyType_Voucher);\r\n        let rechargeTable = tab.getData().RechargeTableById.getValue(rechargeId);\r\n        this.payCallBack = callback;\r\n        let price = rechargeTable[ChannelMgr.channelTab.Currency];\r\n        if (voucherNum >= price) {\r\n            // ShowTips(\"弹出使用代金券界面\");\r\n            let tips = LangMgr.getCombineString(\"ui_voucher_1\", [price])\r\n            CommonTipsPop.create(tips, (closeType: CommonTipsPopCloseType) => {\r\n                if (closeType == CommonTipsPopCloseType.confirm) {\r\n                    let msg = new proto.Msg_PayByVoucherReq();\r\n                    msg.rechargeId = rechargeId;\r\n                    Net.Send(proto.Ptl.PayByVoucherReq, msg)\r\n                } else {\r\n                    console.log(\"cancel\")\r\n                }\r\n            })\r\n            return;\r\n        }\r\n\r\n        let msg = new proto.Msg_StartPayReq();\r\n        msg.rechargeId = rechargeId;\r\n        Net.Send(proto.Ptl.StartPayReq, msg)\r\n\r\n    }\r\n    on_s2c_GetPayInfoRsp(msg: proto.Msg_GetPayInfoRsp) {\r\n        PayData.ins.payInfoMsg = msg;\r\n    }\r\n    on_s2c_DeliverGoodsPush(msg: proto.Msg_DeliverGoodsPush) {\r\n\r\n        let rechargeTable = tab.getData().RechargeTableById.getValue(msg.rechargeId);\r\n        if (rechargeTable) {\r\n            if (rechargeTable.Type == tab.GoodsType.GoodsType_FirstRecharge) {\r\n                PayData.ins.firstRechargeSucc(msg.rechargeId);\r\n            } else if (rechargeTable.Type == tab.GoodsType.GoodsType_BreakEgg) {\r\n                ActivityData.ins.breakEggMsg = null;\r\n            } else if (rechargeTable.Type == tab.GoodsType.GoodsType_MonthlyPass) {\r\n                ActivityControl.ins.requestGetMonthlyPassInfo()\r\n            }\r\n            let money = rechargeTable.PriceDollar;\r\n            if (money == 99) {\r\n                ChannelMgr.postEvent(P8PostEventName.pay_0_99)\r\n            } else if (money == 999) {\r\n                ChannelMgr.postEvent(P8PostEventName.pay_10)\r\n            } else if (money == 4999) {\r\n                ChannelMgr.postEvent(P8PostEventName.pay_50)\r\n            } else if (money == 9999) {\r\n                ChannelMgr.postEvent(P8PostEventName.pay_100)\r\n            }\r\n        }\r\n        if (this.payCallBack) {\r\n            this.payCallBack(msg);\r\n            this.payCallBack = null;\r\n        }\r\n\r\n        UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: msg.rewards })\r\n\r\n    }\r\n    on_s2c_EndPayRsp(msg: proto.Msg_EndPayRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n        }\r\n    }\r\n    on_s2c_StartPayRsp(msg: proto.Msg_StartPayRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            if (ChannelMgr.isDevChannel) {\r\n                let sedMsg = new proto.Msg_EndPayReq();\r\n                sedMsg.orderId = msg.orderId;\r\n                Net.Send(proto.Ptl.EndPayReq, sedMsg)\r\n            } else {\r\n                //SDK支付\r\n                let t_obj: any = RoleData.ins.sdkRole()\r\n\r\n                t_obj.sign = msg.mobile37Sign || \"\"\r\n                t_obj.time = msg.mobile37SignTime || RoleData.ins.getServerUtcTime()\r\n\r\n                t_obj.onLineTime = \"1\"\r\n\r\n                t_obj.objJson = msg.orderId\r\n                t_obj.orderId = msg.orderId\r\n\r\n                t_obj.gameOrderIdTst = Global.isDebug ? 1 : 0   //@\"0\"是正式环境订单  @\"1\" 是测试环境订单\r\n\r\n                let rechangeTab = tab.getData().RechargeTableById.getValue(msg.rechargeId)\r\n                console.log(msg.rechargeId)\r\n\r\n                t_obj.productld = rechangeTab[ChannelMgr.channelTab.ProductType]\r\n                t_obj.ptPrice = ChannelMgr.getSdkRechargePrice(rechangeTab)\r\n                t_obj.rmb = Fixed.toFixed(ChannelMgr.getSdkRechargePrice(rechangeTab) * 100)\r\n                t_obj.productDesc = LangMgr.getLab(rechangeTab.Desc)\r\n                t_obj.extraInfo = { svc_group: LoginData.ins.loginGroup } //@\"0.01\"\r\n                t_obj.extraInfo = JSON.stringify(t_obj.extraInfo)\r\n                t_obj.ratio = 10;\r\n                t_obj.goodNum = 1;\r\n                t_obj.buyTitle = LangMgr.getLab(rechangeTab.Desc);\r\n                t_obj.buyName = LangMgr.getLab(rechangeTab.Desc);\r\n                t_obj.productDesc = LangMgr.getLab(rechangeTab.Desc);\r\n\r\n                ChannelMgr.pay(t_obj)\r\n            }\r\n        }\r\n    }\r\n    on_s2c_PayByVoucherRsp(msg: proto.Msg_PayByVoucherRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            log(\"代金券充值 ===\", msg)\r\n        }\r\n    }\r\n\r\n}"]}