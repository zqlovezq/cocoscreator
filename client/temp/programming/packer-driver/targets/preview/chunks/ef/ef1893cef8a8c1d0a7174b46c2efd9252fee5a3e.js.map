{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/activity/combine/CombineGiftItem.ts"],"names":["_decorator","Component","instantiate","Prefab","InfiniteList","MallLayoutCell","ActivityData","tab","ccclass","property","CombineGiftItem","_list","mallId","onShow","MallId","groupData","groupListData","data","list_view","Init","getCellNumber","getCellCount","bind","getCellSize","getCellHeight","getCellIdentifer","getCellView","getCellData","GetCellData","length","idx","identifer","pfb_item","getComponent","view","MallTab","MallTab_SpecialGiftTab1","viewName","refreshView","Refresh","splitCount","result","listData","ins","getMallItemTabsById","i","push","slice","name"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,M,OAAAA,M;;AAC5CC,MAAAA,Y;;AACEC,MAAAA,c,iBAAAA,c;;AAEAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,G,iBAAAA,G;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;iCAGjBU,e,WADZF,OAAO,CAAC,iBAAD,C,UAEHC,QAAQ;AAAA;AAAA,uC,UAERA,QAAQ,CAACN,MAAD,C,2BAJb,MACaO,eADb,SACqCT,SADrC,CAC+C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAKnCU,KALmC,GAK3B,EAL2B;AAAA,eAMnCC,MANmC,GAMnB,CANmB;AAAA;;AAO3CC,QAAAA,MAAM,CAACC,MAAD,EAAe;AACjB,eAAKF,MAAL,GAAcE,MAAd;AACA,cAAMC,SAAS,GAAG,KAAKC,aAAL,EAAlB;AACA,eAAKL,KAAL,GAAaI,SAAS,CAACE,IAAvB;AACA,eAAKC,SAAL,CAAeC,IAAf,CAAoB;AAChBC,YAAAA,aAAa,EAAE,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CADC;AAEhBC,YAAAA,WAAW,EAAE,KAAKC,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAFG;AAGhBG,YAAAA,gBAAgB,EAAE,KAAKA,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAHF;AAIhBI,YAAAA,WAAW,EAAE,KAAKA,WAAL,CAAiBJ,IAAjB,CAAsB,IAAtB,CAJG;AAKhBK,YAAAA,WAAW,EAAE,KAAKC,WAAL,CAAiBN,IAAjB,CAAsB,IAAtB;AALG,WAApB;AAOH;;AACDD,QAAAA,YAAY,GAAG;AACX,iBAAO,KAAKV,KAAL,CAAWkB,MAAlB;AACH;;AACDL,QAAAA,aAAa,CAACM,GAAD,EAAc;AACvB,iBAAO,GAAP;AACH;;AACDL,QAAAA,gBAAgB,CAACK,GAAD,EAAc;AAC1B,iBAAO,gBAAP;AACH;;AACDJ,QAAAA,WAAW,CAACI,GAAD,EAAcC,SAAd,EAAiC;AACxC,iBAAO7B,WAAW,CAAC,KAAK8B,QAAN,CAAX,CAA2BC,YAA3B;AAAA;AAAA,+CAAP;AACH;;AACDL,QAAAA,WAAW,CAACE,GAAD,EAAc;AACrB,iBAAO;AAAEb,YAAAA,IAAI,EAAE,KAAKN,KAAL,CAAWmB,GAAX,CAAR;AAAyBI,YAAAA,IAAI,EAAE;AAAA;AAAA,4BAAIC,OAAJ,CAAYC,uBAA3C;AAAoEC,YAAAA,QAAQ,EAAE,KAAKzB;AAAnF,WAAP;AACH,SAjC0C,CAkC3C;;;AACA0B,QAAAA,WAAW,GAAE;AACT,eAAKpB,SAAL,CAAeqB,OAAf;AACH;;AACDvB,QAAAA,aAAa,GAAG;AACZ,cAAMwB,UAAU,GAAG,CAAnB;AACA,cAAMC,MAAM,GAAG,EAAf;AACA,cAAIC,QAAQ,GAAG;AAAA;AAAA,4CAAaC,GAAb,CAAiBC,mBAAjB,CAAqC,KAAKhC,MAA1C,CAAf;;AACA,eAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,QAAQ,CAACb,MAA7B,EAAqCgB,CAAC,IAAIL,UAA1C,EAAsD;AAClDC,YAAAA,MAAM,CAACK,IAAP,CAAYJ,QAAQ,CAACK,KAAT,CAAeF,CAAf,EAAkBA,CAAC,GAAGL,UAAtB,CAAZ;AACH;;AACD,iBAAO;AAAEvB,YAAAA,IAAI,EAAEwB,MAAR;AAAgBO,YAAAA,IAAI,EAAE,KAAKpC;AAA3B,WAAP;AACH;;AA9C0C,O;;;;;iBAEjB,I;;;;;;;iBAEP,I","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab } from 'cc';\r\nimport InfiniteList from '../../../../Common/InfiniteList/InfiniteList';\r\nimport { MallLayoutCell } from '../../shop/MallLayoutCell';\r\nimport { MALLNAME } from '../../../../Common/script/EnumTypeMgr';\r\nimport { ActivityData } from '../ActivityData';\r\nimport { tab } from '../../../../Table/table_gen';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CombineGiftItem')\r\nexport class CombineGiftItem extends Component {\r\n    @property(InfiniteList)\r\n    list_view: InfiniteList = null;\r\n    @property(Prefab)\r\n    pfb_item: Prefab = null;\r\n    private _list = []\r\n    private mallId:number = 0;\r\n    onShow(MallId:number){\r\n        this.mallId = MallId;\r\n        const groupData = this.groupListData();\r\n        this._list = groupData.data;\r\n        this.list_view.Init({\r\n            getCellNumber: this.getCellCount.bind(this),\r\n            getCellSize: this.getCellHeight.bind(this),\r\n            getCellIdentifer: this.getCellIdentifer.bind(this),\r\n            getCellView: this.getCellView.bind(this),\r\n            getCellData: this.GetCellData.bind(this),\r\n        });\r\n    }\r\n    getCellCount() {\r\n        return this._list.length;\r\n    }\r\n    getCellHeight(idx: number) {\r\n        return 330;\r\n    }\r\n    getCellIdentifer(idx: number) {\r\n        return \"MallLayoutCell\";\r\n    }\r\n    getCellView(idx: number, identifer: string) {\r\n        return instantiate(this.pfb_item).getComponent(MallLayoutCell);\r\n    }\r\n    GetCellData(idx: number) {\r\n        return { data: this._list[idx], view: tab.MallTab.MallTab_SpecialGiftTab1, viewName: this.mallId }\r\n    }\r\n    // 领取奖励之后刷新list\r\n    refreshView(){\r\n        this.list_view.Refresh();\r\n    }\r\n    groupListData() {\r\n        const splitCount = 3;\r\n        const result = [];\r\n        let listData = ActivityData.ins.getMallItemTabsById(this.mallId);\r\n        for (let i = 0; i < listData.length; i += splitCount) {\r\n            result.push(listData.slice(i, i + splitCount));\r\n        }\r\n        return { data: result, name: this.mallId};\r\n    }\r\n}\r\n\r\n\r\n"]}