{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/common/ServerChooseItem.ts"],"names":["_decorator","Component","Label","log","Node","LangMgr","LoginData","CommonTipsPop","CommonTipsPopCloseType","Net","LoginControl","ChannelMgr","RoleData","ccclass","property","ServerChooseItem","serverData","initData","nameLab","string","getCombineString","levelLab","node","active","key","stateNodes","onTcouhItem","ins","default_area","create","getLab","closeType","confirm","default_area_name","isChangeServer","roleLogoutServer","sdkRole","Disconnect","console"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, log, Node } from 'cc';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { LoginData } from '../login/LoginData';\r\nimport { CommonTipsPop, CommonTipsPopCloseType } from './CommonTipsPop';\r\nimport { Net } from '../../net/Net';\r\nimport { SceneMgr, ScenesName } from '../../mgr/SceneMgr';\r\nimport { Func } from '../../utils/Func';\r\nimport { LoginControl } from '../login/LoginControl';\r\nimport { ChannelMgr } from '../../../channel/ChannelMgr';\r\nimport { RoleData } from '../role/RoleData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * ServerChooseItem\r\n * zhudingchao\r\n * Wed Aug 07 2024 15:22:19 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/common/ServerChooseItem.ts\r\n *\r\n */\r\n\r\n@ccclass('ServerChooseItem')\r\nexport class ServerChooseItem extends Component {\r\n    @property([Node])\r\n    stateNodes: Node[] = [];\r\n    @property(Label)\r\n    levelLab: Label = null;\r\n    @property(Label)\r\n    nameLab: Label = null;\r\n    serverData: any = null;\r\n    initData(serverData: any) {\r\n        this.serverData = serverData;\r\n        this.nameLab.string = serverData[\"name\"] || LangMgr.getCombineString(\"ui_chat_1\", [1]);\r\n        if (serverData[\"role_level\"]) {\r\n            this.levelLab.node.active = true;\r\n            this.levelLab.string = LangMgr.getCombineString(\"ui_heroresonancepop_3\", [serverData[\"role_level\"]])\r\n        } else {\r\n            this.levelLab.node.active = false;\r\n        }\r\n        for (let key in this.stateNodes) {\r\n            this.stateNodes[key].active = false;\r\n        }\r\n        this.stateNodes[serverData[\"status\"]].active = true;\r\n    }\r\n    onTcouhItem() {\r\n        if (LoginData.ins.default_area != this.serverData[\"id\"]) {\r\n            log(\"切换选服========\");\r\n            CommonTipsPop.create(LangMgr.getLab(\"Tips_server_1\"), (closeType: CommonTipsPopCloseType) => {\r\n                if (closeType == CommonTipsPopCloseType.confirm) {\r\n                    LoginData.ins.default_area = this.serverData[\"id\"];\r\n                    LoginData.ins.default_area_name = this.serverData[\"name\"];\r\n                    LoginControl.ins.isChangeServer = true;\r\n                    ChannelMgr.roleLogoutServer(RoleData.ins.sdkRole())\r\n                    Net.Disconnect();\r\n                    // SceneMgr.ins.loadScene(ScenesName.login)\r\n                    // console.log(\"ok\")\r\n                    // MailControl.ins.requestDeleteMails(ids);\r\n                } else {\r\n                    console.log(\"cancel\")\r\n                }\r\n            });\r\n        }\r\n    }\r\n}"]}