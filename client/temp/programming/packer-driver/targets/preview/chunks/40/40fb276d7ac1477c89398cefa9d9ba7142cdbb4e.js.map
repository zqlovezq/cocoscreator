{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/fincaFight/FincaFightRankRewardPop.ts"],"names":["_decorator","instantiate","Label","Node","Prefab","ViewPop","GameUtil","FincaFightRankRewardItem","FincaFightData","LangMgr","ccclass","property","FincaFightRankRewardPop","view_type","onShow","showRoleRank","onDestroy","register","unRegister","switchView","e","type","Number","rankStr","ins","FincaRanking","getLab","lbl_my_rank","string","contentNode","destroyAllChildren","rewardsInfo","getRewards","key","Rankings","str","split","item","pfb_item","parent","rewards","getRewardsByDropId","DropId","getComponent","initView"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAmCC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;;AAC7DC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,wB,iBAAAA,wB;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;yCAGjBY,uB,WADZF,OAAO,CAAC,yBAAD,C,UAEHC,QAAQ,CAACP,MAAD,C,UAERO,QAAQ,CAACR,IAAD,C,UAERQ,QAAQ,CAACT,KAAD,C,2BANb,MACaU,uBADb;AAAA;AAAA,8BACqD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAOzCC,SAPyC,GAOrB,CAPqB;AAAA;;AAQjDC,QAAAA,MAAM,GAAS;AACX,eAAKD,SAAL,GAAiB,CAAjB;AACA,eAAKE,YAAL;AACH;;AACSC,QAAAA,SAAS,GAAS;AACxB,gBAAMA,SAAN;AACH;;AACDC,QAAAA,QAAQ,GAAS,CAEhB;;AACDC,QAAAA,UAAU,GAAS;AACf,gBAAMA,UAAN;AACH;;AACDC,QAAAA,UAAU,CAACC,CAAD,EAAgBC,IAAhB,EAA8B;AACpC,cAAID,CAAC,IAAIE,MAAM,CAACD,IAAD,CAAN,KAAiB,KAAKR,SAA/B,EAA0C;AACtC;AACH;;AACD,eAAKA,SAAL,GAAiBS,MAAM,CAACD,IAAD,CAAvB;AACA,eAAKN,YAAL;AACH;;AACDA,QAAAA,YAAY,GAAG;AACX,cAAMQ,OAAO,GAAE;AAAA;AAAA,gDAAeC,GAAf,CAAmBC,YAAnB,GAAkC,CAAC,CAAnC,GAAuC;AAAA;AAAA,gDAAeD,GAAf,CAAmBC,YAA1D,GAAyE;AAAA;AAAA,kCAAQC,MAAR,CAAe,WAAf,CAAxF;AACA,eAAKC,WAAL,CAAiBC,MAAjB,GAA0BL,OAA1B;AACA,eAAKM,WAAL,CAAiBC,kBAAjB;AACA,cAAMC,WAAW,GAAG;AAAA;AAAA,gDAAeP,GAAf,CAAmBQ,UAAnB,CAA8B,KAAKnB,SAAnC,EAA6C,KAA7C,CAApB;;AACA,eAAK,IAAIoB,GAAT,IAAgBF,WAAW,CAACG,QAA5B,EAAsC;AAClC,gBAAIC,GAAG,GAAGJ,WAAW,CAACG,QAAZ,CAAqBD,GAArB,EAA0BG,KAA1B,CAAgC,GAAhC,CAAV;;AACA,gBAAId,MAAM,CAACa,GAAG,CAAC,CAAD,CAAJ,CAAN,IAAkBb,MAAM,CAACa,GAAG,CAAC,CAAD,CAAJ,CAA5B,EAAsC;AAClC,kBAAIE,IAAI,GAAGpC,WAAW,CAAC,KAAKqC,QAAN,CAAtB;AACAD,cAAAA,IAAI,CAACE,MAAL,GAAc,KAAKV,WAAnB;AACA,kBAAIW,OAAO,GAAG;AAAA;AAAA,wCAASC,kBAAT,CAA4BV,WAAW,CAACW,MAAZ,CAAmBT,GAAnB,CAA5B,CAAd;AACAI,cAAAA,IAAI,CAACM,YAAL;AAAA;AAAA,wEAA4CC,QAA5C,CAAqDtB,MAAM,CAACa,GAAG,CAAC,CAAD,CAAJ,CAA3D,EAAqEb,MAAM,CAACa,GAAG,CAAC,CAAD,CAAJ,CAA3E,EAAqFK,OAArF;AACH;AACJ;AACJ;;AA1CgD,O;;;;;iBAE9B,I;;;;;;;iBAEC,I;;;;;;;iBAEA,I","sourcesContent":["import { _decorator, Component, EventTouch, instantiate, Label, Node, Prefab } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { GameUtil } from '../../utils/GameUtil';\r\nimport { FincaFightRankRewardItem } from './FincaFightRankRewardItem';\r\nimport { FincaFightData } from './FincaFightData';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('FincaFightRankRewardPop')\r\nexport class FincaFightRankRewardPop extends ViewPop {\r\n    @property(Prefab)\r\n    pfb_item: Prefab = null;\r\n    @property(Node)\r\n    contentNode: Node = null;\r\n    @property(Label)\r\n    lbl_my_rank:Label = null;\r\n    private view_type: number = 0;\r\n    onShow(): void {\r\n        this.view_type = 1;\r\n        this.showRoleRank();\r\n    }\r\n    protected onDestroy(): void {\r\n        super.onDestroy();\r\n    }\r\n    register(): void {\r\n\r\n    }\r\n    unRegister(): void {\r\n        super.unRegister();\r\n    }\r\n    switchView(e: EventTouch, type: string) {\r\n        if (e && Number(type) === this.view_type) {\r\n            return\r\n        }\r\n        this.view_type = Number(type);\r\n        this.showRoleRank();\r\n    }\r\n    showRoleRank() {\r\n        const rankStr =FincaFightData.ins.FincaRanking > -1 ? FincaFightData.ins.FincaRanking : LangMgr.getLab(\"ui_rank_1\");\r\n        this.lbl_my_rank.string = rankStr;\r\n        this.contentNode.destroyAllChildren();\r\n        const rewardsInfo = FincaFightData.ins.getRewards(this.view_type,false);\r\n        for (let key in rewardsInfo.Rankings) {\r\n            let str = rewardsInfo.Rankings[key].split(\";\");\r\n            if (Number(str[0]) && Number(str[1])) {\r\n                let item = instantiate(this.pfb_item);\r\n                item.parent = this.contentNode;\r\n                let rewards = GameUtil.getRewardsByDropId(rewardsInfo.DropId[key]);\r\n                item.getComponent(FincaFightRankRewardItem).initView(Number(str[0]), Number(str[1]), rewards);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}