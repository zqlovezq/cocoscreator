{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/shop/DiamondBuyPop.ts"],"names":["_decorator","instantiate","Prefab","ViewPop","tab","MallLayoutCell","InfiniteList","Global","ccclass","property","DiamondBuyPop","_list","register","unRegister","onShow","listData","getData","BuyDiamondsTable","i","length","ViewSpecial","isReview","push","slice","list_view","Init","getCellNumber","getCellCount","bind","getCellSize","getCellHeight","getCellIdentifer","getCellView","getCellData","GetCellData","onDestroy","pfb_item","getComponent","idx","data","view","MallTab","MallTab_Tab5"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,M,OAAAA,M;;AAC1CC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,c,iBAAAA,c;;AACFC,MAAAA,Y;;AACEC,MAAAA,M,iBAAAA,M;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;+BAGjBU,a,WADZF,OAAO,CAAC,eAAD,C,UAEHC,QAAQ,CAACP,MAAD,C,UAERO,QAAQ;AAAA;AAAA,uC,2BAJb,MACaC,aADb;AAAA;AAAA,8BAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAK/BC,KAL+B,GAKvB,EALuB;AAAA;;AAMvCC,QAAAA,QAAQ,GAAS,CAEhB;;AACDC,QAAAA,UAAU,GAAS;AACf,gBAAMA,UAAN;AACH;;AACDC,QAAAA,MAAM,GAAS;AACX,eAAKH,KAAL,GAAa,EAAb;AACA,cAAII,QAAQ,GAAG;AAAA;AAAA,0BAAIC,OAAJ,GAAcC,gBAA7B;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,QAAQ,CAACI,MAA7B,EAAqCD,CAAC,IAAI,CAA1C,EAA6C;AACzC,gBAAIH,QAAQ,CAACG,CAAD,CAAR,CAAYE,WAAZ,IAA2B,CAAC;AAAA;AAAA,kCAAOC,QAAvC,EAAgD;AAC5C;AACH;;AACD,iBAAKV,KAAL,CAAWW,IAAX,CAAgBP,QAAQ,CAACQ,KAAT,CAAeL,CAAf,EAAkBA,CAAC,GAAG,CAAtB,CAAhB;AACH;;AAED,eAAKM,SAAL,CAAeC,IAAf,CAAoB;AAChBC,YAAAA,aAAa,EAAE,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CADC;AAEhBC,YAAAA,WAAW,EAAE,KAAKC,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAFG;AAGhBG,YAAAA,gBAAgB,EAAE,KAAKA,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAHF;AAIhBI,YAAAA,WAAW,EAAE,KAAKA,WAAL,CAAiBJ,IAAjB,CAAsB,IAAtB,CAJG;AAKhBK,YAAAA,WAAW,EAAE,KAAKC,WAAL,CAAiBN,IAAjB,CAAsB,IAAtB;AALG,WAApB;AAOH;;AACSO,QAAAA,SAAS,GAAS;AACxB,gBAAMA,SAAN;AACH;;AACDR,QAAAA,YAAY,GAAG;AACX,iBAAO,KAAKhB,KAAL,CAAWQ,MAAlB;AACH;;AACDW,QAAAA,aAAa,GAAG;AACZ,iBAAO,GAAP;AACH;;AACDC,QAAAA,gBAAgB,GAAG;AACf,iBAAO,gBAAP;AACH;;AACDC,QAAAA,WAAW,GAAG;AACV,iBAAO/B,WAAW,CAAC,KAAKmC,QAAN,CAAX,CAA2BC,YAA3B;AAAA;AAAA,+CAAP;AACH;;AACDH,QAAAA,WAAW,CAACI,GAAD,EAAc;AACrB,iBAAO;AAAEC,YAAAA,IAAI,EAAE,KAAK5B,KAAL,CAAW2B,GAAX,CAAR;AAAyBE,YAAAA,IAAI,EAAE;AAAA;AAAA,4BAAIC,OAAJ,CAAYC;AAA3C,WAAP;AACH;;AA/CsC,O;;;;;iBAEpB,I;;;;;;;iBAEO,I","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { MallLayoutCell } from './MallLayoutCell';\r\nimport InfiniteList from '../../../Common/InfiniteList/InfiniteList';\r\nimport { Global } from '../../../Global';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DiamondBuyPop')\r\nexport class DiamondBuyPop extends ViewPop {\r\n    @property(Prefab)\r\n    pfb_item: Prefab = null;\r\n    @property(InfiniteList)\r\n    list_view: InfiniteList = null;\r\n    private _list = []\r\n    register(): void {\r\n\r\n    }\r\n    unRegister(): void {\r\n        super.unRegister()\r\n    }\r\n    onShow(): void {\r\n        this._list = [];\r\n        let listData = tab.getData().BuyDiamondsTable;\r\n        for (let i = 0; i < listData.length; i += 3) {\r\n            if (listData[i].ViewSpecial && !Global.isReview){\r\n                continue\r\n            }\r\n            this._list.push(listData.slice(i, i + 3));\r\n        }\r\n      \r\n        this.list_view.Init({\r\n            getCellNumber: this.getCellCount.bind(this),\r\n            getCellSize: this.getCellHeight.bind(this),\r\n            getCellIdentifer: this.getCellIdentifer.bind(this),\r\n            getCellView: this.getCellView.bind(this),\r\n            getCellData: this.GetCellData.bind(this),\r\n        })\r\n    }\r\n    protected onDestroy(): void {\r\n        super.onDestroy();\r\n    }\r\n    getCellCount() {\r\n        return this._list.length;\r\n    }\r\n    getCellHeight() {\r\n        return 250;\r\n    }\r\n    getCellIdentifer() {\r\n        return \"MallLayoutCell\";\r\n    }\r\n    getCellView() {\r\n        return instantiate(this.pfb_item).getComponent(MallLayoutCell);\r\n    }\r\n    GetCellData(idx: number) {\r\n        return { data: this._list[idx], view: tab.MallTab.MallTab_Tab5 }\r\n    }\r\n}\r\n\r\n\r\n"]}