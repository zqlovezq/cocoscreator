{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/task/TaskBoxItem.ts"],"names":["_decorator","Label","Node","ProgressBar","ComponentBase","TaskData","UIMgr","ViewName","TaskControl","TASKDAILY","ccclass","property","TaskBoxItem","index","isCanReceived","type","register","initView","progress","totalNum","proBar","numLab","string","normalNode","active","isReceived","DAILY","ins","getIsGetDailyActiveReward","WEEK","getIsGetWeekActiveReward","GUILD","getIsGetGuildActiveReward","gotNode","cangetNode","onClickItem","requestReceiveDailyActivityTaskReward","requestReceiveWeeklyActivityTaskReward","requestReceiveGuildActivityTaskReward","rewads","getDailyActiveReward","getWeekActiveReward","getGuildActiveReward","show","viewName","CommonBoxTipsPop","data","boxBtnNode","worldPosition"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, ProgressBar } from 'cc';\r\nimport { ComponentBase } from '../../../framework/base/ComponentBase';\r\nimport { TaskData } from './TaskData';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { ItemInfo } from '../item/ItemInfo';\r\nimport { TaskControl } from './TaskControl';\r\nimport { TASKDAILY } from '../../../Common/script/EnumTypeMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * TaskBoxItem\r\n * zhudingchao\r\n * Tue Jun 04 2024 14:52:36 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/task/TaskBoxItem.ts\r\n *\r\n */\r\n\r\n@ccclass('TaskBoxItem')\r\nexport class TaskBoxItem extends ComponentBase {\r\n    @property(ProgressBar)\r\n    proBar: ProgressBar = null;\r\n    @property(Node)\r\n    normalNode:Node=null;\r\n    @property(Node)\r\n    cangetNode:Node=null;\r\n    @property(Node)\r\n    gotNode:Node=null;\r\n    @property(Label)\r\n    numLab:Label=null;\r\n    @property(Node)\r\n    boxBtnNode:Node=null;\r\n    private index:number;\r\n    private isCanReceived:boolean=false;\r\n    private type:number;\r\n    register(){\r\n\r\n    }\r\n    initView(type:number,index:number,progress:number,totalNum:number,){\r\n        this.index=index;\r\n        this.type=type;\r\n        this.proBar.progress=progress;\r\n        this.numLab.string=totalNum+\"\";\r\n    \r\n        if(progress>=1){\r\n            this.normalNode.active=false;\r\n            let isReceived = false\r\n            if(this.type===TASKDAILY.DAILY){\r\n                isReceived = TaskData.ins.getIsGetDailyActiveReward(index);\r\n            }else if(this.type===TASKDAILY.WEEK){\r\n                isReceived = TaskData.ins.getIsGetWeekActiveReward(index)\r\n            }else if(this.type===TASKDAILY.GUILD){\r\n                isReceived = TaskData.ins.getIsGetGuildActiveReward(index);\r\n            }\r\n            this.gotNode.active=isReceived;\r\n            this.cangetNode.active=!isReceived;\r\n            this.isCanReceived=!isReceived;\r\n        }else{\r\n            this.normalNode.active=true;\r\n            this.gotNode.active=false;\r\n            this.cangetNode.active=false;\r\n            this.isCanReceived=false;\r\n        }\r\n\r\n\r\n    }\r\n    onClickItem() {\r\n        if(this.isCanReceived){\r\n            if(this.type==TASKDAILY.DAILY){\r\n                TaskControl.ins.requestReceiveDailyActivityTaskReward([this.index]);\r\n            }else if(this.type==TASKDAILY.WEEK){\r\n                TaskControl.ins.requestReceiveWeeklyActivityTaskReward([this.index]);\r\n            }else if(this.type===TASKDAILY.GUILD){\r\n                TaskControl.ins.requestReceiveGuildActivityTaskReward([this.index]);\r\n            }\r\n\r\n        }else{\r\n            let rewads=[];\r\n            if(this.type==TASKDAILY.DAILY){\r\n                rewads=TaskData.ins.getDailyActiveReward(this.index);\r\n            }else if(this.type==TASKDAILY.WEEK){\r\n                rewads=TaskData.ins.getWeekActiveReward(this.index);\r\n            }else if(this.type==TASKDAILY.GUILD){\r\n                rewads=TaskData.ins.getGuildActiveReward(this.index);\r\n            }\r\n          \r\n            UIMgr.ins.show({viewName:ViewName.CommonBoxTipsPop,data:{\"worldPos\":this.boxBtnNode.worldPosition,\"rewadInfos\":rewads}})\r\n        }\r\n       \r\n    }\r\n}"]}