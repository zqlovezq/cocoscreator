{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/hero/HeroControl.ts"],"names":["HeroControl","_decorator","AbsControl","proto","tab","Net","EventMgr","HeroData","LocalEvent","RoleData","HeroTeamControl","HeroDataControl","HeroRed","BattleMainDataControl","OpenFunctionMgr","AdMgr","UIMgr","ViewName","MallDataMgr","BattlePassDataMgr","RookieTaskMgr","SettingsManager","RedMgr","RedDotType","GameplayViewDataMgr","FengyunRankControl","AssociationData","SettingRedManager","SignInGiftData","GuideController","ComicControl","MainSceneQueueUI","TaskData","FincaFightData","ccclass","property","ins","_instance","register","onMsg","Ptl","GetHeroBagRsp","on_s2c_GetHeroBagRsp","UpdateHeroPowerScore","on_s2c_Msg_UpdateHeroPowerScore","GetMainStageInfoRsp","on_s2c_GetMainStageInfoRsp","UpdateDropSum","on_s2c_UpdateDropSum","GetOpenFunctionsRsp","on_s2c_GetOpenFunctionsRsp","OpenFunctionChangePush","on_s2c_OpenFunctionChangePush","AdvWatchDataPush","on_s2c_AdvWatchDataPush","GetDailyShopInfoRsp","on_s2c_GetDailyShopInfoRsp","GetFixedShopInfoMapRsp","on_s2c_GetFixedShopInfoMapRsp","GetBattlePassInfoMapRsp","on_s2c_GetBattlePassInfoMapRsp","GetNewPlayerTrialMapRsp","on_s2c_GetNewPlayerTrialMapRsp","RoleLevelUpPush","on_s2c_RoleLevelUpPush","UnlockedHeroAlbumPush","on_s2c_UnlockedHeroAlbumPush","GetExploreStageInfoMapRsp","on_s2c_GetExploreStageInfoMapRsp","SetClientDataRsp","on_s2c_SetClientDataRsp","ChangedScrollPaintingPush","on_s2c_ChangedScrollPaintingPush","GuildBossDataPush","on_s2c_GuildBossDataPush","GetGuildInfoRsp","on_s2c_GetGuildInfoRsp","GetJoinGuildRequestsRsp","on_s2c_GetJoinGuildRequestsRsp","NewDayPush","on_s2c_NewDayPush","GetSignInGiftInfoRsp","on_s2c_GetSignInGiftInfoRsp","onLocal","SceneLoaded","SceneLoadFunc","ReceiveBattlePassTaskRewardsRsp","on_s2c_ReceiveBattlePassTaskRewardsRsp","GetFincaBattleInfoRsp","on_s2c_GetFincaBattleInfoRsp","requestHeros","func_msg","Msg_GetOpenFunctionsReq","Send","GetOpenFunctionsReq","stage_msg","Msg_GetMainStageInfoReq","GetMainStageInfoReq","elite_msg","Msg_GetEliteStageInfoReq","GetEliteStageInfoReq","bag_msg","Msg_GetHeroBagReq","GetHeroBagReq","daily_msg","Msg_GetDailyShopInfoReq","GetDailyShopInfoReq","fixed_msg","Msg_GetFixedShopInfoMapReq","GetFixedShopInfoMapReq","pass_msg","Msg_GetBattlePassInfoMapReq","GetBattlePassInfoMapReq","trial_msg","Msg_GetNewPlayerTrialMapReq","GetNewPlayerTrialMapReq","explore_msg","Msg_GetExploreStageInfoMapReq","GetExploreStageInfoMapReq","sign_msg","Msg_GetSignInGiftInfoReq","GetSignInGiftInfoReq","reqGetHonorRollMap","isGuildOpen","checkFunctionIsOpen","OpenFunctionName","OpenFunctionName_Association","guild_msg","Msg_GetGuildInfoReq","GetGuildInfoReq","finca_msg","Msg_GetFincaBattleInfoReq","GetFincaBattleInfoReq","msg","initTeam","teamSlots","levelResonance","starResonance","purge","adds","heroes","capacityLevel","initData","heroAlbumMap","receivedRecommendTeamIds","init","loadSettings","emitLocal","LoginProcessComplete","heroInfo","getById","heroId","powerScore","setOpenFunctionData","openFunctions","console","log","dropData","data","_roleDropData","i","drop","length","id","sum","push","pushOpenFunctionData","refreshData","refreshEvent","GachaAds","initDailyShop","initFixedShop","openFuncRed","initPassBattle","initTask","oldLevel","level","addLevelUpAward","rewards","refreshHeroAlbumIds","heroItemId","stageInfoMap","paintings","refresh","painting","unlockStar","updatePaintings","HeroPainting","error","code","CommonErrorCode","Succeed","initAssociationData","guildRequests","requests","Guild_Apply","GuildBossMsg","time","staminaInfo","resetLoadSetting","initSignInGift","sceneName","isGuiding","achieveCondition","getComicCondition","curClearStageId","clientData","Comic","Number","addComic","uiNode","setClientData","show","viewName","CongratulationPop","refreshTasks","tasks","refreshBattlePassTaskInfo","Battle_Pass"],"mappings":"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","sourcesContent":["import { Node, _decorator, js, primitives, sys } from \"cc\";\nimport { AbsControl } from \"../../../framework/base/IAbs\";\nimport { proto } from \"client_protocol\";\nimport { tab } from \"../../../Table/table_gen\";\nimport { Net } from \"../../net/Net\";\nimport { EventMgr } from \"../../mgr/EventMgr\";\nimport { HeroData } from \"./HeroData\";\nimport { LocalEvent } from \"../../define/LocalEvent\";\nimport { RoleData } from \"../role/RoleData\";\nimport { HeroTeamControl } from \"./HeroTeamControl\";\nimport { HeroDataControl } from \"./herobag/HeroDataControl\";\nimport { HeroRed } from \"./herobag/HeroRed\";\nimport { BattleMainDataControl } from \"../home/battle/BattleMainDataControl\";\nimport { OpenFunctionMgr } from \"../../../Common/component/OpenFunctionMgr\";\nimport { AdMgr } from \"../AdMgr\";\nimport { UIMgr } from \"../../mgr/UIMgr\";\nimport { ViewName } from \"../../define/ViewDefine\";\nimport { MallDataMgr } from \"../shop/MallDataMgr\";\nimport { BattlePassDataMgr } from \"../activity/battlePass/BattlePassDataMgr\";\nimport { RookieTaskMgr } from \"../activity/rookieTask/RookieTaskMgr\";\nimport { SettingsManager } from \"../role/SettingsManager\";\nimport { RedMgr } from \"../../mgr/RedMgr\";\nimport { RedDotType } from \"../../red/RedDotType\";\nimport { GameplayViewDataMgr } from \"../jianghu/GameplayViewDataMgr\";\nimport { FengyunRankControl } from \"../fengyunRanking/FengyunRankControl\";\nimport { AssociationData } from \"../association/AssociationData\";\nimport { SettingRedManager } from \"../role/SettingRedManager\";\nimport { SignInGiftData } from \"../activity/signGift/SignInGiftData\";\nimport { GuideController } from \"../../guide/GuideController\";\nimport { ComicControl } from \"../../../Common/script/ComicControl\";\nimport MainSceneQueueUI from \"../../utils/MainSceneQueueUI\";\nimport { TaskData } from \"../task/TaskData\";\nimport { FincaFightData } from \"../fincaFight/FincaFightData\";\nimport { BattleMainEliteControl } from \"../home/battle/BattleMainEliteControl\";\n\nconst { ccclass, property } = _decorator;\n\n/** 英雄 */\nexport class HeroControl extends AbsControl {\n\n    private static _instance: HeroControl;\n    public static get ins() {\n        if (null == this._instance) {\n            this._instance = new HeroControl();\n        }\n        return this._instance;\n    }\n\n    register(): void {\n        // EventMgr.onMsg(proto.Ptl.GetHeroesRsp, this.on_s2c_GetHeroesReq, this);\n        /* 获取背包数据 */\n        EventMgr.onMsg(proto.Ptl.GetHeroBagRsp, this.on_s2c_GetHeroBagRsp, this);\n\n        EventMgr.onMsg(proto.Ptl.UpdateHeroPowerScore, this.on_s2c_Msg_UpdateHeroPowerScore, this)\n        /* 获取关卡数据 */\n        EventMgr.onMsg(proto.Ptl.GetMainStageInfoRsp, this.on_s2c_GetMainStageInfoRsp, this);\n        /* 抽卡数据 */\n        EventMgr.onMsg(proto.Ptl.UpdateDropSum, this.on_s2c_UpdateDropSum, this);\n        /* 获取功能开发数据 */\n        EventMgr.onMsg(proto.Ptl.GetOpenFunctionsRsp, this.on_s2c_GetOpenFunctionsRsp, this);\n        /* 开放功能变更推送 */\n        EventMgr.onMsg(proto.Ptl.OpenFunctionChangePush, this.on_s2c_OpenFunctionChangePush, this);\n        /* 广告推送数据 */\n        EventMgr.onMsg(proto.Ptl.AdvWatchDataPush, this.on_s2c_AdvWatchDataPush, this);\n        /* 查看玩家数据 */\n        // EventMgr.onMsg(proto.Ptl.GetSimpleRoleRsp, this.on_s2c_GetSimpleRoleRsp, this);\n        /* 商店每日信息 */\n        EventMgr.onMsg(proto.Ptl.GetDailyShopInfoRsp, this.on_s2c_GetDailyShopInfoRsp, this);\n        /* 商店固定信息 */\n        EventMgr.onMsg(proto.Ptl.GetFixedShopInfoMapRsp, this.on_s2c_GetFixedShopInfoMapRsp, this);\n        /* 战令信息 */\n        EventMgr.onMsg(proto.Ptl.GetBattlePassInfoMapRsp, this.on_s2c_GetBattlePassInfoMapRsp, this);\n        /* 试炼信息 */\n        EventMgr.onMsg(proto.Ptl.GetNewPlayerTrialMapRsp, this.on_s2c_GetNewPlayerTrialMapRsp, this);\n        /* 等级刷新 */\n        EventMgr.onMsg(proto.Ptl.RoleLevelUpPush, this.on_s2c_RoleLevelUpPush, this);\n        /* 刷新图签信息 */\n        EventMgr.onMsg(proto.Ptl.UnlockedHeroAlbumPush, this.on_s2c_UnlockedHeroAlbumPush, this);\n        /* 探险任务 */\n        EventMgr.onMsg(proto.Ptl.GetExploreStageInfoMapRsp, this.on_s2c_GetExploreStageInfoMapRsp, this);\n        /* 设置客户端数据 */\n        EventMgr.onMsg(proto.Ptl.SetClientDataRsp, this.on_s2c_SetClientDataRsp, this);\n        /* 新英雄绘卷数据 */\n        EventMgr.onMsg(proto.Ptl.ChangedScrollPaintingPush, this.on_s2c_ChangedScrollPaintingPush, this);\n        /* 公会数据 */\n        EventMgr.onMsg(proto.Ptl.GuildBossDataPush, this.on_s2c_GuildBossDataPush, this);\n        EventMgr.onMsg(proto.Ptl.GetGuildInfoRsp, this.on_s2c_GetGuildInfoRsp, this);\n        EventMgr.onMsg(proto.Ptl.GetJoinGuildRequestsRsp, this.on_s2c_GetJoinGuildRequestsRsp, this);\n        // NewDayPush 跨天跨天通知\n        EventMgr.onMsg(proto.Ptl.NewDayPush, this.on_s2c_NewDayPush, this);\n        /* 签到数据 */\n        EventMgr.onMsg(proto.Ptl.GetSignInGiftInfoRsp, this.on_s2c_GetSignInGiftInfoRsp, this);\n        // 监听一下主场景加载完成\n        EventMgr.onLocal(LocalEvent.SceneLoaded, this.SceneLoadFunc, this)\n        // 战令购买\n        EventMgr.onMsg(proto.Ptl.ReceiveBattlePassTaskRewardsRsp, this.on_s2c_ReceiveBattlePassTaskRewardsRsp, this);\n        // 获取庄园战信息\n        EventMgr.onMsg(proto.Ptl.GetFincaBattleInfoRsp, this.on_s2c_GetFincaBattleInfoRsp, this);\n    }\n\n    requestHeros() {\n\n        // let msg = new proto.Msg_GetHeroesReq()\n        // Net.Send(proto.Ptl.GetHeroesReq, msg)\n\n        // 功能开启信息\n        let func_msg = new proto.Msg_GetOpenFunctionsReq()\n        Net.Send(proto.Ptl.GetOpenFunctionsReq, func_msg)\n        // 关卡信息\n        let stage_msg = new proto.Msg_GetMainStageInfoReq()\n        Net.Send(proto.Ptl.GetMainStageInfoReq, stage_msg)\n        // 精英关卡信息\n        let elite_msg = new proto. Msg_GetEliteStageInfoReq();\n        Net.Send(proto.Ptl.GetEliteStageInfoReq, elite_msg);\n        // 背包信息\n        let bag_msg = new proto.Msg_GetHeroBagReq()\n        Net.Send(proto.Ptl.GetHeroBagReq, bag_msg)\n        // 获取每日商店信息\n        let daily_msg = new proto.Msg_GetDailyShopInfoReq();\n        Net.Send(proto.Ptl.GetDailyShopInfoReq, daily_msg);\n        // 获取固定商店信息\n        let fixed_msg = new proto.Msg_GetFixedShopInfoMapReq();\n        Net.Send(proto.Ptl.GetFixedShopInfoMapReq, fixed_msg);\n        // 获取战令信息\n        let pass_msg = new proto.Msg_GetBattlePassInfoMapReq();\n        Net.Send(proto.Ptl.GetBattlePassInfoMapReq, pass_msg);\n        // 获取试炼任务信息\n        let trial_msg = new proto.Msg_GetNewPlayerTrialMapReq();\n        Net.Send(proto.Ptl.GetNewPlayerTrialMapReq, trial_msg);\n        // 探险任务\n        let explore_msg = new proto.Msg_GetExploreStageInfoMapReq();\n        Net.Send(proto.Ptl.GetExploreStageInfoMapReq, explore_msg);\n        // 签到数据\n        let sign_msg = new proto.Msg_GetSignInGiftInfoReq();\n        Net.Send(proto.Ptl.GetSignInGiftInfoReq, sign_msg);\n        // 提前获取风云榜信息\n        FengyunRankControl.ins.reqGetHonorRollMap();\n        // 获取公会信息 公会如果开放获取公会信息\n        const isGuildOpen = OpenFunctionMgr.ins.checkFunctionIsOpen(tab.OpenFunctionName.OpenFunctionName_Association);\n        if (isGuildOpen) {\n            let guild_msg = new proto.Msg_GetGuildInfoReq();\n            Net.Send(proto.Ptl.GetGuildInfoReq, guild_msg);\n        }\n        // 获取竞技场信息\n        let finca_msg = new proto.Msg_GetFincaBattleInfoReq();\n        Net.Send(proto.Ptl.GetFincaBattleInfoReq, finca_msg);\n    }\n\n    on_s2c_GetHeroBagRsp(msg: proto.Msg_GetHeroBagRsp) {\n        /* 初始化team数据 */\n        HeroTeamControl.ins.initTeam(msg.teamSlots, msg.levelResonance, msg.starResonance);\n        HeroData.ins.purge()\n        HeroData.ins.adds(msg.heroes as proto.Hero[])\n        // 背包容量等级\n        RoleData.ins.capacityLevel = msg.capacityLevel;\n\n        HeroDataControl.ins.initData(msg.heroAlbumMap, msg.receivedRecommendTeamIds);\n\n        /* 广告 */\n        AdMgr.ins.init();\n        /* 红点 */\n        HeroRed.ins.init();\n        // 设置\n        SettingsManager.ins.loadSettings();\n        // 初始化红点弹窗提示\n        SettingRedManager.ins.loadSettings();\n        // 初始化自动弹窗\n        MainSceneQueueUI.init()\n        EventMgr.emitLocal(LocalEvent.LoginProcessComplete)\n    }\n    on_s2c_Msg_UpdateHeroPowerScore(msg: proto.Msg_UpdateHeroPowerScore) {\n        let heroInfo = HeroData.ins.getById(msg.heroId);\n        if (heroInfo) {\n            heroInfo.powerScore = msg.powerScore;\n        }\n\n    }\n    on_s2c_GetMainStageInfoRsp(msg: proto.Msg_GetMainStageInfoRsp) {\n        BattleMainDataControl.ins.initData(msg);\n    }\n    on_s2c_GetOpenFunctionsRsp(msg: proto.Msg_GetOpenFunctionsRsp) {\n        OpenFunctionMgr.ins.setOpenFunctionData(msg.openFunctions);\n    }\n    // 刷新抽卡剩余次数\n    on_s2c_UpdateDropSum(msg: proto.Msg_UpdateDropSum) {\n        console.log(msg);\n        const dropData = msg.data[0];\n        let _roleDropData: proto.IDropSumData = null;\n        for (let i = 0; i < RoleData.ins.drop.data.length; i++) {\n            const data: proto.IDropSumData = RoleData.ins.drop.data[i];\n            if (data.id === dropData.id) {\n                _roleDropData = data;\n            }\n        }\n        if (_roleDropData) {\n            _roleDropData.sum = dropData.sum;\n        } else {\n            RoleData.ins.drop.data.push(dropData);\n        }\n    }\n    on_s2c_OpenFunctionChangePush(msg: proto.Msg_OpenFunctionChangePush) {\n        // 开放功能推送\n        OpenFunctionMgr.ins.pushOpenFunctionData(msg.openFunctions);\n    }\n    on_s2c_AdvWatchDataPush(msg: proto.Msg_AdvWatchDataPush) {\n        // 广告光看次数推送\n        AdMgr.ins.refreshData(msg.data);\n        RedMgr.refreshEvent(RedDotType.GachaAds);\n    }\n    // // 查看玩家信息\n    // on_s2c_GetSimpleRoleRsp(msg: proto.Msg_GetSimpleRoleRsp) {\n    //     UIMgr.ins.show({ viewName: ViewName.CheckRoleInfoPop, data: { data: msg.role } })\n    // }\n    on_s2c_GetDailyShopInfoRsp(msg: proto.Msg_GetDailyShopInfoRsp) {\n        MallDataMgr.ins.initDailyShop(msg);\n    }\n    on_s2c_GetFixedShopInfoMapRsp(msg: proto.Msg_GetFixedShopInfoMapRsp) {\n        MallDataMgr.ins.initFixedShop(msg);\n        EventMgr.emitLocal(LocalEvent.openFuncRed);\n    }\n    on_s2c_GetBattlePassInfoMapRsp(msg: proto.Msg_GetBattlePassInfoMapRsp) {\n        BattlePassDataMgr.ins.initPassBattle(msg);\n    }\n    on_s2c_GetNewPlayerTrialMapRsp(msg: proto.Msg_GetNewPlayerTrialMapRsp) {\n        RookieTaskMgr.ins.initTask(msg);\n    }\n    on_s2c_RoleLevelUpPush(msg: proto.Msg_RoleLevelUpPush) {\n        RoleData.ins.oldLevel = msg.level;\n        RoleData.ins.addLevelUpAward(msg.rewards);\n    }\n    on_s2c_UnlockedHeroAlbumPush(msg: proto.Msg_UnlockedHeroAlbumPush) {\n        HeroDataControl.ins.refreshHeroAlbumIds(msg.heroItemId);\n    }\n    on_s2c_GetExploreStageInfoMapRsp(msg: proto.Msg_GetExploreStageInfoMapRsp) {\n        GameplayViewDataMgr.ins.initData(msg.stageInfoMap);\n    }\n    on_s2c_SetClientDataRsp(msg: proto.Msg_SetClientDataRsp) {\n\n    }\n    on_s2c_ChangedScrollPaintingPush(msg: proto.Msg_ChangedScrollPaintingPush) {\n        if (RoleData.ins.paintings.length > 0) {\n            let refresh = false;\n            for (let i = 0; i < RoleData.ins.paintings.length; i++) {\n                const painting = RoleData.ins.paintings[i];\n                if (painting.heroItemId === msg.painting.heroItemId) {\n                    refresh = true;\n                    painting.unlockStar = msg.painting.unlockStar;\n                }\n            }\n            if (!refresh) {\n                RoleData.ins.paintings.push(msg.painting);\n            }\n        } else {\n            RoleData.ins.paintings.push(msg.painting);\n        }\n        // 刷新数据\n        HeroDataControl.ins.updatePaintings();\n        // 刷新红点\n        RedMgr.refreshEvent(RedDotType.HeroPainting);\n    }\n    on_s2c_GetGuildInfoRsp(msg: proto.Msg_GetGuildInfoRsp) {\n        if (msg.error && msg.error.code != proto.CommonErrorCode.Succeed) return;\n        AssociationData.ins.initAssociationData(msg)\n    }\n    on_s2c_GetJoinGuildRequestsRsp(msg: proto.Msg_GetJoinGuildRequestsRsp) {\n        if (msg.error && msg.error.code != proto.CommonErrorCode.Succeed) return;\n        RoleData.ins.guildRequests = msg.requests;\n        RedMgr.refreshEvent(RedDotType.Guild_Apply);\n    }\n    on_s2c_GuildBossDataPush(msg: proto.Msg_GuildBossDataPush) {\n        AssociationData.ins.GuildBossMsg = msg;\n    }\n    on_s2c_NewDayPush(msg: proto.Msg_NewDayPush) {\n        if (msg.time) {\n            // 刷新需要跨天的红点\n            if (RoleData.ins.staminaInfo) {\n                SettingRedManager.ins.resetLoadSetting();\n            }\n        }\n    }\n    on_s2c_GetSignInGiftInfoRsp(msg: proto.Msg_GetSignInGiftInfoRsp) {\n        SignInGiftData.ins.initSignInGift(msg);\n    }\n    SceneLoadFunc(sceneName: string) {\n        if (!GuideController.ins.isGuiding() && sceneName == \"MainScene\") {\n            const achieveCondition = ComicControl.ins.getComicCondition(RoleData.ins.curClearStageId);\n            if (achieveCondition && RoleData.ins.curClearStageId && (!RoleData.ins.clientData.Comic || Number(RoleData.ins.clientData.Comic) < RoleData.ins.curClearStageId)) {\n                ComicControl.ins.addComic(achieveCondition, UIMgr.ins.uiNode);\n                RoleData.ins.setClientData(\"Comic\", \"\"+RoleData.ins.curClearStageId);\n            }\n        }\n    }\n    on_s2c_ReceiveBattlePassTaskRewardsRsp(msg: proto.Msg_ReceiveBattlePassTaskRewardsRsp) {\n        if (msg.error && msg.error.code != proto.CommonErrorCode.Succeed) return;\n        UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: msg.rewards });\n        BattlePassDataMgr.ins.refreshTasks(msg.id, msg.tasks);\n        // 更新任务\n        TaskData.ins.refreshBattlePassTaskInfo(msg.tasks);\n        RedMgr.refreshEvent(RedDotType.Battle_Pass);\n    }\n    on_s2c_GetFincaBattleInfoRsp(msg: proto.Msg_GetFincaBattleInfoRsp){\n        FincaFightData.ins.initData(msg)\n    }\n}"]}