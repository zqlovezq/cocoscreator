{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/association/AssociationRankTopItem.ts"],"names":["_decorator","Component","Label","Node","Sprite","GameUtil","refreshFlagImg","SimpleRoleInfo","PlayerHeadItem","UIMgr","ViewName","ccclass","property","AssociationRankTopItem","data","simpleRole","simpleGuild","initData","view_type","node_role","active","node_guild","node_null","initPlayerData","initGuildData","simple","playerInfo","merge","palyerHerdItem","initHeadInfo","roleInfo","lbl_role_damage","string","String","score","lbl_role_name","name","guild","createGuildData","flagId","sp_guild_flag","lbl_guild_name","lbl_guild_force","convertNumber","onClickGuild","ins","show","viewName","AssociationMainPop"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, Sprite } from 'cc';\r\nimport { proto } from 'client_protocol';\r\nimport { GameUtil, refreshFlagImg } from '../../utils/GameUtil';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { SimpleRoleInfo } from '../friends/SimpleRoleInfo';\r\nimport { PlayerHeadItem } from '../common/PlayerHeadItem';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AssociationRankTopItem')\r\nexport class AssociationRankTopItem extends Component {\r\n    @property(Node)\r\n    node_role:Node = null;\r\n    @property(Node)\r\n    node_guild:Node = null;\r\n    @property(Node)\r\n    node_null:Node = null;\r\n\r\n    @property(Sprite)\r\n    sp_guild_flag:Sprite = null;\r\n    @property(Label)\r\n    lbl_guild_name:Label = null;\r\n    @property(Label)\r\n    lbl_guild_force:Label = null;\r\n\r\n\r\n    @property(PlayerHeadItem)\r\n    palyerHerdItem:PlayerHeadItem=null;\r\n    @property(Label)\r\n    lbl_role_damage:Label = null;\r\n    @property(Label)\r\n    lbl_role_name:Label = null;\r\n    private data:any = null;\r\n    private simpleRole:proto.ISimpleRole = null;\r\n    private simpleGuild:proto.ISimpleGuild = null;\r\n    initData(data:any,view_type:number){\r\n        this.node_role.active = false;\r\n        this.node_guild.active = false;\r\n        this.node_null.active = false;\r\n        if(data){\r\n            if(view_type===1){\r\n                this.data = data as proto.ISimpleRank\r\n                this.initPlayerData(this.data);\r\n            }else{\r\n                this.data = data as proto.IGuildBossRank\r\n                this.initGuildData(this.data);\r\n            }\r\n        }else{\r\n            this.node_null.active = true;\r\n        }\r\n    }\r\n    initPlayerData(data:proto.ISimpleRank){\r\n        this.simpleRole = data.simple;\r\n        this.node_role.active = true;\r\n        const playerInfo = new SimpleRoleInfo();\r\n        playerInfo.merge(this.simpleRole);\r\n        this.palyerHerdItem.initHeadInfo({roleInfo:playerInfo});\r\n\r\n        this.lbl_role_damage.string = String(data.score);\r\n        this.lbl_role_name.string = this.simpleRole.name;\r\n    }\r\n    initGuildData(data:proto.IGuildBossRank){\r\n        this.node_guild.active = true;\r\n        this.simpleGuild = data.guild.simple;\r\n        this.createGuildData();\r\n    }\r\n    createGuildData(){\r\n        refreshFlagImg(this.simpleGuild?this.simpleGuild.flagId:0,this.sp_guild_flag);\r\n        this.lbl_guild_name.string = this.simpleGuild?this.simpleGuild.name:\"\";\r\n        this.lbl_guild_force.string = GameUtil.convertNumber(this.data.score)\r\n    }\r\n    onClickGuild() {\r\n        if(this.simpleGuild){\r\n            UIMgr.ins.show({ viewName: ViewName.AssociationMainPop, data: { \"rankData\": this.simpleGuild } })\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}