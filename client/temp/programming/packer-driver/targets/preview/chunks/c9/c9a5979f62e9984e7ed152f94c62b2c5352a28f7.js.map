{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/activity/heroRoad/HeroRoadItem.ts"],"names":["_decorator","Color","Component","Label","Node","ProgressBar","RichText","tab","LangMgr","ItemInfo","ItemPoolMgr","ActivityControl","ccclass","property","HeroRoadItem","state","table","initView","progress","key","String","HeroCollectionType","Type","titleRichText","string","getCombineString","Params","updateView","itemInfo","initItemData","ItemId","ItemCount","ins","createRewadItem","rewardNode","faGuangNode","active","rewardBtnNode","lockNode","gotNode","proBar","currLab","totalLab","cStr","getData","GetKeyValue_ConfigTable","InterfaceTxtRed","color","fromHEX","onClickItem","requestGetHeroCollectionReward","Id"],"mappings":"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","sourcesContent":["import { _decorator, Color, Component, Label, Node, ProgressBar, RichText } from 'cc';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nimport { ItemInfo } from '../../item/ItemInfo';\r\nimport { ItemPoolMgr } from '../../item/ItemPoolMgr';\r\nimport { ActivityControl } from '../ActivityControl';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * HeroRoadItem\r\n * zhudingchao\r\n * Mon Jun 24 2024 15:56:24 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/activity/heroRoad/HeroRoadItem.ts\r\n *\r\n */\r\n\r\n@ccclass('HeroRoadItem')\r\nexport class HeroRoadItem extends Component {\r\n    @property(RichText)\r\n    titleRichText: RichText = null;\r\n    @property(Node)\r\n    faGuangNode: Node = null;\r\n    @property(Node)\r\n    rewardNode: Node = null;\r\n    @property(Node)\r\n    rewardBtnNode: Node = null;\r\n    @property(Node)\r\n    lockNode: Node = null;\r\n    @property(Node)\r\n    gotNode: Node = null;\r\n    @property(ProgressBar)\r\n    proBar: ProgressBar = null;\r\n    @property(Label)\r\n    currLab: Label = null;\r\n    @property(Label)\r\n    totalLab: Label = null;\r\n    private state: number = 0;\r\n    public table: tab.HeroCollectionTable;\r\n\r\n\r\n    initView(table: tab.HeroCollectionTable, state: number, progress: number) {\r\n        this.table = table;\r\n        let key=String(tab.HeroCollectionType[table.Type]);\r\n        this.titleRichText.string = LangMgr.getCombineString(key, [table.Params]);\r\n        this.updateView(state, progress);\r\n        let itemInfo = new ItemInfo();\r\n        itemInfo.initItemData(table.ItemId, table.ItemCount);\r\n        ItemPoolMgr.ins.createRewadItem(itemInfo, this.rewardNode);\r\n\r\n    }\r\n    updateView(state: number, progress: number) {\r\n        this.state = state;\r\n        this.faGuangNode.active = state == 1;\r\n        this.rewardBtnNode.active = state == 1;\r\n        this.lockNode.active = state != 2;\r\n        this.gotNode.active = state == 2;\r\n        if(progress>this.table.Params){\r\n            progress=this.table.Params;\r\n        }\r\n\r\n        if (this.lockNode.active) {\r\n            this.proBar.progress = progress / this.table.Params;\r\n            this.currLab.string = progress + \"\";\r\n            this.totalLab.string = \"/\" + this.table.Params;\r\n            let cStr = \"\"\r\n            if (progress < this.table.Params) {\r\n                cStr = tab.getData().GetKeyValue_ConfigTable().InterfaceTxtRed;\r\n            } else {\r\n                cStr = \"ffffff\"\r\n            }\r\n            this.currLab.color = new Color().fromHEX(cStr);\r\n        }\r\n\r\n    }\r\n    onClickItem() {\r\n        if (this.state == 1) {\r\n            ActivityControl.ins.requestGetHeroCollectionReward(this.table.Id);\r\n        }\r\n    }\r\n\r\n\r\n \r\n\r\n}"]}