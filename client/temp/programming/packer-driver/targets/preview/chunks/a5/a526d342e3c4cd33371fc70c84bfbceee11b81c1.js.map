{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/rank/RankBottomItem.ts"],"names":["_decorator","Label","Node","RichText","Sprite","InfiniteCell","tab","LangMgr","HeroInfo","ViewName","ShowTips","UIMgr","HeroItem","PlayerHeadItem","RANKING_TYPE","SimpleRoleInfo","GameUtil","refreshFlagImg","setTextTime","HeroStar","RoleData","ccclass","property","RankBottomItem","_rank_data","_rank_index","_rankType","NONE","_isMySelf","UpdateContent","data","index","rankType","rankData","isSelf","node_hero","active","HERO","node_guild","GUILD","node_player","setRankHeroData","setRankGuildData","setRankPlayerData","lbl_guild_name","string","lbl_guild_force","lbl_rank","String","flagId","sp_guild_flag","name","convertNumber","powerScore","itemId","itemTab","getData","ItemTableById","getValue","heroTab","HeroTableById","lbl_power_score","getLab","lbl_hero_Name","Name","lbl_player_Name","roleName","hero_item","setTouchCallBack","ins","show","viewName","CheckRoleInfoHeroPop","heroData","heroInfo","star","id","level","lbl_player_node_force","node","lbl_player_node_damage","lbl_player_node_level","lbl_player_node_chapter","lbl_player_node_name","score","chapterInfo","Math","floor","Number","times","level_txt","getChildByName","getComponent","time_txt","BOSS","simple","playerInfo","merge","palyerHerdItem","initHeadInfo","roleInfo","setCloseCallBack","CheckRoleInfoPop","LEVEL","getCombineString","POWER","CHAPTER","Fight","table","QuestLogTableByLevel","reputation","lbl_player_node_reputation","setPlayerMyRank","idx","onDisable","Node_StarItem","isValid","onClickGuild","AssociationMainPop"],"mappings":"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","sourcesContent":["/*\r\n * @Date: 2024-06-12 17:41:34\r\n * @LastEditors: wzq\r\n * @LastEditTime: 2024-11-22 15:09:11\r\n */\r\n\r\nimport { _decorator, Component, Label, Node, RichText, Sprite } from 'cc';\r\nimport InfiniteCell from '../../../Common/InfiniteList/InfiniteCell';\r\nimport { proto } from 'client_protocol';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { HeroInfo } from '../hero/HeroInfo';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { ShowTips, UIMgr } from '../../mgr/UIMgr';\r\nimport { HeroItem } from '../item/HeroItem';\r\nimport { PlayerHeadItem } from '../common/PlayerHeadItem';\r\nimport { RANKING_TYPE } from '../../../Common/script/EnumTypeMgr';\r\nimport { SimpleRoleInfo } from '../friends/SimpleRoleInfo';\r\nimport { GameUtil, refreshFlagImg, setTextTime } from '../../utils/GameUtil';\r\nimport { HeroStar } from '../hero/HeroStar';\r\nimport { RoleData } from '../role/RoleData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RankBottomItem')\r\nexport class RankBottomItem extends InfiniteCell {\r\n    @property(Label)\r\n    lbl_rank: Label = null;\r\n    @property(Label)\r\n    lbl_power_score: Label = null;\r\n    @property(Label)\r\n    lbl_hero_Name: Label = null;\r\n    @property(Label)\r\n    lbl_player_Name: Label = null;\r\n    @property(HeroItem)\r\n    hero_item: HeroItem = null;\r\n\r\n    @property(Label)\r\n    lbl_player_node_name: Label = null;\r\n    @property(Label)\r\n    lbl_player_node_force: Label = null;\r\n    @property(PlayerHeadItem)\r\n    palyerHerdItem: PlayerHeadItem = null;\r\n    @property(Node)\r\n    lbl_player_node_chapter: Node = null;\r\n    @property(Label)\r\n    lbl_player_node_level: Label = null;\r\n    @property(Label)\r\n    lbl_player_node_damage: Label = null;\r\n    @property(RichText)\r\n    lbl_player_node_reputation: RichText = null;\r\n\r\n    @property(Node)\r\n    node_player: Node = null;\r\n    @property(Node)\r\n    node_hero: Node = null;\r\n    @property(Node)\r\n    node_guild: Node = null;\r\n    @property(HeroStar)\r\n    Node_StarItem: HeroStar = null;\r\n\r\n    @property(Sprite)\r\n    sp_guild_flag: Sprite = null;\r\n    @property(Label)\r\n    lbl_guild_name: Label = null;\r\n    @property(Label)\r\n    lbl_guild_force: Label = null;\r\n\r\n    private _rank_data: proto.ISimpleHero | proto.ISimpleRank | proto.ISimpleGuild = null;\r\n    private _rank_index: number = 0;\r\n    private _rankType: RANKING_TYPE = RANKING_TYPE.NONE;\r\n    private _isMySelf: boolean = false;\r\n    UpdateContent(data: any): void {\r\n        this._rank_index = data.index;\r\n        this._rankType = data.rankType\r\n        this._rank_data = data.rankData;\r\n        this._isMySelf = data.isSelf;\r\n        this.node_hero.active = this._rankType === RANKING_TYPE.HERO;\r\n        this.node_guild.active = this._rankType === RANKING_TYPE.GUILD\r\n        this.node_player.active = this._rankType !== RANKING_TYPE.HERO && this._rankType !== RANKING_TYPE.GUILD;\r\n        if (this._rankType === RANKING_TYPE.HERO) {\r\n            this.setRankHeroData();\r\n        } else if (this._rankType === RANKING_TYPE.GUILD) {\r\n            this.setRankGuildData();\r\n        } else {\r\n            this.setRankPlayerData();\r\n        }\r\n    }\r\n    // 设置公会排行信息\r\n    setRankGuildData() {\r\n        const rankData = this._rank_data as proto.ISimpleGuild\r\n        this.lbl_guild_name.string = \"\";\r\n        this.lbl_guild_force.string = \"0\";\r\n        this.lbl_rank.string = \"0\";\r\n        if (rankData) {\r\n            this.lbl_rank.string = String(this._rank_index + 4);\r\n            refreshFlagImg(rankData.flagId, this.sp_guild_flag);\r\n            this.lbl_guild_name.string = rankData.name;\r\n            this.lbl_guild_force.string = GameUtil.convertNumber(rankData.powerScore)\r\n        }\r\n    }\r\n    // 设置基本信息\r\n    setRankHeroData() {\r\n        const rankData = this._rank_data as proto.ISimpleHero\r\n        this.lbl_rank.string = String(this._rank_index + 4);\r\n        const itemId = rankData.itemId;\r\n        const itemTab = tab.getData().ItemTableById.getValue(itemId);\r\n        const heroTab = tab.getData().HeroTableById.getValue(itemId);\r\n        // 显示战斗力\r\n        //this.lbl_power_score.string = String(rankData.powerScore);\r\n        this.lbl_power_score.string = LangMgr.getLab(\"ui_commondesc_43\") + GameUtil.convertNumber(rankData.powerScore);\r\n        this.lbl_hero_Name.string = LangMgr.getLab(itemTab.Name);\r\n        this.lbl_player_Name.string = rankData.roleName;\r\n\r\n        this.hero_item.setTouchCallBack(() => {\r\n            if (this._isMySelf) {\r\n                //ShowTips(\"您戳到自己了哦\");\r\n                ShowTips(LangMgr.getLab(\"Tips_rank_1\"));\r\n            } else {\r\n                UIMgr.ins.show({\r\n                    viewName: ViewName.CheckRoleInfoHeroPop, data: {\r\n                        heroData: this._rank_data\r\n                    }\r\n                })\r\n            }\r\n        })\r\n        const heroInfo = new HeroInfo();\r\n        heroInfo.itemId = itemId;\r\n        heroInfo.star = rankData.star;\r\n        heroInfo.id = 0;\r\n        heroInfo.level = rankData.level;\r\n        this.hero_item.UpdateContent(heroInfo);\r\n    }\r\n    setRankPlayerData() {\r\n        this.lbl_player_node_force.node.active = false;\r\n        this.lbl_player_node_damage.node.active = false;\r\n        this.lbl_player_node_level.node.active = false;\r\n        this.lbl_player_node_chapter.active = false;\r\n        const rankData = this._rank_data as proto.ISimpleRank;\r\n        this.lbl_rank.string = String(this._rank_index + 4);\r\n        this.lbl_player_node_name.string = \"\";\r\n        if (rankData) {\r\n            if (rankData.score) {\r\n                const chapterInfo = Math.floor(Number(rankData.score) / 1000000);\r\n                const times = (Number(rankData.score)) % 1000000;\r\n                const level_txt = this.lbl_player_node_chapter.getChildByName(\"level_txt\").getComponent(Label);\r\n                const time_txt = this.lbl_player_node_chapter.getChildByName(\"time_txt\").getComponent(Label);\r\n                time_txt.string = setTextTime(times);\r\n                level_txt.string = Math.floor(chapterInfo / 100) + \"-\" + chapterInfo % 100;\r\n                if (this._rankType === RANKING_TYPE.BOSS) {\r\n                    this.lbl_player_node_damage.node.active = true;\r\n                    this.lbl_player_node_damage.string = GameUtil.convertNumber(rankData.score);\r\n                }\r\n            }\r\n            if (rankData.simple) {\r\n                this.lbl_player_node_name.string = rankData.simple.name;\r\n                // 玩家名字\r\n                const playerInfo = new SimpleRoleInfo();\r\n                if(this._isMySelf){\r\n                    rankData.simple.level = RoleData.ins.level;\r\n                }\r\n                playerInfo.merge(rankData.simple);\r\n                this.palyerHerdItem.initHeadInfo({ roleInfo: playerInfo });\r\n                this.palyerHerdItem.setCloseCallBack(() => {\r\n                    if (this._isMySelf) {\r\n                        //ShowTips(\"您戳到自己了哦\");\r\n                        ShowTips(LangMgr.getLab(\"Tips_rank_1\"));\r\n                    } else {\r\n                        UIMgr.ins.show({ viewName: ViewName.CheckRoleInfoPop, data: { \"rankData\": playerInfo } })\r\n                    }\r\n                })\r\n                if (this._rankType === RANKING_TYPE.LEVEL) {\r\n                    // 等级榜\r\n                    this.lbl_player_node_level.node.active = true;\r\n                    this.lbl_player_node_level.string = LangMgr.getCombineString(\"ui_heroresonancepop_3\", [String(rankData.simple.level)]);\r\n                } else if (this._rankType === RANKING_TYPE.POWER) {\r\n                    this.lbl_player_node_force.node.active = true;\r\n                    this.lbl_player_node_force.string = LangMgr.getLab(\"ui_commondesc_43\") + GameUtil.convertNumber(rankData.simple.powerScore);\r\n                } else if (this._rankType === RANKING_TYPE.CHAPTER) {\r\n                    this.lbl_player_node_chapter.active = true;\r\n                } else if (this._rankType === RANKING_TYPE.Fight) {\r\n                    this.lbl_player_node_force.node.active = true;\r\n                    this.lbl_player_node_force.string =  LangMgr.getCombineString(\"ui_fincafight_13\", [String(rankData.score)]);\r\n                }\r\n\r\n                let table = tab.getData().QuestLogTableByLevel.getValue(rankData.simple.reputation);\r\n                if (table) {\r\n                    this.lbl_player_node_reputation.string = LangMgr.getLab(table.Name);\r\n                } else {\r\n                    this.lbl_player_node_reputation.node.active = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setPlayerMyRank(idx: number) {\r\n        this.lbl_rank.string = String(idx);\r\n        if (idx > 0 && idx <= 3) {\r\n            this.node.getChildByName(\"rank_node\").active = false;\r\n            this.node.getChildByName(\"myno1\").active = idx === 1;\r\n            this.node.getChildByName(\"myno2\").active = idx === 2;\r\n            this.node.getChildByName(\"myno3\").active = idx === 3;\r\n        } else if (idx > 3) {\r\n            this.node.getChildByName(\"rank_node\").active = true;\r\n        } else {\r\n            //this.lbl_rank.string = \"未上榜\"\r\n            this.lbl_rank.string = LangMgr.getLab(\"ui_rank_1\")\r\n        }\r\n    }\r\n    protected onDisable(): void {\r\n        if (this.Node_StarItem && this.Node_StarItem.isValid) {\r\n            this.Node_StarItem.onDisable();\r\n        }\r\n    }\r\n    onClickGuild() {\r\n        const rankData = this._rank_data as proto.ISimpleGuild\r\n        if (rankData.id) {\r\n            UIMgr.ins.show({ viewName: ViewName.AssociationMainPop, data: { \"rankData\": rankData } })\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}