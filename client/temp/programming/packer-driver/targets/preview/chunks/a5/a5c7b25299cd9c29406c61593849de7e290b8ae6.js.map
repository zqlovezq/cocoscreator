{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/rareBook/RareBookLevelPreviewPop.ts"],"names":["_decorator","instantiate","Label","Node","Prefab","Sprite","ViewPop","RareBookSmallItem","tab","LangMgr","RareBookLevelPreviewPopItem","ccclass","property","RareBookLevelPreviewPop","currInfo","register","onShow","openData","initView","bookItem","heroclass","getData","HeroClassTableByHeroClass","getValue","bookTable","Class","vocationSpr","setTexture","Icon","nameLab","string","getLab","itemTable","Name","allStarTabls","tabs","BookStarTable","key","BookId","itemId","push","level","isLock","star","Description","item","itemPrefab","parent","contentNode","getComponent","initData","Level"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,M,OAAAA,M;;AACzDC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,iB,iBAAAA,iB;;AAEAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,2B,iBAAAA,2B;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;yCAGaa,uB,WADZF,OAAO,CAAC,yBAAD,C,UAEHC,QAAQ;AAAA;AAAA,iD,UAERA,QAAQ,CAACV,KAAD,C,UAERU,QAAQ,CAACP,MAAD,C,UAERO,QAAQ,CAACT,IAAD,C,UAERS,QAAQ,CAACR,MAAD,C,2BAVb,MACaS,uBADb;AAAA;AAAA,8BACqD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAWzCC,QAXyC;AAAA;;AAYjDC,QAAAA,QAAQ,GAAS,CAEhB;;AACDC,QAAAA,MAAM,GAAS;AACX,eAAKF,QAAL,GAAc,KAAKG,QAAL,CAAc,UAAd,CAAd;;AACA,cAAG,KAAKH,QAAR,EAAiB;AACb,iBAAKI,QAAL;AACH;AACJ;;AACDA,QAAAA,QAAQ,GAAE;AACN,eAAKC,QAAL,CAAcD,QAAd,CAAuB,KAAKJ,QAA5B,EAAqC,KAArC;AACA,cAAIM,SAAS,GAAG;AAAA;AAAA,0BAAIC,OAAJ,GAAcC,yBAAd,CAAwCC,QAAxC,CAAiD,KAAKT,QAAL,CAAcU,SAAd,CAAwBC,KAAzE,CAAhB;AACA,eAAKC,WAAL,CAAiBC,UAAjB,CAA4BP,SAAS,CAACQ,IAAtC;AACA,eAAKC,OAAL,CAAaC,MAAb,GAAoB;AAAA;AAAA,kCAAQC,MAAR,CAAe,KAAKjB,QAAL,CAAckB,SAAd,CAAwBC,IAAvC,CAApB;AACA,cAAIC,YAAgC,GAAC,EAArC;AACA,cAAIC,IAAI,GAAC;AAAA;AAAA,0BAAId,OAAJ,GAAce,aAAvB;;AACA,eAAI,IAAIC,GAAR,IAAeF,IAAf,EAAoB;AAChB,gBAAGA,IAAI,CAACE,GAAD,CAAJ,CAAUC,MAAV,IAAkB,KAAKxB,QAAL,CAAcyB,MAAnC,EAA0C;AACtCL,cAAAA,YAAY,CAACM,IAAb,CAAkBL,IAAI,CAACE,GAAD,CAAtB;AACH;AACJ;;AACD,cAAII,KAAK,GAAC,KAAK3B,QAAL,CAAc4B,MAAd,GAAqB,KAAK5B,QAAL,CAAc6B,IAAnC,GAAwC,CAAlD;;AAEA,eAAI,IAAIN,IAAR,IAAeH,YAAf,EAA4B;AACxB,gBAAGA,YAAY,CAACG,IAAD,CAAZ,CAAkBO,WAAlB,IAA+BV,YAAY,CAACG,IAAD,CAAZ,CAAkBO,WAAlB,IAA+B,EAAjE,EAAoE;AAChE,kBAAIC,IAAI,GAAC5C,WAAW,CAAC,KAAK6C,UAAN,CAApB;AACAD,cAAAA,IAAI,CAACE,MAAL,GAAY,KAAKC,WAAjB;AACAH,cAAAA,IAAI,CAACI,YAAL;AAAA;AAAA,8EAA+CC,QAA/C,CAAwDhB,YAAY,CAACG,IAAD,CAApE,EAA0EH,YAAY,CAACG,IAAD,CAAZ,CAAkBc,KAAlB,IAAyBV,KAAnG;AACH;AAEJ;AAEJ;;AA5CgD,O;;;;;iBAEtB,I;;;;;;;iBAEb,I;;;;;;;iBAEK,I;;;;;;;iBAEF,I;;;;;;;iBAEC,I","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, Prefab, Sprite } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { RareBookSmallItem } from './RareBookSmallItem';\r\nimport { RareBookInfo } from './RareBookInfo';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { RareBookLevelPreviewPopItem } from './RareBookLevelPreviewPopItem';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * RareBookLevelPreviewPop\r\n * zhudingchao\r\n * Mon May 27 2024 20:06:27 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/rareBook/RareBookLevelPreviewPop.ts\r\n *\r\n */\r\n\r\n@ccclass('RareBookLevelPreviewPop')\r\nexport class RareBookLevelPreviewPop extends ViewPop {\r\n    @property(RareBookSmallItem)\r\n    bookItem:RareBookSmallItem=null;\r\n    @property(Label)\r\n    nameLab:Label=null;\r\n    @property(Sprite)\r\n    vocationSpr:Sprite=null;\r\n    @property(Node)\r\n    contentNode:Node=null;\r\n    @property(Prefab)\r\n    itemPrefab:Prefab=null;\r\n    private currInfo:RareBookInfo;\r\n    register(): void {\r\n\r\n    }\r\n    onShow(): void {\r\n        this.currInfo=this.openData[\"bookInfo\"];\r\n        if(this.currInfo){\r\n            this.initView();\r\n        }\r\n    }\r\n    initView(){\r\n        this.bookItem.initView(this.currInfo,false);\r\n        let heroclass = tab.getData().HeroClassTableByHeroClass.getValue(this.currInfo.bookTable.Class);\r\n        this.vocationSpr.setTexture(heroclass.Icon);\r\n        this.nameLab.string=LangMgr.getLab(this.currInfo.itemTable.Name);\r\n        let allStarTabls:tab.BookStarTable[]=[];\r\n        let tabs=tab.getData().BookStarTable;\r\n        for(let key in tabs){\r\n            if(tabs[key].BookId==this.currInfo.itemId){\r\n                allStarTabls.push(tabs[key]);\r\n            }\r\n        }\r\n        let level=this.currInfo.isLock?this.currInfo.star:0;\r\n        \r\n        for(let key in allStarTabls){\r\n            if(allStarTabls[key].Description&&allStarTabls[key].Description!=\"\"){\r\n                let item=instantiate(this.itemPrefab);\r\n                item.parent=this.contentNode;\r\n                item.getComponent(RareBookLevelPreviewPopItem).initData(allStarTabls[key],allStarTabls[key].Level<=level)\r\n            }\r\n          \r\n        }\r\n        \r\n    }\r\n}"]}