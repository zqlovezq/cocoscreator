{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/fincaFight/FIncaBagItem.ts"],"names":["_decorator","Component","Label","log","Node","Sprite","HeroStar","HeroData","tab","HeroDataControl","ccclass","property","FincaBagItem","touchCallBack","heroInfo","UpdateContent","data","node","name","String","itemId","itemTab","getData","ItemTableById","getValue","heroTab","HeroTableById","heroClassTable","HeroClassTableByHeroClass","Class","heroAptitudeTab","HeroAptitudeTableByHeroAptitude","Aptitude","itemQualityTab","ins","getById","id","level","getHeroLevel","maxLevel","heroStarUpTable","MaxLevel","lbl_level","string","star","getItemQualityTableByStar","sp_quality_bg","setTexture","HeroBagQuality","sp_quality_star_bg","HeroStarBg","sp_vocation","Icon","sp_hero","sp_quality","node_star","getComponent","showStar","setTouchCallBack","callBack","onTouchItem","onDisable","onDestroy","targetOff"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, log, Node, Sprite } from 'cc';\r\nimport { HeroInfo } from '../hero/HeroInfo';\r\nimport { HeroStar } from '../hero/HeroStar';\r\nimport { HeroData } from '../hero/HeroData';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { HeroDataControl } from '../hero/herobag/HeroDataControl';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('FincaBagItem')\r\nexport class FincaBagItem extends Component {\r\n    @property(Sprite)\r\n    sp_hero: Sprite = null;//英雄头像\r\n    @property(Sprite)\r\n    sp_vocation: Sprite = null;//职业\r\n    @property(Sprite)\r\n    sp_quality: Sprite = null;//品质\r\n    @property(Sprite)\r\n    sp_quality_bg: Sprite = null;//品质框\r\n    @property(Sprite)\r\n    sp_quality_star_bg: Sprite = null;//装备星级职业底\r\n    @property(Node)\r\n    node_star: Node = null;\r\n    @property(Label)\r\n    lbl_level: Label = null;\r\n    private touchCallBack: Function;\r\n    private heroInfo: HeroInfo;\r\n    UpdateContent(data: HeroInfo) {\r\n        this.node.name = String(data.itemId)\r\n        let itemTab = tab.getData().ItemTableById.getValue(data.itemId);\r\n        let heroTab = tab.getData().HeroTableById.getValue(data.itemId);\r\n        let heroClassTable = tab.getData().HeroClassTableByHeroClass.getValue(heroTab.Class);\r\n        let heroAptitudeTab = tab.getData().HeroAptitudeTableByHeroAptitude.getValue(heroTab.Aptitude);\r\n        /* 获取品质 */\r\n        let itemQualityTab = null;\r\n        this.heroInfo = HeroData.ins.getById(data.id);\r\n\r\n        let level = this.heroInfo.getHeroLevel()\r\n        let maxLevel = this.heroInfo.heroStarUpTable.MaxLevel;\r\n        if (maxLevel < this.heroInfo.getHeroLevel()) {\r\n            level = maxLevel;\r\n        }\r\n\r\n        this.lbl_level.string = String(level);\r\n        let star = this.heroInfo.star;\r\n        itemQualityTab = HeroDataControl.ins.getItemQualityTableByStar(star);\r\n        this.sp_quality_bg.setTexture(itemQualityTab.HeroBagQuality);\r\n        this.sp_quality_star_bg.setTexture(itemQualityTab.HeroStarBg)\r\n        this.sp_vocation.setTexture(heroClassTable.Icon);\r\n        this.sp_hero.setTexture(itemTab.Icon);\r\n        this.sp_quality.setTexture(heroAptitudeTab.Icon);\r\n        this.node_star.getComponent(HeroStar).showStar(data.star);\r\n    }\r\n    setTouchCallBack(callBack: Function) {\r\n        this.touchCallBack = callBack;\r\n    }\r\n    private onTouchItem() {\r\n        if (this.touchCallBack) {\r\n            this.touchCallBack();\r\n        } else {\r\n            log(\"点击了item\");\r\n        }\r\n    }\r\n    protected onDisable(): void {\r\n        this.node_star.getComponent(HeroStar).onDisable();\r\n    }\r\n    protected onDestroy(): void {\r\n        this.node.targetOff(this);\r\n    }\r\n}\r\n\r\n\r\n"]}