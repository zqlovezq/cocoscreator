{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/base/obj/role/ui/RoleHeadSkillItem.ts"],"names":["_decorator","Component","Label","Sprite","EventMgr","FightEvent","ccclass","property","RoleHeadSkillItem","skillGroup","onLoad","cdBar","fillRange","onFight","Fight_Skill_Cd_Progress","on_fight_Fight_Skill_Cd_Progress","Skill_Attack_Count_Change","on_fight_Skill_Attack_Count_Change","setSkill","spr","setTexture","configTab","Icon","updateCount","node","active","lab","string","getCanAttackCount","toString","skillGroupId","configId","progress"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;;AAG9BC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;mCAIjBQ,iB,WADZF,OAAO,CAAC,mBAAD,C,UAEHC,QAAQ,CAACJ,MAAD,C,UAGRI,QAAQ,CAACL,KAAD,C,UAGRK,QAAQ,CAACJ,MAAD,C,2BARb,MACaK,iBADb,SACuCP,SADvC,CACiD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAU7CQ,UAV6C;AAAA;;AAYnCC,QAAAA,MAAM,GAAS;AACrB,eAAKC,KAAL,CAAWC,SAAX,GAAuB,CAAvB;AACA;AAAA;AAAA,oCAASC,OAAT,CAAiB;AAAA;AAAA,wCAAWC,uBAA5B,EAAqD,KAAKC,gCAA1D,EAA4F,IAA5F;AACA;AAAA;AAAA,oCAASF,OAAT,CAAiB;AAAA;AAAA,wCAAWG,yBAA5B,EAAuD,KAAKC,kCAA5D,EAAgG,IAAhG;AACH;;AAEDC,QAAAA,QAAQ,CAACT,UAAD,EAAyB;AAC7B,eAAKA,UAAL,GAAkBA,UAAlB;AACA,eAAKU,GAAL,CAASC,UAAT,CAAoB,KAAKX,UAAL,CAAgBY,SAAhB,CAA0BC,IAA9C;AACA,eAAKC,WAAL;AACA,eAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH;;AAEDF,QAAAA,WAAW,GAAG;AACV,eAAKG,GAAL,CAASC,MAAT,GAAkB,KAAKlB,UAAL,CAAgBmB,iBAAhB,GAAoCC,QAApC,EAAlB;AACH;;AAEDZ,QAAAA,kCAAkC,CAACa,YAAD,EAAuB;AACrD,cAAI,KAAKrB,UAAL,IAAmB,KAAKA,UAAL,CAAgBsB,QAAhB,IAA4BD,YAAnD,EAAiE;AAC7D,iBAAKP,WAAL;AACH;AACJ;;AAEDR,QAAAA,gCAAgC,CAACe,YAAD,EAAuBE,QAAvB,EAAyC;AACrE,cAAI,KAAKvB,UAAL,IAAmB,KAAKA,UAAL,CAAgBsB,QAAhB,IAA4BD,YAAnD,EAAiE;AAC7D,iBAAKnB,KAAL,CAAWC,SAAX,GAAuB,IAAIoB,QAA3B;AACH;AACJ;;AAvC4C,O;;;;;iBAE/B,I;;;;;;;iBAGD,I;;;;;;;iBAGG,I","sourcesContent":["import { _decorator, Component, Label, Sprite } from \"cc\";\nimport { Role } from \"../role/Role\";\nimport { SkillGroup } from \"../../../skill/SkillGroup\";\nimport { EventMgr } from \"../../../../../mgr/EventMgr\";\nimport { FightEvent } from \"../../../../define/FightEvent\";\n\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('RoleHeadSkillItem')\nexport class RoleHeadSkillItem extends Component {\n    @property(Sprite)\n    spr: Sprite = null\n\n    @property(Label)\n    lab: Label = null\n\n    @property(Sprite)\n    cdBar: Sprite = null\n\n    skillGroup: SkillGroup\n\n    protected onLoad(): void {\n        this.cdBar.fillRange = 0\n        EventMgr.onFight(FightEvent.Fight_Skill_Cd_Progress, this.on_fight_Fight_Skill_Cd_Progress, this)\n        EventMgr.onFight(FightEvent.Skill_Attack_Count_Change, this.on_fight_Skill_Attack_Count_Change, this)\n    }\n\n    setSkill(skillGroup: SkillGroup) {\n        this.skillGroup = skillGroup\n        this.spr.setTexture(this.skillGroup.configTab.Icon)\n        this.updateCount()\n        this.node.active = true\n    }\n\n    updateCount() {\n        this.lab.string = this.skillGroup.getCanAttackCount().toString()\n    }\n\n    on_fight_Skill_Attack_Count_Change(skillGroupId: number) {\n        if (this.skillGroup && this.skillGroup.configId == skillGroupId) {\n            this.updateCount()\n        }\n    }\n\n    on_fight_Fight_Skill_Cd_Progress(skillGroupId: number, progress: number) {\n        if (this.skillGroup && this.skillGroup.configId == skillGroupId) {\n            this.cdBar.fillRange = 1 - progress\n        }\n    }\n}"]}