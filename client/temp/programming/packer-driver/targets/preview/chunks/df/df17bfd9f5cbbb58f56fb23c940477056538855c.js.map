{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/base/effect/DeadEffectUI.ts"],"names":["_decorator","Component","Layers","Node","v3","EffectUI","ccclass","property","DeadEffectUI","index","ids","effectUi","abs","create","nn","layer","Enum","DEFAULT","addComponent","setAbs","_abs","setAnimIds","_ids","runNext","length","node","destroy","id","run","animId","parent","position","remove","isValid"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,E,OAAAA,E;;AAIrCC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;AAE9B;;8BAEaQ,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb,SACkCP,SADlC,CAC4C;AAAA;AAAA;AAAA,eAOxCQ,KAPwC,GAOxB,CAPwB;AAAA,eAQxCC,GARwC;AAAA,eASxCC,QATwC;AAAA,eAWxCC,GAXwC;AAAA;;AAC3B,eAANC,MAAM,GAAG;AACZ,cAAIC,EAAE,GAAG,IAAIX,IAAJ,CAAS,cAAT,CAAT;AACAW,UAAAA,EAAE,CAACC,KAAH,GAAWb,MAAM,CAACc,IAAP,CAAYC,OAAvB;AACA,iBAAOH,EAAE,CAACI,YAAH,CAAgBV,YAAhB,CAAP;AACH;;AAODW,QAAAA,MAAM,CAACC,IAAD,EAAgB;AAClB,eAAKR,GAAL,GAAWQ,IAAX;AACH;;AAEDC,QAAAA,UAAU,CAACC,IAAD,EAAiB;AACvB,eAAKZ,GAAL,GAAWY,IAAX;AACA,eAAKb,KAAL,GAAa,CAAb;AACA,eAAKc,OAAL;AACH;;AAEDA,QAAAA,OAAO,GAAG;AACN,cAAI,KAAKd,KAAL,IAAc,KAAKC,GAAL,CAASc,MAA3B,EAAmC;AAC/B,iBAAKC,IAAL,CAAUC,OAAV;AACA;AACH;;AACD,cAAIC,EAAE,GAAG,KAAKjB,GAAL,CAAS,KAAKD,KAAd,CAAT;AACA,eAAKmB,GAAL,CAASD,EAAT;AACA,eAAKlB,KAAL;AACH;;AAEDmB,QAAAA,GAAG,CAACC,MAAD,EAAiB;AAChB,eAAKlB,QAAL,GAAgB;AAAA;AAAA,oCAASE,MAAT,EAAhB;AACA,eAAKF,QAAL,CAAcc,IAAd,CAAmBK,MAAnB,GAA4B,KAAKL,IAAjC;AACA,eAAKd,QAAL,CAAcc,IAAd,CAAmBM,QAAnB,GAA8B3B,EAAE,EAAhC;AACA,eAAKO,QAAL,CAAciB,GAAd,CAAkBC,MAAlB,EAA0B,MAAM;AAC5B,iBAAKlB,QAAL,GAAgB,IAAhB;AACA,iBAAKY,OAAL;AACH,WAHD;AAIH;;AAEDS,QAAAA,MAAM,GAAG;AACL,cAAI,KAAKrB,QAAL,IAAiB,KAAKA,QAAL,CAAcsB,OAAnC,EAA4C;AACxC,iBAAKtB,QAAL,CAAcqB,MAAd;AACH;;AACD,eAAKP,IAAL,CAAUC,OAAV;AACH;;AA/CuC,O","sourcesContent":["import { _decorator, Component, Layers, Node, v3 } from \"cc\";\nimport { AbsRole } from \"../obj/role/AbsRole\";\nimport { Avatar } from \"../../animation/Avatar\";\nimport { AbsObj } from \"../obj/AbsObj\";\nimport { EffectUI } from \"./EffectUI\";\n\nconst { ccclass, property } = _decorator;\n\n/** 死亡特效  游魂 */\n@ccclass('DeadEffectUI')\nexport class DeadEffectUI extends Component {\n    static create() {\n        let nn = new Node(\"DeadEffectUI\");\n        nn.layer = Layers.Enum.DEFAULT\n        return nn.addComponent(DeadEffectUI)\n    }\n\n    index: number = 0\n    ids: number[]\n    effectUi: EffectUI\n\n    abs: AbsRole\n    setAbs(_abs: AbsRole) {\n        this.abs = _abs\n    }\n\n    setAnimIds(_ids: number[]) {\n        this.ids = _ids\n        this.index = 0\n        this.runNext()\n    }\n\n    runNext() {\n        if (this.index >= this.ids.length) {\n            this.node.destroy()\n            return\n        }\n        let id = this.ids[this.index]\n        this.run(id)\n        this.index++\n    }\n\n    run(animId: number) {\n        this.effectUi = EffectUI.create()\n        this.effectUi.node.parent = this.node\n        this.effectUi.node.position = v3()\n        this.effectUi.run(animId, () => {\n            this.effectUi = null\n            this.runNext()\n        })\n    }\n\n    remove() {\n        if (this.effectUi && this.effectUi.isValid) {\n            this.effectUi.remove()\n        }\n        this.node.destroy()\n    }\n\n\n}"]}