{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/base/obj/bullet/BulletInfo.ts"],"names":["_decorator","AbsObjInfo","AbsObjInfoAttr","tab","FightMacro","AbsObjType","ccclass","property","BulletInfo","objType","bullet","configTab","parentSoleId","ScreenBounceCount","sonGroupId","isInitInterval","DamageScale","reset","setConfigId","id","setConfigTab","getData","BulletTableById","getValue","groupId","getObjAttr","bulletGroupId","conf","configId","isIntervalEffect","IntervalEffect","isHitDeath","DeathType","DeathType_HitDeath","isTimeDeath","DeathType_TimeDeath","isOwnDeath","DeathType_OwnDeath","isPenetration","Penetration","isPenetrationDeath","hitCount","isCatapult","Catapult","isCatapultDeath","catapultCount","isRound","Round","length","isScreenBounce","ScreenBounce","isRotate","Rotate","isCentrifugation","Centrifugation","isForwardArrowAndType","type","ForwardArrow","isHasAddBuff","AddBuff","isOlnyOne","OlnyOne","isolnyOneSon","OlnyOneSon","isForwardOwner","BulletType","BulletType_FollowingBullet","intervalTime","console","log","bornSound","SoundId","hitSound","addScreenBounceCount","PERCENT","getLiveTime","Trajectory","Trajectory_Trajectory","total","LiveTime","forEach","v"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,c,iBAAAA,c;;AACZC,MAAAA,G,iBAAAA,G;;AACoBC,MAAAA,U,iBAAAA,U;;AACpBC,MAAAA,U,iBAAAA,U;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;4BAGjBQ,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb;AAAA;AAAA,oCAC2C;AAAA;AAAA;AAAA,eACvCC,OADuC,GACjB;AAAA;AAAA,wCAAWC,MADM;AAAA,eAEvCC,SAFuC;AAAA,eAIvCC,YAJuC,GAIhB,EAJgB;AAIb;AAJa,eAKvCC,iBALuC,GAKX,CALW;AAAA,eAMvCC,UANuC,GAMlB,CANkB;AAMhB;AANgB,eAOvCC,cAPuC,GAOb,KAPa;;AAQvC;AARuC,eASvCC,WATuC,GASjB,CATiB;AAAA;;AAUvCC,QAAAA,KAAK,GAAS;AACV,eAAKL,YAAL,GAAoB,EAApB;AACA,eAAKC,iBAAL,GAAyB,CAAzB;AACA,eAAKG,WAAL,GAAmB,CAAnB;AACA,eAAKF,UAAL,GAAkB,CAAlB;AACA,gBAAMG,KAAN;AACH;;AACDC,QAAAA,WAAW,CAACC,EAAD,EAAa;AACpB,gBAAMD,WAAN,CAAkBC,EAAlB;AACA,eAAKC,YAAL,CAAkB;AAAA;AAAA,0BAAIC,OAAJ,GAAcC,eAAd,CAA8BC,QAA9B,CAAuCJ,EAAvC,CAAlB;AAEH;AAED;;;AACW,YAAPK,OAAO,GAAG;AACV,iBAAO,KAAKC,UAAL,CAAgB;AAAA;AAAA,gDAAeC,aAA/B,CAAP;AACH;;AAEMN,QAAAA,YAAY,CAACO,IAAD,EAAkB;AACjC,gBAAMT,WAAN,CAAkBS,IAAI,CAACC,QAAvB;AACA,gBAAMR,YAAN,CAAmBO,IAAnB;AACA,eAAKX,WAAL,GAAmB,KAAKL,SAAL,CAAeK,WAAf,CAA2B,CAA3B,CAAnB;;AACA,cAAI,KAAKL,SAAL,CAAekB,gBAAf,EAAJ,EAAuC;AACnC,iBAAKd,cAAL,GAAsB,KAAtB;;AACA,gBAAI,KAAKJ,SAAL,CAAemB,cAAf,CAA8B,CAA9B,CAAJ,EAAsC;AAClC,mBAAKf,cAAL,GAAsB,IAAtB;AACH;AACJ;AACJ;AAED;;;AACAgB,QAAAA,UAAU,GAAG;AACT,iBAAO,KAAKpB,SAAL,CAAeqB,SAAf,IAA4B;AAAA;AAAA,0BAAIA,SAAJ,CAAcC,kBAAjD;AACH;AACD;;;AACAC,QAAAA,WAAW,GAAG;AACV,iBAAO,KAAKvB,SAAL,CAAeqB,SAAf,IAA4B;AAAA;AAAA,0BAAIA,SAAJ,CAAcG,mBAAjD;AACH;AACD;;;AACAC,QAAAA,UAAU,GAAG;AACT,iBAAO,KAAKzB,SAAL,CAAeqB,SAAf,IAA4B;AAAA;AAAA,0BAAIA,SAAJ,CAAcK,kBAAjD;AACH;AAED;;;AACAC,QAAAA,aAAa,GAAG;AACZ,iBAAO,KAAK3B,SAAL,CAAe4B,WAAf,IAA8B,CAArC;AACH;AAED;;;AACAC,QAAAA,kBAAkB,GAAG;AACjB,iBAAO,KAAKF,aAAL,MAAwB,KAAKb,UAAL,CAAgB;AAAA;AAAA,gDAAegB,QAA/B,IAA2C,KAAK9B,SAAL,CAAe4B,WAAzF;AACH;AAED;;;AACAG,QAAAA,UAAU,GAAG;AACT,iBAAO,KAAK/B,SAAL,CAAegC,QAAf,IAA2B,CAAlC;AACH;AAED;;;AACAC,QAAAA,eAAe,GAAG;AACd,iBAAO,KAAKnB,UAAL,CAAgB;AAAA;AAAA,gDAAeoB,aAA/B,IAAgD,KAAKlC,SAAL,CAAegC,QAAtE;AACH;AAED;;;AACAG,QAAAA,OAAO,GAAG;AACN,iBAAO,KAAKnC,SAAL,CAAeoC,KAAf,CAAqBC,MAArB,GAA8B,CAArC;AACH;AAED;;;AACAC,QAAAA,cAAc,GAAG;AACb,iBAAO,KAAKtC,SAAL,CAAeuC,YAAf,GAA8B,CAArC;AACH;AAED;;;AACAC,QAAAA,QAAQ,GAAG;AACP,iBAAO,KAAKxC,SAAL,CAAeyC,MAAf,IAAyB,CAAhC;AACH;AACD;;;AACAC,QAAAA,gBAAgB,GAAG;AACf,iBAAO,KAAK1C,SAAL,CAAe2C,cAAf,CAA8BN,MAA9B,GAAuC,CAA9C;AACH;AAED;;;AACAO,QAAAA,qBAAqB,CAACC,IAAD,EAA2B;AAC5C,cAAI,KAAK7C,SAAL,CAAe8C,YAAf,CAA4BT,MAA5B,GAAqC,CAAzC,EAA4C;AACxC,mBAAO,KAAKrC,SAAL,CAAe8C,YAAf,CAA4B,CAA5B,KAAkCD,IAAzC;AACH;;AACD,iBAAO,KAAP;AACH;AAED;;;AACAE,QAAAA,YAAY,GAAG;AACX,iBAAO,KAAK/C,SAAL,CAAegD,OAAf,CAAuBX,MAAvB,GAAgC,CAAvC;AACH;AACD;;;AACAY,QAAAA,SAAS,GAAG;AACR,iBAAO,KAAKjD,SAAL,CAAekD,OAAtB;AACH;AACD;;;AACAC,QAAAA,YAAY,GAAG;AACX,iBAAO,KAAKnD,SAAL,CAAeoD,UAAtB;AACH;AAED;;;AACAC,QAAAA,cAAc,GAAG;AACb,iBAAO,KAAKrD,SAAL,CAAesD,UAAf,IAA6B;AAAA;AAAA,0BAAIA,UAAJ,CAAeC,0BAAnD;AACH;;AAEDC,QAAAA,YAAY,GAAG;AACX,cAAI,KAAKpD,cAAT,EAAyB;AACrBqD,YAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsB,KAAK1D,SAAL,CAAemB,cAAf,CAA8B,CAA9B,CAAtB;AACA,mBAAO,KAAKnB,SAAL,CAAemB,cAAf,CAA8B,CAA9B,CAAP;AACH;;AACD,iBAAO,KAAKnB,SAAL,CAAemB,cAAf,CAA8B,CAA9B,CAAP;AACH;AACD;;;AACAwC,QAAAA,SAAS,GAAG;AACR,iBAAO,KAAK3D,SAAL,CAAe4D,OAAf,CAAuB,CAAvB,CAAP;AACH;AACD;;;AACAC,QAAAA,QAAQ,GAAG;AACP,iBAAO,KAAK7D,SAAL,CAAe4D,OAAf,CAAuB,CAAvB,CAAP;AACH;;AAEDE,QAAAA,oBAAoB,GAAG;AACnB,eAAK5D,iBAAL,IAA0B,CAA1B;AACA,eAAKG,WAAL,GAAmB,KAAKA,WAAL,IAAoB,KAAKL,SAAL,CAAeuC,YAAf,GAA8B;AAAA;AAAA,wCAAWwB,OAA7D,CAAnB;AACH;;AAEDC,QAAAA,WAAW,GAAG;AACV,cAAI,KAAKhE,SAAL,CAAeiE,UAAf,IAA6B;AAAA;AAAA,0BAAIA,UAAJ,CAAeC,qBAAhD,EAAuE;AACnE,gBAAIC,KAAK,GAAG,CAAZ;AACA,iBAAKnE,SAAL,CAAeoE,QAAf,CAAwBC,OAAxB,CAAgCC,CAAC,IAAI;AACjCH,cAAAA,KAAK,IAAIG,CAAT;AACH,aAFD;AAGAb,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBS,KAApB;AACA,mBAAOA,KAAP;AACH;;AACD,iBAAO,KAAKnE,SAAL,CAAeoE,QAAf,CAAwB,CAAxB,CAAP;AACH;;AArJsC,O","sourcesContent":["import { _decorator, Component } from \"cc\";\nimport { AbsObjInfo, AbsObjInfoAttr } from \"../AbsObjInfo\";\nimport { tab } from \"../../../../../Table/table_gen\";\nimport { BulletForwardArrow, FightMacro } from \"../../../define/FightDefine\";\nimport { AbsObjType } from \"../AbsObj\";\nimport { BulletTab } from \"../../../power/powerTab/BulletTab\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('BulletInfo')\nexport class BulletInfo extends AbsObjInfo {\n    objType: AbsObjType = AbsObjType.bullet;\n    configTab: BulletTab\n\n    parentSoleId: string = \"\" //父子弹唯一id\n    ScreenBounceCount: number = 0\n    sonGroupId: number = 0 //产生出的子弹组id\n    isInitInterval: boolean = false\n    /** 伤害系数 */\n    DamageScale: number = 0\n    reset(): void {\n        this.parentSoleId = \"\"\n        this.ScreenBounceCount = 0\n        this.DamageScale = 0\n        this.sonGroupId = 0\n        super.reset()\n    }\n    setConfigId(id: number) {\n        super.setConfigId(id)\n        this.setConfigTab(tab.getData().BulletTableById.getValue(id))\n       \n    }\n\n    /** 组id, 同组衰减用 */\n    get groupId() {\n        return this.getObjAttr(AbsObjInfoAttr.bulletGroupId)\n    }\n\n    public setConfigTab(conf: any): void {\n        super.setConfigId(conf.configId)\n        super.setConfigTab(conf)\n        this.DamageScale = this.configTab.DamageScale[0]\n        if (this.configTab.isIntervalEffect()) {\n            this.isInitInterval = false\n            if (this.configTab.IntervalEffect[2]) {\n                this.isInitInterval = true\n            }\n        }\n    }\n\n    /** 命中死亡 */\n    isHitDeath() {\n        return this.configTab.DeathType == tab.DeathType.DeathType_HitDeath\n    }\n    /** 生存时间死亡 */\n    isTimeDeath() {\n        return this.configTab.DeathType == tab.DeathType.DeathType_TimeDeath\n    }\n    /** 释放者死亡 */\n    isOwnDeath() {\n        return this.configTab.DeathType == tab.DeathType.DeathType_OwnDeath\n    }\n\n    /** 是否可穿透 */\n    isPenetration() {\n        return this.configTab.Penetration >= 0\n    }\n\n    /** 穿透死亡 */\n    isPenetrationDeath() {\n        return this.isPenetration() && this.getObjAttr(AbsObjInfoAttr.hitCount) > this.configTab.Penetration\n    }\n\n    /** 是否可弹射 */\n    isCatapult() {\n        return this.configTab.Catapult != 0\n    }\n\n    /** 弹射死亡 */\n    isCatapultDeath() {\n        return this.getObjAttr(AbsObjInfoAttr.catapultCount) > this.configTab.Catapult\n    }\n\n    /** 回旋(回弹) */\n    isRound() {\n        return this.configTab.Round.length > 0\n    }\n\n    /** 屏幕反弹 */\n    isScreenBounce() {\n        return this.configTab.ScreenBounce > 0\n    }\n\n    /** 旋转 */\n    isRotate() {\n        return this.configTab.Rotate != 0\n    }\n    /** 离心 */\n    isCentrifugation() {\n        return this.configTab.Centrifugation.length > 0\n    }\n\n    /** 多向剑类型 */\n    isForwardArrowAndType(type: BulletForwardArrow) {\n        if (this.configTab.ForwardArrow.length > 0) {\n            return this.configTab.ForwardArrow[0] == type\n        }\n        return false\n    }\n\n    /** 是否有可添加buff */\n    isHasAddBuff() {\n        return this.configTab.AddBuff.length > 0\n    }\n    /** 相同子弹唯一 */\n    isOlnyOne() {\n        return this.configTab.OlnyOne\n    }\n    /** 子系伤害唯一  */\n    isolnyOneSon() {\n        return this.configTab.OlnyOneSon\n    }\n\n    /** 是否跟随发射者 */\n    isForwardOwner() {\n        return this.configTab.BulletType == tab.BulletType.BulletType_FollowingBullet\n    }\n\n    intervalTime() {\n        if (this.isInitInterval) {\n            console.log(\"时间间隔---\",this.configTab.IntervalEffect[2])\n            return this.configTab.IntervalEffect[2]\n        }\n        return this.configTab.IntervalEffect[0]\n    }\n    /** 出生音效 */\n    bornSound() {\n        return this.configTab.SoundId[0]\n    }\n    /** 命中音效 */\n    hitSound() {\n        return this.configTab.SoundId[1]\n    }\n\n    addScreenBounceCount() {\n        this.ScreenBounceCount += 1\n        this.DamageScale = this.DamageScale * (this.configTab.ScreenBounce / FightMacro.PERCENT)\n    }\n\n    getLiveTime() {\n        if (this.configTab.Trajectory == tab.Trajectory.Trajectory_Trajectory) {\n            let total = 0\n            this.configTab.LiveTime.forEach(v => {\n                total += v\n            })\n            console.log(\"直线轨迹\", total)\n            return total\n        }\n        return this.configTab.LiveTime[0]\n    }\n}"]}