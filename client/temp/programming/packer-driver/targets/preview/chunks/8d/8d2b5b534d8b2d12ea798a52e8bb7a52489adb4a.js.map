{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/hero/herobag/HeroBagView.ts"],"names":["Prefab","_decorator","instantiate","Node","Button","Label","Toggle","Vec2","Sprite","Animation","Color","HeroBagLayoutCell","HeroDataControl","HeroBagPainting","ViewPop","InfiniteList","proto","EventMgr","LocalEvent","HeroData","Net","ShowItemNotEnoughTips","ShowTips","UIMgr","ViewName","tab","RoleData","HeroBookView","RedMgr","RedDotType","HeroTeamControl","ItemData","CommonTipsPop","LangMgr","GuideController","HeroRed","ccclass","property","VIEW_TYPE","HeroBagView","mClosedCallBack","_lineHeroCount","_bagVocationType","HeroClass","HeroClass_Max","_defaultView","HERO","_list","register","onMsg","Ptl","GetHeroBagRsp","on_s2c_GetHeroBagRsp","SetTeamSlotRsp","on_s2c_SetTeamSlotRsp","DisbandHeroesRsp","on_s2c_DisbandHeroesRsp","UpHeroStarOneClickRsp","on_s2c_UpHeroStarOneClickRsp","ResetHeroStarRsp","on_s2c_ResetHeroStarRsp","ResetTeamSlotLevelRsp","on_s2c_ResetTeamSlotLevelRsp","onLocal","Hero_Change","showView","Click_Recommend_Hero","showBookHero","UpHeroBagCapacityRsp","on_s2c_UpHeroBagCapacityRsp","ReceiveHeroAlbumRewardRsp","on_s2c_ReceiveHeroAlbumRewardRsp","UpHeroStarRsp","on_s2c_UpHeroStarRsp","btn_detail","node","on","EventType","CLICK","showDetailView","unRegister","ins","refreshBookData","refreshBagData","onShow","setCanReplaceHeros","openData","viewType","node_function_taggle","children","active","getComponent","isChecked","isGuiding","emitLocal","ShowPop","msg","heroInfo","getById","heroId","star","refreshBaseAttrMap","rewards","itemId","num","extra","heroStar","transaction","show","viewName","StarUpPop","data","refreshTeamInfo","id","isRefresh","error","code","CommonErrorCode","Succeed","hideView","HeroResolvePop","CongratulationPop","adds","heroes","HeroAutoAscendPop","i","length","hero","item","push","refreshEvent","HeroAutoAscend","getLab","capacityLevel","showBagCapacity","refreshTeamBagData","heroInTeam","Number","HeroResetPop","finshedStarSteps","getHeroByClass","heroClass","level","refreshTeam","HeroupStar","HeroupLevel","HeroResonanceLevel","HeroresonanceStar","showAllHeros","showHeroPainting","refreshRed","isInit","node_red_Resonance","isRed","String","checkWearEquip","node_red_hero","node_red_book","HeroBook","setCloseCallBack","closeFunc","onDestroy","lbl_cur_capacity_count","string","getHeros","heroBagExpansion","getData","GetKeyValue_ConfigTable","HeroBagExpansion","lbl_max_capacity_count","HeroBagNum","getPrivilegeValue","VipBonus","VipBonus_HeroBagAddCount","node_hero_bag","node_hero_book","BOOK","groupHeroList","list_heros","Init","getCellNumber","getCellCount","bind","getCellSize","getCellHeight","getCellIdentifer","getCellView","getCellData","GetCellData","scrollToOffset","Refresh","bookTs","pfb_hero_item","idx","result","classType","heroTable","Class","node_vacation_taggle","getChildByName","heroList","getHeroListByVocation","slice","hideBagView","onClose","HeroDetailView","paintingNode","node_hero_painting","pfb_hero_painting","parent","ts","initData","initBook","showRadarData","tabData","node_radar","bookId","HeroTableById","getValue","RadarChart","sp_img_radar","setTexture","lbl_score_radar","getCombineString","HeroScore","node_radar_txt","txt","RadarHighlight","indexOf","color","fromHEX","InterfaceTxtRed","anim_radar","play","clickAllStarUp","clickUpHeroBagCount","itemCount","bagCount","curHavaCount","getCount","tipsStr","create","val","Msg_UpHeroBagCapacityReq","Send","UpHeroBagCapacityReq","switchListView","event","ViewType","switchVocation","vocationType","awardMap","getBookReceivedIds","forEach","value","key","isReceived","getBookHeroListByVocation","clickShowRecommendView","HeroRecommendPop","clickShowHeroResolvePop","clickShowHeroResonancePop","HeroResonancePop","zIndex","map","set","heroItemId","refreshBookByItemId"],"mappings":"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","sourcesContent":["/*\r\n * @Date: 2024-04-29 10:29:18\r\n * @LastEditors: wzq\r\n * @LastEditTime: 2024-11-14 14:47:55\r\n */\r\n\r\nimport { Prefab, _decorator, instantiate, Node, Button, EventTouch, Label, Toggle, Vec2, Sprite ,Animation, Color} from 'cc';\r\nimport { HeroBagLayoutCell } from './HeroBagLayoutCell';\r\nimport { HeroDataControl } from './HeroDataControl';\r\nimport { HeroBagPainting } from './HeroBagPainting';\r\nimport { ViewPop } from '../../../../framework/base/ViewPop';\r\nimport InfiniteList from '../../../../Common/InfiniteList/InfiniteList';\r\nimport { proto } from 'client_protocol';\r\nimport { EventMgr } from '../../../mgr/EventMgr';\r\nimport { LocalEvent } from '../../../define/LocalEvent';\r\nimport { HeroData } from '../HeroData';\r\nimport { Net } from '../../../net/Net';\r\nimport { ShowItemNotEnoughTips, ShowTips, UIMgr } from '../../../mgr/UIMgr';\r\nimport { ViewName } from '../../../define/ViewDefine';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { RoleData } from '../../role/RoleData';\r\nimport { HeroBookView } from './HeroBookView';\r\nimport { RedMgr } from '../../../mgr/RedMgr';\r\nimport { RedDotType } from '../../../red/RedDotType';\r\nimport { HeroTeamControl } from '../HeroTeamControl';\r\nimport { HeroInfo } from '../HeroInfo';\r\nimport { Func } from '../../../utils/Func';\r\nimport { ItemData } from '../../item/ItemData';\r\nimport { CommonTipsPop } from '../../common/CommonTipsPop';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nimport { Long } from 'protobufjs';\r\nimport { GuideController } from '../../../guide/GuideController';\r\nimport { HeroRed } from './HeroRed';\r\nconst { ccclass, property } = _decorator;\r\nenum VIEW_TYPE {\r\n    HERO = 1,\r\n    BOOK\r\n}\r\ninterface refreshViewData {\r\n    id: number | Long,\r\n    red?: boolean,\r\n    level?: number,\r\n    isRefresh?: boolean\r\n}\r\n@ccclass('HeroBagView')\r\nexport class HeroBagView extends ViewPop {\r\n    @property(Prefab)\r\n    pfb_hero_item: Prefab = null;\r\n    @property(Prefab)\r\n    pfb_hero_painting: Prefab = null;\r\n\r\n    @property(InfiniteList)\r\n    list_heros: InfiniteList = null;\r\n\r\n    @property(Node)\r\n    node_hero_painting: Node = null;\r\n    @property(Node)\r\n    node_hero_bag: Node = null;\r\n    @property(Node)\r\n    node_hero_book: Node = null;\r\n    @property(Node)\r\n    node_vacation_taggle: Node = null;\r\n    @property(Node)\r\n    node_function_taggle: Node = null;\r\n    @property(Node)\r\n    node_red_up_star: Node = null;\r\n    @property(Node)\r\n    node_red_resolve: Node = null;\r\n    @property(Node)\r\n    node_red_Resonance: Node = null;\r\n    @property(Node)\r\n    node_red_hero: Node = null;\r\n    @property(Node)\r\n    node_red_book: Node = null;\r\n\r\n    @property(Button)\r\n    btn_detail: Button = null;\r\n\r\n    @property(Label)\r\n    lbl_cur_capacity_count: Label = null;\r\n    @property(Label)\r\n    lbl_max_capacity_count: Label = null;\r\n\r\n    //雷达\r\n    @property(Node)\r\n    node_radar: Node = null;\r\n    @property(Sprite)\r\n    sp_img_radar: Sprite = null;\r\n    @property(Animation)\r\n    anim_radar: Animation = null;\r\n    @property(Label)\r\n    lbl_score_radar: Label = null;\r\n    @property(Node)\r\n    node_radar_txt:Node = null;\r\n\r\n    private mClosedCallBack: Function = null;\r\n    private _lineHeroCount = 3;\r\n    private _bagVocationType = tab.HeroClass.HeroClass_Max;\r\n    private _defaultView: VIEW_TYPE = VIEW_TYPE.HERO;\r\n    private _list = []\r\n    register(): void {\r\n        /* 获取背包数据 */\r\n        EventMgr.onMsg(proto.Ptl.GetHeroBagRsp, this.on_s2c_GetHeroBagRsp, this);\r\n        /* 上阵英雄刷新背包列表 */\r\n        EventMgr.onMsg(proto.Ptl.SetTeamSlotRsp, this.on_s2c_SetTeamSlotRsp, this);\r\n        /* 遣散英雄 */\r\n        EventMgr.onMsg(proto.Ptl.DisbandHeroesRsp, this.on_s2c_DisbandHeroesRsp, this);\r\n        /* 一键升星 */\r\n        EventMgr.onMsg(proto.Ptl.UpHeroStarOneClickRsp, this.on_s2c_UpHeroStarOneClickRsp, this);\r\n        /* 重置英雄星级 */\r\n        EventMgr.onMsg(proto.Ptl.ResetHeroStarRsp, this.on_s2c_ResetHeroStarRsp, this);\r\n        /* 重置队伍栏位等级 */\r\n        EventMgr.onMsg(proto.Ptl.ResetTeamSlotLevelRsp, this.on_s2c_ResetTeamSlotLevelRsp, this);\r\n        /* 当前切换英雄的时候 */\r\n        EventMgr.onLocal(LocalEvent.Hero_Change, this.showView, this);\r\n        /* 当点击阵容推荐里面的英雄 */\r\n        EventMgr.onLocal(LocalEvent.Click_Recommend_Hero, this.showBookHero, this);\r\n        /* 升级英雄背包容量 */\r\n        EventMgr.onMsg(proto.Ptl.UpHeroBagCapacityRsp, this.on_s2c_UpHeroBagCapacityRsp, this);\r\n        /* 领取图签奖励 */\r\n        EventMgr.onMsg(proto.Ptl.ReceiveHeroAlbumRewardRsp, this.on_s2c_ReceiveHeroAlbumRewardRsp, this);\r\n        /* 英雄升星 */\r\n        EventMgr.onMsg(proto.Ptl.UpHeroStarRsp, this.on_s2c_UpHeroStarRsp, this);\r\n        this.btn_detail.node.on(Button.EventType.CLICK, this.showDetailView, this);\r\n    }\r\n    unRegister(): void {\r\n        super.unRegister()\r\n        HeroDataControl.ins.refreshBookData(0);\r\n        HeroDataControl.ins.refreshBagData(0)\r\n    }\r\n    onShow() {\r\n        // 刷新可替换英雄数据\r\n        HeroDataControl.ins.setCanReplaceHeros();\r\n        if (this.openData && this.openData.viewType) {\r\n            this._defaultView = this.openData.viewType;\r\n            this.node_function_taggle.children[0].active = false;\r\n            this.node_function_taggle.children[1].getComponent(Toggle).isChecked = true;\r\n        }\r\n        this.showView(true);\r\n        if (GuideController.ins.isGuiding()) {\r\n            EventMgr.emitLocal(LocalEvent.ShowPop);\r\n        }\r\n    }\r\n    on_s2c_GetHeroBagRsp(msg: proto.Msg_GetHeroBagRsp) {\r\n        this.showView(true);\r\n    }\r\n    /* 英雄升星 */\r\n    on_s2c_UpHeroStarRsp(msg: proto.Msg_UpHeroStarRsp) {\r\n        /* 遣散奖励 */\r\n        let heroInfo = HeroData.ins.getById(msg.heroId);\r\n        // 展示奖励\r\n        heroInfo.star = msg.star;\r\n        heroInfo.refreshBaseAttrMap();\r\n        let rewards: proto.Item[] = [{\r\n            itemId: heroInfo.itemId,\r\n            num: 1,\r\n            extra: {\r\n                heroStar: msg.star\r\n            },\r\n            transaction: []\r\n        }]\r\n        // UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: rewards })\r\n        UIMgr.ins.show({ viewName: ViewName.StarUpPop, data: { \"heroInfo\": heroInfo } })\r\n        this.refreshTeamInfo({\r\n            id: 0,\r\n            isRefresh: true\r\n        });\r\n    }\r\n    /* 遣散英雄 */\r\n    on_s2c_DisbandHeroesRsp(msg: proto.Msg_DisbandHeroesRsp) {\r\n        if (msg.error && msg.error.code != proto.CommonErrorCode.Succeed) return;\r\n        UIMgr.ins.hideView(ViewName.HeroResolvePop);\r\n        /* 遣散奖励 */\r\n        let rewards = msg.rewards;\r\n        // 展示奖励\r\n        UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: rewards })\r\n        this.refreshTeamInfo({\r\n            id: 0,\r\n            isRefresh: true\r\n        });\r\n    }\r\n    /* 一键升星 */\r\n    on_s2c_UpHeroStarOneClickRsp(msg: proto.Msg_UpHeroStarOneClickRsp) {\r\n        if (msg.error && msg.error.code != proto.CommonErrorCode.Succeed) return;\r\n        // let rewards = msg.heroes;\r\n\r\n        HeroData.ins.adds(msg.heroes as proto.Hero[]);\r\n        UIMgr.ins.hideView(ViewName.HeroAutoAscendPop);\r\n        let rewards: proto.Item[] = []\r\n        for (let i = 0; i < msg.heroes.length; i++) {\r\n            let hero = msg.heroes[i];\r\n            let item = {\r\n                itemId: hero.itemId,\r\n                num: 1,\r\n                extra: {\r\n                    heroStar: hero.star\r\n                },\r\n                transaction: []\r\n            }\r\n            rewards.push(item);\r\n        }\r\n        UIMgr.ins.show({\r\n            viewName: ViewName.CongratulationPop, data: rewards\r\n        })\r\n        this.refreshTeamInfo({\r\n            id: 0,\r\n            isRefresh: true\r\n        });\r\n        RedMgr.refreshEvent(RedDotType.HeroAutoAscend);\r\n    }\r\n    /* 升级背包容量 */\r\n    on_s2c_UpHeroBagCapacityRsp(msg: proto.Msg_UpHeroBagCapacityRsp) {\r\n        if (msg.error && msg.error.code != proto.CommonErrorCode.Succeed) return;\r\n        ShowTips(LangMgr.getLab('Tips_enlarge_success_1'));\r\n        RoleData.ins.capacityLevel = msg.capacityLevel;\r\n        this.showBagCapacity();\r\n    }\r\n    /* 上阵英雄 */\r\n    on_s2c_SetTeamSlotRsp(msg: proto.Msg_SetTeamSlotRsp) {\r\n        HeroDataControl.ins.refreshTeamBagData(msg.heroId);\r\n        if (GuideController.ins.isGuiding()) {\r\n            EventMgr.emitLocal(LocalEvent.heroInTeam);\r\n        }\r\n        this.refreshTeamInfo({\r\n            id: Number(msg.heroId),\r\n            isRefresh: true\r\n        });\r\n    }\r\n\r\n    /* 重置英雄星级 */\r\n    on_s2c_ResetHeroStarRsp(msg: proto.Msg_ResetHeroStarRsp) {\r\n        if (msg.error && msg.error.code != proto.CommonErrorCode.Succeed) return;\r\n        let rewards = msg.rewards;\r\n        UIMgr.ins.hideView(ViewName.HeroResetPop);\r\n        UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: rewards })\r\n\r\n        let heroInfo = HeroData.ins.getById(msg.heroId);\r\n        heroInfo.finshedStarSteps = []\r\n        heroInfo.star = msg.star;\r\n        heroInfo.refreshBaseAttrMap();\r\n        this.refreshTeamInfo({\r\n            id: 0,\r\n            isRefresh: true\r\n        });\r\n    }\r\n    /* 重置队伍栏位等级 */\r\n    on_s2c_ResetTeamSlotLevelRsp(msg: proto.Msg_ResetTeamSlotLevelRsp) {\r\n        if (msg.error && msg.error.code != proto.CommonErrorCode.Succeed) return;\r\n        let rewards = msg.rewards;\r\n        // 展示奖励\r\n        UIMgr.ins.hideView(ViewName.HeroResetPop);\r\n        UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: rewards })\r\n\r\n        this.refreshTeamInfo({\r\n            id: HeroTeamControl.ins.getHeroByClass(msg.heroClass).id,\r\n            level: 1\r\n        })\r\n    }\r\n    refreshTeamInfo(data: refreshViewData) {\r\n        HeroTeamControl.ins.refreshTeam(data.id, data.level);\r\n        if (data.isRefresh) {\r\n            HeroDataControl.ins.setCanReplaceHeros();\r\n            RedMgr.refreshEvent(RedDotType.HeroupStar);\r\n            RedMgr.refreshEvent(RedDotType.HeroupLevel);\r\n            RedMgr.refreshEvent(RedDotType.HeroResonanceLevel);\r\n            RedMgr.refreshEvent(RedDotType.HeroresonanceStar);\r\n        }\r\n        this.showAllHeros(data.isRefresh ? data.isRefresh : false);\r\n        this.showHeroPainting();\r\n        this.refreshRed();\r\n        this.showBagCapacity();\r\n    }\r\n    showView(isInit: boolean) {\r\n        this.showAllHeros(isInit);\r\n        this.showBagCapacity();\r\n        this.showHeroPainting();\r\n        this.refreshRed();\r\n    }\r\n    /* 刷新红点 */\r\n    refreshRed() {\r\n        const heroInfo = HeroData.ins.getById(HeroDataControl.ins.heroId)\r\n        this.node_red_Resonance.active = RedMgr.ins.isRed(RedDotType.HeroupStar, String(heroInfo.id)) || RedMgr.ins.isRed(RedDotType.HeroupLevel, String(heroInfo.id)) || HeroRed.ins.checkWearEquip(heroInfo)\r\n        if (this._defaultView === VIEW_TYPE.HERO) {\r\n            this.node_red_hero.active = false\r\n            this.node_red_book.active = RedMgr.ins.isRed(RedDotType.HeroBook);\r\n        } else {\r\n            this.node_red_hero.active = RedMgr.ins.isRed(RedDotType.HeroupStar) || RedMgr.ins.isRed(RedDotType.HeroupLevel);\r\n            this.node_red_book.active = false;\r\n        }\r\n    }\r\n    setCloseCallBack(closeFunc: Function) {\r\n        this.mClosedCallBack = closeFunc;\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n        this.unRegister();\r\n        if (this.mClosedCallBack && typeof this.mClosedCallBack == 'function') {\r\n            this.mClosedCallBack();\r\n            this.mClosedCallBack = null;\r\n        }\r\n    }\r\n    /* 显示背包容量 */\r\n    showBagCapacity() {\r\n        this.lbl_cur_capacity_count.string = String(HeroData.ins.getHeros().length);\r\n        /* 最大容量 */\r\n        let heroBagExpansion = tab.getData().GetKeyValue_ConfigTable().HeroBagExpansion;//100钻石升10格子\r\n        this.lbl_max_capacity_count.string = String(tab.getData().GetKeyValue_ConfigTable().HeroBagNum + heroBagExpansion[2] * RoleData.ins.capacityLevel + RoleData.ins.getPrivilegeValue(tab.VipBonus.VipBonus_HeroBagAddCount));\r\n    }\r\n    /* 显示所有英雄 */\r\n    showAllHeros(isInit: boolean) {\r\n        this.node_hero_bag.active = this._defaultView === VIEW_TYPE.HERO;\r\n        this.node_hero_book.active = this._defaultView === VIEW_TYPE.BOOK;\r\n        if (this._defaultView === VIEW_TYPE.HERO) {\r\n            HeroDataControl.ins.refreshBookData(0);\r\n            this._list = this.groupHeroList();\r\n            if (isInit) {\r\n                this.list_heros.Init({\r\n                    getCellNumber: this.getCellCount.bind(this),\r\n                    getCellSize: this.getCellHeight.bind(this),\r\n                    getCellIdentifer: this.getCellIdentifer.bind(this),\r\n                    getCellView: this.getCellView.bind(this),\r\n                    getCellData: this.GetCellData.bind(this),\r\n                });\r\n                this.list_heros.scrollToOffset(new Vec2(0, 0), 1, true)\r\n            } else {\r\n                this.list_heros.Refresh();\r\n            }\r\n        } else {\r\n            let bookTs = this.node_hero_book.getComponent(HeroBookView);\r\n            bookTs.showAllHeros(this._bagVocationType, isInit);\r\n        }\r\n    }\r\n    getCellCount() {\r\n        return this._list.length;\r\n    }\r\n    getCellHeight() {\r\n        return 185;\r\n    }\r\n    getCellIdentifer() {\r\n        return \"HeroBagLayoutCell\";\r\n    }\r\n    getCellView() {\r\n        return instantiate(this.pfb_hero_item).getComponent(HeroBagLayoutCell);\r\n    }\r\n    GetCellData(idx: number) {\r\n        return this._list[idx]\r\n    }\r\n\r\n    /* 将英雄数据分组 */\r\n    groupHeroList() {\r\n        const result = [];\r\n        let heroInfo = HeroData.ins.getById(HeroDataControl.ins.heroId);\r\n        if (heroInfo) {\r\n            let classType = heroInfo.heroTable.Class;\r\n            if (this._bagVocationType !== tab.HeroClass.HeroClass_Max) {\r\n                this._bagVocationType = classType;\r\n            }\r\n            this.node_vacation_taggle.getChildByName(\"Toggle\" + this._bagVocationType).getComponent(Toggle).isChecked = true;\r\n            let heroList = HeroDataControl.ins.getHeroListByVocation(this._bagVocationType, true);\r\n            for (let i = 0; i < heroList.length; i += this._lineHeroCount) {\r\n                result.push(heroList.slice(i, i + this._lineHeroCount));\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n    hideBagView() {\r\n        this.onClose();\r\n    }\r\n    /* 点击展示英雄详情 */\r\n    showDetailView() {\r\n        // this.onClose();\r\n        UIMgr.ins.show({ viewName: ViewName.HeroDetailView })\r\n    }\r\n    /* 显示英雄立绘信息 */\r\n    showHeroPainting() {\r\n        /* 加载资源 */\r\n        let paintingNode = null;\r\n        if (this.node_hero_painting.children.length === 0) {\r\n            paintingNode = instantiate(this.pfb_hero_painting);\r\n            paintingNode.parent = this.node_hero_painting;\r\n        } else {\r\n            paintingNode = this.node_hero_painting.children[0];\r\n        }\r\n        let ts = paintingNode.getComponent(HeroBagPainting);\r\n        if (this._defaultView === VIEW_TYPE.HERO) {\r\n            ts.initData();\r\n        } else {\r\n            ts.initBook();\r\n        }\r\n        // 显示雷达图\r\n        this.showRadarData();\r\n    }\r\n    showRadarData() {\r\n        let tabData: tab.HeroTable = null;\r\n        this.node_radar.active = false;\r\n        if (this._defaultView === VIEW_TYPE.HERO) {\r\n            const heroInfo = HeroData.ins.getById(HeroDataControl.ins.heroId);\r\n            tabData = heroInfo.heroTable;\r\n        } else if (this._defaultView === VIEW_TYPE.BOOK) {\r\n            const itemId = HeroDataControl.ins.bookId;\r\n            tabData = tab.getData().HeroTableById.getValue(itemId);\r\n        }\r\n        if (tabData.RadarChart) {\r\n            this.node_radar.active = true;\r\n            this.sp_img_radar.setTexture(tabData.RadarChart);\r\n            this.lbl_score_radar.string = LangMgr.getCombineString(\"ui_hero_59\", [tabData.HeroScore]);\r\n            for(let i=0;i<this.node_radar_txt.children.length;i++){\r\n                const txt:Label = this.node_radar_txt.children[i].getComponent(Label);\r\n                if(tabData.RadarHighlight.indexOf(i+1)>-1){\r\n                    txt.color =  new Color().fromHEX(tab.getData().GetKeyValue_ConfigTable().InterfaceTxtRed);\r\n                }else{\r\n                    txt.color = new Color().fromHEX(\"#31B6D9\");\r\n                }\r\n            }\r\n            this.anim_radar.play(\"RadarShow\");\r\n        }\r\n    }\r\n    /* 点击一键升星 */\r\n    clickAllStarUp() {\r\n        UIMgr.ins.show({ viewName: ViewName.HeroAutoAscendPop })\r\n    }\r\n    /* 点击升级英雄背包 */\r\n    clickUpHeroBagCount() {\r\n        /* 点击打开弹窗 确定发送 */\r\n        const heroBagExpansion = tab.getData().GetKeyValue_ConfigTable().HeroBagExpansion;\r\n        const itemId = heroBagExpansion[0];\r\n        const itemCount = heroBagExpansion[1];\r\n        const bagCount = heroBagExpansion[2];\r\n        const curHavaCount = ItemData.ins.getCount(itemId);\r\n        const tipsStr = LangMgr.getCombineString(\"Tips_enlarge_1\", [itemCount, bagCount]);\r\n        CommonTipsPop.create(tipsStr, ((val) => {\r\n            if (val) {\r\n                if (curHavaCount < itemCount) {\r\n                    ShowItemNotEnoughTips(itemId);\r\n                } else {\r\n                    let msg = new proto.Msg_UpHeroBagCapacityReq()\r\n                    Net.Send(proto.Ptl.UpHeroBagCapacityReq, msg)\r\n                }\r\n            }\r\n        }))\r\n    }\r\n    switchListView(event: EventTouch, ViewType: string) {\r\n        if (this._defaultView === Number(ViewType)) {\r\n            return;\r\n        }\r\n        this._defaultView = Number(ViewType);\r\n        this._bagVocationType = tab.HeroClass.HeroClass_Max;\r\n        this.node_vacation_taggle.children[0].getComponent(Toggle).isChecked = true;\r\n        this.switchVocation(null, String(this._bagVocationType));\r\n    }\r\n    /* 根据职业刷新界面 */\r\n    switchVocation(event: EventTouch, vocationType: string) {\r\n        this._bagVocationType = Number(vocationType);\r\n        if (this._defaultView === VIEW_TYPE.HERO) {\r\n            let heroList = HeroDataControl.ins.getHeroListByVocation(this._bagVocationType, true);\r\n            HeroDataControl.ins.refreshBagData(heroList[0]);\r\n            this.showView(true);\r\n        } else {\r\n            if (this._bagVocationType === tab.HeroClass.HeroClass_Max) {\r\n                let awardMap = HeroDataControl.ins.getBookReceivedIds();\r\n                let itemId = 0;\r\n                awardMap.forEach((value, key) => {\r\n                    if (!value.isReceived && !itemId) {\r\n                        itemId = key\r\n                    }\r\n                })\r\n                if (itemId) {\r\n                    HeroDataControl.ins.refreshBookData(itemId);\r\n                } else {\r\n                    let heroList = HeroDataControl.ins.getBookHeroListByVocation(this._bagVocationType, true);\r\n                    HeroDataControl.ins.refreshBookData(heroList[0]);\r\n                }\r\n            } else {\r\n                let heroList = HeroDataControl.ins.getBookHeroListByVocation(this._bagVocationType, true);\r\n                HeroDataControl.ins.refreshBookData(heroList[0]);\r\n            }\r\n            HeroDataControl.ins.refreshBagData(0);\r\n            this.showView(true);\r\n        }\r\n    }\r\n    showBookHero() {\r\n        this.node_function_taggle.children[1].getComponent(Toggle).isChecked = true;\r\n        this._defaultView = VIEW_TYPE.BOOK\r\n        this._bagVocationType = tab.HeroClass.HeroClass_Max;\r\n        this.node_vacation_taggle.children[0].getComponent(Toggle).isChecked = true;\r\n        HeroDataControl.ins.refreshBookData(HeroDataControl.ins.bookId);\r\n        HeroDataControl.ins.refreshBagData(0);\r\n        this.showView(true);\r\n    }\r\n    /* 点击阵容推荐 */\r\n    clickShowRecommendView() {\r\n        UIMgr.ins.show({ viewName: ViewName.HeroRecommendPop })\r\n    }\r\n    /* 点击遣散 */\r\n    clickShowHeroResolvePop() {\r\n        UIMgr.ins.show({ viewName: ViewName.HeroResolvePop })\r\n    }\r\n    /* 点击共鸣 */\r\n    clickShowHeroResonancePop() {\r\n        UIMgr.ins.show({ viewName: ViewName.HeroResonancePop })\r\n    }\r\n    /* 领取图签奖励 */\r\n    on_s2c_ReceiveHeroAlbumRewardRsp(msg: proto.Msg_ReceiveHeroAlbumRewardRsp) {\r\n        let rewards = msg.rewards;\r\n        UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: rewards, zIndex: 300 })\r\n        let map = HeroDataControl.ins.getBookReceivedIds();\r\n        map.set(msg.heroItemId, {\r\n            id: msg.heroItemId,\r\n            isReceived: true\r\n        });\r\n        let bookTs = this.node_hero_book.getComponent(HeroBookView);\r\n        bookTs.refreshBookByItemId(msg.heroItemId);\r\n        RedMgr.refreshEvent(RedDotType.HeroBook);\r\n    }\r\n}\r\n\r\n"]}