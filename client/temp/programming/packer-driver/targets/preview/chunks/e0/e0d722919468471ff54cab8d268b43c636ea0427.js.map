{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/chat/ChatPlayerItem.ts"],"names":["_decorator","Label","UITransform","InfiniteCell","PlayerHeadItem","tab","LangMgr","ccclass","property","ChatPlayerItem","UpdateContent","data","playerHeadItem","initHeadInfo","headFrame","sender","headIcon","level","roleId","nameLab","string","name","table","getData","QuestLogTableByLevel","getValue","questLogLevel","titleLab","getLab","Name","messageLab2","node","active","normal","chatLayout","scheduleOnce","width","getComponent","contentSize","messageLab"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, UITransform } from 'cc';\r\nimport InfiniteCell from '../../../Common/InfiniteList/InfiniteCell';\r\nimport { PlayerHeadItem } from '../common/PlayerHeadItem';\r\nimport { ChatMessageInfo } from './ChatMessageInfo';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { Func } from '../../utils/Func';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * ChatPlayerItem\r\n * zhudingchao\r\n * Thu Jun 13 2024 18:05:40 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/chat/ChatPlayerItem.ts\r\n *\r\n */\r\n\r\n@ccclass('ChatPlayerItem')\r\nexport class ChatPlayerItem extends InfiniteCell {\r\n    @property(PlayerHeadItem)\r\n    playerHeadItem: PlayerHeadItem = null;\r\n    @property(Label)\r\n    nameLab:Label=null;\r\n    @property(Label)\r\n    titleLab:Label=null;\r\n    @property(Label)\r\n    servernName:Label=null;\r\n    @property(Label)\r\n    messageLab:Label=null;\r\n    @property(Label)\r\n    messageLab2:Label=null;\r\n    @property(UITransform)\r\n    chatLayout:UITransform=null;\r\n    UpdateContent(data: ChatMessageInfo): void {\r\n        this.playerHeadItem.initHeadInfo({headFrame:data.sender.headFrame,headIcon:data.sender.headIcon,level:data.sender.level,\r\n            roleId:data.sender.roleId\r\n        })\r\n        this.nameLab.string=data.sender.name;\r\n        let table=tab.getData().QuestLogTableByLevel.getValue(data.sender.questLogLevel);\r\n        if(table){\r\n            this.titleLab.string=LangMgr.getLab(table.Name);\r\n        }\r\n       \r\n        if(!data[\"ZH_width\"]){\r\n            this.messageLab2.node.active=true;\r\n            this.messageLab2.string=data.normal;\r\n            this.chatLayout.node.active=false;\r\n            this.scheduleOnce(()=>{\r\n                let width=this.messageLab2.getComponent(UITransform).contentSize.width+25;\r\n                if(width>395){\r\n                    width=395;\r\n                }\r\n                data[\"ZH_width\"]= width;\r\n                this.chatLayout.width=width;\r\n                this.messageLab2.node.active=false;\r\n                this.messageLab.string=data.normal;\r\n                this.chatLayout.node.active=true;\r\n            })\r\n            // data[\"ZH_width\"]=Func.getStrZhWidth(data.normal)*20+25;\r\n        }else{\r\n            this.messageLab.string=data.normal;\r\n            this.chatLayout.width= data[\"ZH_width\"];\r\n        }\r\n        // if(data[\"ZH_width\"]<400){\r\n        //     this.chatLayout.width=data[\"ZH_width\"];\r\n        // }else{\r\n        //     this.chatLayout.width=400;\r\n        // }\r\n        // if(len*22<370){\r\n        //     this.chatLayout.width=len*22+25;\r\n        // }else{\r\n        //     this.chatLayout.width=390; \r\n        // }\r\n        \r\n    }\r\n}"]}