{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/fincaFight/FincaFightLogPop.ts"],"names":["_decorator","instantiate","Prefab","UITransform","ViewPop","InfiniteList","FincaFightLogItem","ccclass","property","FincaFightLogPop","_list","onShow","openData","list_view","Init","getCellNumber","getCellCount","bind","getCellSize","getCellHeight","getCellIdentifer","getCellView","getCellData","GetCellData","pos","GetScrollPosOfCell","length","maxY","getContent","getComponent","height","max_y","y","setContentPos","onDestroy","register","unRegister","idx","identifer","cell","pfb_item"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;AAClDC,MAAAA,O,iBAAAA,O;;AAEFC,MAAAA,Y;;AAEEC,MAAAA,iB,iBAAAA,iB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;kCAGjBS,gB,WADZF,OAAO,CAAC,kBAAD,C,UAEHC,QAAQ,CAACN,MAAD,C,UAERM,QAAQ;AAAA;AAAA,uC,2BAJb,MACaC,gBADb;AAAA;AAAA,8BAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAKlCC,KALkC,GAKO,EALP;AAAA;;AAM1CC,QAAAA,MAAM,GAAS;AACX,eAAKD,KAAL,GAAa,KAAKE,QAAlB;AACA,eAAKC,SAAL,CAAeC,IAAf,CAAoB;AAChBC,YAAAA,aAAa,EAAE,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CADC;AAEhBC,YAAAA,WAAW,EAAE,KAAKC,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAFG;AAGhBG,YAAAA,gBAAgB,EAAE,KAAKA,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAHF;AAIhBI,YAAAA,WAAW,EAAE,KAAKA,WAAL,CAAiBJ,IAAjB,CAAsB,IAAtB,CAJG;AAKhBK,YAAAA,WAAW,EAAE,KAAKC,WAAL,CAAiBN,IAAjB,CAAsB,IAAtB;AALG,WAApB;AAQA,cAAMO,GAAG,GAAG,KAAKX,SAAL,CAAeY,kBAAf,CAAkC,KAAKf,KAAL,CAAWgB,MAAX,GAAkB,CAApD,CAAZ;AACA,cAAMC,IAAI,GAAG,KAAKd,SAAL,CAAee,UAAf,GAA4BC,YAA5B,CAAyC1B,WAAzC,EAAsD2B,MAAtD,GAA6D,GAA1E;AACA,cAAIC,KAAK,GAAGP,GAAG,CAACQ,CAAJ,GAAML,IAAN,GAAWA,IAAX,GAAgBH,GAAG,CAACQ,CAAhC;AACA,eAAKnB,SAAL,CAAeoB,aAAf,CAA6BF,KAA7B,EAAmC,CAAnC,EAAsC,CAAtC;AACH;;AACSG,QAAAA,SAAS,GAAS;AACxB,gBAAMA,SAAN;AACH;;AACDC,QAAAA,QAAQ,GAAS,CAEhB;;AACDC,QAAAA,UAAU,GAAS;AACf,gBAAMA,UAAN;AACH;;AACDpB,QAAAA,YAAY,GAAG;AACX,iBAAO,KAAKN,KAAL,CAAWgB,MAAlB;AACH;;AACDP,QAAAA,aAAa,CAACkB,GAAD,EAAc;AACvB,iBAAO,EAAP;AACH;;AACDjB,QAAAA,gBAAgB,CAACiB,GAAD,EAAc;AAC1B,iBAAO,oBAAP;AACH;;AACDhB,QAAAA,WAAW,CAACgB,GAAD,EAAcC,SAAd,EAAiC;AACxC,cAAIC,IAAI,GAAGtC,WAAW,CAAC,KAAKuC,QAAN,CAAX,CAA2BX,YAA3B;AAAA;AAAA,qDAAX;AACA,iBAAOU,IAAP;AACH;;AACDhB,QAAAA,WAAW,CAACc,GAAD,EAAc;AACrB,iBAAO,KAAK3B,KAAL,CAAW2B,GAAX,CAAP;AACH;;AA7CyC,O;;;;;iBAExB,I;;;;;;;iBAEQ,I","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab, UITransform } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { proto } from 'client_protocol';\r\nimport InfiniteList from '../../../Common/InfiniteList/InfiniteList';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { FincaFightLogItem } from './FincaFightLogItem';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('FincaFightLogPop')\r\nexport class FincaFightLogPop extends ViewPop {\r\n    @property(Prefab)\r\n    pfb_item:Prefab = null;\r\n    @property(InfiniteList)\r\n    list_view: InfiniteList = null;\r\n    private _list: proto.IFincaBattleFightRecord[] = []\r\n    onShow(): void {\r\n        this._list = this.openData;\r\n        this.list_view.Init({\r\n            getCellNumber: this.getCellCount.bind(this),\r\n            getCellSize: this.getCellHeight.bind(this),\r\n            getCellIdentifer: this.getCellIdentifer.bind(this),\r\n            getCellView: this.getCellView.bind(this),\r\n            getCellData: this.GetCellData.bind(this),\r\n        });\r\n\r\n        const pos = this.list_view.GetScrollPosOfCell(this._list.length-1);\r\n        const maxY = this.list_view.getContent().getComponent(UITransform).height-300;\r\n        let max_y = pos.y>maxY?maxY:pos.y;\r\n        this.list_view.setContentPos(max_y,0, 0);\r\n    }\r\n    protected onDestroy(): void {\r\n        super.onDestroy();\r\n    }\r\n    register(): void {\r\n        \r\n    }\r\n    unRegister(): void {\r\n        super.unRegister()\r\n    }\r\n    getCellCount() {\r\n        return this._list.length\r\n    }\r\n    getCellHeight(idx: number) {\r\n        return 60\r\n    }\r\n    getCellIdentifer(idx: number) {\r\n        return \"AssociationLogItem\";\r\n    }\r\n    getCellView(idx: number, identifer: string) {\r\n        let cell = instantiate(this.pfb_item).getComponent(FincaFightLogItem);\r\n        return cell;\r\n    }\r\n    GetCellData(idx: number) {\r\n        return this._list[idx]\r\n    }\r\n}\r\n\r\n\r\n"]}