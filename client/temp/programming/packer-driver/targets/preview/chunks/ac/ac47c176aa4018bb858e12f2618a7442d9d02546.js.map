{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/jianghu/climbingTower/ClimbingTowerTowerItem.ts"],"names":["_decorator","Component","Label","Node","sp","Sprite","tab","LangMgr","LoadResAsync","createAnimation","setGraySpine","ccclass","property","ClimbingTowerTowerItem","Skeleton","initView","state","table","developNode","active","lockNode","gotNode","selectNode","numLab","string","getCombineString","Floor","bgSprite","setTexture","BackgroundUrl","tempTab","getData","AnimationTableById","getValue","Number","AnimationId","spData","Path","SkeletonData","bossSp","skeletonData","grayscale","node","Id","setAnimation","AnimationName","bossNode"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, sp, Sprite } from 'cc';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nimport { LoadResAsync } from '../../../mgr/ResMgr';\r\nimport { createAnimation, setGraySpine } from '../../../utils/GameUtil';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * ClimbingTowerTowerItem\r\n * zhudingchao\r\n * Thu Jul 11 2024 19:52:31 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/jianghu/climbingTower/ClimbingTowerTowerItem.ts\r\n *\r\n */\r\n\r\n@ccclass('ClimbingTowerTowerItem')\r\nexport class ClimbingTowerTowerItem extends Component {\r\n    @property(sp.Skeleton)\r\n    bossSp:sp.Skeleton=null;\r\n    @property(Node)\r\n    selectNode:Node=null;\r\n    @property(Label)\r\n    numLab:Label=null;\r\n    @property(Node)\r\n    lockNode:Node=null;\r\n    @property(Node)\r\n    gotNode:Node=null;\r\n    @property(Sprite)\r\n    bgSprite:Sprite=null;\r\n    @property(Node)\r\n    developNode:Node=null;\r\n    @property(Node)\r\n    bossNode:Node=null;\r\n    async initView(state:number,table:tab.ClimbTowerTable){\r\n        if(table){\r\n            this.developNode.active=false;\r\n            this.lockNode.active=state==2;\r\n            this.gotNode.active=state==0;\r\n            this.selectNode.active=state==1;\r\n            this.numLab.string=LangMgr.getCombineString(\"ui_climbingtower_2\",[table.Floor])\r\n            this.bgSprite.setTexture(table.BackgroundUrl);\r\n            let tempTab: tab.AnimationTable = tab.getData().AnimationTableById.getValue(Number(table.AnimationId))\r\n            let spData = await LoadResAsync(tempTab.Path, sp.SkeletonData)\r\n            this.bossSp.skeletonData = spData\r\n            if(state==2){\r\n                this.bgSprite.grayscale=true;\r\n                createAnimation(this.bossSp.node, tempTab.Id, 0);\r\n                setGraySpine(this.bossSp, true);\r\n            }else{\r\n                this.bgSprite.grayscale=false;\r\n                this.bossSp.setAnimation(0, tempTab.AnimationName, true);\r\n                setGraySpine(this.bossSp, false);\r\n            }\r\n        }else{\r\n            //敬请期待\r\n            this.bossNode.active=false;\r\n            this.developNode.active=true;\r\n            this.gotNode.active=false;\r\n\r\n        }\r\n    }\r\n\r\n}"]}