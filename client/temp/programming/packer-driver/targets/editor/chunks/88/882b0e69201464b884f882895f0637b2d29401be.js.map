{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/base/effect/ShadowEffect.ts"],"names":["_decorator","Component","Layers","Node","Avatar","ccclass","property","ShadowEffect","avatar","create","anim","effects","pop","nn","layer","Enum","DEFAULT","addComponent","put","effect","node","removeFromParent","reset","push","destory","i","length","destroy","recycle","run","animId","addChild","setAnimationId"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,I,OAAAA,I;;AAE/BC,MAAAA,M,iBAAAA,M;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;8BAGjBO,Y,WADZF,OAAO,CAAC,cAAD,C,2BAAR,MACaE,YADb,SACkCN,SADlC,CAC4C;AAAA;AAAA;AAAA,eAgCxCO,MAhCwC,GAgCvB,IAhCuB;AAAA;;AAE3B,eAANC,MAAM,GAAG;AACZ,cAAIC,IAAI,GAAGH,YAAY,CAACI,OAAb,CAAqBC,GAArB,EAAX;;AACA,cAAIF,IAAI,IAAI,IAAZ,EAAkB;AACd,gBAAIG,EAAE,GAAG,IAAIV,IAAJ,CAAS,cAAT,CAAT;AACAU,YAAAA,EAAE,CAACC,KAAH,GAAWZ,MAAM,CAACa,IAAP,CAAYC,OAAvB;AACAN,YAAAA,IAAI,GAAGG,EAAE,CAACI,YAAH,CAAgBV,YAAhB,CAAP;AACH;;AACD,iBAAOG,IAAP;AACH;;AAES,eAAHQ,GAAG,CAACC,MAAD,EAAuB;AAC7BA,UAAAA,MAAM,CAACC,IAAP,CAAYC,gBAAZ;AACAF,UAAAA,MAAM,CAACG,KAAP;AACAf,UAAAA,YAAY,CAACI,OAAb,CAAqBY,IAArB,CAA0BJ,MAA1B;AACH;AACD;;;AACc,eAAPK,OAAO,GAAG;AACb,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlB,YAAY,CAACI,OAAb,CAAqBe,MAAzC,EAAiDD,CAAC,EAAlD,EAAsD;AAClDlB,YAAAA,YAAY,CAACI,OAAb,CAAqBc,CAArB,EAAwBL,IAAxB,CAA6BO,OAA7B;AACH;;AACDpB,UAAAA,YAAY,CAACI,OAAb,CAAqBe,MAArB,GAA8B,CAA9B;AACH;;AAIDJ,QAAAA,KAAK,GAAG;AACJ,eAAKd,MAAL,CAAYoB,OAAZ;AACA,eAAKpB,MAAL,GAAc,IAAd;AACH;;AAGDqB,QAAAA,GAAG,CAACC,MAAD,EAAiB;AAChB,eAAKtB,MAAL,GAAc;AAAA;AAAA,gCAAOC,MAAP,EAAd;AACA,eAAKW,IAAL,CAAUW,QAAV,CAAmB,KAAKvB,MAAL,CAAYY,IAA/B;AACA,eAAKZ,MAAL,CAAYwB,cAAZ,CAA2BF,MAA3B;AACH;;AAEDF,QAAAA,OAAO,GAAG;AACNrB,UAAAA,YAAY,CAACW,GAAb,CAAiB,IAAjB;AACH;;AAzCuC,O,UACjCP,O,GAA0B,E","sourcesContent":["import { _decorator, Component, Layers, Node } from \"cc\";\nimport { AbsRole } from \"../obj/role/AbsRole\";\nimport { Avatar } from \"../../animation/Avatar\";\nimport { AbsObj } from \"../obj/AbsObj\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('ShadowEffect')\nexport class ShadowEffect extends Component {\n    static effects: ShadowEffect[] = [];\n    static create() {\n        let anim = ShadowEffect.effects.pop()\n        if (anim == null) {\n            let nn = new Node(\"ShadowEffect\");\n            nn.layer = Layers.Enum.DEFAULT\n            anim = nn.addComponent(ShadowEffect)\n        }\n        return anim\n    }\n\n    static put(effect: ShadowEffect) {\n        effect.node.removeFromParent()\n        effect.reset()\n        ShadowEffect.effects.push(effect)\n    }\n    /** 销毁 */\n    static destory() {\n        for (let i = 0; i < ShadowEffect.effects.length; i++) {\n            ShadowEffect.effects[i].node.destroy()\n        }\n        ShadowEffect.effects.length = 0\n    }\n\n\n\n    reset() {\n        this.avatar.recycle()\n        this.avatar = null\n    }\n\n    avatar: Avatar = null;\n    run(animId: number) {\n        this.avatar = Avatar.create()\n        this.node.addChild(this.avatar.node)\n        this.avatar.setAnimationId(animId)\n    }\n\n    recycle() {\n        ShadowEffect.put(this)\n    }\n}"]}