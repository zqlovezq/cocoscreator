{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/activity/signGift/SignInGiftItem.ts"],"names":["_decorator","Component","Label","Node","ItemInfo","ItemPoolMgr","CommonItem","LangMgr","proto","Net","SignInGiftData","AWARD_STATE","ccclass","property","SignInGiftItem","signData","initData","data","info","itemId","ItemId","num","ItemCount","itemItem","ins","createItem","node_reward","itemTs","getComponent","signState","getSignState","Day","setTouchCallBack","RECEIVE","sendMsg","lbl_day","string","getCombineString","node_is_special","active","IsGrand","node_is_big","node_got","GOT","node_get","node_lock","LOCK","sign_msg","Msg_ReceiveSignInGiftReq","days","Send","Ptl","ReceiveSignInGiftReq"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\r\nimport { ItemInfo } from '../../item/ItemInfo';\r\nimport { ItemPoolMgr } from '../../item/ItemPoolMgr';\r\nimport { CommonItem } from '../../item/CommonItem';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nimport { proto } from 'client_protocol';\r\nimport { Net } from '../../../net/Net';\r\nimport { SignInGiftData } from './SignInGiftData';\r\nimport { AWARD_STATE } from '../../../../Common/script/EnumTypeMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SignInGiftItem')\r\nexport class SignInGiftItem extends Component {\r\n    @property(Label)\r\n    lbl_day:Label = null;//时间\r\n    @property(Node)\r\n    node_got:Node = null;\r\n    @property(Node)\r\n    node_is_big:Node = null;\r\n    @property(Node)\r\n    node_get:Node = null;\r\n    @property(Node)\r\n    node_lock:Node = null;\r\n    @property(Node)\r\n    node_is_special:Node = null;\r\n    @property(Node)\r\n    node_reward:Node = null;\r\n    private signData:tab.SignInGiftTable = null;\r\n    initData(data:tab.SignInGiftTable){\r\n        this.signData = data;\r\n        const info = new ItemInfo();\r\n        info.itemId = data.ItemId;\r\n        info.num = data.ItemCount;\r\n        const itemItem = ItemPoolMgr.ins.createItem(info, this.node_reward);\r\n        const itemTs = itemItem.getComponent(CommonItem);\r\n        const signState = SignInGiftData.ins.getSignState(data.Day);\r\n        itemTs.setTouchCallBack(null);\r\n        if(signState===AWARD_STATE.RECEIVE){\r\n            itemTs.setTouchCallBack(()=>{\r\n                this.sendMsg();\r\n            })\r\n        }\r\n        this.lbl_day.string = LangMgr.getCombineString(\"ui_commondesc_72\",[data.Day]);\r\n        this.node_is_special.active = data.IsGrand;\r\n        this.node_is_big.active = data.IsGrand;\r\n        this.node_got.active = signState==AWARD_STATE.GOT;\r\n        this.node_get.active = signState==AWARD_STATE.RECEIVE;\r\n        this.node_lock.active = signState==AWARD_STATE.LOCK;\r\n    }\r\n    sendMsg(){\r\n        let sign_msg = new proto.Msg_ReceiveSignInGiftReq();\r\n        sign_msg.days = [this.signData.Day];\r\n        Net.Send(proto.Ptl.ReceiveSignInGiftReq, sign_msg);\r\n    }\r\n}\r\n\r\n\r\n"]}