{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/jianghu/topWar/TopWarPlayRankHeadiItem.ts"],"names":["_decorator","Component","Label","Node","sp","Sprite","RoleData","UIMgr","ViewName","tab","ccclass","property","TopWarPlayRankHeadiItem","Skeleton","headInfo","onLoad","node","on","EventType","TOUCH_END","clickHead","initView","info","roleInfo","headFrame","headIcon","itemHeadTab","getData","ItemTableById","getValue","headImg","setTexture","Icon","itemheadFrameTab","headFrameImg","ins","id","show","viewName","RoleInfoPop","CheckRoleInfoPop","data","roleId","setRankLab","rank","rankLab","string"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, sp, Sprite } from 'cc';\r\nimport { HeadInfo } from '../../common/PlayerHeadItem';\r\nimport { RoleData } from '../../role/RoleData';\r\nimport { UIMgr } from '../../../mgr/UIMgr';\r\nimport { ViewName } from '../../../define/ViewDefine';\r\nimport { tab } from '../../../../Table/table_gen';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * TopWarPlayRankHeadiItem\r\n * zhudingchao\r\n * Tue Jul 09 2024 14:19:23 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/jianghu/topWar/TopWarPlayRankHeadiItem.ts\r\n *\r\n */\r\n\r\n@ccclass('TopWarPlayRankHeadiItem')\r\nexport class TopWarPlayRankHeadiItem extends Component {\r\n    @property(Sprite)\r\n    headFrameImg: Sprite = null;\r\n    @property(Sprite)\r\n    headImg: Sprite = null;\r\n    @property(Label)\r\n    rankLab: Label = null;\r\n    @property(sp.Skeleton)\r\n    spine: sp.Skeleton = null;\r\n    @property(Node)\r\n    myNode: Node = null;\r\n    @property(Node)\r\n    rankNode: Node = null;\r\n    private headInfo: HeadInfo;\r\n\r\n    protected onLoad(): void {\r\n        this.node.on(Node.EventType.TOUCH_END, this.clickHead, this);\r\n    }\r\n    initView(info: HeadInfo) {\r\n        this.headInfo = info;\r\n\r\n        if (info.roleInfo) {\r\n            if (!info.headFrame) {\r\n                info.headFrame = info.roleInfo.headFrame;\r\n            }\r\n            if (!info.headIcon) {\r\n                info.headIcon = info.roleInfo.headIcon;\r\n            }\r\n\r\n\r\n            // this.levelLab.string=info.level+\"\";\r\n        }\r\n        // this.headFrameImg.setTexture(info.headFrame)\r\n\r\n        let itemHeadTab = tab.getData().ItemTableById.getValue(info.headIcon);\r\n        if (!itemHeadTab) {\r\n            itemHeadTab = tab.getData().ItemTableById.getValue(31201);\r\n        }\r\n        this.headImg.setTexture(itemHeadTab.Icon);\r\n\r\n\r\n        let itemheadFrameTab = tab.getData().ItemTableById.getValue(info.headFrame);\r\n        if (!itemheadFrameTab) {\r\n            //默认头像框\r\n            itemheadFrameTab = tab.getData().ItemTableById.getValue(32000);\r\n        }\r\n\r\n        this.headFrameImg.setTexture(itemheadFrameTab.Icon);\r\n\r\n\r\n\r\n    }\r\n    clickHead() {\r\n\r\n        if (this.headInfo) {\r\n            if (this.headInfo.roleInfo) {\r\n                if (RoleData.ins.id == this.headInfo.roleInfo.id) {\r\n                    UIMgr.ins.show({ viewName: ViewName.RoleInfoPop })\r\n                } else {\r\n                    UIMgr.ins.show({ viewName: ViewName.CheckRoleInfoPop, data: { \"info\": this.headInfo.roleInfo } })\r\n                }\r\n            } else if (this.headInfo.roleId) {\r\n                if (RoleData.ins.id == this.headInfo.roleId) {\r\n                    UIMgr.ins.show({ viewName: ViewName.RoleInfoPop })\r\n                } else {\r\n                    UIMgr.ins.show({ viewName: ViewName.CheckRoleInfoPop, data: { \"roleId\": this.headInfo.roleId } })\r\n                }\r\n            }\r\n        }\r\n        else {\r\n\r\n            UIMgr.ins.show({ viewName: ViewName.RoleInfoPop })\r\n        }\r\n\r\n    }\r\n    public setRankLab(rank: number) {\r\n\r\n        if (rank > -1) {\r\n            this.rankLab.string = \"\" + rank;\r\n\r\n        } else {\r\n            this.rankLab.string = \"\"\r\n        }\r\n\r\n\r\n    }\r\n\r\n}"]}