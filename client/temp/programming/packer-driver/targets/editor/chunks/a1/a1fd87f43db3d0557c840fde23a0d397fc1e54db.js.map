{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/hero/herobag/HeroSkillItem.ts"],"names":["_decorator","Component","Label","Node","Sprite","UIMgr","ViewName","tab","ccclass","property","HeroSkillItem","_type","HeroStarDescType","HeroStarDescType_None","_heroInfo","initData","type","heroInfo","heroTab","heroTable","_skillData","getHeroSkillMap","get","_skillIcon","i","nodes_skill","length","node","active","getChildByName","getComponent","setTexture","HeroStarDescType_First","node_skill_layout","lbl_skill_max_level","string","String","curCount","HeroStarUpTab","HeroStar","star","lbl_skill_now_level","setSkillImgActive","isActive","child2","children","onClick","ins","show","viewName","HeroSkillPop","data","zIndex"],"mappings":"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","sourcesContent":["/*\r\n * @Date: 2024-05-14 15:07:59\r\n * @LastEditors: wzq\r\n * @LastEditTime: 2024-06-05 17:54:14\r\n */\r\n\r\nimport { _decorator, Component, Label, Node, Sprite } from 'cc';\r\nimport { UIMgr } from '../../../mgr/UIMgr';\r\nimport { ViewName } from '../../../define/ViewDefine';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { HeroInfo } from '../HeroInfo';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HeroSkillItem')\r\nexport class HeroSkillItem extends Component {\r\n    @property(Label)\r\n    lbl_skill_now_level:Label = null;\r\n    @property(Label)\r\n    lbl_skill_max_level:Label = null;\r\n\r\n    @property(Sprite)\r\n    sp_skill_icon:Sprite = null;\r\n\r\n    @property(Node)\r\n    node_skill_layout:Node = null;\r\n\r\n    @property([Node])\r\n    nodes_skill:Node[] = [];\r\n\r\n    private _type:tab.HeroStarDescType = tab.HeroStarDescType.HeroStarDescType_None\r\n    private _heroInfo:HeroInfo = null;\r\n    initData(type:tab.HeroStarDescType,heroInfo:HeroInfo){\r\n        let heroTab = heroInfo.heroTable;\r\n        this._type = type;\r\n        this._heroInfo = heroInfo\r\n        let _skillData = heroInfo.getHeroSkillMap().get(type);\r\n        let _skillIcon = heroTab[\"SkillIcon\" + type];\r\n        // let _bgIcon = heroInfo.heroAptitudeTable.SkillBg;\r\n        for(let i=0;i<this.nodes_skill.length;i++){\r\n            let node = this.nodes_skill[i];\r\n            node.active = false;\r\n            if(i==type-1){\r\n                node.active = true;\r\n                node.getChildByName(\"mask\").getChildByName(\"skill_icon\").getComponent(Sprite).setTexture(_skillIcon);\r\n            }\r\n        }\r\n        if(type===tab.HeroStarDescType.HeroStarDescType_First){\r\n            this.node_skill_layout.active = false;\r\n        }else{\r\n            this.lbl_skill_max_level.string = String(_skillData.length);\r\n            let curCount = 0;\r\n            for(let i=0;i<_skillData.length;i++){\r\n                let HeroStarUpTab:tab.HeroStarUpTable = _skillData[i];\r\n                if(HeroStarUpTab.HeroStar<=heroInfo.star){\r\n                    curCount++;\r\n                }\r\n            }\r\n            this.lbl_skill_now_level.string = String(curCount);\r\n        }\r\n    }\r\n    setSkillImgActive(isActive:boolean){\r\n        // this.node_skill_img.active = isActive;\r\n        for(let i=0;i<this.nodes_skill.length;i++){\r\n            let node = this.nodes_skill[i];\r\n            // let child1 = node.children[1];\r\n            let child2 = node.children[2];\r\n            // child1.active = isActive;\r\n            child2.active = isActive;\r\n        }\r\n        this.node_skill_layout.active = isActive;\r\n    }\r\n    onClick(){\r\n        UIMgr.ins.show({ viewName: ViewName.HeroSkillPop,data: {\r\n            type:this._type,\r\n            heroInfo:this._heroInfo\r\n        },zIndex:300})\r\n    }\r\n}\r\n\r\n\r\n"]}