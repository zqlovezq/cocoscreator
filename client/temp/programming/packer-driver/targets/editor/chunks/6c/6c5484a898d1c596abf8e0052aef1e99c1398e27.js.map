{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/association/AssociationApplyItem.ts"],"names":["_decorator","Label","Node","Sprite","InfiniteCell","tab","AssociationControl","GameUtil","refreshFlagImg","AssociationData","UIMgr","ViewName","ccclass","property","AssociationApplyItem","guildData","UpdateContent","data","node","name","id","lbl_level","string","level","lbl_name","lvData","getData","GuildLevelTableById","getValue","maxPersonCount","MaxCount","lbl_person_count","memberCount","lbl_power_score","convertNumber","powerScore","node_not_check","active","needCheck","node_need_check","flagId","sp_flag_img","alreadyApply","ins","getGuildIsRequest","applyEnterGuild","reqJoinGuild","isApply","node_already_apply","node_apply","onClickGuild","show","viewName","AssociationMainPop"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, Sprite } from 'cc';\r\nimport InfiniteCell from '../../../Common/InfiniteList/InfiniteCell';\r\nimport { proto } from 'client_protocol';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { AssociationControl } from './AssociationControl';\r\nimport { GameUtil, refreshFlagImg } from '../../utils/GameUtil';\r\nimport { AssociationData } from './AssociationData';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { RoleData } from '../role/RoleData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AssociationApplyItem')\r\nexport class AssociationApplyItem extends InfiniteCell {\r\n    @property(Label)\r\n    lbl_level: Label = null;\r\n    @property(Label)\r\n    lbl_name: Label = null;\r\n    @property(Label)\r\n    lbl_person_count: Label = null;\r\n    @property(Label)\r\n    lbl_power_score: Label = null;\r\n    @property(Node)\r\n    node_not_check: Node = null;\r\n    @property(Node)\r\n    node_need_check: Node = null;\r\n    @property(Sprite)\r\n    sp_flag_img: Sprite = null;\r\n    @property(Node)\r\n    node_apply: Node = null;\r\n    @property(Node)\r\n    node_already_apply: Node = null;\r\n\r\n    private guildData: proto.ISimpleGuild = null;\r\n    UpdateContent(data: proto.ISimpleGuild ) {\r\n        /* \r\n        * data:\r\n        * areaId: 2\r\n        * createTime: 1725331484\r\n        * exp: 0\r\n        * id: \"66d6781cf48cdf9788e5540d\"\r\n        * leaderId: \"668e23576fa96377e2bfa8ec\"\r\n        * level: 1\r\n        * name: \"还有谁\"\r\n        * notice: \"今日无事发生\"\r\n        * powerScore: 0\r\n        */\r\n        this.node.name = data.id;\r\n        this.guildData = data;\r\n        this.lbl_level.string = \"Lv.\" + data.level;\r\n        this.lbl_name.string = data.name;\r\n        // 当前等级最大的人数\r\n        const lvData = tab.getData().GuildLevelTableById.getValue(data.level)\r\n        const maxPersonCount = lvData.MaxCount;\r\n        this.lbl_person_count.string = data.memberCount + \"/\" + maxPersonCount;\r\n        this.lbl_power_score.string = GameUtil.convertNumber(data.powerScore);\r\n        this.node_not_check.active = !data.needCheck;\r\n        this.node_need_check.active = data.needCheck;\r\n        // 显示旗帜\r\n        refreshFlagImg(data.flagId,this.sp_flag_img);\r\n        this.alreadyApply(AssociationData.ins.getGuildIsRequest(data.id));\r\n    }\r\n    /* 申请公会 */\r\n    applyEnterGuild() {\r\n        AssociationControl.ins.reqJoinGuild(this.guildData.id);\r\n    }\r\n    /* 显示已申请 */\r\n    alreadyApply(isApply: boolean) {\r\n        this.node_already_apply.active = isApply;\r\n        this.node_apply.active = !isApply;\r\n    }\r\n    onClickGuild() {\r\n        UIMgr.ins.show({ viewName: ViewName.AssociationMainPop, data: { \"rankData\": this.guildData } })\r\n    }\r\n}\r\n\r\n\r\n"]}