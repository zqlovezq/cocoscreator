{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/channel/ChannelMgr.ts"],"names":["ChannelManager","Input","KeyCode","input","Bridge","DevChannel","Global","Http","CommonTipsPop","CommonTipsPopCloseType","tab","Func","P8Channel","Waiting","WaitingTag","LangMgr","PREVIEW","JP37Channel","channel","channelType","channelTab","ins","_instance","init","type","getChannelType","console","log","ChannelType","ChannelType_None","ChannelType_PlayTW","ChannelType_G37JP","error","join","getData","ChannelTableByChannelType","getValue","setGloble","basePhpUrl","isRelease","BaseUrl","BaseUrlTest","on","EventType","KEY_DOWN","onKeyDown","event","keyCode","BACKSPACE","create","_type","confirm","exitGame","APP_TYPE","getAppType","platform","getPlatform","APP_VERSION","getAppVersionName","HOT_UPDATE_PATH","HotUpdateUrl","HotUpdateUrlTest","getDefaultLanguage","BaseLanguage","getLanguageList","LanguageList","getDefaultServerId","DefultID","TestSeverID","isDevChannel","isP8","isJp37","getChannel","enterGameStart","login","params","callback","JSON","stringify","obj","getShopInfo","pay","Show","PAY","Hide","getToken","loginToken","getUid","loginUid","isLogin","getSdkLoginData","sdkLoginData","logout","code","isIos","call","isAndroid","checkInt","v","undefined","getAppVersionCode","Number","isSdkInitOk","changeLanguage","initOnLineVersion","IS_REVIEW","ONLINE_VERSION","ONLINE_RES_VERSION","doGet","addr","getBasePhpUrl","reqParam","request","host","method","cb","responseJson","is_review","package_version","version","print","compareVersion","getLab","jumpStore","jumpUrl","IosStoreUrl","AndroidStoreUrl","openURL","url","openActionWebView","isSdk","param","exit","exitApp","intoServer","createRole","roleLevelUp","roleLogoutServer","roleCompleteTutorial","accountUpgrade","accountCenter","initRewardedAd","retData","showRewardedAd","getSdkRechargePrice","p_data","PriceDollar","getRechargeCurrency","getSdkRechargeShowPrice","str","price","currency","getCombineString","postEvent","eventName","Object","comment","share","gameHotfixStart","gameHotfixSuccess","openCustomService","gameServerPage","list","RechargeTable","forEach","id","ProductType","indexOf","push","ChannelMgr"],"mappings":";;;yPAoBMA,c;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AApBkBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,O,OAAAA,O;AAASC,MAAAA,K,OAAAA,K;;AAC/BC,MAAAA,M,iBAAAA,M;;AAGAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,M,iBAAAA,M;;AACFC,MAAAA,I;;AACEC,MAAAA,a,iBAAAA,a;AAAeC,MAAAA,sB,iBAAAA,sB;;AACfC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,S,iBAAAA,S;;AACFC,MAAAA,O;AAAWC,MAAAA,U,kBAAAA,U;;AAGTC,MAAAA,O,kBAAAA,O;;AAEAC,MAAAA,O,UAAAA,O;;AACAC,MAAAA,W,kBAAAA,W;;;;;;;;;AAGHjB,MAAAA,c,GAAN,MAAMA,cAAN,CAAqB;AAAA;AAAA,eASTkB,OATS,GASc,IATd;AAAA,eAUTC,WAVS;AAAA,eAWVC,UAXU;AAAA;;AAEI,mBAAHC,GAAG,GAAG;AACpB,cAAI,QAAQ,KAAKC,SAAjB,EAA4B;AACxB,iBAAKA,SAAL,GAAiB,IAAItB,cAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKsB,SAAZ;AACH;;AAKDC,QAAAA,IAAI,GAAG;AACH;AAAA;AAAA,gCAAOA,IAAP;AACA,cAAIC,IAAI,GAAG,KAAKC,cAAL,EAAX;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,IAA3B;AACA,eAAKL,WAAL,GAAmBK,IAAnB;AACA;AAAA;AAAA,gCAAOL,WAAP,GAAqB,KAAKA,WAA1B;;AACA,kBAAQK,IAAR;AACI,iBAAK;AAAA;AAAA,4BAAII,WAAJ,CAAgBC,gBAArB;AACI,mBAAKX,OAAL,GAAe;AAAA;AAAA,6CAAf;AACA;;AACJ,iBAAK;AAAA;AAAA,4BAAIU,WAAJ,CAAgBE,kBAArB;AACI,mBAAKZ,OAAL,GAAe;AAAA;AAAA,2CAAf;AACA;;AACJ,iBAAK;AAAA;AAAA,4BAAIU,WAAJ,CAAgBG,iBAArB;AACI,mBAAKb,OAAL,GAAe;AAAA;AAAA,+CAAf;AACA;;AACJ;AACIQ,cAAAA,OAAO,CAACM,KAAR,CAAc,CAAC,4BAAD,EAA+BR,IAA/B,EAAqCS,IAArC,CAA0C,GAA1C,CAAd;AACA;AAZR;;AAcA,cAAI,KAAKf,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAaK,IAAb;AACH;;AACD,eAAKH,UAAL,GAAkB;AAAA;AAAA,0BAAIc,OAAJ,GAAcC,yBAAd,CAAwCC,QAAxC,CAAiD,KAAKjB,WAAtD,CAAlB;;AACA,cAAI,KAAKC,UAAL,IAAmB,IAAvB,EAA6B;AACzBM,YAAAA,OAAO,CAACM,KAAR,CAAc,gBAAd,EAAgC,KAAKb,WAArC;AACA;AACH;;AACD,eAAKkB,SAAL;AACA,eAAKnB,OAAL,CAAaoB,UAAb,GAA0B;AAAA;AAAA,gCAAOC,SAAP,GAAmB,KAAKnB,UAAL,CAAgBoB,OAAnC,GAA6C,KAAKpB,UAAL,CAAgBqB,WAAvF;AACAtC,UAAAA,KAAK,CAACuC,EAAN,CAASzC,KAAK,CAAC0C,SAAN,CAAgBC,QAAzB,EAAmC,KAAKC,SAAxC,EAAmD,IAAnD;AACH;;AACDA,QAAAA,SAAS,CAACC,KAAD,EAAsB;AAC3B,cAAIA,KAAK,CAACC,OAAN,KAAkB7C,OAAO,CAAC8C,SAA9B,EAAyC;AACrC;AAAA;AAAA,gDAAcC,MAAd,CAAqB,aAArB,EAAoCC,KAAD,IAAgC;AAC/D,kBAAGA,KAAK,IAAI;AAAA;AAAA,oEAAuBC,OAAnC,EAA2C;AACvC,qBAAKC,QAAL,CAAc,IAAd;AACH;AACJ,aAJD;AAKH;AACJ;;AAEDf,QAAAA,SAAS,GAAG;AACR;AAAA;AAAA,gCAAOgB,QAAP,GAAkB,KAAKC,UAAL,EAAlB;AAEA;AAAA;AAAA,gCAAOC,QAAP,GAAkB;AAAA;AAAA,gCAAOC,WAAP,EAAlB;AACA;AAAA;AAAA,gCAAOC,WAAP,GAAqB,KAAKC,iBAAL,EAArB;AACA;AAAA;AAAA,gCAAOC,eAAP,GAAyB;AAAA;AAAA,gCAAOpB,SAAP,GAAmB,KAAKnB,UAAL,CAAgBwC,YAAnC,GAAkD,KAAKxC,UAAL,CAAgByC,gBAA3F;AACH;AAED;;;AACAC,QAAAA,kBAAkB,GAAW;AACzB,iBAAO,KAAK1C,UAAL,CAAgB2C,YAAvB;AACH;AAED;;;AACAC,QAAAA,eAAe,GAAa;AACxB,iBAAO,KAAK5C,UAAL,CAAgB6C,YAAvB;AACH;AAED;;;AACAC,QAAAA,kBAAkB,GAAG;AACjB,iBAAO;AAAA;AAAA,gCAAO3B,SAAP,GAAmB,KAAKnB,UAAL,CAAgB+C,QAAnC,GAA8C,KAAK/C,UAAL,CAAgBgD,WAArE;AACH;AAGD;AACJ;AACA;AACA;;;AACoB,YAAZC,YAAY,GAAG;AACf,iBAAO,KAAKlD,WAAL,IAAoB;AAAA;AAAA,0BAAIS,WAAJ,CAAgBC,gBAA3C;AACH;;AAEO,YAAJyC,IAAI,GAAE;AACN,iBAAO,KAAKnD,WAAL,IAAoB;AAAA;AAAA,0BAAIS,WAAJ,CAAgBE,kBAA3C;AACH;AAED;;;AACU,YAANyC,MAAM,GAAG;AACT,iBAAO,KAAKpD,WAAL,IAAoB;AAAA;AAAA,0BAAIS,WAAJ,CAAgBG,iBAA3C;AACH;;AAEDyC,QAAAA,UAAU,GAAE;AACR,iBAAO,KAAKtD,OAAZ;AACH;;AAEDuD,QAAAA,cAAc,GAAE,CAEf;;AAGDC,QAAAA,KAAK,CAACC,MAAD,EAAcC,QAAd,EAAkC;AACnC,cAAI,KAAK1D,OAAT,EAAkB;AACdyD,YAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACA,iBAAKzD,OAAL,CAAawD,KAAb,CAAmBG,IAAI,CAACC,SAAL,CAAeH,MAAf,CAAnB,EAA4CI,GAAD,IAAc;AACrD,mBAAKC,WAAL;AACAJ,cAAAA,QAAQ,IAAIA,QAAQ,CAACG,GAAD,CAApB;AACH,aAHD;AAIH;AACJ;;AAEDE,QAAAA,GAAG,CAACN,MAAD,EAAc;AACb,cAAI,KAAKzD,OAAT,EAAkB;AACd;AAAA;AAAA,oCAAQgE,IAAR,CAAa;AAAA;AAAA,0CAAWC,GAAxB,EAA6B,CAA7B;AACAR,YAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACA,iBAAKzD,OAAL,CAAa+D,GAAb,CAAiBJ,IAAI,CAACC,SAAL,CAAeH,MAAf,CAAjB,EAA0CI,GAAD,IAAc;AACnD;AAAA;AAAA,sCAAQK,IAAR,CAAa;AAAA;AAAA,4CAAWD,GAAxB;AACH,aAFD;AAGH;AACJ;;AAEDE,QAAAA,QAAQ,GAAG;AACP,iBAAO,KAAKnE,OAAL,CAAaoE,UAApB;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACL,iBAAO,KAAKrE,OAAL,CAAasE,QAApB;AACH;;AAEDC,QAAAA,OAAO,GAAG;AACN,cAAI,KAAKvE,OAAT,EAAkB;AACd,mBAAO,KAAKA,OAAL,CAAauE,OAAb,EAAP;AACH,WAFD,MAEO;AACH,mBAAO,KAAP;AACH;AACJ;;AAEDC,QAAAA,eAAe,GAAG;AACd,iBAAO,KAAKxE,OAAL,CAAayE,YAApB;AACH;;AAEDC,QAAAA,MAAM,CAACjB,MAAD,EAAcC,QAAd,EAAkC;AACpC,cAAI,KAAK1D,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa0E,MAAb,CAAoBjB,MAApB,EAA4BC,QAA5B;AAEH;AACJ;AAED;AACJ;AACA;;;AACWtB,QAAAA,UAAU,GAAG;AAChB,cAAIuC,IAAI,GAAG;AAAA;AAAA,gCAAOxC,QAAlB;;AACA,cAAI;AAAA;AAAA,gCAAOyC,KAAX,EAAkB;AACdD,YAAAA,IAAI,GAAG;AAAA;AAAA,kCAAOE,IAAP,CAAY,YAAZ,CAAP;AACH,WAFD,MAEO,IAAI;AAAA;AAAA,gCAAOC,SAAX,EAAsB;AACzBH,YAAAA,IAAI,GAAG;AAAA;AAAA,kCAAOE,IAAP,CAAY,YAAZ,EAA0B,KAA1B,CAAP;AACH;;AACD,iBAAO;AAAA;AAAA,4BAAKE,QAAL,CAAcJ,IAAd,CAAP;AACH;AAED;AACJ;AACA;;;AACIpE,QAAAA,cAAc,GAAG;AACb,cAAI;AAAA;AAAA,gCAAOqE,KAAX,EAAkB;AACd,mBAAO;AAAA;AAAA,kCAAOC,IAAP,CAAY,gBAAZ,CAAP;AACH,WAFD,MAEO,IAAI;AAAA;AAAA,gCAAOC,SAAX,EAAsB;AACzB,mBAAO;AAAA;AAAA,kCAAOD,IAAP,CAAY,gBAAZ,EAA8B,KAA9B,CAAP;AACH;;AACD,iBAAO;AAAA;AAAA,0BAAInE,WAAJ,CAAgBC,gBAAvB;AACH;AAED;AACJ;AACA;;;AACW6B,QAAAA,iBAAiB,GAAG;AACvB,cAAImC,IAAJ;;AACA,cAAI;AAAA;AAAA,gCAAOC,KAAX,EAAkB;AACdD,YAAAA,IAAI,GAAG;AAAA;AAAA,kCAAOE,IAAP,CAAY,mBAAZ,CAAP;AACH,WAFD,MAEO,IAAI;AAAA;AAAA,gCAAOC,SAAX,EAAsB;AACzBH,YAAAA,IAAI,GAAG;AAAA;AAAA,kCAAOE,IAAP,CAAY,mBAAZ,EAAiC,sBAAjC,CAAP;AACH;;AAED,cAAIG,CAAC,GAAG;AAAA;AAAA,gCAAOzC,WAAf;;AACA,cAAIoC,IAAI,IAAIM,SAAR,IAAqBN,IAAI,IAAI,EAAjC,EAAqC;AACjCnE,YAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACH,WAFD,MAGK;AACDuE,YAAAA,CAAC,GAAGL,IAAJ;AACH;;AACD,iBAAOK,CAAP;AACH;AACD;AACJ;AACA;;;AACWE,QAAAA,iBAAiB,GAAG;AACvB,cAAIP,IAAJ;;AACA,cAAI;AAAA;AAAA,gCAAOC,KAAX,EAAkB;AACdD,YAAAA,IAAI,GAAG;AAAA;AAAA,kCAAOE,IAAP,CAAY,mBAAZ,CAAP;AACH,WAFD,MAEO,IAAI;AAAA;AAAA,gCAAOC,SAAX,EAAsB;AACzBH,YAAAA,IAAI,GAAG;AAAA;AAAA,kCAAOE,IAAP,CAAY,mBAAZ,EAAiC,sBAAjC,CAAP;AACH;;AAED,cAAIG,CAAC,GAAG,CAAR;;AACA,cAAIL,IAAI,IAAIM,SAAR,IAAqBN,IAAI,IAAI,EAAjC,EAAqC;AACjCnE,YAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACH,WAFD,MAGK;AACDuE,YAAAA,CAAC,GAAGG,MAAM,CAACR,IAAD,CAAV;AACH;;AACD,iBAAOK,CAAP;AACH;AAGD;AACJ;AACA;;;AACWI,QAAAA,WAAW,GAAG;AACjB,cAAI9E,IAAI,GAAG,CAAX;;AACA,cAAI;AAAA;AAAA,gCAAOsE,KAAX,EAAkB;AACdtE,YAAAA,IAAI,GAAG;AAAA;AAAA,kCAAOuE,IAAP,CAAY,cAAZ,CAAP;AACH,WAFD,MAEO,IAAI;AAAA;AAAA,gCAAOC,SAAX,EAAsB;AACzBxE,YAAAA,IAAI,GAAG;AAAA;AAAA,kCAAOuE,IAAP,CAAY,cAAZ,EAA4B,KAA5B,CAAP;AACH;;AACD,iBAAOvE,IAAP;AACH;AAED;AACJ;AACA;AACA;;;AACI+E,QAAAA,cAAc,CAAC5B,MAAD,EAAc;AACxB,cAAI,KAAKzD,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAaqF,cAAb,CAA4B5B,MAA5B;AACH;AACJ;AAED;AACJ;AACA;AACA;;;AACW6B,QAAAA,iBAAiB,CAAC5B,QAAD,EAAqB;AACzC,cAAI5D,OAAJ,EAAa;AACT;AAAA;AAAA,kCAAOyF,SAAP,GAAmB,KAAnB;AACA;AAAA;AAAA,kCAAOC,cAAP,GAAwB,OAAxB;AACA;AAAA;AAAA,kCAAOC,kBAAP,GAA4B,OAA5B;AACA/B,YAAAA,QAAQ,IAAIA,QAAQ,EAApB;AACA;AACH;;AAGD,cAAIgC,KAAK,GAAG,MAAM;AACd,gBAAIC,IAAI,GAAG,KAAK3F,OAAL,CAAa4F,aAAb,KAA+B,iBAA1C;AACA,gBAAIC,QAAQ,GAAI,MAAK,KAAK5F,WAAY,QAAO;AAAA;AAAA,kCAAOsC,WAAY,aAAY;AAAA;AAAA,kCAAOF,QAAS,EAA5F;AAGA;AAAA;AAAA,8BAAKyD,OAAL,CAAa;AACTC,cAAAA,IAAI,EAAEJ,IADG;AAETK,cAAAA,MAAM,EAAE,KAFC;AAGTH,cAAAA,QAAQ,EAAEA,QAHD;AAITI,cAAAA,EAAE,EAAGC,YAAD,IAAkB;AAClB1F,gBAAAA,OAAO,CAACC,GAAR,CAAYyF,YAAZ;;AACA,oBAAIA,YAAJ,EAAkB;AACd;AAAA;AAAA,wCAAOX,SAAP,GAAmBW,YAAY,CAACC,SAAhC;AACA;AAAA;AAAA,wCAAOX,cAAP,GAAwBU,YAAY,CAACE,eAAb,IAAgC,OAAxD;AACA;AAAA;AAAA,wCAAOX,kBAAP,GAA4BS,YAAY,CAACG,OAAb,IAAwB,OAApD;AACA;AAAA;AAAA,wCAAOC,KAAP;;AACA,sBAAI;AAAA;AAAA,oCAAKC,cAAL,CAAoB;AAAA;AAAA,wCAAOhE,WAA3B,EAAwC;AAAA;AAAA,wCAAOiD,cAA/C,IAAiE,CAArE,EAAwE;AAAC;AACrE;AAAA;AAAA,wDAAczD,MAAd,CAAqB;AAAA;AAAA,4CAAQyE,MAAR,CAAe,mBAAf,CAArB,EAA0D,MAAM;AAC5D,2BAAKC,SAAL;AACH,qBAFD;AAGA;AACH;;AACD/C,kBAAAA,QAAQ,IAAIA,QAAQ,EAApB;AACH,iBAZD,MAYO;AACH;AAAA;AAAA,sDAAc3B,MAAd,CAAqB;AAAA;AAAA,0CAAQyE,MAAR,CAAe,mBAAf,CAArB,EAA0D,MAAM;AAC5Dd,oBAAAA,KAAK;AACR,mBAFD;AAGH;AACJ;AAvBQ,aAAb;AAyBH,WA9BD;;AA+BAA,UAAAA,KAAK;AACR;;AAEDe,QAAAA,SAAS,GAAG;AACR,cAAIC,OAAO,GAAG,EAAd;;AACA,cAAI;AAAA;AAAA,gCAAO9B,KAAX,EAAkB;AACd8B,YAAAA,OAAO,GAAG,KAAKxG,UAAL,CAAgByG,WAA1B;AAEH,WAHD,MAGO,IAAI;AAAA;AAAA,gCAAO7B,SAAX,EAAsB;AACzB4B,YAAAA,OAAO,GAAG,KAAKxG,UAAL,CAAgB0G,eAA1B;AACH;;AACD,eAAKC,OAAL,CAAaH,OAAb;AACH;AAGD;AACJ;AACA;AACA;;;AACIG,QAAAA,OAAO,CAACC,GAAD,EAAc;AACjB,cAAI;AAAA;AAAA,gCAAOlC,KAAX,EAAkB;AACd;AAAA;AAAA,kCAAOC,IAAP,CAAY,UAAZ,EAAwB,IAAxB,EAA8BiC,GAA9B;AACH,WAFD,MAGK,IAAI;AAAA;AAAA,gCAAOhC,SAAX,EAAsB;AACvB;AAAA;AAAA,kCAAOD,IAAP,CAAY,SAAZ,EAAuB,uBAAvB,EAAgDiC,GAAhD;AACH,WAFI,MAEA;AACDtG,YAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBqG,GAArB;AACH;AACJ;;AAEDC,QAAAA,iBAAiB,CAACD,GAAD,EAAc;AAC3B,cAAI,KAAK9G,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa+G,iBAAb,CAA+BD,GAA/B;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;;;AACI5E,QAAAA,QAAQ,CAAC8E,KAAc,GAAG,KAAlB,EAAyBC,KAAK,GAAG,IAAjC,EAAuC;AAC3C,cAAID,KAAJ,EAAW;AACP,gBAAI,KAAKhH,OAAT,EAAkB;AACd,mBAAKA,OAAL,CAAakH,IAAb,CAAkBD,KAAlB;AACH;AACJ,WAJD,MAIO;AACH,gBAAI,KAAKjH,OAAT,EAAkB;AACd,mBAAKA,OAAL,CAAamH,OAAb,CAAqBF,KAArB;AACH;AACJ;AACJ;;AAGDG,QAAAA,UAAU,CAAC3D,MAAD,EAAc;AACpB,cAAI,KAAKzD,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAaoH,UAAb,CAAwBzD,IAAI,CAACC,SAAL,CAAeH,MAAf,CAAxB;AACH;AACJ;;AAED4D,QAAAA,UAAU,CAAC5D,MAAD,EAAc;AACpB,cAAI,KAAKzD,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAaqH,UAAb,CAAwB1D,IAAI,CAACC,SAAL,CAAeH,MAAf,CAAxB;AACH;AACJ;;AAED6D,QAAAA,WAAW,CAAC7D,MAAD,EAAc;AACrB,cAAI,KAAKzD,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAasH,WAAb,CAAyB3D,IAAI,CAACC,SAAL,CAAeH,MAAf,CAAzB;AACH;AACJ;;AACD8D,QAAAA,gBAAgB,CAAC9D,MAAD,EAAc;AAC1B,cAAI,KAAKzD,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAauH,gBAAb,CAA8B5D,IAAI,CAACC,SAAL,CAAeH,MAAf,CAA9B;AACH;AACJ;;AACD+D,QAAAA,oBAAoB,CAAC/D,MAAD,EAAc;AAC9B,cAAI,KAAKzD,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAawH,oBAAb,CAAkC7D,IAAI,CAACC,SAAL,CAAeH,MAAf,CAAlC;AACH;AACJ;;AAEDgE,QAAAA,cAAc,GAAS;AACnB,cAAI,KAAKzH,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAayH,cAAb;AACH;AACJ;;AAEDC,QAAAA,aAAa,CAACjE,MAAD,EAAoB;AAC7B,cAAI,KAAKzD,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa0H,aAAb,CAA2B/D,IAAI,CAACC,SAAL,CAAeH,MAAf,CAA3B;AACH;AACJ;;AAEDkE,QAAAA,cAAc,CAAClE,MAAD,EAAcC,QAAd,EAAkC;AAC5C,cAAI,KAAK1D,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa2H,cAAb,CAA4BhE,IAAI,CAACC,SAAL,CAAeH,MAAf,CAA5B,EAAqDmE,OAAD,IAAkB;AAClElE,cAAAA,QAAQ,IAAIA,QAAQ,CAACkE,OAAD,CAApB;AACH,aAFD;AAGH;AACJ;;AAEDC,QAAAA,cAAc,GAAS;AACnB,cAAI,KAAK7H,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa6H,cAAb;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;;;AACIC,QAAAA,mBAAmB,CAACC,MAAD,EAA4B;AAC3C,cAAI,KAAK/H,OAAT,EAAkB;AACd,mBAAO,KAAKA,OAAL,CAAa8H,mBAAb,CAAiCC,MAAjC,CAAP;AACH;;AACD,iBAAOA,MAAM,CAACC,WAAP,GAAqB,GAA5B;AACH;;AACDC,QAAAA,mBAAmB,GAAG;AAClB,cAAI,KAAKjI,OAAT,EAAkB;AACd,mBAAO,KAAKA,OAAL,CAAaiI,mBAAb,EAAP;AACH;;AACD,iBAAO,EAAP;AACH;;AAEDC,QAAAA,uBAAuB,CAACH,MAAD,EAA4B;AAC/C,cAAG,KAAK1E,MAAR,EAAe;AACX,gBAAI8E,GAAG,GAAG,KAAKnI,OAAL,CAAakI,uBAAb,CAAqCH,MAArC,CAAV;;AACA,gBAAII,GAAG,IAAI,IAAP,IAAeA,GAAG,IAAI,EAA1B,EAA6B;AACzB,qBAAOA,GAAP;AACH;AACJ;;AACD,cAAIC,KAAK,GAAG,KAAKN,mBAAL,CAAyBC,MAAzB,CAAZ;AACA,cAAIM,QAAQ,GAAG,KAAKJ,mBAAL,EAAf;AACA,iBAAO;AAAA;AAAA,kCAAQK,gBAAR,CAAyBD,QAAzB,EAAmC,CAACD,KAAD,CAAnC,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIG,QAAAA,SAAS,CAACC,SAAD,EAA6B/E,MAAW,GAAG,IAA3C,EAAiD;AACtDjD,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAY+H,SAAxB,EAAmC,aAAnC,EAAkD/E,MAAlD;AACA,cAAII,GAAW,GAAG,IAAI4E,MAAJ,EAAlB;AACA5E,UAAAA,GAAG,CAAC,WAAD,CAAH,GAAmB2E,SAAnB;;AACA,cAAI/E,MAAJ,EAAY;AACRI,YAAAA,GAAG,CAAC,MAAD,CAAH,GAAcJ,MAAd;AACH;;AACD,cAAI,KAAKzD,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAauI,SAAb,CAAuB1E,GAAvB;AACH;AACJ;;AACD6E,QAAAA,OAAO,CAACjF,MAAD,EAAcC,QAAd,EAAwC;AAC3C,cAAI,KAAK1D,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa0I,OAAb,CAAqBjF,MAArB,EAA6BC,QAA7B;AACH;AACJ;;AACDiF,QAAAA,KAAK,CAAClF,MAAD,EAAcC,QAAd,EAAwC;AACzC,cAAI,KAAK1D,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa2I,KAAb,CAAmBlF,MAAnB,EAA2BC,QAA3B;AACH;AACJ;;AAEDkF,QAAAA,eAAe,GAAE;AACb,cAAI,KAAK5I,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa4I,eAAb;AACH;AACJ;;AACDC,QAAAA,iBAAiB,GAAE;AACf,cAAI,KAAK7I,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa6I,iBAAb;AACH;AACJ;;AACDC,QAAAA,iBAAiB,GAAE;AACf,cAAI,KAAK9I,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa8I,iBAAb;AACH;AACJ;;AACDC,QAAAA,cAAc,GAAE;AACZ,cAAI,KAAK/I,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAa+I,cAAb;AACH;AACJ;;AAEDjF,QAAAA,WAAW,GAAE;AACT,cAAI,KAAK9D,OAAT,EAAkB;AACd,gBAAIgJ,IAAI,GAAG,EAAX;AACA;AAAA;AAAA,4BAAIhI,OAAJ,GAAciI,aAAd,CAA4BC,OAA5B,CAAqClE,CAAD,IAAO;AACvC,kBAAImE,EAAE,GAAGnE,CAAC,CAAC,KAAK9E,UAAL,CAAgBkJ,WAAjB,CAAV;;AACA,kBAAID,EAAE,IAAIA,EAAE,IAAI,EAAhB,EAAmB;AACf,oBAAIH,IAAI,CAACK,OAAL,CAAaF,EAAb,KAAoB,CAAC,CAAzB,EAA2B;AACvBH,kBAAAA,IAAI,CAACM,IAAL,CAAUH,EAAV;AACH;AACJ;AACJ,aAPD;AAQA,iBAAKnJ,OAAL,CAAa8D,WAAb,CAAyBH,IAAI,CAACC,SAAL,CAAeoF,IAAf,CAAzB;AACH;AACJ;;AApegB,O;AAAflK,MAAAA,c,CACasB,S;;4BAweNmJ,U,GAAazK,cAAc,CAACqB,G","sourcesContent":["import { EventKeyboard, Input, KeyCode, input, sys } from \"cc\";\nimport { Bridge } from \"../framework/Bridge\";\nimport { TypeLanguage } from \"../logic/define/TypeLanguage\";\nimport { BaseChannel } from \"./BaseChannel\";\nimport { DevChannel } from \"./dev/DevChannel\";\nimport { Global } from \"../Global\";\nimport Http from \"../logic/net/Http\";\nimport { CommonTipsPop, CommonTipsPopCloseType } from \"../logic/model/common/CommonTipsPop\";\nimport { tab } from \"../Table/table_gen\";\nimport { Func } from \"../logic/utils/Func\";\nimport { P8Channel } from \"./p8/P8Channel\";\nimport Waiting, { WaitingTag } from \"../Common/script/Waiting\";\nimport { LoginData } from \"../logic/model/login/LoginData\";\nimport { RoleData } from \"../logic/model/role/RoleData\";\nimport { LangMgr } from \"../logic/mgr/LangMgr\";\nimport { P8PostEventName } from \"./ChannelDefine\";\nimport { PREVIEW } from \"cc/env\";\nimport { JP37Channel } from \"./jp37/JP37Channel\";\n\n\nclass ChannelManager {\n    private static _instance: ChannelManager;\n    public static get ins() {\n        if (null == this._instance) {\n            this._instance = new ChannelManager();\n        }\n        return this._instance;\n    }\n\n    private channel: BaseChannel = null;\n    private channelType: tab.ChannelType;\n    public channelTab: tab.ChannelTable\n    init() {\n        Bridge.init()\n        let type = this.getChannelType();\n        console.log(\"channelType\", type)\n        this.channelType = type;\n        Global.channelType = this.channelType\n        switch (type) {\n            case tab.ChannelType.ChannelType_None:\n                this.channel = new DevChannel();\n                break;\n            case tab.ChannelType.ChannelType_PlayTW:\n                this.channel = new P8Channel();\n                break\n            case tab.ChannelType.ChannelType_G37JP:\n                this.channel = new JP37Channel()\n                break\n            default:\n                console.error([\"########## 未定义的channelType\", type].join(' '));\n                break;\n        }\n        if (this.channel) {\n            this.channel.init();\n        }\n        this.channelTab = tab.getData().ChannelTableByChannelType.getValue(this.channelType)\n        if (this.channelTab == null) {\n            console.error(\"未找到渠道配置-------\", this.channelType)\n            return\n        }\n        this.setGloble()\n        this.channel.basePhpUrl = Global.isRelease ? this.channelTab.BaseUrl : this.channelTab.BaseUrlTest\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n    }\n    onKeyDown(event: EventKeyboard){\n        if (event.keyCode === KeyCode.BACKSPACE) {\n            CommonTipsPop.create(\"Tips_exit_1\",(_type:CommonTipsPopCloseType)=>{\n                if(_type == CommonTipsPopCloseType.confirm){\n                    this.exitGame(true)\n                }\n            })\n        }\n    }\n\n    setGloble() {\n        Global.APP_TYPE = this.getAppType()\n\n        Global.platform = Bridge.getPlatform()\n        Global.APP_VERSION = this.getAppVersionName()\n        Global.HOT_UPDATE_PATH = Global.isRelease ? this.channelTab.HotUpdateUrl : this.channelTab.HotUpdateUrlTest\n    }\n\n    /** 返回默认语言 */\n    getDefaultLanguage(): number {\n        return this.channelTab.BaseLanguage\n    }\n\n    /** 返回语言列表 */\n    getLanguageList(): number[] {\n        return this.channelTab.LanguageList\n    }\n\n    /** 获取默认服务器id */\n    getDefaultServerId() {\n        return Global.isRelease ? this.channelTab.DefultID : this.channelTab.TestSeverID\n    }\n\n\n    /**\n     * 是否开发模式\n     * @returns \n     */\n    get isDevChannel() {\n        return this.channelType == tab.ChannelType.ChannelType_None;\n    }\n\n    get isP8(){\n        return this.channelType == tab.ChannelType.ChannelType_PlayTW;\n    }\n\n    /** 是否为日本37 */\n    get isJp37() {\n        return this.channelType == tab.ChannelType.ChannelType_G37JP;\n    }\n\n    getChannel(){\n        return this.channel\n    }\n\n    enterGameStart(){\n        \n    }\n\n\n    login(params: any, callback: Function) {\n        if (this.channel) {\n            params = params || \"\"\n            this.channel.login(JSON.stringify(params), (obj: any) => {\n                this.getShopInfo()\n                callback && callback(obj)\n            });\n        }\n    }\n\n    pay(params: any) {\n        if (this.channel) {\n            Waiting.Show(WaitingTag.PAY, 0)\n            params = params || \"\"\n            this.channel.pay(JSON.stringify(params), (obj: any) => {\n                Waiting.Hide(WaitingTag.PAY)\n            });\n        }\n    }\n\n    getToken() {\n        return this.channel.loginToken\n    }\n\n    getUid() {\n        return this.channel.loginUid\n    }\n\n    isLogin() {\n        if (this.channel) {\n            return this.channel.isLogin();\n        } else {\n            return false;\n        }\n    }\n\n    getSdkLoginData() {\n        return this.channel.sdkLoginData\n    }\n\n    logout(params: any, callback: Function) {\n        if (this.channel) {\n            this.channel.logout(params, callback);\n\n        }\n    }\n\n    /**\n    * 获得包类型， 0测试、1正式\n    */\n    public getAppType() {\n        let code = Global.APP_TYPE\n        if (Bridge.isIos) {\n            code = Bridge.call(\"getAppType\");\n        } else if (Bridge.isAndroid) {\n            code = Bridge.call(\"getAppType\", \"()I\");\n        }\n        return Func.checkInt(code)\n    }\n\n    /**\n    * 获取渠道类型\n    */\n    getChannelType() {\n        if (Bridge.isIos) {\n            return Bridge.call(\"getChannelType\");\n        } else if (Bridge.isAndroid) {\n            return Bridge.call(\"getChannelType\", \"()I\");\n        }\n        return tab.ChannelType.ChannelType_None;\n    }\n\n    /**\n    * 获得app版本号  1.0.0\n    */\n    public getAppVersionName() {\n        let code\n        if (Bridge.isIos) {\n            code = Bridge.call(\"getAppVersionName\");\n        } else if (Bridge.isAndroid) {\n            code = Bridge.call(\"getAppVersionName\", \"()Ljava/lang/String;\");\n        }\n\n        let v = Global.APP_VERSION;\n        if (code == undefined || code == \"\") {\n            console.log('getJsbVersionName ret = undefined');\n        }\n        else {\n            v = code;\n        }\n        return v;\n    }\n    /**\n   * 获得app版本号  1\n   */\n    public getAppVersionCode() {\n        let code\n        if (Bridge.isIos) {\n            code = Bridge.call(\"getAppVersionCode\");\n        } else if (Bridge.isAndroid) {\n            code = Bridge.call(\"getAppVersionCode\", \"()Ljava/lang/String;\");\n        }\n\n        let v = 1;\n        if (code == undefined || code == \"\") {\n            console.log('getJsbVersionCode ret = undefined');\n        }\n        else {\n            v = Number(code);\n        }\n        return v;\n    }\n\n\n    /**\n     * 是否sdk初始化成功\n     */\n    public isSdkInitOk() {\n        let type = 0\n        if (Bridge.isIos) {\n            type = Bridge.call(\"getInitSdkOk\");\n        } else if (Bridge.isAndroid) {\n            type = Bridge.call(\"getInitSdkOk\", \"()I\");\n        }\n        return type;\n    }\n\n    /**\n     * 切换语言\n     * @param params \n     */\n    changeLanguage(params: any) {\n        if (this.channel) {\n            this.channel.changeLanguage(params);\n        }\n    }\n\n    /**\n    * 获得线上远程版本配置并初始化游戏设置\n    * @param callback 完成回调函数\n    */\n    public initOnLineVersion(callback: Function) {\n        if (PREVIEW) {\n            Global.IS_REVIEW = false\n            Global.ONLINE_VERSION = \"1.0.0\"\n            Global.ONLINE_RES_VERSION = \"1.0.0\"\n            callback && callback()\n            return\n        }\n\n\n        let doGet = () => {\n            let addr = this.channel.getBasePhpUrl() + \"check-is-review\"\n            let reqParam = `ch=${this.channelType}&ver=${Global.APP_VERSION}&platform=${Global.platform}`\n\n\n            Http.request({\n                host: addr,\n                method: \"GET\",\n                reqParam: reqParam,\n                cb: (responseJson) => {\n                    console.log(responseJson)\n                    if (responseJson) {\n                        Global.IS_REVIEW = responseJson.is_review\n                        Global.ONLINE_VERSION = responseJson.package_version || \"1.0.0\"\n                        Global.ONLINE_RES_VERSION = responseJson.version || \"1.0.0\"\n                        Global.print()\n                        if (Func.compareVersion(Global.APP_VERSION, Global.ONLINE_VERSION) < 0) {//线上版本大于本地版本， 需要更新，跳转商店\n                            CommonTipsPop.create(LangMgr.getLab(\"Tips_connection_2\"), () => {\n                                this.jumpStore()\n                            })\n                            return\n                        }\n                        callback && callback()\n                    } else {\n                        CommonTipsPop.create(LangMgr.getLab(\"Tips_connection_1\"), () => {\n                            doGet()\n                        })\n                    }\n                }\n            })\n        }\n        doGet()\n    }\n\n    jumpStore() {\n        let jumpUrl = \"\"\n        if (Bridge.isIos) {\n            jumpUrl = this.channelTab.IosStoreUrl;\n\n        } else if (Bridge.isAndroid) {\n            jumpUrl = this.channelTab.AndroidStoreUrl;\n        }\n        this.openURL(jumpUrl);\n    }\n\n\n    /**\n     * 跳转到浏览器\n     * @param url 地址\n     */\n    openURL(url: string) {\n        if (Bridge.isIos) {\n            Bridge.call(\"openURL:\", null, url);\n        }\n        else if (Bridge.isAndroid) {\n            Bridge.call(\"openURL\", \"(Ljava/lang/String;)V\", url);\n        }else{\n            console.log(\"pc打开链接\",url)\n        }\n    }\n\n    openActionWebView(url: string) {\n        if (this.channel) {\n            this.channel.openActionWebView(url);\n        }\n    }\n\n    /**\n     * \n     * @param isSdk 是否调用sdk接口\n     * @param param sdk传参 {title:标题,message:内容,btnOkTxt:确认按钮文本,btnCancelTxt:取消按钮文本}\n     */\n    exitGame(isSdk: boolean = false, param = null) {\n        if (isSdk) {\n            if (this.channel) {\n                this.channel.exit(param);\n            }\n        } else {\n            if (this.channel) {\n                this.channel.exitApp(param);\n            }\n        }\n    }\n\n\n    intoServer(params: any) {\n        if (this.channel) {\n            this.channel.intoServer(JSON.stringify(params));\n        }\n    }\n\n    createRole(params: any) {\n        if (this.channel) {\n            this.channel.createRole(JSON.stringify(params));\n        }\n    }\n\n    roleLevelUp(params: any) {\n        if (this.channel) {\n            this.channel.roleLevelUp(JSON.stringify(params));\n        }\n    }\n    roleLogoutServer(params: any) {\n        if (this.channel) {\n            this.channel.roleLogoutServer(JSON.stringify(params));\n        }\n    }\n    roleCompleteTutorial(params: any) {\n        if (this.channel) {\n            this.channel.roleCompleteTutorial(JSON.stringify(params));\n        }\n    }\n\n    accountUpgrade(): void {\n        if (this.channel) {\n            this.channel.accountUpgrade();\n        }\n    }\n\n    accountCenter(params: any): void {\n        if (this.channel) {\n            this.channel.accountCenter(JSON.stringify(params));\n        }\n    }\n\n    initRewardedAd(params: any, callback: Function) {\n        if (this.channel) {\n            this.channel.initRewardedAd(JSON.stringify(params), (retData: any) => {\n                callback && callback(retData)\n            });\n        }\n    }\n\n    showRewardedAd(): void {\n        if (this.channel) {\n            this.channel.showRewardedAd();\n        }\n    }\n\n    /**\n     * 返回sdk计费点价格，比如港澳台版本需要转成美元\n     * @param p_data \n     * @returns \n     */\n    getSdkRechargePrice(p_data: tab.RechargeTable) {\n        if (this.channel) {\n            return this.channel.getSdkRechargePrice(p_data);\n        }\n        return p_data.PriceDollar / 100;\n    }\n    getRechargeCurrency() {\n        if (this.channel) {\n            return this.channel.getRechargeCurrency();\n        }\n        return \"\"\n    }\n\n    getSdkRechargeShowPrice(p_data: tab.RechargeTable) {\n        if(this.isJp37){\n            let str = this.channel.getSdkRechargeShowPrice(p_data)\n            if (str != null && str != \"\"){\n                return str\n            }\n        }\n        let price = this.getSdkRechargePrice(p_data);\n        let currency = this.getRechargeCurrency();\n        return LangMgr.getCombineString(currency, [price])\n    }\n    /**\n     * 平台事件打点\n     * @param eventName \n     * @param params \n     */\n    postEvent(eventName: P8PostEventName, params: any = null) {\n        console.log(\"数据埋点===\" + eventName, \"===params==\", params)\n        let obj: Object = new Object();\n        obj[\"eventName\"] = eventName;\n        if (params) {\n            obj[\"data\"] = params;\n        }\n        if (this.channel) {\n            this.channel.postEvent(obj)\n        }\n    }\n    comment(params: any, callback: Function): void {\n        if (this.channel) {\n            this.channel.comment(params, callback);\n        }\n    }\n    share(params: any, callback: Function): void {\n        if (this.channel) {\n            this.channel.share(params, callback);\n        }\n    }\n\n    gameHotfixStart(){\n        if (this.channel) {\n            this.channel.gameHotfixStart();\n        }\n    }\n    gameHotfixSuccess(){\n        if (this.channel) {\n            this.channel.gameHotfixSuccess();\n        }\n    }\n    openCustomService(){\n        if (this.channel) {\n            this.channel.openCustomService();\n        }\n    }\n    gameServerPage(){\n        if (this.channel) {\n            this.channel.gameServerPage();\n        }\n    }\n\n    getShopInfo(){\n        if (this.channel) {\n            let list = []\n            tab.getData().RechargeTable.forEach((v) => {\n                let id = v[this.channelTab.ProductType]\n                if (id && id != \"\"){\n                    if (list.indexOf(id) == -1){\n                        list.push(id)\n                    }\n                }\n            })\n            this.channel.getShopInfo(JSON.stringify(list));\n        }\n    }\n\n    \n}\n\nexport const ChannelMgr = ChannelManager.ins"]}