{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/Common/component/RedComp.ts"],"names":["Component","Node","Vec2","_decorator","RedMgr","RedEventComp","ccclass","property","RedComp","type","displayName","tooltip","onLoad","addRed","onDestroy","removeRed","remove","node","index","types","length","element","redNode","add","event","child","child1","transform","offset","posOffset","console","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAcC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;;AAC/BC,MAAAA,M,iBAAAA,M;;AACFC,MAAAA,Y;;;;;;;;;OAED;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;AAE9B;AACA;AACA;;yBAEqBK,O,WAChBD,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAER,IAAR;AAAcS,QAAAA,WAAW,EAAE,MAA3B;AAAmCC,QAAAA,OAAO,EAAE;AAA5C,OAAD,C,UAERJ,QAAQ,CAAC;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAD,C,UAERJ,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAE;AAAA;AAAA;AADA,OAAD,C,EANZH,O,qBAAD,MACqBE,OADrB,SACqCR,SADrC,CAC+C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAUjCY,QAAAA,MAAM,GAAS;AACrB,eAAKC,MAAL;AACH;;AAESC,QAAAA,SAAS,GAAS;AACxB,eAAKC,SAAL;AACH;;AAEDA,QAAAA,SAAS,GAAG;AACR;AAAA;AAAA,gCAAOC,MAAP,CAAc,KAAKC,IAAnB;AACH;;AAEDJ,QAAAA,MAAM,GAAG;AACL,eAAKE,SAAL;;AACA,eAAK,IAAIG,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAKC,KAAL,CAAWC,MAAvC,EAA+CF,KAAK,EAApD,EAAwD;AACpD,kBAAMG,OAAO,GAAG,KAAKF,KAAL,CAAWD,KAAX,CAAhB;;AACA,gBAAI,KAAKI,OAAT,EAAkB;AACd;AAAA;AAAA,oCAAOC,GAAP,CAAW;AAAEN,gBAAAA,IAAI,EAAE,KAAKA,IAAb;AAAmBO,gBAAAA,KAAK,EAAEH,OAAO,CAACG,KAAlC;AAAyCC,gBAAAA,KAAK,EAAEJ,OAAO,CAACI,KAAxD;AAA+DC,gBAAAA,MAAM,EAAEL,OAAO,CAACK,MAA/E;AAAuFC,gBAAAA,SAAS,EAAE;AAAEL,kBAAAA,OAAO,EAAE,KAAKA,OAAhB;AAAyBM,kBAAAA,MAAM,EAAE,KAAKC;AAAtC;AAAlG,eAAX;AACH,aAFD,MAEO;AACHC,cAAAA,OAAO,CAACC,KAAR,CAAc,UAAd,EAA0BV,OAAO,CAACG,KAAlC,EAAyC,KAAKP,IAA9C;AACH;AACJ;AACJ;;AAhC0C,O;;;;;iBAE3B,I;;;;;;;iBAEE,IAAIf,IAAJ,E;;;;;;;iBAIM,E","sourcesContent":["import { Component, Node, Sprite, Vec2, _decorator } from \"cc\";\nimport { RedMgr } from \"../../logic/mgr/RedMgr\";\nimport RedEventComp from \"./RedEventComp\";\n\nconst { ccclass, property } = _decorator;\n\n/**\n * 红点组件\n */\n@ccclass\nexport default class RedComp extends Component {\n    @property({ type: Node, displayName: \"红点节点\", tooltip: \"可不填，空值默认创建\" })\n    redNode: Node = null\n    @property({ tooltip: \"位置偏移，统一为右上角标准做偏移\" })\n    posOffset: Vec2 = new Vec2()\n    @property({\n        type: [RedEventComp]\n    })\n    types: RedEventComp[] = [];\n\n    protected onLoad(): void {\n        this.addRed()\n    }\n\n    protected onDestroy(): void {\n        this.removeRed()\n    }\n\n    removeRed() {\n        RedMgr.remove(this.node)\n    }\n\n    addRed() {\n        this.removeRed()\n        for (let index = 0; index < this.types.length; index++) {\n            const element = this.types[index];\n            if (this.redNode) {\n                RedMgr.add({ node: this.node, event: element.event, child: element.child, child1: element.child1, transform: { redNode: this.redNode, offset: this.posOffset } })\n            } else {\n                console.error(\"红点注册节点为空\", element.event, this.node)\n            }\n        }\n    }\n}\n\n"]}