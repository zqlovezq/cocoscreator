{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/chat/ChatAssociationItem.ts"],"names":["_decorator","RichText","UITransform","InfiniteCell","Func","tab","UIMgr","AssociationData","ccclass","property","ChatAssociationItem","_data","UpdateContent","data","getStrZhWidth","normal","chatLayout","width","richText","string","clientCustomNotice","content","onClickBtn","ins","getBargainGift","chatBreviaryTable","getData","ChatBreviaryTableByType","getValue","noticeType","JumpUI","jumpLayer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA4CC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,W,OAAAA,W;;AACxDC,MAAAA,Y;;AAEEC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,e,iBAAAA,e;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;qCAGjBU,mB,WADZF,OAAO,CAAC,qBAAD,C,UAEHC,QAAQ,CAACP,WAAD,C,UAERO,QAAQ,CAACR,QAAD,C,2BAJb,MACaS,mBADb;AAAA;AAAA,wCACsD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAK1CC,KAL0C,GAKjB,IALiB;AAAA;;AAMlDC,QAAAA,aAAa,CAACC,IAAD,EAA8B;AACvC;AACA,eAAKF,KAAL,GAAaE,IAAb;;AACA,cAAI,CAACA,IAAI,CAAC,UAAD,CAAT,EAAuB;AACnBA,YAAAA,IAAI,CAAC,UAAD,CAAJ,GAAmB;AAAA;AAAA,8BAAKC,aAAL,CAAmBD,IAAI,CAACE,MAAxB,IAAkC,EAAlC,GAAuC,EAA1D;AACH;;AACD,cAAIF,IAAI,CAAC,UAAD,CAAJ,GAAmB,GAAvB,EAA4B;AACxB,iBAAKG,UAAL,CAAgBC,KAAhB,GAAwBJ,IAAI,CAAC,UAAD,CAA5B;AACH,WAFD,MAEO;AACH,iBAAKG,UAAL,CAAgBC,KAAhB,GAAwB,GAAxB;AACH;;AACD,eAAKC,QAAL,CAAcC,MAAd,GAAuBN,IAAI,CAACO,kBAAL,CAAwBC,OAA/C;AAEH;;AACDC,QAAAA,UAAU,GAAG;AACT,cAAI;AAAA;AAAA,kDAAgBC,GAAhB,CAAoBC,cAApB,MAAwC,KAAKb,KAAL,CAAWS,kBAAvD,EAA2E;AACvE,kBAAMK,iBAAiB,GAAG;AAAA;AAAA,4BAAIC,OAAJ,GAAcC,uBAAd,CAAsCC,QAAtC,CAA+C,KAAKjB,KAAL,CAAWS,kBAAX,CAA8BS,UAA7E,CAA1B;AACA,kBAAMC,MAAM,GAAGL,iBAAiB,CAACK,MAAjC;AACA;AAAA;AAAA,gCAAMP,GAAN,CAAUQ,SAAV,CAAoBD,MAApB;AACH;AACJ;;AA1BiD,O;;;;;iBAExB,I;;;;;;;iBAEL,I","sourcesContent":["import { _decorator, Component, Node, NodeEventType, RichText, UITransform } from 'cc';\r\nimport InfiniteCell from '../../../Common/InfiniteList/InfiniteCell';\r\nimport { ChatMessageInfo } from './ChatMessageInfo';\r\nimport { Func } from '../../utils/Func';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { AssociationData } from '../association/AssociationData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ChatAssociationItem')\r\nexport class ChatAssociationItem extends InfiniteCell {\r\n    @property(UITransform)\r\n    chatLayout: UITransform = null;\r\n    @property(RichText)\r\n    richText: RichText = null;\r\n    private _data: ChatMessageInfo = null;\r\n    UpdateContent(data: ChatMessageInfo): void {\r\n        // this.node.on(NodeEventType.TOUCH_START, this.onClickBtn, this);\r\n        this._data = data;\r\n        if (!data[\"ZH_width\"]) {\r\n            data[\"ZH_width\"] = Func.getStrZhWidth(data.normal) * 24 + 30;\r\n        }\r\n        if (data[\"ZH_width\"] < 480) {\r\n            this.chatLayout.width = data[\"ZH_width\"];\r\n        } else {\r\n            this.chatLayout.width = 480;\r\n        }\r\n        this.richText.string = data.clientCustomNotice.content;\r\n\r\n    }\r\n    onClickBtn() {\r\n        if (AssociationData.ins.getBargainGift() && this._data.clientCustomNotice) {\r\n            const chatBreviaryTable = tab.getData().ChatBreviaryTableByType.getValue(this._data.clientCustomNotice.noticeType);\r\n            const JumpUI = chatBreviaryTable.JumpUI;\r\n            UIMgr.ins.jumpLayer(JumpUI);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}