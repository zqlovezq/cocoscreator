{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/task/TaskCaseItem.ts"],"names":["_decorator","Label","Node","ProgressBar","ComponentBase","LangMgr","tab","CommonItem","ItemPoolMgr","ItemInfo","TaskControl","UIMgr","ViewName","ccclass","property","TaskCaseItem","taskInfo","comItem","register","initData","info","initView","describeLab","string","getLab","taskTable","Describe","total","FinishParam1","currNum","progress","proBar","proLab","isReceived","gotNode","active","notReachNode","reachBtnNode","gotoBtnNode","isCanReceived","JumpUI","item","initItemData","RewardItemIds","RewardItemNum","node","ins","createItem","itemNode","getComponent","onClickGotoBtn","tabId","deepArgs","JumpParam","length","moduleTab","getData","ModuleTableByModuleType","getValue","jumpLayer","TaskType","TaskType_GuildDailyTask","hideView","AssociationTaskPop","TaskView","OpenFunctionId","onClickRaechBtn","TaskType_DailyTask","requestReceiveDailyTaskReward","id","TaskType_WeeklyTask","requestReceiveWeeklyTaskReward","TaskType_AchievementTask","requestReceiveAchievementTaskReward","requestReceiveGuildDailyTaskReward"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, ProgressBar } from 'cc';\r\nimport { ComponentBase } from '../../../framework/base/ComponentBase';\r\nimport { TaskInfo } from './TaskInfo';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { CommonItem } from '../item/CommonItem';\r\nimport { ItemPoolMgr } from '../item/ItemPoolMgr';\r\nimport { ItemInfo } from '../item/ItemInfo';\r\nimport { TaskData } from './TaskData';\r\nimport { TaskControl } from './TaskControl';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * TaskCaseItem\r\n * zhudingchao\r\n * Tue Jun 04 2024 15:02:32 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/task/TaskCaseItem.ts\r\n *\r\n */\r\n\r\n@ccclass('TaskCaseItem')\r\nexport class TaskCaseItem extends ComponentBase {\r\n    @property(Node)\r\n    reachBtnNode:Node=null;\r\n    @property(Node)\r\n    gotoBtnNode:Node=null;\r\n    @property(Label)\r\n    describeLab:Label=null;\r\n    @property(Node)\r\n    itemNode:Node=null;\r\n    @property(ProgressBar)\r\n    proBar:ProgressBar=null;\r\n    @property(Label)\r\n    proLab:Label=null;\r\n    @property(Node)\r\n    notReachNode:Node=null;\r\n    @property(Node)\r\n    gotNode:Node=null;\r\n    private taskInfo:TaskInfo;\r\n    private comItem:CommonItem;\r\n\r\n    register(){\r\n\r\n    }\r\n    initData(info:TaskInfo){\r\n        this.taskInfo=info;\r\n        this.initView();\r\n       \r\n    }\r\n    initView(){\r\n        this.describeLab.string=LangMgr.getLab(this.taskInfo.taskTable.Describe);\r\n        let total=this.taskInfo.taskTable.FinishParam1;\r\n        let currNum=this.taskInfo.progress>total?total:this.taskInfo.progress;\r\n        this.proBar.progress=currNum/total;\r\n        this.proLab.string=currNum+\"/\"+total;\r\n        if(this.taskInfo.isReceived){\r\n            this.gotNode.active=true;\r\n            this.notReachNode.active=false;\r\n            this.reachBtnNode.active=false;\r\n            this.gotoBtnNode.active=false;\r\n        }else if(this.taskInfo.isCanReceived){\r\n            this.gotNode.active=false;\r\n            this.notReachNode.active=false;\r\n            this.reachBtnNode.active=true;\r\n            this.gotoBtnNode.active=false;\r\n        }else{\r\n            this.gotNode.active=false;\r\n            this.reachBtnNode.active=false;\r\n            if(this.taskInfo.taskTable.JumpUI){\r\n                this.gotoBtnNode.active=true;\r\n                this.notReachNode.active=false;\r\n            }else{\r\n                this.gotoBtnNode.active=false;\r\n                this.notReachNode.active=true;\r\n            }\r\n        }\r\n        let item=new ItemInfo();\r\n        item.initItemData(this.taskInfo.taskTable.RewardItemIds[0],this.taskInfo.taskTable.RewardItemNum[0])\r\n        if(!this.comItem){\r\n            let node=ItemPoolMgr.ins.createItem(item,this.itemNode);\r\n            this.comItem=node.getComponent(CommonItem);\r\n        }else{\r\n            this.comItem.initData(item);\r\n        }\r\n\r\n    }\r\n    onClickGotoBtn(){\r\n        if(this.taskInfo.taskTable.JumpUI){\r\n            let tabId = 0;\r\n            let deepArgs = [];\r\n            if(this.taskInfo.taskTable.JumpParam.length===1){\r\n                tabId = this.taskInfo.taskTable.JumpParam[0];\r\n            }else{\r\n                deepArgs = this.taskInfo.taskTable.JumpParam;\r\n            }\r\n            const moduleTab = tab.getData().ModuleTableByModuleType.getValue(this.taskInfo.taskTable.JumpUI)\r\n            UIMgr.ins.jumpLayer(this.taskInfo.taskTable.JumpUI,tabId,(()=>{\r\n                if(this.taskInfo.taskTable.TaskType==tab.TaskType.TaskType_GuildDailyTask){\r\n                    UIMgr.ins.hideView(ViewName.AssociationTaskPop);\r\n                    // UIMgr.ins.hideView(ViewName.AssociationView);\r\n                }else{\r\n                    UIMgr.ins.hideView(ViewName.TaskView);\r\n                }\r\n            }),moduleTab.OpenFunctionId[0],deepArgs);\r\n        }\r\n      \r\n    }\r\n    onClickRaechBtn(){\r\n        if(this.taskInfo.isCanReceived){\r\n            if(this.taskInfo.taskTable.TaskType==tab.TaskType.TaskType_DailyTask){\r\n                TaskControl.ins.requestReceiveDailyTaskReward([this.taskInfo.id]);\r\n            }else if(this.taskInfo.taskTable.TaskType==tab.TaskType.TaskType_WeeklyTask){\r\n                TaskControl.ins.requestReceiveWeeklyTaskReward([this.taskInfo.id]);\r\n            }else if(this.taskInfo.taskTable.TaskType==tab.TaskType.TaskType_AchievementTask){\r\n                TaskControl.ins.requestReceiveAchievementTaskReward([this.taskInfo.id]);\r\n            }else if(this.taskInfo.taskTable.TaskType==tab.TaskType.TaskType_GuildDailyTask){\r\n                TaskControl.ins.requestReceiveGuildDailyTaskReward([this.taskInfo.id]);\r\n            }   \r\n        }\r\n\r\n    }\r\n\r\n}"]}