{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/utils/TimeUtil.ts"],"names":["_decorator","LangMgr","ccclass","property","TimeUtil","timestampToTime","second","date","Date","Y","getFullYear","M","getMonth","D","getDate","h","getHours","m","getMinutes","s","getSeconds","getLeftDay","d","leftTime","getTime","t_days","Math","floor","formaterLeftWithOutSecond","formaterWithOutSecond","ret","t_hours","t_minutes","t_seconds","getLab","formaterWithOutSecond2","formaterWithOutSecond3"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBH,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;0BAGaI,Q,WADZF,OAAO,CAAC,WAAD,C,gBAAR,MACaE,QADb,CACsB;AAClB;AACJ;AACA;AACA;AACA;AAC0B,eAAfC,eAAe,CAACC,MAAD,EAAiB;AACnC,cAAIC,IAAI,GAAG,IAAIC,IAAJ,CAASF,MAAM,GAAG,IAAlB,CAAX,CADmC,CACA;;AACnC,cAAIG,CAAC,GAAGF,IAAI,CAACG,WAAL,KAAqB,GAA7B;AACA,cAAIC,CAAC,GAAG,CAACJ,IAAI,CAACK,QAAL,KAAkB,CAAlB,GAAsB,EAAtB,GAA2B,OAAOL,IAAI,CAACK,QAAL,KAAkB,CAAzB,CAA3B,GAAyDL,IAAI,CAACK,QAAL,KAAkB,CAA5E,IAAiF,GAAzF;AACA,cAAIC,CAAC,GAAG,CAACN,IAAI,CAACO,OAAL,KAAiB,EAAjB,GAAsB,MAAMP,IAAI,CAACO,OAAL,EAA5B,GAA6CP,IAAI,CAACO,OAAL,EAA9C,IAAgE,GAAxE;AACA,cAAIC,CAAC,GAAG,CAACR,IAAI,CAACS,QAAL,KAAkB,EAAlB,GAAuB,MAAMT,IAAI,CAACS,QAAL,EAA7B,GAA+CT,IAAI,CAACS,QAAL,EAAhD,IAAmE,GAA3E;AACA,cAAIC,CAAC,GAAG,CAACV,IAAI,CAACW,UAAL,KAAoB,EAApB,GAAyB,MAAMX,IAAI,CAACW,UAAL,EAA/B,GAAmDX,IAAI,CAACW,UAAL,EAApD,IAAyE,GAAjF;AACA,cAAIC,CAAC,GAAGZ,IAAI,CAACa,UAAL,KAAoB,EAApB,GAAyB,MAAMb,IAAI,CAACa,UAAL,EAA/B,GAAmDb,IAAI,CAACa,UAAL,EAA3D;AACA,iBAAOX,CAAC,GAAGE,CAAJ,GAAQE,CAAR,GAAYE,CAAZ,GAAgBE,CAAhB,GAAoBE,CAA3B;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACqB,eAAVE,UAAU,CAACf,MAAD,EAAyB;AACtC,cAAIgB,CAAC,GAAG,IAAId,IAAJ,EAAR;AAEA,cAAIe,QAAQ,GAAGjB,MAAM,GAAGgB,CAAC,CAACE,OAAF,KAAc,IAAtC;AACA,cAAIC,MAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,QAAQ,IAAI,OAAO,EAAX,CAAnB,CAArB;AACA,iBAAOE,MAAP;AACH;;AAE+B,eAAzBG,yBAAyB,CAACtB,MAAD,EAAiB;AAC7C,cAAIgB,CAAC,GAAG,IAAId,IAAJ,EAAR;AAEA,cAAIe,QAAQ,GAAGjB,MAAM,GAAGgB,CAAC,CAACE,OAAF,EAAxB;AACA,iBAAO,KAAKK,qBAAL,CAA2BN,QAA3B,CAAP;AACH;AAED;;;AAC4B,eAArBM,qBAAqB,CAACvB,MAAD,EAAyB;AACjD,cAAIwB,GAAW,GAAG,EAAlB;AAEA,cAAIL,MAAc,GAAGnB,MAAM,IAAI,OAAO,EAAX,CAA3B;AACA,cAAIyB,OAAe,GAAGzB,MAAM,GAAG,IAAT,GAAgB,EAAtC,CAJiD,CAIJ;;AAC7C,cAAI0B,SAAiB,GAAG1B,MAAM,GAAG,EAAT,GAAc,EAAtC;AACA,cAAI2B,SAAiB,GAAG3B,MAAM,GAAG,EAAjC;;AAEA,cAAImB,MAAM,GAAG,CAAb,EAAgB;AACZK,YAAAA,GAAG,IAAKL,MAAM,GAAG;AAAA;AAAA,oCAAQS,MAAR,CAAe,iBAAf,CAAjB,CADY,CAEZ;AACA;AACH;;AAED,cAAIT,MAAM,GAAG,CAAT,IAAcM,OAAO,GAAG,CAA5B,EAA+B;AAC3BD,YAAAA,GAAG,IAAKC,OAAO,GAAG;AAAA;AAAA,oCAAQG,MAAR,CAAe,kBAAf,CAAlB,CAD2B,CAE3B;AACA;AACH;;AAED,cAAIT,MAAM,GAAG,CAAT,IAAcM,OAAO,GAAG,CAAxB,IAA6BC,SAAS,GAAG,CAA7C,EAAgD;AAC5CF,YAAAA,GAAG,IAAKE,SAAS,GAAG;AAAA;AAAA,oCAAQE,MAAR,CAAe,oBAAf,CAApB,CAD4C,CAE5C;AACA;AACH,WAxBgD,CA0BjD;;;AAEA,iBAAOJ,GAAP;AACH;AACD;;;AAC6B,eAAtBK,sBAAsB,CAAC7B,MAAD,EAAyB;AAClD,cAAIwB,GAAW,GAAG,EAAlB;AAEA,cAAIL,MAAc,GAAGC,IAAI,CAACC,KAAL,CAAWrB,MAAM,IAAI,OAAO,EAAX,CAAjB,CAArB;AACA,cAAIyB,OAAe,GAAGL,IAAI,CAACC,KAAL,CAAWrB,MAAM,GAAG,IAApB,IAA4B,EAAlD,CAJkD,CAIO;;AACzD,cAAI0B,SAAiB,GAAGN,IAAI,CAACC,KAAL,CAAWrB,MAAM,GAAG,EAApB,IAA0B,EAAlD;AACA,cAAI2B,SAAiB,GAAG3B,MAAM,GAAG,EAAjC;;AACA,cAAImB,MAAM,GAAG,CAAb,EAAgB;AACZK,YAAAA,GAAG,IAAKL,MAAM,GAAG;AAAA;AAAA,oCAAQS,MAAR,CAAe,iBAAf,CAAjB,CADY,CAEZ;;AACA,mBAAOJ,GAAP,CAHY,CAIZ;AACH;;AAED,cAAKC,OAAO,GAAG,CAAf,EAAkB;AACdD,YAAAA,GAAG,IAAKC,OAAO,GAAG;AAAA;AAAA,oCAAQG,MAAR,CAAe,kBAAf,CAAlB,CADc,CAEd;;AACA,mBAAOJ,GAAP,CAHc,CAId;AACH;;AAED,cAAKE,SAAS,GAAG,CAAjB,EAAoB;AAChBF,YAAAA,GAAG,IAAKE,SAAS,GAAG;AAAA;AAAA,oCAAQE,MAAR,CAAe,oBAAf,CAApB,CADgB,CAEhB;;AACA,mBAAOJ,GAAP,CAHgB,CAIhB;AACH,WA1BiD,CA2BlD;;;AACAA,UAAAA,GAAG,IAAKG,SAAS,GAAG;AAAA;AAAA,kCAAQC,MAAR,CAAe,oBAAf,CAApB;AAEA,iBAAOJ,GAAP;AACH;AACE;;;AAC6B,eAAtBM,sBAAsB,CAAC9B,MAAD,EAAsB;AAClD,cAAIwB,GAAQ,GAAE,EAAd;AAEA,cAAIL,MAAc,GAAGC,IAAI,CAACC,KAAL,CAAWrB,MAAM,IAAI,OAAO,EAAX,CAAjB,CAArB;AACA,cAAIyB,OAAe,GAAGL,IAAI,CAACC,KAAL,CAAWrB,MAAM,GAAG,IAAT,GAAgB,EAA3B,CAAtB,CAJkD,CAIO;;AACzD,cAAI0B,SAAiB,GAAEN,IAAI,CAACC,KAAL,CAAYrB,MAAM,GAAG,EAAT,GAAc,EAA1B,CAAvB;AACA,cAAI2B,SAAiB,GAAG3B,MAAM,GAAG,EAAjC;AACAwB,UAAAA,GAAG,CAAC,KAAD,CAAH,GAAWL,MAAX;AACAK,UAAAA,GAAG,CAAC,OAAD,CAAH,GAAaC,OAAb;AACAD,UAAAA,GAAG,CAAC,SAAD,CAAH,GAAeE,SAAf;AACAF,UAAAA,GAAG,CAAC,SAAD,CAAH,GAAeG,SAAf;AACA,iBAAOH,GAAP;AAGH;;AApHiB,O","sourcesContent":["import { _decorator, Component, log, Node } from 'cc';\r\nimport { LangMgr } from '../mgr/LangMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * TimerUtil\r\n * zhudingchao\r\n * Mon Jun 03 2024 14:56:15 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/utils/TimerUtil.ts\r\n *\r\n */\r\n\r\n@ccclass('TimerUtil')\r\nexport class TimeUtil {\r\n    /**\r\n     * \r\n     * @param millisecond 秒 \r\n     * @returns yyyy-MM-dd HH-mm-ss\r\n     */\r\n    static timestampToTime(second: number) {\r\n        var date = new Date(second * 1000);//时间戳为10位需*1000，时间戳为13位的话不需乘1000\r\n        var Y = date.getFullYear() + '-';\r\n        var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\r\n        var D = (date.getDate() < 10 ? '0' + date.getDate() : date.getDate()) + ' ';\r\n        var h = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\r\n        var m = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) + ':';\r\n        var s = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();\r\n        return Y + M + D + h + m + s;\r\n    }\r\n\r\n    /**\r\n     * 根据当前时间算出距目标时间剩余多少天\r\n     * @param second \r\n     * @returns \r\n     */\r\n    static getLeftDay(second: number): number {\r\n        let d = new Date();\r\n\r\n        let leftTime = second - d.getTime() / 1000;\r\n        let t_days: number = Math.floor(leftTime / (3600 * 24));\r\n        return t_days;\r\n    }\r\n\r\n    static formaterLeftWithOutSecond(second: number) {\r\n        let d = new Date();\r\n\r\n        let leftTime = second - d.getTime();\r\n        return this.formaterWithOutSecond(leftTime);\r\n    }\r\n\r\n    /**格式化 几天几小时几分钟 */\r\n    static formaterWithOutSecond(second: number): string {\r\n        var ret: string = \"\";\r\n\r\n        var t_days: number = second / (3600 * 24);\r\n        var t_hours: number = second / 3600 % 24;\t\t\t\t//这里不一样, 为不影响其他功能，这里加个方法\r\n        var t_minutes: number = second / 60 % 60;\r\n        var t_seconds: number = second % 60;\r\n\r\n        if (t_days > 0) {\r\n            ret += (t_days + LangMgr.getLab(\"Tips_common_day\"));\r\n            //ret += (t_days + \"天\");\r\n            // ret += G.StringManager.formatStr(G.StringManager.getWorldString(\"timeUtils_days\"), [t_days]);\r\n        }\r\n\r\n        if (t_days > 0 || t_hours > 0) {\r\n            ret += (t_hours + LangMgr.getLab(\"Tips_common_hour\"));\r\n            //ret += (t_hours + \"小时\");\r\n            // ret += G.StringManager.formatStr(G.StringManager.getWorldString(\"timeUtils_hours\"), [t_hours]);\r\n        }\r\n\r\n        if (t_days > 0 || t_hours > 0 || t_minutes > 0) {\r\n            ret += (t_minutes + LangMgr.getLab(\"Tips_common_minute\"))\r\n            //ret += (t_minutes + \"分\");\r\n            // ret += G.StringManager.formatStr(G.StringManager.getWorldString(\"timeUtils_minutes\"), [t_minutes]);\r\n        }\r\n\r\n        //\t\t\tret += (t_seconds + \"秒\");\r\n\r\n        return ret;\r\n    }\r\n    /**格式化 几天几小时几分钟 */\r\n    static formaterWithOutSecond2(second: number): string {\r\n        var ret: string = \"\";\r\n\r\n        var t_days: number = Math.floor(second / (3600 * 24));\r\n        var t_hours: number = Math.floor(second / 3600 )% 24;\t\t\t\t//这里不一样, 为不影响其他功能，这里加个方法\r\n        var t_minutes: number = Math.floor(second / 60 )% 60;\r\n        var t_seconds: number = second % 60;\r\n        if (t_days > 0) {\r\n            ret += (t_days + LangMgr.getLab(\"Tips_friend_day\"));\r\n            //ret += (t_days + \"天前\");\r\n            return ret;\r\n            // ret += G.StringManager.formatStr(G.StringManager.getWorldString(\"timeUtils_days\"), [t_days]);\r\n        }\r\n\r\n        if ( t_hours > 0) {\r\n            ret += (t_hours + LangMgr.getLab(\"Tips_friend_hour\"));\r\n            //ret += (t_hours + \"小时前\");\r\n            return ret;\r\n            // ret += G.StringManager.formatStr(G.StringManager.getWorldString(\"timeUtils_hours\"), [t_hours]);\r\n        }\r\n\r\n        if ( t_minutes > 0) {\r\n            ret += (t_minutes + LangMgr.getLab(\"Tips_friend_minute\"))\r\n            //ret += (t_minutes + \"分钟前\");\r\n            return ret;\r\n            // ret += G.StringManager.formatStr(G.StringManager.getWorldString(\"timeUtils_minutes\"), [t_minutes]);\r\n        }\r\n        //ret = (t_seconds + \"秒前\");\r\n        ret += (t_seconds + LangMgr.getLab(\"Tips_friend_second\"))\r\n\r\n        return ret;\r\n    }\r\n       /**格式化 几天几小时几分钟 */\r\n       static formaterWithOutSecond3(second: number): any {\r\n        var ret: any ={};\r\n\r\n        var t_days: number = Math.floor(second / (3600 * 24));\r\n        var t_hours: number = Math.floor(second / 3600 % 24);\t\t\t\t//这里不一样, 为不影响其他功能，这里加个方法\r\n        var t_minutes: number =Math.floor( second / 60 % 60);\r\n        var t_seconds: number = second % 60;\r\n        ret[\"day\"]=t_days;\r\n        ret[\"hours\"]=t_hours;\r\n        ret[\"minutes\"]=t_minutes;\r\n        ret[\"seconds\"]=t_seconds;\r\n        return ret;\r\n\r\n    \r\n    }\r\n}"]}