{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/activity/crazyChicken/CrazyChickenPop.ts"],"names":["_decorator","Label","ProgressBar","Sprite","ViewPop","ActivityData","tab","LangMgr","PayControl","ShowTips","ChannelMgr","ccclass","property","CrazyChickenPop","rechargeId","isCanBuy","register","onShow","initView","msg","ins","breakEggMsg","table","getData","BreakEggTableById","getValue","id","rightNumLab","string","MaxScore","leftNumLab","score","proBar","progress","proLab","buyBtnSpr","grayscale","rechargeTable","RechargeTableById","RechargeId","priceLab","getSdkRechargeShowPrice","onClickBuy","getLab","requestPay","onClose"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, ProgressBar, Sprite } from 'cc';\r\nimport { ViewPop } from '../../../../framework/base/ViewPop';\r\nimport { ActivityData } from '../ActivityData';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nimport { PayControl } from '../../pay/PayControl';\r\nimport { ShowTips } from '../../../mgr/UIMgr';\r\nimport { ChannelMgr } from '../../../../channel/ChannelMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * CrazyChickenPop\r\n * zhudingchao\r\n * Wed Jun 19 2024 16:38:41 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/activity/crazyChicken/CrazyChickenPop.ts\r\n *\r\n */\r\n\r\n@ccclass('CrazyChickenPop')\r\nexport class CrazyChickenPop extends ViewPop {\r\n    @property(ProgressBar)\r\n    proBar: ProgressBar = null;\r\n    @property(Label)\r\n    proLab:Label=null;\r\n    @property(Label)\r\n    leftNumLab:Label=null;\r\n    @property(Label)\r\n    rightNumLab:Label=null;\r\n    @property(Label)\r\n    priceLab:Label=null;\r\n    @property(Sprite)\r\n    buyBtnSpr:Sprite=null;\r\n    private rechargeId:number=0;\r\n    private isCanBuy:boolean=false;\r\n    register(): void {\r\n\r\n    }\r\n    onShow(): void {\r\n        this.initView();\r\n\r\n    }\r\n    initView(){\r\n        let msg=ActivityData.ins.breakEggMsg;\r\n        let table=tab.getData().BreakEggTableById.getValue(msg.id);\r\n        this.rightNumLab.string=table.MaxScore+\"\";\r\n        this.leftNumLab.string=\"0\";\r\n    \r\n        if(msg.score>=table.MaxScore){\r\n            this.proBar.progress=1;\r\n            this.isCanBuy=true;\r\n            this.proLab.string=table.MaxScore+\"\";\r\n        }else{\r\n            this.proBar.progress=msg.score/table.MaxScore;\r\n            this.proLab.string=msg.score+\"\";\r\n            this.isCanBuy=false;\r\n        }\r\n        this.buyBtnSpr.grayscale=!this.isCanBuy;\r\n        let rechargeTable=tab.getData().RechargeTableById.getValue(table.RechargeId);\r\n        this.priceLab.string=ChannelMgr.getSdkRechargeShowPrice(rechargeTable);//LangMgr.getCombineString(\"ui_commondesc_73\",[rechargeTable.Price]);\r\n        this.rechargeId=table.RechargeId;\r\n    }\r\n    onClickBuy(){\r\n        if(!this.isCanBuy){\r\n            //ShowTips(\"进度不足，进度满后可正常购买\")\r\n            ShowTips(LangMgr.getLab(\"Tips_crazychicken_1\"))\r\n            return;\r\n        }\r\n        if(this.rechargeId>0){\r\n            PayControl.ins.requestPay(this.rechargeId,()=>{\r\n                this.onClose();\r\n            })\r\n        }\r\n    }\r\n}"]}