{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/hero/herobag/HeroBagPainting.ts"],"names":["_decorator","Component","Label","sp","Node","Prefab","Sprite","Toggle","log","instantiate","Animation","Color","proto","HeroInfo","Net","tab","HeroData","ItemPoolMgr","HeroItem","LangMgr","HeroTeamControl","EquipData","HeroDataControl","EventMgr","LocalEvent","UIMgr","ViewName","HeroSkillItem","HeroStar","createAnimation","GameUtil","HERO_DETAIL_VIEW_TYPE","RedMgr","RedDotType","ccclass","property","HeroBagPainting","Skeleton","_heroInfo","teamSlots","_itemId","changeHeroCallBack","clickEquipSlotCallBack","currEquipType","equipComItems","currWearEquipDatas","_view_type","DETAIL","onLoad","onMsg","Ptl","UpdateHeroPowerScore","on_s2c_Msg_UpdateHeroPowerScore","msg","lbl_fight","string","convertNumber","powerScore","setExchangeBtn","isShow","node_exchange","active","setViewType","view_type","initData","node_quality1_img","ins","getById","heroId","itemId","getTeam","showBaseInfo","ske_hero","node","heroTable","Idle","showTeamHeros","node_star","getComponent","showStar","star","itemQualityTab","getItemQualityTableByStar","sp_quality2_img","setTexture","HeroBagGrowthQuality","sp_quality1_img","HeroBagLevelQuality","isInTeam","Boolean","heroInTeam","id","node_deploy_btn","node_inteam_icon","node_red_replace","isRed","HeroReplace","String","initBook","bookId","heroTab","getData","HeroTableById","getValue","DefaultStar","node_bag","node_skill","layout","getChildByName","removeAllChildren","skillMap","getHeroSkillMap","i","iconUrl","skillData","get","skill_item","pfb_skill_item","ts","parent","initEquipView","heroClass","equipType","updateHeroCallBack","clickSlotCallBack","bagNode","equipmentNode","EQUIP","quality_node","slot","find","a","setSelectEquipSlot","updateEquipSlot","upateEquipByHeroChang","Class","Number","setHeroTeamSlot","Msg_SetTeamSlotReq","Send","SetTeamSlotReq","node_team_arr","length","data","item","heroInfo","children","createHeroItem","UpdateContent","setTouchCallBack","console","isChecked","clickTeamToggle","event","idx","index","refreshBagData","emitLocal","Hero_Change","itemTab","ItemTableById","heroClassTab","HeroClassTableByHeroClass","heroAptitudeTab","HeroAptitudeTableByHeroAptitude","Aptitude","sp_vocation","Icon","sp_quality","lbl_hero_name","getLab","Name","lbl_speciality","Speciality","curLevel","getHeroLevel","maxLevel","heroStarUpTable","MaxLevel","node_tip","lbl_max_level","lbl_cur_level","color","fromHEX","GetKeyValue_ConfigTable","InterfaceTxtRed","type","equipSlotNodes","onClickEquipSlot","evet","show","viewName","EquipmentDetailPop","onClickChangeHeroLeft","LastHero","onClickChangeHeroRight","NextHero","key","putEquipItem","equals","getWearEquipInfosByHeroClass","createEquipItem","equipSlotItems","push","getWearEquipByType","clickShowHeroResetPop","HeroResetPop","onDisable","showLevelAnim","anim_level_up","play"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Label, sp, Node, Prefab, Sprite, Vec3, Toggle, log, instantiate,Animation, Color} from 'cc';\r\nimport { proto } from 'client_protocol';\r\nimport { HeroInfo } from '../HeroInfo';\r\nimport { Net } from '../../../net/Net';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { HeroData } from '../HeroData';\r\nimport { ItemPoolMgr } from '../../item/ItemPoolMgr';\r\nimport { HeroItem } from '../../item/HeroItem';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nimport { HeroTeamControl } from '../HeroTeamControl';\r\nimport { EquipData } from '../../equip/EquipData';\r\nimport { EquipInfo } from '../../equip/EquipInfo';\r\nimport { HeroDataControl } from './HeroDataControl';\r\nimport { EventMgr } from '../../../mgr/EventMgr';\r\nimport { LocalEvent } from '../../../define/LocalEvent';\r\nimport { UIMgr } from '../../../mgr/UIMgr';\r\nimport { ViewName } from '../../../define/ViewDefine';\r\nimport { HeroSkillItem } from './HeroSkillItem';\r\nimport { HeroStar } from '../HeroStar';\r\nimport { createAnimation, GameUtil } from '../../../utils/GameUtil';\r\nimport { HERO_DETAIL_VIEW_TYPE } from '../../../../Common/script/EnumTypeMgr';\r\nimport { RedMgr } from '../../../mgr/RedMgr';\r\nimport { RedDotType } from '../../../red/RedDotType';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HeroBagPainting')\r\nexport class HeroBagPainting extends Component {\r\n    @property(Label)\r\n    lbl_hero_name: Label = null;\r\n    @property(Label)\r\n    lbl_speciality: Label = null;\r\n    @property(Label)\r\n    lbl_cur_level: Label = null;\r\n    @property(Label)\r\n    lbl_max_level: Label = null;\r\n\r\n    @property(sp.Skeleton)\r\n    ske_hero: sp.Skeleton = null;\r\n\r\n    @property([Node])\r\n    node_team_arr: Node[] = [];\r\n\r\n    @property(Prefab)\r\n    pfb_hero_item: Prefab = null;\r\n    @property(Prefab)\r\n    pfb_skill_item: Prefab = null;\r\n\r\n    @property(Sprite)\r\n    sp_vocation: Sprite = null;//职业\r\n    @property(Sprite)\r\n    sp_quality: Sprite = null;//品质\r\n\r\n    @property(Node)\r\n    node_bag: Node = null;\r\n    @property(Node)\r\n    node_skill: Node = null;\r\n    @property(Node)\r\n    node_tip: Node = null;\r\n    @property(Node)\r\n    equipmentNode: Node = null;\r\n    @property(Node)\r\n    bagNode: Node = null;\r\n    @property(Node)\r\n    node_exchange: Node = null;\r\n    @property(Node)\r\n    node_quality1_img: Node = null;\r\n\r\n    @property(Sprite)\r\n    sp_quality2_img: Sprite = null;\r\n    @property(Sprite)\r\n    sp_quality1_img: Sprite = null;\r\n\r\n    @property(Node)\r\n    equipSlotNodes: Node = null;\r\n\r\n    @property([Node])\r\n    equipSlotItems: Node[] = [];\r\n    @property(Node)\r\n    node_star: Node = null;\r\n    @property(Node)\r\n    node_deploy_btn:Node = null;\r\n    @property(Node)\r\n    node_inteam_icon:Node = null;\r\n\r\n    @property(Label)\r\n    lbl_fight:Label = null;\r\n\r\n    @property(Animation)\r\n    anim_level_up:Animation = null;\r\n    @property(Node)\r\n    quality_node:Node=null;\r\n    @property(Node)\r\n    node_red_replace:Node = null;\r\n\r\n    private _heroInfo: HeroInfo = null;\r\n    private teamSlots: proto.ITeamSlot[] = [];\r\n    private _itemId: number = 0;\r\n    private changeHeroCallBack: Function;\r\n    private clickEquipSlotCallBack: Function;\r\n    private currEquipType: number;\r\n    private equipComItems: Array<Node>;\r\n    public currWearEquipDatas: Array<EquipInfo>;\r\n    private _view_type: HERO_DETAIL_VIEW_TYPE = HERO_DETAIL_VIEW_TYPE.DETAIL;\r\n\r\n    onLoad() {\r\n        EventMgr.onMsg(proto.Ptl.UpdateHeroPowerScore, this.on_s2c_Msg_UpdateHeroPowerScore, this);\r\n    }\r\n    on_s2c_Msg_UpdateHeroPowerScore(msg:proto.Msg_UpdateHeroPowerScore){\r\n        this.lbl_fight.string = GameUtil.convertNumber(this._heroInfo.powerScore)\r\n    }\r\n    setExchangeBtn(isShow: boolean) {\r\n        this.node_exchange.active = isShow;\r\n    }\r\n    setViewType(view_type: HERO_DETAIL_VIEW_TYPE) {\r\n        this._view_type = view_type;\r\n    }\r\n    initData() {\r\n        this.node_quality1_img.active = true;\r\n        this.node_exchange.active = false;\r\n        this._heroInfo = HeroData.ins.getById(HeroDataControl.ins.heroId);\r\n        this._itemId = this._heroInfo.itemId\r\n        this.teamSlots = HeroTeamControl.ins.getTeam();\r\n        this.showBaseInfo();\r\n        createAnimation(this.ske_hero.node,this._heroInfo.heroTable.Idle);\r\n        this.showTeamHeros();\r\n        this.node_star.getComponent(HeroStar).showStar(this._heroInfo.star);\r\n        let star = this._heroInfo.star;\r\n        let itemQualityTab = HeroDataControl.ins.getItemQualityTableByStar(star);\r\n        this.sp_quality2_img.setTexture(itemQualityTab.HeroBagGrowthQuality);\r\n        this.sp_quality1_img.setTexture(itemQualityTab.HeroBagLevelQuality);\r\n        let isInTeam = Boolean(HeroTeamControl.ins.heroInTeam(this._heroInfo.id));\r\n        this.node_deploy_btn.active = !isInTeam;\r\n        this.node_inteam_icon.active =isInTeam;\r\n        this.lbl_fight.string = GameUtil.convertNumber(this._heroInfo.powerScore)\r\n\r\n        this.node_red_replace.active = RedMgr.ins.isRed(RedDotType.HeroReplace, String(HeroDataControl.ins.heroId))\r\n    }\r\n    initBook() {\r\n        this.node_exchange.active = false;\r\n        this._itemId = HeroDataControl.ins.bookId;\r\n        let heroTab = tab.getData().HeroTableById.getValue(this._itemId);\r\n        this._heroInfo = new HeroInfo();\r\n        this._heroInfo.itemId = this._itemId;\r\n        this._heroInfo.id = 0;\r\n        this._heroInfo.star = heroTab.DefaultStar;\r\n        this.node_bag.active = false;\r\n        this.node_skill.active = true;\r\n        this.node_quality1_img.active = false;\r\n        this.node_star.getComponent(HeroStar).showStar(this._heroInfo.star);\r\n        createAnimation(this.ske_hero.node,heroTab.Idle);\r\n        this.showBaseInfo();\r\n\r\n        let star = this._heroInfo.star;\r\n        let itemQualityTab = HeroDataControl.ins.getItemQualityTableByStar(star);\r\n        this.sp_quality2_img.setTexture(itemQualityTab.HeroBagGrowthQuality)\r\n\r\n        let layout = this.node_skill.getChildByName(\"skill_layout\");\r\n        layout.removeAllChildren();\r\n        /* 获取英雄技能列表 */\r\n        let skillMap = this._heroInfo.getHeroSkillMap();\r\n        for (let i = 1; i <= 3; i++) {\r\n            let iconUrl = heroTab[\"SkillIcon\" + i];\r\n            if (iconUrl) {\r\n                let skillData: tab.HeroStarUpTable[] = skillMap.get(i);\r\n                if (skillData) {\r\n                    let skill_item = instantiate(this.pfb_skill_item);\r\n                    let ts = skill_item.getComponent(HeroSkillItem);\r\n                    ts.initData(i, this._heroInfo);\r\n                    skill_item.parent = layout;\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    initEquipView(heroClass: number, equipType: number, updateHeroCallBack: Function, clickSlotCallBack: Function) {\r\n        this.bagNode.active = false;\r\n        this.equipmentNode.active = true;\r\n        this.teamSlots = HeroTeamControl.ins.getTeam();\r\n        this._view_type = HERO_DETAIL_VIEW_TYPE.EQUIP;\r\n        this.quality_node.active=false;\r\n        let slot = this.teamSlots.find(a => a.heroClass == heroClass);\r\n        if (slot && slot.heroId) {\r\n            this._heroInfo = HeroData.ins.getById(slot.heroId);\r\n            this._itemId = this._heroInfo.itemId;\r\n            this.showBaseInfo();\r\n            createAnimation(this.ske_hero.node,this._heroInfo.heroTable.Idle);\r\n            this.setSelectEquipSlot(equipType);\r\n            this.changeHeroCallBack = updateHeroCallBack;\r\n            this.clickEquipSlotCallBack = clickSlotCallBack;\r\n            this.updateEquipSlot();\r\n            this.node_star.getComponent(HeroStar).showStar(this._heroInfo.star);\r\n        } else {\r\n            log(\"数据错误\")\r\n        }\r\n\r\n    }\r\n    upateEquipByHeroChang() {\r\n        this._heroInfo = HeroData.ins.getById(HeroDataControl.ins.heroId);\r\n        this._itemId = this._heroInfo.itemId\r\n        this.teamSlots = HeroTeamControl.ins.getTeam();\r\n        this.showBaseInfo();\r\n        createAnimation(this.ske_hero.node,this._heroInfo.heroTable.Idle);\r\n        this.updateEquipSlot();\r\n        if (this.changeHeroCallBack) {\r\n            this.changeHeroCallBack(this._heroInfo.heroTable.Class);\r\n        }\r\n        if (this.clickEquipSlotCallBack) {\r\n            this.clickEquipSlotCallBack(Number(this.currEquipType));\r\n        }\r\n    }\r\n    /* 上阵英雄 */\r\n    setHeroTeamSlot() {\r\n        let msg = new proto.Msg_SetTeamSlotReq();\r\n        msg.heroId = this._heroInfo.id;\r\n        Net.Send(proto.Ptl.SetTeamSlotReq, msg);\r\n    }\r\n    /* 显示上阵小鸡 */\r\n    showTeamHeros() {\r\n        this.node_bag.active = true;\r\n        this.node_skill.active = false;\r\n        // this.equipmentNode.active = false;\r\n        for (let i = 0; i < this.node_team_arr.length; i++) {\r\n            let node = this.node_team_arr[i];\r\n            let data = this.teamSlots[i];\r\n            let item = null;\r\n            if (data.heroId) {\r\n                let heroInfo = HeroData.ins.getById(data.heroId);\r\n                if (heroInfo === null) {\r\n                    continue;\r\n                }\r\n                if (node.children[0]) {\r\n                    item = node.children[0];\r\n                } else {\r\n                    item = ItemPoolMgr.ins.createHeroItem(heroInfo,node);\r\n                    // item.parent = node;\r\n                }\r\n                let ts = item.getComponent(HeroItem)\r\n                ts.UpdateContent(heroInfo);\r\n                ts.setTouchCallBack(()=>{\r\n                    console.log(`cocos 点击${heroInfo.itemId}`)\r\n                })\r\n                if (Number(heroInfo.id)===HeroDataControl.ins.heroId) {\r\n                    node.parent.getComponent(Toggle).isChecked = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /* 点击team toggle */\r\n    clickTeamToggle(event: TouchEvent, idx: string) {\r\n        let index = Number(idx);\r\n        HeroDataControl.ins.refreshBagData(Number(this.teamSlots[index - 1].heroId));\r\n        EventMgr.emitLocal(LocalEvent.Hero_Change, true);\r\n    }\r\n    /* 获取基本信息 */\r\n    showBaseInfo() {\r\n        let itemId = this._itemId;\r\n        let itemTab = tab.getData().ItemTableById.getValue(itemId);\r\n        let heroTab = tab.getData().HeroTableById.getValue(itemId);\r\n        let heroClassTab = tab.getData().HeroClassTableByHeroClass.getValue(heroTab.Class)\r\n        let heroAptitudeTab = tab.getData().HeroAptitudeTableByHeroAptitude.getValue(heroTab.Aptitude);\r\n\r\n        this.sp_vocation.setTexture(heroClassTab.Icon);\r\n        this.sp_quality.setTexture(heroAptitudeTab.Icon);\r\n        //this.sp_quality.node.setScale(new Vec3(0.5, 0.5, 0))\r\n        /* 英雄名称 */\r\n        this.lbl_hero_name.string = LangMgr.getLab(itemTab.Name);\r\n        /* 职业描述 */\r\n        this.lbl_speciality.string = LangMgr.getLab(heroTab.Speciality);\r\n        /* 职业等级 */\r\n        // let classLevel = HeroTeamControl.ins.getClassTeamData(heroTab.Class).level;\r\n        let curLevel = this._heroInfo.getHeroLevel()\r\n\r\n        /* 当前英雄最大等级 */\r\n        let maxLevel = this._heroInfo.heroStarUpTable.MaxLevel;\r\n        this.node_tip.active = curLevel > maxLevel;\r\n        this.lbl_max_level.string = String(maxLevel<curLevel?curLevel:maxLevel);\r\n        if(maxLevel<curLevel){\r\n            curLevel = maxLevel;\r\n            this.lbl_cur_level.color = new Color().fromHEX(tab.getData().GetKeyValue_ConfigTable().InterfaceTxtRed);\r\n        }else{\r\n            this.lbl_cur_level.color = new Color().fromHEX(\"#FFFFFF\");\r\n        }\r\n\r\n        this.lbl_cur_level.string = String(curLevel);\r\n    }\r\n    /* 重置队伍栏位星级 */\r\n    // resetStarLevel() {\r\n    //     let msg = new proto.Msg_ResetHeroStarReq();\r\n    //     msg.heroId = this._heroInfo.id;\r\n    //     Net.Send(proto.Ptl.ResetHeroStarReq, msg);\r\n    // }\r\n    setSelectEquipSlot(type: number) {\r\n        if (this.equipSlotNodes.children[type - 1]) {\r\n            this.equipSlotNodes.children[type - 1].getComponent(Toggle).isChecked = true;\r\n        }\r\n        this.currEquipType = type;\r\n    }\r\n    onClickEquipSlot(evet, type) {\r\n        if (this.currEquipType != type) {\r\n            if (this.clickEquipSlotCallBack) {\r\n                this.clickEquipSlotCallBack(Number(type),);\r\n            }\r\n            this.currEquipType = type;\r\n        } else {\r\n            if (this.currWearEquipDatas[type]) {\r\n                UIMgr.ins.show({ viewName: ViewName.EquipmentDetailPop, data: this.currWearEquipDatas[type] })\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n    onClickChangeHeroLeft() {\r\n        HeroDataControl.ins.LastHero(true);\r\n        EventMgr.emitLocal(LocalEvent.Hero_Change, true);\r\n        if (this._view_type === HERO_DETAIL_VIEW_TYPE.EQUIP) {\r\n            this.upateEquipByHeroChang();\r\n        }\r\n    }\r\n    onClickChangeHeroRight() {\r\n        HeroDataControl.ins.NextHero(true);\r\n        EventMgr.emitLocal(LocalEvent.Hero_Change, true);\r\n        if (this._view_type === HERO_DETAIL_VIEW_TYPE.EQUIP) {\r\n            this.upateEquipByHeroChang();\r\n        }\r\n    }\r\n\r\n    updateEquipSlot() {\r\n        if (this.equipComItems) {\r\n            for (let key in this.equipComItems) {\r\n                ItemPoolMgr.ins.putEquipItem(this.equipComItems[key]);\r\n            }\r\n        }\r\n        this.equipComItems = [];\r\n        let equals = EquipData.ins.getWearEquipInfosByHeroClass(this._heroInfo.heroTable.Class);\r\n        for (let key in equals) {\r\n            if (equals[key]) {\r\n                let node = ItemPoolMgr.ins.createEquipItem(equals[key], this.equipSlotItems[Number(key) - 1],false);\r\n                this.equipComItems.push(node);\r\n            }\r\n        }\r\n        this.currWearEquipDatas = equals;\r\n    }\r\n\r\n    getWearEquipByType(type: number) {\r\n        if (this.currWearEquipDatas) {\r\n            return this.currWearEquipDatas[type]\r\n        }\r\n        return null;\r\n    }\r\n    /* 点击重置 */\r\n    clickShowHeroResetPop() {\r\n        UIMgr.ins.show({ viewName: ViewName.HeroResetPop })\r\n    }\r\n    protected onDisable(): void {\r\n        this.node_star.getComponent(HeroStar).onDisable();\r\n        if (this.equipComItems) {\r\n            for (let key in this.equipComItems) {\r\n                ItemPoolMgr.ins.putEquipItem(this.equipComItems[key]);\r\n            }\r\n        }\r\n    }\r\n    /* 显示升级动画 */\r\n    showLevelAnim(){\r\n        this.anim_level_up.play();\r\n    }\r\n}\r\n\r\n\r\n"]}