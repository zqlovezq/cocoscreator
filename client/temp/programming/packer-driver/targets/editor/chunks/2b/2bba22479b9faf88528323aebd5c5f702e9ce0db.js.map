{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/fincaFight/FincaFightLogItem.ts"],"names":["_decorator","Label","Node","RichText","InfiniteCell","formatTimestamp","LangMgr","tab","ccclass","property","FincaFightLogItem","UpdateContent","data","lbl_time","string","time","node_lose","active","isWin","node_win","roleName","opponentRoleName","opponentRoleId","indexOf","robotId","Number","replace","tabInfo","getData","RobotTableById","getValue","getLab","Name","type","str","lbl_log","getCombineString","changeScore"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Q,OAAAA,Q;;AACtCC,MAAAA,Y;;AACEC,MAAAA,e,iBAAAA,e;;AAEAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,G,iBAAAA,G;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;mCAGjBU,iB,WADZF,OAAO,CAAC,mBAAD,C,UAEHC,QAAQ,CAACP,IAAD,C,UAERO,QAAQ,CAACP,IAAD,C,UAERO,QAAQ,CAACN,QAAD,C,UAERM,QAAQ,CAACR,KAAD,C,2BARb,MACaS,iBADb;AAAA;AAAA,wCACoD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAShDC,QAAAA,aAAa,CAACC,IAAD,EAAqC;AAC9C,eAAKC,QAAL,CAAcC,MAAd,GAAuB;AAAA;AAAA,kDAAgBF,IAAI,CAACG,IAArB,CAAvB;AACA,eAAKC,SAAL,CAAeC,MAAf,GAAwB,CAACL,IAAI,CAACM,KAA9B;AACA,eAAKC,QAAL,CAAcF,MAAd,GAAuBL,IAAI,CAACM,KAA5B,CAH8C,CAI9C;;AAEA,cAAIE,QAAQ,GAAGR,IAAI,CAACS,gBAApB;;AACA,cAAIT,IAAI,CAACU,cAAL,CAAoBC,OAApB,CAA4B,IAA5B,IAAoC,CAAC,CAAzC,EAA4C;AACxC;AACA,kBAAMC,OAAO,GAAGC,MAAM,CAACb,IAAI,CAACU,cAAL,CAAoBI,OAApB,CAA4B,IAA5B,EAAiC,EAAjC,CAAD,CAAtB;AACA,kBAAMC,OAAO,GAAG;AAAA;AAAA,4BAAIC,OAAJ,GAAcC,cAAd,CAA6BC,QAA7B,CAAsCN,OAAtC,CAAhB;AACAJ,YAAAA,QAAQ,GAAG;AAAA;AAAA,oCAAQW,MAAR,CAAeJ,OAAO,CAACK,IAAvB,CAAX;AACH;;AAED,cAAGpB,IAAI,CAACqB,IAAL,KAAY,CAAf,EAAiB;AACb,kBAAMC,GAAG,GAAGtB,IAAI,CAACM,KAAL,GAAW,kBAAX,GAA8B,kBAA1C;AACA,iBAAKiB,OAAL,CAAarB,MAAb,GAAsB;AAAA;AAAA,oCAAQsB,gBAAR,CAAyBF,GAAzB,EAA6B,CAACd,QAAD,EAAUR,IAAI,CAACyB,WAAf,CAA7B,CAAtB;AACH,WAHD,MAGK;AACD,kBAAMH,GAAG,GAAGtB,IAAI,CAACM,KAAL,GAAW,kBAAX,GAA8B,kBAA1C;AACA,iBAAKiB,OAAL,CAAarB,MAAb,GAAsB;AAAA;AAAA,oCAAQsB,gBAAR,CAAyBF,GAAzB,EAA6B,CAACd,QAAD,EAAUR,IAAI,CAACyB,WAAf,CAA7B,CAAtB;AACH;AACJ;;AA9B+C,O;;;;;iBAEhC,I;;;;;;;iBAEC,I;;;;;;;iBAEG,I;;;;;;;iBAEF,I","sourcesContent":["import { _decorator, Component, Label, Node, RichText } from 'cc';\r\nimport InfiniteCell from '../../../Common/InfiniteList/InfiniteCell';\r\nimport { formatTimestamp } from '../../utils/GameUtil';\r\nimport { proto } from 'client_protocol';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { tab } from '../../../Table/table_gen';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('FincaFightLogItem')\r\nexport class FincaFightLogItem extends InfiniteCell {\r\n    @property(Node)\r\n    node_win:Node = null;\r\n    @property(Node)\r\n    node_lose:Node = null;\r\n    @property(RichText)\r\n    lbl_log: RichText = null;\r\n    @property(Label)\r\n    lbl_time: Label = null;\r\n    UpdateContent(data:proto.IFincaBattleFightRecord) {\r\n        this.lbl_time.string = formatTimestamp(data.time);\r\n        this.node_lose.active = !data.isWin;\r\n        this.node_win.active = data.isWin;\r\n        // type 0: 挑战他人，1: 被他人挑战\r\n\r\n        let roleName = data.opponentRoleName\r\n        if (data.opponentRoleId.indexOf(\"r_\") > -1) {\r\n            // 当前是机器人 SimpleRoleInfo\r\n            const robotId = Number(data.opponentRoleId.replace(\"r_\",\"\"));\r\n            const tabInfo = tab.getData().RobotTableById.getValue(robotId);\r\n            roleName = LangMgr.getLab(tabInfo.Name)\r\n        }\r\n\r\n        if(data.type===0){\r\n            const str = data.isWin?\"ui_fincafight_14\":\"ui_fincafight_15\"\r\n            this.lbl_log.string = LangMgr.getCombineString(str,[roleName,data.changeScore]);\r\n        }else{\r\n            const str = data.isWin?\"ui_fincafight_16\":\"ui_fincafight_17\"\r\n            this.lbl_log.string = LangMgr.getCombineString(str,[roleName,data.changeScore]);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}