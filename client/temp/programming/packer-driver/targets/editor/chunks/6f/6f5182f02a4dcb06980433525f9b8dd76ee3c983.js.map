{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/home/battle/BattleMainRewardPop.ts"],"names":["_decorator","instantiate","Label","Node","Prefab","tween","Vec3","ViewPop","tab","BattleMainRewardItem","ccclass","property","BattleMainRewardPop","_rewardTabData","_curStageId","_selfData","register","onShow","node_content","destroyAllChildren","openData","Id","ins","_chapterData","getData","MainChapterTableById","getValue","chapterId","idx","i","StageIds","length","lbl_chapter_stage","string","ChapterFristRewardTableById","Time","createItem","onDestroy","index","item","children","pfb_reward_item","parent","itemTs","getComponent","initData","setPosition","delay","to","position","start"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, Prefab, tween, Vec3 } from 'cc';\r\nimport { ViewPop } from '../../../../framework/base/ViewPop';\r\nimport { tab } from '../../../../Table/table_gen';\r\nimport { BattleMainRewardItem } from './BattleMainRewardItem';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('BattleMainRewardPop')\r\nexport class BattleMainRewardPop extends ViewPop {\r\n    @property(Prefab)\r\n    pfb_reward_item: Prefab = null;\r\n    @property(Node)\r\n    node_content: Node = null;\r\n    @property(Label)\r\n    lbl_chapter_stage: Label = null;\r\n    private _rewardTabData: tab.ChapterFristRewardTable = null;\r\n    private _curStageId: number = 0;\r\n    private _selfData:any = null;\r\n    register(): void {\r\n  \r\n    }\r\n    onShow(): void {\r\n        this.node_content.destroyAllChildren();\r\n        /* 当前进行个关卡 */\r\n        this._curStageId = this.openData.Id;\r\n        this._selfData = this.openData.ins;\r\n        const _chapterData = tab.getData().MainChapterTableById.getValue(this.openData.chapterId);\r\n        let idx = 0;\r\n        for (let i = 0; i < _chapterData.StageIds.length; i++) {\r\n            if (_chapterData.StageIds[i] == this._curStageId) {\r\n                idx = i + 1;\r\n                break;\r\n            }\r\n        }\r\n        this.lbl_chapter_stage.string = this.openData.chapterId + \"-\" + idx;\r\n        this._rewardTabData = tab.getData().ChapterFristRewardTableById.getValue(this._curStageId);\r\n        for (let i = 0; i < this._rewardTabData.Time.length; i++) {\r\n            this.createItem(i)\r\n        }\r\n    }\r\n    onDestroy(): void {\r\n        super.onDestroy();\r\n    }\r\n    createItem(index: number) {\r\n        let item = this.node_content.children[index];\r\n        if (!item) {\r\n            item = instantiate(this.pfb_reward_item);\r\n            item.parent = this.node_content;\r\n        }\r\n        const itemTs = item.getComponent(BattleMainRewardItem);\r\n        itemTs.initData(index, this.openData.Id);\r\n        item.setPosition(new Vec3(750,-70-150*index,0))\r\n        tween(item).delay(0.2*index).to(0.2,{position:new Vec3(0,-70-150*index,0)}).start();\r\n    }\r\n}\r\n\r\n\r\n"]}