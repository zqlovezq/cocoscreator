{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/base/obj/state/AbsState.ts"],"names":["AbsState","AbsRoleState","AbsBulletState","DefaultState","AbsStateType","constructor","sType","stateType","abs","setAbs","getAnimId","_stateType","stateAnims","get","enter","animId","avatarPlayComplete","animationId","updateFrame","delteTime","leave","animName","changeState","roleIdle","default"],"mappings":";;;8BAqDsBA,Q,EAkCTC,Y,EAQAC,c,EAIAC,Y;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA/Fb;8BACYC,Y,0BAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;eAAAA,Y;;;0BAgDUJ,Q,GAAf,MAAeA,QAAf,CAAwB;AAG3BK,QAAAA,WAAW,CAACC,KAAD,EAAsB;AAAA,eAFjCC,SAEiC;AAAA,eADjCC,GACiC;AAC7B,eAAKD,SAAL,GAAiBD,KAAjB;AACH;;AACDG,QAAAA,MAAM,CAACD,GAAD,EAAc;AAChB,eAAKA,GAAL,GAAWA,GAAX;AACH;;AAEDE,QAAAA,SAAS,CAACC,UAAD,EAAoC;AACzC,cAAI,KAAKH,GAAT,EAAc;AACV,mBAAO,KAAKA,GAAL,CAASI,UAAT,CAAoBC,GAApB,CAAwBF,UAAU,IAAI,KAAKJ,SAA3C,KAAyD,CAAhE;AACH;;AACD,iBAAO,CAAP;AACH;;AAEDO,QAAAA,KAAK,GAAY;AACb,cAAIC,MAAM,GAAG,KAAKL,SAAL,EAAb;;AACA,cAAIK,MAAM,IAAI,CAAd,EAAiB;AACb,iBAAKC,kBAAL,CAAwB,EAAxB;AACA,mBAAO,KAAP;AACH;;AACD,eAAKR,GAAL,CAASS,WAAT,GAAuBF,MAAvB;AACA,iBAAO,IAAP;AACH;;AACDG,QAAAA,WAAW,CAACC,SAAD,EAAoB,CAC9B;;AAEDC,QAAAA,KAAK,GAAG,CACP;;AACDJ,QAAAA,kBAAkB,CAACK,QAAD,EAAmB,CACpC;;AAhC0B,O;;8BAkClBpB,Y,GAAN,MAAMA,YAAN,SAA2BD,QAA3B,CAAoC;AAAA;AAAA;AAAA,eACvCQ,GADuC;AAAA;;AAGvCQ,QAAAA,kBAAkB,CAACK,QAAD,EAAmB;AACjC,eAAKb,GAAL,CAASc,WAAT,CAAqBlB,YAAY,CAACmB,QAAlC;AACH;;AALsC,O;;gCAQ9BrB,c,GAAN,MAAMA,cAAN,SAA6BF,QAA7B,CAAsC;AAAA;AAAA;AAAA,eACzCQ,GADyC;AAAA;;AAAA,O;;8BAIhCL,Y,GAAN,MAAMA,YAAN,SAA2BH,QAA3B,CAAoC;AACvCK,QAAAA,WAAW,GAAG;AACV,gBAAMD,YAAY,CAACoB,OAAnB;AACH;;AAHsC,O","sourcesContent":["import { AbsObj } from \"../AbsObj\";\nimport { Bullet } from \"../bullet/Bullet\";\nimport { AbsRole } from \"../role/AbsRole\";\n\n/** 状态机类型 */\nexport enum AbsStateType {\n    /** 默认 */\n    default = 0,\n    //----------角色相关 1-100--------------\n    /** 空闲  */\n    roleIdle = 1,\n    /** 移动  */\n    roleMove = 2,\n    /** 攻击 */\n    roleAttack = 3,\n    /** 死亡 */\n    roleDead = 4,\n    /** 入场  */\n    RoleBorn = 5,\n    /** 复活  */\n    RoleRevive = 6,\n    /** 技能Cd */\n    RoleSkillCd = 7,\n    /** 未激活状态 */\n    RoleNoActive = 8,\n    /** 后跳 */\n    RoleBackJump = 9,\n    /** 眩晕 */\n    RoleVertigo = 10,\n\n    //----------子弹相关 101-200--------------\n\n    /** 子弹入场  */\n    bulletBorn = 101,\n    /** 子弹移动 */\n    bulletMove = 102,\n    /** 子弹爆炸 */\n    bulletBoom = 103,\n\n\n    //----------PVP相关 201-300--------------\n    pvpIdle = 201,\n    pvpMove = 202,\n    pvpAttack = 203,\n    pvpDead = 204,\n    pvpBorn = 205,\n    pvpRevive = 206,\n    pvpSkillCd = 207,\n    pvpNoActive = 208,\n    pvpBackJump = 209,\n    pvpVertigo = 210,\n}\n\nexport abstract class AbsState {\n    stateType: AbsStateType\n    abs: AbsObj\n    constructor(sType: AbsStateType) {\n        this.stateType = sType\n    }\n    setAbs(abs: AbsObj) {\n        this.abs = abs\n    }\n\n    getAnimId(_stateType?: AbsStateType): number {\n        if (this.abs) {\n            return this.abs.stateAnims.get(_stateType || this.stateType) || 0\n        }\n        return 0\n    }\n\n    enter(): boolean {\n        let animId = this.getAnimId()\n        if (animId == 0) {\n            this.avatarPlayComplete(\"\")\n            return false\n        }\n        this.abs.animationId = animId\n        return true\n    }\n    updateFrame(delteTime: number) {\n    }\n\n    leave() {\n    }\n    avatarPlayComplete(animName: string) {\n    }\n}\nexport class AbsRoleState extends AbsState {\n    abs: AbsRole\n\n    avatarPlayComplete(animName: string) {\n        this.abs.changeState(AbsStateType.roleIdle)\n    }\n}\n\nexport class AbsBulletState extends AbsState {\n    abs: Bullet\n}\n\nexport class DefaultState extends AbsState {\n    constructor() {\n        super(AbsStateType.default)\n    }\n}\n"]}