{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/jade/JadeRecastPop.ts"],"names":["_decorator","instantiate","Label","Node","Prefab","RichText","Sprite","ToggleContainer","ViewPop","JadeRecastItem","ItemPoolMgr","ShowItemNotEnoughTips","ShowTips","UIMgr","ViewName","tab","EquipData","ItemData","EquipControl","EventMgr","proto","LangMgr","JadeSkillItem","ccclass","property","JadeRecastPop","equipInfo","upgardeTab","selectTag","register","onMsg","Ptl","FeatherRecastRsp","on_s2c_FeatherRecastRsp","FeatherRecastConfirmRsp","on_s2c_FeatherRecastConfirmRsp","start","openData","initView","item","ins","createItem","itemNode","getEquipUpgradeTab","EquipUpgradeType","EquipUpgradeType_Recast","quality","newSkillList1","length","key","toggleGroup","toggleItems","isChecked","afterNode","active","beforeNode","newSkillList2","recastItem2","initData","recastItem3","skillList","resItem","getData","ItemTableById","getValue","Materials","resIcon2","setTexture","Icon","resHaveLab2","string","getCount","Id","resNeedLab2","currSkills","currSkillNode","removeAllChildren","skillItemPrefab","parent","getComponent","initSkillId","recastItem1","resIcon","resHaveLab","resNeedLab","str","getCombineString","luckRecastRCount","luckyLab","onClickRecastBtn","reqFeatherRecast","id","onClose","onClickSkillPreview","show","viewName","JadeSkillPreviewPop","onClickHelp","onClickSaveBtn","tag","Number","getLab","r","Msg_FeatherRecastConfirmReq","ConfirmResult","Left","Right","reqFeatherRecastConfirmReq","onClickContinuebBtn","onClickTogger","event","type","msg","error","code","CommonErrorCode","Succeed","onDestroy","unTarget"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, Prefab, RichText, Sprite, Toggle, ToggleContainer } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { JadeRecastItem } from './JadeRecastItem';\r\nimport { EquipInfo } from '../equip/EquipInfo';\r\nimport { ItemPoolMgr } from '../item/ItemPoolMgr';\r\nimport { CommonItem } from '../item/CommonItem';\r\nimport { ShowItemNotEnoughTips, ShowTips, UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { EquipData } from '../equip/EquipData';\r\nimport { ItemData } from '../item/ItemData';\r\nimport { EquipControl } from '../equip/EquipControl';\r\nimport { EventMgr } from '../../mgr/EventMgr';\r\nimport { proto } from 'client_protocol';\r\nimport { ItemControl } from '../item/ItemControl';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { JadeSkillItem } from './JadeSkillItem';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('JadeRecastPop')\r\nexport class JadeRecastPop extends ViewPop {\r\n    @property(Node)\r\n    itemNode: Node = null;\r\n    @property(Node)\r\n    beforeNode: Node = null;\r\n    @property(Node)\r\n    afterNode: Node = null;\r\n\r\n    @property(Sprite)\r\n    resIcon: Sprite = null;\r\n    @property(Label)\r\n    resHaveLab: Label = null;\r\n    @property(Label)\r\n    resNeedLab: Label = null;\r\n    @property(RichText)\r\n    luckyLab: RichText = null;\r\n\r\n\r\n    @property(Sprite)\r\n    resIcon2: Sprite = null;\r\n    @property(Label)\r\n    resHaveLab2: Label = null;\r\n    @property(Label)\r\n    resNeedLab2: Label = null;\r\n\r\n    @property(JadeRecastItem)\r\n    recastItem1: JadeRecastItem = null;\r\n    @property(JadeRecastItem)\r\n    recastItem2: JadeRecastItem = null;\r\n    @property(JadeRecastItem)\r\n    recastItem3: JadeRecastItem = null;\r\n    @property(Node)\r\n    currSkillNode:Node=null;\r\n    @property(Prefab)\r\n    skillItemPrefab:Prefab=null;\r\n    @property(ToggleContainer)\r\n    toggleGroup:ToggleContainer=null;\r\n\r\n    private equipInfo: EquipInfo;\r\n    private upgardeTab: tab.EquipUpgradeTable;\r\n    private selectTag:number=1;\r\n    register(): void {\r\n        EventMgr.onMsg(proto.Ptl.FeatherRecastRsp, this.on_s2c_FeatherRecastRsp, this)\r\n        EventMgr.onMsg(proto.Ptl.FeatherRecastConfirmRsp, this.on_s2c_FeatherRecastConfirmRsp, this)\r\n\r\n    }\r\n    start(): void {\r\n        this.equipInfo = this.openData;\r\n        this.initView();\r\n\r\n    }\r\n    initView() {\r\n        let item = ItemPoolMgr.ins.createItem(this.equipInfo,this.itemNode,false);\r\n        // item.getComponent(CommonItem).setIsTouchItem(false);\r\n        this.upgardeTab = EquipData.ins.getEquipUpgradeTab(tab.EquipUpgradeType.EquipUpgradeType_Recast, this.equipInfo.quality);\r\n        if (this.equipInfo.newSkillList1.length > 0 ) {\r\n            for(let key in this.toggleGroup.toggleItems){\r\n                this.toggleGroup.toggleItems[key].isChecked=false;\r\n            }\r\n            this.afterNode.active = true;\r\n            this.beforeNode.active = false;\r\n            if(this.equipInfo.newSkillList2.length>0){\r\n                this.recastItem2.initData(this.equipInfo.newSkillList1, true);\r\n                this.recastItem3.initData(this.equipInfo.newSkillList2, true);\r\n            }else{\r\n                this.recastItem2.initData(this.equipInfo.skillList, true);\r\n                this.recastItem3.initData(this.equipInfo.newSkillList1, true);\r\n            }\r\n            let resItem = tab.getData().ItemTableById.getValue(this.upgardeTab.Materials[0]);\r\n            this.resIcon2.setTexture(resItem.Icon);\r\n            this.resHaveLab2.string = ItemData.ins.getCount(resItem.Id) + \"\";\r\n            this.resNeedLab2.string = this.upgardeTab.Materials[1] + \"\"\r\n            let currSkills=this.equipInfo.skillList;\r\n            this.currSkillNode.removeAllChildren();\r\n            for(let key in currSkills){\r\n                let item=instantiate(this.skillItemPrefab);\r\n                item.parent=this.currSkillNode;\r\n                item.getComponent(JadeSkillItem).initSkillId(currSkills[key]);\r\n            }\r\n\r\n        } else {\r\n            this.afterNode.active = false;\r\n            this.beforeNode.active = true;\r\n            this.recastItem1.initData(this.equipInfo.skillList, false);\r\n            let resItem = tab.getData().ItemTableById.getValue(this.upgardeTab.Materials[0]);\r\n            this.resIcon.setTexture(resItem.Icon);\r\n            this.resHaveLab.string = ItemData.ins.getCount(resItem.Id) + \"\";\r\n            this.resNeedLab.string = this.upgardeTab.Materials[1] + \"\"\r\n        }\r\n        let str=LangMgr.getCombineString(\"ui_jade_1\",[this.equipInfo.luckRecastRCount])\r\n        this.luckyLab.string = str + \"\";\r\n    }\r\n    onClickRecastBtn() {\r\n        let resItem = tab.getData().ItemTableById.getValue(this.upgardeTab.Materials[0]);\r\n      \r\n        if(ItemData.ins.getCount(resItem.Id)>=this.upgardeTab.Materials[1]){\r\n            EquipControl.ins.reqFeatherRecast(this.equipInfo.id);\r\n        }else{\r\n            //ShowTips(LangMgr.getLab(resItem.Name)+\"不足\")\r\n            // ShowTips(LangMgr.getCombineString(\"Tips_itemshortage\", [LangMgr.getLab(resItem.Name)]))\r\n            this.onClose();\r\n            ShowItemNotEnoughTips(resItem.Id);\r\n        }\r\n        // EquipControl.ins.reqFeatherRecast(this.equipInfo.id);\r\n    }\r\n    onClickSkillPreview() {\r\n        UIMgr.ins.show({ viewName: ViewName.JadeSkillPreviewPop })\r\n    }\r\n    onClickHelp() {\r\n\r\n    }\r\n    onClickSaveBtn() {\r\n        let tag=-1;\r\n        for(let key in this.toggleGroup.toggleItems){\r\n            // this.toggleGroup.toggleItems[key].isChecked=false;\r\n            if(this.toggleGroup.toggleItems[key].isChecked){\r\n                tag=Number(key)+1;\r\n            }\r\n        }\r\n        if(tag<0){\r\n            //ShowTips(\"请选择后在保存\")\r\n            ShowTips(LangMgr.getLab(\"Tips_jade_2\"))\r\n            return;\r\n        }\r\n        let r;\r\n        if(tag==1){\r\n           r=proto.Msg_FeatherRecastConfirmReq.ConfirmResult.Left;\r\n           \r\n        }else{\r\n            r=proto.Msg_FeatherRecastConfirmReq.ConfirmResult.Right;\r\n        }\r\n        EquipControl.ins.reqFeatherRecastConfirmReq(this.equipInfo.id,r);\r\n      \r\n    }\r\n    onClickContinuebBtn() {\r\n        let resItem = tab.getData().ItemTableById.getValue(this.upgardeTab.Materials[0]);\r\n      \r\n        if(ItemData.ins.getCount(resItem.Id)>=this.upgardeTab.Materials[1]){\r\n            EquipControl.ins.reqFeatherRecast(this.equipInfo.id);\r\n        }else{\r\n            //ShowTips(LangMgr.getLab(resItem.Name)+\"不足\")\r\n            // ShowTips(LangMgr.getCombineString(\"Tips_itemshortage\", [LangMgr.getLab(resItem.Name)]))\r\n            this.onClose();\r\n            ShowItemNotEnoughTips(resItem.Id);\r\n        }\r\n     \r\n    }\r\n    onClickTogger(event, type) {\r\n        this.selectTag=Number(type);\r\n    }\r\n    /**\r\n     * 羽毛重铸\r\n     * @param msg \r\n     */\r\n    on_s2c_FeatherRecastRsp(msg: proto.Msg_FeatherRecastRsp) {\r\n        if (msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            this.initView();\r\n        }\r\n        // EquipData.ins.updateEquipMasterData(msg.heroClass,msg.masterData);\r\n    }\r\n    /**\r\n    * 羽毛重铸\r\n    * @param msg \r\n    */\r\n    on_s2c_FeatherRecastConfirmRsp(msg: proto.Msg_FeatherRecastConfirmRsp) {\r\n        if (msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            this.initView();\r\n        }\r\n        // EquipData.ins.updateEquipMasterData(msg.heroClass,msg.masterData);\r\n    }\r\n    protected onDestroy(): void {\r\n        EventMgr.unTarget(this);\r\n    }\r\n}\r\n\r\n\r\n"]}