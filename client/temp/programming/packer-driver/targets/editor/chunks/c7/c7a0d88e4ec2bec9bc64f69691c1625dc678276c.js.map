{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/role/roleInfo/RoleInfoRedemptionCodePop.ts"],"names":["_decorator","EditBox","ViewPop","ShowTips","UIMgr","EventMgr","proto","ViewName","RoleControl","LangMgr","ccclass","property","RoleInfoRedemptionCodePop","register","onMsg","Ptl","UseRedeemCodeRsp","on_s2c_UseRedeemCodeRsp","onShow","onClickConfirm","editBox","string","getLab","ins","requestUseRedeemCode","msg","error","code","CommonErrorCode","Succeed","show","viewName","CongratulationPop","data","rewards","onClose"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,O,OAAAA,O;;AACvBC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Q,iBAAAA,Q;AAAUC,MAAAA,K,iBAAAA,K;;AACVC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,K,oBAAAA,K;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;2CAGaY,yB,WADZF,OAAO,CAAC,2BAAD,C,UAGHC,QAAQ,CAACV,OAAD,C,2BAHb,MACaW,yBADb;AAAA;AAAA,8BACuD;AAAA;AAAA;;AAAA;AAAA;;AAInDC,QAAAA,QAAQ,GAAS;AACb;AAAA;AAAA,oCAASC,KAAT,CAAe;AAAA;AAAA,8BAAMC,GAAN,CAAUC,gBAAzB,EAA2C,KAAKC,uBAAhD,EAAyE,IAAzE;AACH;;AACDC,QAAAA,MAAM,GAAS,CAEd;;AACDC,QAAAA,cAAc,GAAG;AACb,cAAI,KAAKC,OAAL,CAAaC,MAAb,IAAuB,EAA3B,EAA+B;AAC3B;AACA;AAAA;AAAA,sCAAS;AAAA;AAAA,oCAAQC,MAAR,CAAe,uBAAf,CAAT;AACA;AACH;;AACD;AAAA;AAAA,0CAAYC,GAAZ,CAAgBC,oBAAhB,CAAqC,KAAKJ,OAAL,CAAaC,MAAlD;AACH,SAjBkD,CAkBnD;;;AACAJ,QAAAA,uBAAuB,CAACQ,GAAD,EAAkC;AACrD,cAAI,CAACA,GAAG,CAACC,KAAL,IAAcD,GAAG,CAACC,KAAJ,CAAUC,IAAV,IAAkB;AAAA;AAAA,8BAAMC,eAAN,CAAsBC,OAA1D,EAAmE;AAE/D;AAAA;AAAA,gCAAMN,GAAN,CAAUO,IAAV,CAAe;AAAEC,cAAAA,QAAQ,EAAE;AAAA;AAAA,wCAASC,iBAArB;AAAwCC,cAAAA,IAAI,EAAER,GAAG,CAACS;AAAlD,aAAf;AACA,iBAAKC,OAAL;AACH,WAJD,MAIK,CAEJ;AAEJ;;AA5BkD,O;;;;;iBAGhC,I","sourcesContent":["import { _decorator, Component, EditBox, Node } from 'cc';\r\nimport { ViewPop } from '../../../../framework/base/ViewPop';\r\nimport { ShowTips, UIMgr } from '../../../mgr/UIMgr';\r\nimport { EventMgr } from '../../../mgr/EventMgr';\r\nimport { proto } from 'client_protocol';\r\nimport { ViewName } from '../../../define/ViewDefine';\r\nimport { RoleControl } from '../RoleControl';\r\nimport { LangMgr } from '../../../mgr/LangMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * RoleInfoRedemptionCodePop\r\n * zhudingchao\r\n * Thu Jun 20 2024 11:35:00 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/role/roleInfo/RoleInfoRedemptionCodePop.ts\r\n *\r\n */\r\n\r\n@ccclass('RoleInfoRedemptionCodePop')\r\nexport class RoleInfoRedemptionCodePop extends ViewPop {\r\n\r\n    @property(EditBox)\r\n    editBox: EditBox = null;\r\n    register(): void {\r\n        EventMgr.onMsg(proto.Ptl.UseRedeemCodeRsp, this.on_s2c_UseRedeemCodeRsp, this)\r\n    }\r\n    onShow(): void {\r\n\r\n    }\r\n    onClickConfirm() {\r\n        if (this.editBox.string == \"\") {\r\n            //ShowTips(\"请输入兑换码\")\r\n            ShowTips(LangMgr.getLab(\"Tips_redemptioncode_1\"))\r\n            return;\r\n        }\r\n        RoleControl.ins.requestUseRedeemCode(this.editBox.string);\r\n    }\r\n    // 使用兑换码返回\r\n    on_s2c_UseRedeemCodeRsp(msg: proto.Msg_UseRedeemCodeRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n\r\n            UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: msg.rewards });\r\n            this.onClose();\r\n        }else{\r\n            \r\n        }\r\n\r\n    }\r\n}"]}