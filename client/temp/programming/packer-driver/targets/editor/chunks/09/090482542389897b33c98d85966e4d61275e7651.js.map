{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/fincaFight/FincaFightBookToggle.ts"],"names":["_decorator","Component","WeaponItem","FincaFightData","FincaFightTeamState","ItemPoolMgr","RareBookData","ShowTips","LangMgr","ccclass","property","FincaFightBookToggle","emptyNode","lockNode","bookNode","selectNode","bookItem","curIndex","setData","index","bookId","ins","bookIds","node","getChildByName","state","getBookState","active","EMPTY","LOCK","BOOK","bookInfo","getBookInfoByItemId","bookItemNode","createBookItem","getComponent","initData","setSelectState","isSelect","refreshItem","heroId","onClickLockBtn","level","getUnLockLevel","getCombineString"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,mB,iBAAAA,mB;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;sCAGjBW,oB,WADZF,OAAO,CAAC,sBAAD,C,gBAAR,MACaE,oBADb,SAC0CV,SAD1C,CACoD;AAAA;AAAA;AAAA,eACxCW,SADwC,GACvB,IADuB;AAAA,eAExCC,QAFwC,GAExB,IAFwB;AAAA,eAGxCC,QAHwC,GAGxB,IAHwB;AAAA,eAIxCC,UAJwC,GAItB,IAJsB;AAAA,eAKxCC,QALwC,GAKlB,IALkB;AAAA,eAMzCC,QANyC,GAMvB,CANuB;AAAA;;AAOhDC,QAAAA,OAAO,CAACC,KAAD,EAAc;AACjB,cAAIC,MAAM,GAAG;AAAA;AAAA,gDAAeC,GAAf,CAAmBC,OAAnB,CAA2BH,KAA3B,CAAb;AACA,eAAKF,QAAL,GAAgBE,KAAhB;AACA,eAAKP,SAAL,GAAiB,KAAKW,IAAL,CAAUC,cAAV,CAAyB,YAAzB,CAAjB;AACA,eAAKX,QAAL,GAAgB,KAAKU,IAAL,CAAUC,cAAV,CAAyB,WAAzB,CAAhB;AACA,eAAKV,QAAL,GAAgB,KAAKS,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAhB;AACA,eAAKT,UAAL,GAAkB,KAAKQ,IAAL,CAAUC,cAAV,CAAyB,aAAzB,CAAlB;AAEA,gBAAMC,KAAK,GAAG;AAAA;AAAA,gDAAeJ,GAAf,CAAmBK,YAAnB,CAAgCP,KAAK,GAAC,CAAtC,CAAd;AAEA,eAAKP,SAAL,CAAee,MAAf,GAAwBF,KAAK,KAAG;AAAA;AAAA,0DAAoBG,KAApD;AACA,eAAKf,QAAL,CAAcc,MAAd,GAAuBF,KAAK,KAAG;AAAA;AAAA,0DAAoBI,IAAnD;AACA,eAAKf,QAAL,CAAca,MAAd,GAAuBF,KAAK,KAAG;AAAA;AAAA,0DAAoBK,IAAnD;AACA,cAAIC,QAAQ,GAAG;AAAA;AAAA,4CAAaV,GAAb,CAAiBW,mBAAjB,CAAqCZ,MAArC,CAAf;;AACA,cAAGA,MAAH,EAAU;AACN,gBAAG,CAAC,KAAKJ,QAAT,EAAkB;AACd,kBAAIiB,YAAY,GAAG;AAAA;AAAA,8CAAYZ,GAAZ,CAAgBa,cAAhB,CAA+BH,QAA/B,EAAwC,KAAKjB,QAA7C,CAAnB;AACA,mBAAKE,QAAL,GAAgBiB,YAAY,CAACE,YAAb;AAAA;AAAA,2CAAhB;AACH,aAHD,MAGK;AACD,mBAAKnB,QAAL,CAAcoB,QAAd,CAAuBL,QAAvB,EAAiC,KAAjC,EAAwC,KAAxC;AACH;AACJ;AACJ;;AACDM,QAAAA,cAAc,CAACC,QAAD,EAAkB;AAC5B,eAAKvB,UAAL,CAAgBY,MAAhB,GAAyBW,QAAzB;AACH;;AACDC,QAAAA,WAAW,CAACC,MAAD,EAAe,CACtB;AACA;AACH;;AACDC,QAAAA,cAAc,GAAE;AACZ,gBAAMC,KAAK,GAAG;AAAA;AAAA,gDAAerB,GAAf,CAAmBsB,cAAnB,CAAkC,KAAK1B,QAAL,GAAc,CAAhD,EAAkD,KAAlD,CAAd;AACA;AAAA;AAAA,oCAAS;AAAA;AAAA,kCAAQ2B,gBAAR,CAAyB,cAAzB,EAAwC,CAACF,KAAD,CAAxC,CAAT;AACH;;AAxC+C,O","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { WeaponItem } from '../common/WeaponItem';\r\nimport { FincaFightData } from './FincaFightData';\r\nimport { FincaFightTeamState } from '../../../Common/script/EnumTypeMgr';\r\nimport { ItemPoolMgr } from '../item/ItemPoolMgr';\r\nimport { RareBookData } from '../rareBook/RareBookData';\r\nimport { ShowTips } from '../../mgr/UIMgr';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('FincaFightBookToggle')\r\nexport class FincaFightBookToggle extends Component {\r\n    private emptyNode:Node = null;\r\n    private lockNode:Node = null;\r\n    private bookNode:Node = null;\r\n    private selectNode:Node = null;\r\n    private bookItem:WeaponItem = null;\r\n    public curIndex:number = 0;\r\n    setData(index:number){\r\n        let bookId = FincaFightData.ins.bookIds[index];\r\n        this.curIndex = index;\r\n        this.emptyNode = this.node.getChildByName(\"empty_node\");\r\n        this.lockNode = this.node.getChildByName(\"lock_node\");\r\n        this.bookNode = this.node.getChildByName(\"item\");\r\n        this.selectNode = this.node.getChildByName(\"select_node\");\r\n        \r\n        const state = FincaFightData.ins.getBookState(index+1);\r\n\r\n        this.emptyNode.active = state===FincaFightTeamState.EMPTY;\r\n        this.lockNode.active = state===FincaFightTeamState.LOCK;\r\n        this.bookNode.active = state===FincaFightTeamState.BOOK;\r\n        let bookInfo = RareBookData.ins.getBookInfoByItemId(bookId);\r\n        if(bookId){\r\n            if(!this.bookItem){\r\n                let bookItemNode = ItemPoolMgr.ins.createBookItem(bookInfo,this.bookNode);\r\n                this.bookItem = bookItemNode.getComponent(WeaponItem);\r\n            }else{\r\n                this.bookItem.initData(bookInfo, false, false);\r\n            }\r\n        }\r\n    }\r\n    setSelectState(isSelect:boolean){\r\n        this.selectNode.active = isSelect;\r\n    }\r\n    refreshItem(heroId:number){\r\n        // let heroInfo = HeroData.ins.getById(heroId);\r\n        // this.heroItem.UpdateContent(heroInfo)\r\n    }\r\n    onClickLockBtn(){\r\n        const level = FincaFightData.ins.getUnLockLevel(this.curIndex+1,false);\r\n        ShowTips(LangMgr.getCombineString(\"Tips_finca_3\",[level]))\r\n    }\r\n}\r\n\r\n\r\n"]}