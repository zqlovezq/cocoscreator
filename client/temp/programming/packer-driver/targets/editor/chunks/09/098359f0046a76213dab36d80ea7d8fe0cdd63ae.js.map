{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/base/obj/role/role/state/RoleState9BackJump.ts"],"names":["RoleState9BackJump","Vec3","AbsRoleState","AbsStateType","tab","tempPos","startPos","constructor","RoleBackJump","step","totalTime","nowTime","enter","abs","animationId","backJump","x","getPosition","y","updateFrame","dt","setPosition","avatarPlayComplete","animName","info","onSkillTrigger","Triggertype","Triggertype_BackJumpFinish"],"mappings":";;;sHAQaA,kB;;;;;;;;;;;;;;;;;;;;;;;AARJC,MAAAA,I,OAAAA,I;;AACAC,MAAAA,Y,iBAAAA,Y;AAAwBC,MAAAA,Y,iBAAAA,Y;;AAExBC,MAAAA,G,iBAAAA,G;;;;;;;;;AAGHC,MAAAA,O,GAAU,IAAIJ,IAAJ,E;AACVK,MAAAA,Q,GAAW,IAAIL,IAAJ,E;;oCACJD,kB,GAAN,MAAMA,kBAAN;AAAA;AAAA,wCAA8C;AAIjDO,QAAAA,WAAW,GAAG;AACV,gBAAM;AAAA;AAAA,4CAAaC,YAAnB;AADU,eAHdC,IAGc,GAHC,CAGD;AAAA,eAFdC,SAEc,GAFM,CAEN;AAAA,eADdC,OACc,GADI,CACJ;AAEb;;AAEDC,QAAAA,KAAK,GAAY;AACb,eAAKC,GAAL,CAASC,WAAT,GAAuB,KAAKD,GAAL,CAASE,QAAT,CAAkB,CAAlB,CAAvB;AACAT,UAAAA,QAAQ,CAACU,CAAT,GAAa,KAAKH,GAAL,CAASI,WAAT,GAAuBD,CAApC;AACAV,UAAAA,QAAQ,CAACY,CAAT,GAAa,KAAKL,GAAL,CAASI,WAAT,GAAuBC,CAApC;AAEAb,UAAAA,OAAO,CAACW,CAAR,GAAYV,QAAQ,CAACU,CAArB;AACAX,UAAAA,OAAO,CAACa,CAAR,GAAYZ,QAAQ,CAACY,CAArB;AACA,eAAKR,SAAL,GAAiB,KAAKG,GAAL,CAASE,QAAT,CAAkB,CAAlB,KAAwB,IAAzC;AACA,eAAKN,IAAL,GAAY,KAAKI,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAuB,KAAKL,SAAxC;AACA,eAAKC,OAAL,GAAe,CAAf;AACA,iBAAO,IAAP;AACH;;AAEDQ,QAAAA,WAAW,CAACC,EAAD,EAAa;AACpB,eAAKT,OAAL,IAAgBS,EAAhB;;AACA,cAAI,KAAKT,OAAL,IAAgB,KAAKD,SAAzB,EAAoC;AAChC,iBAAKC,OAAL,GAAe,KAAKD,SAApB;AACH;;AACDL,UAAAA,OAAO,CAACW,CAAR,GAAYV,QAAQ,CAACU,CAAT,GAAa,KAAKP,IAAL,GAAY,KAAKE,OAA1C;AACA,eAAKE,GAAL,CAASQ,WAAT,CAAqBhB,OAArB;AACH;;AAEDiB,QAAAA,kBAAkB,CAACC,QAAD,EAAyB;AACvCjB,UAAAA,QAAQ,CAACU,CAAT,IAAc,KAAKH,GAAL,CAASE,QAAT,CAAkB,CAAlB,CAAd;AACA,eAAKF,GAAL,CAASQ,WAAT,CAAqBf,QAArB;AAEA,eAAKO,GAAL,CAASW,IAAT,CAAcC,cAAd,CAA6B;AAAA;AAAA,0BAAIC,WAAJ,CAAgBC,0BAA7C;AAEA,gBAAML,kBAAN,CAAyBC,QAAzB;AACH;;AArCgD,O","sourcesContent":["import { Vec3 } from \"cc\";\nimport { AbsRoleState, AbsState, AbsStateType } from \"../../../state/AbsState\"\nimport { CocosUtil } from \"../../../../../../utils/CocosUtil\";\nimport { tab } from \"../../../../../../../Table/table_gen\";\n\n\nconst tempPos = new Vec3();\nconst startPos = new Vec3()\nexport class RoleState9BackJump extends AbsRoleState {\n    step: number = 0\n    totalTime: number = 0\n    nowTime: number = 0\n    constructor() {\n        super(AbsStateType.RoleBackJump)\n    }\n\n    enter(): boolean {\n        this.abs.animationId = this.abs.backJump[1]\n        startPos.x = this.abs.getPosition().x\n        startPos.y = this.abs.getPosition().y\n\n        tempPos.x = startPos.x\n        tempPos.y = startPos.y\n        this.totalTime = this.abs.backJump[2] || 1000\n        this.step = this.abs.backJump[0] / this.totalTime\n        this.nowTime = 0\n        return true\n    }\n\n    updateFrame(dt: number) {\n        this.nowTime += dt\n        if (this.nowTime >= this.totalTime) {\n            this.nowTime = this.totalTime\n        }\n        tempPos.x = startPos.x + this.step * this.nowTime\n        this.abs.setPosition(tempPos)\n    }\n\n    avatarPlayComplete(animName: string): void {\n        startPos.x += this.abs.backJump[0]\n        this.abs.setPosition(startPos)\n\n        this.abs.info.onSkillTrigger(tab.Triggertype.Triggertype_BackJumpFinish)\n\n        super.avatarPlayComplete(animName)\n    }\n}"]}