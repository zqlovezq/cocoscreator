{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/prestige/PrestigeTaskCaseItem.ts"],"names":["_decorator","Label","Node","ProgressBar","ComponentBase","CommonItem","LangMgr","ItemInfo","ItemPoolMgr","PrestigeControl","UIMgr","ViewName","ccclass","property","PrestigeTaskCaseItem","taskInfo","comItem","register","initData","info","initView","describeLab","string","getLab","taskTable","Describe","total","FinishParam1","currNum","progress","proBar","proLab","isUnLock","gotNode","active","notReachNode","reachBtnNode","gotoBtnNode","lockNode","isReceived","isCanReceived","JumpUI","item","initItemData","RewardItemIds","RewardItemNum","node","ins","createItem","itemNode","getComponent","onClickGotoBtn","jumpLayer","JumpParam","hideView","PrestigePop","onClickRaechBtn","requestReceiveQuestLog","id"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, ProgressBar } from 'cc';\r\nimport { ComponentBase } from '../../../framework/base/ComponentBase';\r\nimport { TaskInfo } from '../task/TaskInfo';\r\nimport { CommonItem } from '../item/CommonItem';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { ItemInfo } from '../item/ItemInfo';\r\nimport { ItemPoolMgr } from '../item/ItemPoolMgr';\r\nimport { PrestigeControl } from './PrestigeControl';\r\nimport { UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * PrestigeTaskCaseItem\r\n * zhudingchao\r\n * Thu Jun 06 2024 10:20:45 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/prestige/PrestigeTaskCaseItem.ts\r\n *\r\n */\r\n\r\n@ccclass('PrestigeTaskCaseItem')\r\nexport class PrestigeTaskCaseItem extends ComponentBase {\r\n    @property(Node)\r\n    reachBtnNode: Node = null;\r\n    @property(Node)\r\n    gotoBtnNode: Node = null;\r\n    @property(Label)\r\n    describeLab: Label = null;\r\n    @property(Node)\r\n    itemNode: Node = null;\r\n    @property(ProgressBar)\r\n    proBar: ProgressBar = null;\r\n    @property(Label)\r\n    proLab: Label = null;\r\n    @property(Node)\r\n    notReachNode: Node = null;\r\n    @property(Node)\r\n    gotNode: Node = null;\r\n    @property(Node)\r\n    lockNode: Node = null;\r\n    private taskInfo: TaskInfo;\r\n    private comItem: CommonItem;\r\n\r\n    register() {\r\n\r\n    }\r\n    initData(info: TaskInfo) {\r\n        this.taskInfo = info;\r\n        this.initView();\r\n\r\n    }\r\n    initView() {\r\n        this.describeLab.string = LangMgr.getLab(this.taskInfo.taskTable.Describe);\r\n        let total = this.taskInfo.taskTable.FinishParam1;\r\n        let currNum = this.taskInfo.progress > total ? total : this.taskInfo.progress;\r\n        this.proBar.progress = currNum / total;\r\n        this.proLab.string = currNum + \"/\" + total;\r\n        if (!this.taskInfo.isUnLock) {\r\n            this.gotNode.active = false;\r\n            this.notReachNode.active = false;\r\n            this.reachBtnNode.active = false;\r\n            this.gotoBtnNode.active = false;\r\n            this.lockNode.active = true;\r\n        }\r\n        else if (this.taskInfo.isReceived) {\r\n            this.gotNode.active = true;\r\n            this.notReachNode.active = false;\r\n            this.reachBtnNode.active = false;\r\n            this.gotoBtnNode.active = false;\r\n            this.lockNode.active = false;\r\n        } else if (this.taskInfo.isCanReceived) {\r\n            this.gotNode.active = false;\r\n            this.notReachNode.active = false;\r\n            this.reachBtnNode.active = true;\r\n            this.gotoBtnNode.active = false;\r\n            this.lockNode.active = false;\r\n        } else {\r\n            this.reachBtnNode.active = false;\r\n            this.lockNode.active = false;\r\n            this.gotNode.active = false;\r\n            if (this.taskInfo.taskTable.JumpUI) {\r\n                this.gotoBtnNode.active = true;\r\n                this.notReachNode.active = false;\r\n            } else {\r\n                this.gotoBtnNode.active = false;\r\n                this.notReachNode.active = true;\r\n            }\r\n        }\r\n        let item = new ItemInfo();\r\n        item.initItemData(this.taskInfo.taskTable.RewardItemIds[0], this.taskInfo.taskTable.RewardItemNum[0])\r\n        if (!this.comItem) {\r\n            let node = ItemPoolMgr.ins.createItem(item,this.itemNode);\r\n            this.comItem = node.getComponent(CommonItem);\r\n        } else {\r\n            this.comItem.initData(item);\r\n        }\r\n\r\n    }\r\n    onClickGotoBtn() {\r\n        if(this.taskInfo.taskTable.JumpUI){\r\n            UIMgr.ins.jumpLayer(this.taskInfo.taskTable.JumpUI,this.taskInfo.taskTable.JumpParam[0]);\r\n            UIMgr.ins.hideView(ViewName.PrestigePop);\r\n        }\r\n    }\r\n    onClickRaechBtn() {\r\n        if (this.taskInfo.isCanReceived) {\r\n            PrestigeControl.ins.requestReceiveQuestLog([this.taskInfo.id]);\r\n        }\r\n\r\n    }\r\n\r\n}"]}