{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/view/common/FightRoleTeam.ts"],"names":["_decorator","Component","Node","FightRoleTeamItem","PlayerControl","ViewName","UIMgr","HeroDataControl","ccclass","property","FightRoleTeam","items","onLoad","index","team_layout","children","length","v","push","getComponent","refresh","isTouch","list","ins","getIntoHeros","head","role","setData","setHeros","heros","setCallback","hero","refreshBookData","itemId","show","viewName","HeroBagView","data","viewType","zIndex"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;;AACvBC,MAAAA,iB,iBAAAA,iB;;AAEAC,MAAAA,a,iBAAAA,a;;AAEAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,e,iBAAAA,e;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;+BAGjBU,a,WADZF,OAAO,CAAC,eAAD,C,UAEHC,QAAQ,CAACP,IAAD,C,2BAFb,MACaQ,aADb,SACmCT,SADnC,CAC6C;AAAA;AAAA;;AAAA;;AAAA,eAIzCU,KAJyC,GAIZ,EAJY;AAAA;;AAM/BC,QAAAA,MAAM,GAAS;AACrB,eAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAKC,WAAL,CAAiBC,QAAjB,CAA0BC,MAAtD,EAA8DH,KAAK,EAAnE,EAAuE;AACnE,kBAAMI,CAAC,GAAG,KAAKH,WAAL,CAAiBC,QAAjB,CAA0BF,KAA1B,CAAV;AACA,iBAAKF,KAAL,CAAWO,IAAX,CAAgBD,CAAC,CAACE,YAAF;AAAA;AAAA,uDAAhB;AACH;AACJ;;AAEDC,QAAAA,OAAO,CAACC,OAAO,GAAG,KAAX,EAAkB;AACrB,cAAIC,IAAI,GAAG;AAAA;AAAA,8CAAcC,GAAd,CAAkBC,YAAlB,EAAX;;AAEA,eAAK,IAAIX,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAKF,KAAL,CAAWK,MAAvC,EAA+CH,KAAK,EAApD,EAAwD;AACpD,gBAAIY,IAAI,GAAG,KAAKd,KAAL,CAAWE,KAAX,CAAX;AACA,gBAAIa,IAAI,GAAGJ,IAAI,CAACT,KAAD,CAAf;AACAY,YAAAA,IAAI,CAACE,OAAL,CAAaD,IAAb,EAAmBL,OAAnB;AACH;AACJ;;AACDO,QAAAA,QAAQ,CAACC,KAAD,EAAyBR,OAAO,GAAG,KAAnC,EAA0C;AAC9C,eAAK,IAAIR,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAKF,KAAL,CAAWK,MAAvC,EAA+CH,KAAK,EAApD,EAAwD;AACpD,gBAAIY,IAAI,GAAG,KAAKd,KAAL,CAAWE,KAAX,CAAX;AACA,gBAAIa,IAAI,GAAGG,KAAK,CAAChB,KAAD,CAAhB;AACAY,YAAAA,IAAI,CAACE,OAAL,CAAaD,IAAb,EAAmBL,OAAnB;AACAI,YAAAA,IAAI,CAACK,WAAL,CAAkBC,IAAD,IAAyB;AACtC;AAAA;AAAA,sDAAgBR,GAAhB,CAAoBS,eAApB,CAAoCD,IAAI,CAACE,MAAzC;AACA;AAAA;AAAA,kCAAMV,GAAN,CAAUW,IAAV,CAAe;AAAEC,gBAAAA,QAAQ,EAAE;AAAA;AAAA,0CAASC,WAArB;AAAkCC,gBAAAA,IAAI,EAAE;AAAEC,kBAAAA,QAAQ,EAAE;AAAZ,iBAAxC;AAAyDC,gBAAAA,MAAM,EAAE;AAAjE,eAAf;AACH,aAHD;AAIH;AACJ;;AAhCwC,O;;;;;iBAErB,I","sourcesContent":["import { _decorator, Component, Node, Prefab } from \"cc\";\nimport { FightRoleTeamItem } from \"./FightRoleTeamItem\";\nimport { FightRootControl } from \"../../FightRootControl\";\nimport { PlayerControl } from \"../../base/obj/role/role/PlayerControl\";\nimport { HeroFightInfo } from \"../../data/HeroFightInfo\";\nimport { ViewName } from \"../../../define/ViewDefine\";\nimport { UIMgr } from \"../../../mgr/UIMgr\";\nimport { HeroDataControl } from \"../../../model/hero/herobag/HeroDataControl\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('FightRoleTeam')\nexport class FightRoleTeam extends Component {\n    @property(Node)\n    team_layout: Node = null\n\n    items: FightRoleTeamItem[] = [];\n\n    protected onLoad(): void {\n        for (let index = 0; index < this.team_layout.children.length; index++) {\n            const v = this.team_layout.children[index];\n            this.items.push(v.getComponent(FightRoleTeamItem));\n        }\n    }\n\n    refresh(isTouch = false) {\n        let list = PlayerControl.ins.getIntoHeros()\n\n        for (let index = 0; index < this.items.length; index++) {\n            let head = this.items[index];\n            let role = list[index];\n            head.setData(role, isTouch)\n        }\n    }\n    setHeros(heros: HeroFightInfo[], isTouch = false) {\n        for (let index = 0; index < this.items.length; index++) {\n            let head = this.items[index];\n            let role = heros[index];\n            head.setData(role, isTouch)\n            head.setCallback((hero: HeroFightInfo) => {\n                HeroDataControl.ins.refreshBookData(hero.itemId);\n                UIMgr.ins.show({ viewName: ViewName.HeroBagView, data: { viewType: 2 }, zIndex: 300 })\n            })\n        }\n    }\n\n\n\n\n}"]}