{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/prestige/PrestigePop.ts"],"names":["_decorator","Button","instantiate","Node","Prefab","ScrollView","Sprite","UITransform","Vec2","ViewPop","PrestigeControl","EventMgr","proto","PrestigeData","tab","TaskInfo","PrestigeTaskCaseItem","PrestigeBarItem","ShowTips","UIMgr","ViewName","PrestigeAttributeItem","GuideController","LocalEvent","LangMgr","ccclass","property","PrestigePop","currLevel","taskItems","titleItems","attrItems","currSelectItem","currTable","scrollViewW","isCanUpLevel","onTouchTitleItem","titleItem","setSelectState","setScrollPos","table","Level","updateTaskView","initAttrView","register","onMsg","Ptl","GetQuestLogsRsp","on_s2c_GetQuestLogsRsp","ReceiveQuestLogRewardRsp","on_s2c_ReceiveQuestLogRsp","UpQuestLogLevelRsp","on_s2c_UpQuestLogLevelRsp","TaskChangePush","on_s2c_TaskChangePush","ins","request","onShow","isGuiding","emitLocal","ShowPop","close","checkMainView","initView","level","titleScrollView","getComponent","contentSize","width","updateTilteView","scheduleOnce","key","node","active","aTypes","QuestLogAttrType","type","value","QuestLogAttrValue","item","getAttrItem","Number","initDate","getData","QuestLogTableByLevel","getValue","isCanLevel","TaskIds","info","getTaskInfoByTableId","id","taskTabId","isUnLock","isReceived","progress","taskTable","FinishParam1","getTaskItem","initData","redLvUp","lvUpBtn","grayscale","maxLevel","QuestLogTable","length","interactable","tables","ShowLv","i","getTitleItem","valeu","index","taskPrefab","parent","taskNode","name","push","titlePrefab","content","setTouchCallBack","attrPrefab","attributeNode","pos","getPosition","scrollToOffset","x","msg","error","code","CommonErrorCode","Succeed","show","viewName","CongratulationPop","data","rewards","onClickUpLevel","requestUpQuestLogLevel","getLab"],"mappings":"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","sourcesContent":["import { _decorator, Button, Component, instantiate, log, Node, Prefab, ScrollView, Sprite, UITransform, v2, Vec2, Vec3 } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { PrestigeControl } from './PrestigeControl';\r\nimport { EventMgr } from '../../mgr/EventMgr';\r\nimport { proto } from 'client_protocol';\r\nimport { PrestigeData } from './PrestigeData';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { TaskInfo } from '../task/TaskInfo';\r\nimport { PrestigeTaskCaseItem } from './PrestigeTaskCaseItem';\r\nimport { PrestigeBarItem } from './PrestigeBarItem';\r\nimport { ShowTips, UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { PrestigeAttributeItem } from './PrestigeAttributeItem';\r\nimport { GuideController } from '../../guide/GuideController';\r\nimport { LocalEvent } from '../../define/LocalEvent';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * PrestigePop\r\n * zhudingchao\r\n * Thu Jun 06 2024 09:47:06 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/prestige/PrestigePop.ts\r\n *\r\n */\r\n\r\n@ccclass('PrestigePop')\r\nexport class PrestigePop extends ViewPop {\r\n    @property(Node)\r\n    attributeNode: Node = null;\r\n    @property(Node)\r\n    rewardNode: Node = null;\r\n    @property(ScrollView)\r\n    titleScrollView: ScrollView = null;\r\n    @property(Node)\r\n    taskNode: Node = null;\r\n    @property(Button)\r\n    lvUpBtn: Button = null;\r\n    @property(Prefab)\r\n    titlePrefab: Prefab = null;\r\n    @property(Prefab)\r\n    attrPrefab: Prefab = null;\r\n    @property(Prefab)\r\n    taskPrefab: Prefab = null;\r\n    @property(Prefab)\r\n    rewardPrefab: Prefab = null;\r\n    @property(Node)\r\n    redLvUp:Node = null;\r\n    private currLevel = 0;\r\n    private taskItems: Array<PrestigeTaskCaseItem>;\r\n    private titleItems: Array<PrestigeBarItem>;\r\n    private attrItems:Array<PrestigeAttributeItem>;\r\n    private currSelectItem: PrestigeBarItem;\r\n    private currTable: tab.QuestLogTable;\r\n    private scrollViewW: number = 0;\r\n    private isCanUpLevel: boolean = false;\r\n    register(): void {\r\n        EventMgr.onMsg(proto.Ptl.GetQuestLogsRsp, this.on_s2c_GetQuestLogsRsp, this);\r\n        EventMgr.onMsg(proto.Ptl.ReceiveQuestLogRewardRsp, this.on_s2c_ReceiveQuestLogRsp, this);\r\n        EventMgr.onMsg(proto.Ptl.UpQuestLogLevelRsp, this.on_s2c_UpQuestLogLevelRsp, this);\r\n        EventMgr.onMsg(proto.Ptl.TaskChangePush, this.on_s2c_TaskChangePush, this);\r\n        PrestigeControl.ins.request();\r\n    }\r\n    onShow(): void {\r\n        if(GuideController.ins.isGuiding()){\r\n            EventMgr.emitLocal(LocalEvent.ShowPop);\r\n        }\r\n    }\r\n    close(): void {\r\n        super.close();\r\n        if(GuideController.ins.isGuiding()){\r\n            EventMgr.emitLocal(LocalEvent.checkMainView);\r\n        }\r\n    }\r\n    initView() {\r\n        // let task=this\r\n        this.currLevel = PrestigeData.ins.level;\r\n        this.scrollViewW = this.titleScrollView.getComponent(UITransform).contentSize.width / 2;\r\n        this.updateTaskView();\r\n        this.updateTilteView();\r\n        this.currSelectItem = this.titleItems[2 + this.currLevel - 1];\r\n        this.currSelectItem.setSelectState(true);\r\n        this.initAttrView();\r\n        this.scheduleOnce(() => {\r\n            this.setScrollPos();\r\n        })\r\n\r\n    }\r\n    initAttrView(){\r\n        if(this.currTable){\r\n                if(this.attrItems){\r\n                    for(let key in this.attrItems){\r\n                        this.attrItems[key].node.active=false;\r\n                    }\r\n                }\r\n                let aTypes=this.currTable.QuestLogAttrType;\r\n                for(let key in aTypes){\r\n                    let type=aTypes[key];\r\n                    if(type!=0){\r\n                        let value=this.currTable.QuestLogAttrValue[key];\r\n                        let item=this.getAttrItem(Number(key));\r\n                        item.node.active=true;\r\n                        item.initDate(type,value);\r\n                    }\r\n                  \r\n                }\r\n            \r\n        }\r\n\r\n\r\n    }\r\n    updateTaskView() {\r\n        this.currTable = tab.getData().QuestLogTableByLevel.getValue(this.currLevel);\r\n        let level = PrestigeData.ins.level;\r\n        let isCanLevel = true;\r\n        if (this.currTable) {\r\n            for (let key in this.currTable.TaskIds) {\r\n                let info = PrestigeData.ins.getTaskInfoByTableId(this.currTable.TaskIds[key]);\r\n                if (!info) {\r\n                    info = new TaskInfo()\r\n                    info.id = 0;\r\n                    info.taskTabId = this.currTable.TaskIds[key];\r\n                }\r\n                info.isUnLock = this.currTable.Level <= level;\r\n                if (this.currTable.Level < level) {\r\n                    info.isReceived = true;\r\n                    info.progress = info.taskTable.FinishParam1;\r\n                }\r\n                let item = this.getTaskItem(Number(key));\r\n                item.initData(info);\r\n                if (this.currTable.Level == level) {\r\n                    if (isCanLevel) {\r\n                        isCanLevel = info.isReceived;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            isCanLevel = false;\r\n        }\r\n        this.isCanUpLevel = isCanLevel&&this.currTable.Level == level;\r\n        this.redLvUp.active = this.isCanUpLevel;\r\n        this.lvUpBtn.node.getComponent(Sprite).grayscale = !this.isCanUpLevel;\r\n        const maxLevel = tab.getData().QuestLogTable[tab.getData().QuestLogTable.length-1].Level\r\n        if(PrestigeData.ins.level>=maxLevel){\r\n            this.lvUpBtn.node.getComponent(Sprite).grayscale =true;\r\n            this.lvUpBtn.interactable = false;\r\n            this.redLvUp.active = false;\r\n        }\r\n    }\r\n    updateTilteView() {\r\n        let tables = tab.getData().QuestLogTable;\r\n        let level = PrestigeData.ins.level;\r\n        let maxLevel = this.currTable.ShowLv;\r\n        for (let i = 0; i < 2; i++) {\r\n            let item = this.getTitleItem(i);\r\n            item.initData(true, 1, null);\r\n        }\r\n        for (let i: number = 0; i < maxLevel; i++) {\r\n            let item = this.getTitleItem(2 + i);\r\n            let isUnLock = level >= tables[i].Level;\r\n            let valeu = 0;\r\n            if (level > tables[i].Level) {\r\n                valeu = 1;\r\n            } else if (level == tables[i].Level) {\r\n                valeu = 0.5;\r\n            }\r\n            item.initData(isUnLock, valeu, tables[i]);\r\n        }\r\n        for (let i = maxLevel; i < maxLevel + 2; i++) {\r\n            let item = this.getTitleItem(i + 2);\r\n            item.initData(false, 0, null);\r\n        }\r\n    }\r\n\r\n    private getTaskItem(index: number) {\r\n        if (!this.taskItems) {\r\n            this.taskItems = [];\r\n        }\r\n        if (!this.taskItems[index]) {\r\n            let node = instantiate(this.taskPrefab);\r\n            node.parent = this.taskNode;\r\n            node.name = \"PrestigeTaskCaseItem\"+index;\r\n            this.taskItems.push(node.getComponent(PrestigeTaskCaseItem));\r\n        }\r\n        return this.taskItems[index];\r\n    }\r\n    getTitleItem(index: number) {\r\n        if (!this.titleItems) {\r\n            this.titleItems = [];\r\n        }\r\n        if (!this.titleItems[index]) {\r\n            let node = instantiate(this.titlePrefab);\r\n            node.parent = this.titleScrollView.content;\r\n            this.titleItems.push(node.getComponent(PrestigeBarItem));\r\n            this.titleItems[index].setTouchCallBack(this.onTouchTitleItem);\r\n\r\n        }\r\n        return this.titleItems[index];\r\n    }\r\n    getAttrItem(index: number) {\r\n        if (!this.attrItems) {\r\n            this.attrItems = [];\r\n        }\r\n        if (!this.attrItems[index]) {\r\n            let node = instantiate(this.attrPrefab);\r\n            node.parent = this.attributeNode;\r\n            this.attrItems.push(node.getComponent(PrestigeAttributeItem));\r\n        }\r\n        return this.attrItems[index];\r\n    }\r\n    onTouchTitleItem = (titleItem: PrestigeBarItem) => {\r\n        if (this.currSelectItem != titleItem) {\r\n            if (this.currSelectItem) {\r\n                this.currSelectItem.setSelectState(false);\r\n            }\r\n            this.currSelectItem = titleItem;\r\n            this.currSelectItem.setSelectState(true);\r\n            // this.scheduleOnce(()=>{\r\n            this.setScrollPos();\r\n            // })\r\n            this.currLevel = titleItem.table.Level;\r\n            this.updateTaskView();\r\n            this.initAttrView();\r\n\r\n        }\r\n\r\n    }\r\n    setScrollPos() {\r\n        let pos = this.currSelectItem.node.getPosition();\r\n        this.titleScrollView.scrollToOffset(new Vec2(pos.x - this.scrollViewW, 0), 0.1);\r\n    }\r\n\r\n    on_s2c_GetQuestLogsRsp(msg: proto.Msg_GetQuestLogsRsp) {\r\n        this.initView();\r\n    }\r\n    on_s2c_ReceiveQuestLogRsp(msg: proto.Msg_ReceiveQuestLogRewardRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            this.initView();\r\n            UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: msg.rewards })\r\n        }\r\n    }\r\n    on_s2c_UpQuestLogLevelRsp(msg: proto.Msg_UpQuestLogLevelRsp) {\r\n        if (!msg.error || msg.error.code == proto.CommonErrorCode.Succeed) {\r\n            this.initView();\r\n        }\r\n    }\r\n    on_s2c_TaskChangePush(msg: proto.Msg_TaskChangePush) {\r\n        this.updateTaskView();\r\n        // TaskData.ins.updateTask(msg);\r\n    }\r\n\r\n    onClickUpLevel() {\r\n        if (this.isCanUpLevel) {\r\n            PrestigeControl.ins.requestUpQuestLogLevel();\r\n        } else {\r\n            //ShowTips(\"未达到晋升条件\")\r\n           ShowTips(LangMgr.getLab(\"Tips_prestige_1\"))\r\n        }\r\n\r\n    }\r\n}"]}