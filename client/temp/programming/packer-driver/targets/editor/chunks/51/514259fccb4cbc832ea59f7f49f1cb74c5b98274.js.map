{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/rank/RankToggleItem.ts"],"names":["_decorator","Component","Label","Node","Toggle","EventMgr","LocalEvent","RANKING_TYPE","LangMgr","ccclass","property","RankToggleItem","_toggle_type","NONE","_clickChildType","setData","type","node","name","String","nameLblArr","getLab","HERO","lbl_toggle_name","string","GUILD","Fight","node_arrow","active","onClickCheck","e","getComponent","isChecked","Number","node_toggle","children","onCheckChild","heroItem","parent","getChildByName","emitLocal","Rank_Change","event","index"],"mappings":"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","sourcesContent":["/*\r\n * @Date: 2024-06-13 09:54:30\r\n * @LastEditors: wzq\r\n * @LastEditTime: 2024-11-13 10:19:29\r\n */\r\n\r\nimport { _decorator, Component, EventTouch, Label, Node, Toggle } from 'cc';\r\nimport { EventMgr } from '../../mgr/EventMgr';\r\nimport { LocalEvent } from '../../define/LocalEvent';\r\nimport { RANKING_TYPE } from '../../../Common/script/EnumTypeMgr';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RankToggleItem')\r\nexport class RankToggleItem extends Component {\r\n    @property(Node)\r\n    node_toggle: Node = null;\r\n    @property(Label)\r\n    lbl_toggle_name: Label = null;\r\n    @property(Node)\r\n    node_arrow: Node = null;\r\n    private _toggle_type: RANKING_TYPE = RANKING_TYPE.NONE\r\n    private _clickChildType: number = 0;\r\n\r\n    setData(type) {\r\n        this.node.name = String(type);\r\n        this._toggle_type = type;\r\n        //const nameLblArr = [\"闯关榜\",\"等级榜\",\"战力榜\"];\r\n        const nameLblArr = [LangMgr.getLab(\"ui_rank_4\"), LangMgr.getLab(\"ui_rank_5\"), LangMgr.getLab(\"ui_rank_6\"), LangMgr.getLab(\"ui_rank_8\")]\r\n        if (this._toggle_type === RANKING_TYPE.HERO) {\r\n            //this.lbl_toggle_name.string = \"英雄榜\"\r\n            this.lbl_toggle_name.string = LangMgr.getLab(\"ui_rank_3\");\r\n        }else if(this._toggle_type === RANKING_TYPE.GUILD){\r\n            this.lbl_toggle_name.string = LangMgr.getLab(\"ui_rank_9\");\r\n        }else if (this._toggle_type == RANKING_TYPE.Fight){\r\n            this.lbl_toggle_name.string = LangMgr.getLab(\"ui_rank_10\");\r\n        } else {\r\n            this.lbl_toggle_name.string = nameLblArr[type - 6];\r\n        }\r\n        this.node_arrow.active = false;\r\n    }\r\n    onClickCheck(e:EventTouch,type:string) {\r\n        this.node_arrow.active = false;\r\n        this.node.getComponent(Toggle).isChecked = true;\r\n        if (type) {\r\n            this._toggle_type = Number(type);\r\n        }\r\n        if (this._toggle_type === RANKING_TYPE.HERO) {\r\n            this._clickChildType = 0;\r\n            if (this.node_toggle.active) {\r\n                this.node_toggle.active = false;\r\n                this.node_arrow.active = true;\r\n                this.node_arrow.children[0].active = false;\r\n                this.node_arrow.children[1].active = true;\r\n            } else {\r\n                this.node_toggle.active = true;\r\n                this.node_arrow.active = true;\r\n                this.node_arrow.children[0].active = true;\r\n                this.node_arrow.children[1].active = false;\r\n                this.node_toggle.children[0].getComponent(Toggle).isChecked = true;\r\n                this.onCheckChild(null, \"1\");\r\n            }\r\n        } else {\r\n            const heroItem = this.node.parent.getChildByName(String(RANKING_TYPE.HERO)).getComponent(RankToggleItem)\r\n            heroItem.node_toggle.active = false;\r\n            heroItem.node_arrow.active = true;\r\n            heroItem.node_arrow.children[0].active = false;\r\n            heroItem.node_arrow.children[1].active = true;\r\n            EventMgr.emitLocal(LocalEvent.Rank_Change, Number(this._toggle_type));\r\n        }\r\n    }\r\n    onCheckChild(event: EventTouch, index: string) {\r\n        if (this._clickChildType !== Number(index)) {\r\n            this._clickChildType = Number(index)\r\n        } else {\r\n            return;\r\n        }\r\n        EventMgr.emitLocal(LocalEvent.Rank_Change, Number(index));\r\n    }\r\n}\r\n\r\n\r\n"]}