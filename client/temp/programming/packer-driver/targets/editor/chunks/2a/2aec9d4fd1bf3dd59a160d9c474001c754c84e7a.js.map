{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/association/AssociationChangeInfoPop.ts"],"names":["_decorator","Color","EditBox","Label","Sprite","ViewPop","AssociationData","tab","RoleData","ShowItemNotEnoughTips","UIMgr","ViewName","AssociationControl","ccclass","property","AssociationChangeInfoPop","curSelectFlagId","onShow","edit_box_change_name","string","ins","getAssocitionSimpleInfo","name","flagId","lbl_cost_diamond","String","getData","GetKeyValue_ConfigTable","GuildChangeNameCost","diamond","color","fromHEX","InterfaceTxtRed","refreshFlagId","onDestroy","register","unRegister","flagtab","GuildFlagTableById","getValue","sp_flag_img","setTexture","IconUrl","onClickChangeInfo","length","console","log","reqSetGuildNameAndFlag","onClose","onClickChangeFlagId","show","viewName","AssociationChangeFlagPop"],"mappings":"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","sourcesContent":["import { _decorator, Color, Component, EditBox, Label, Node, Sprite } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { AssociationData } from './AssociationData';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { RoleData } from '../role/RoleData';\r\nimport { ShowItemNotEnoughTips, UIMgr } from '../../mgr/UIMgr';\r\nimport { ViewName } from '../../define/ViewDefine';\r\nimport { AssociationControl } from './AssociationControl';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AssociationChangeInfoPop')\r\nexport class AssociationChangeInfoPop extends ViewPop {\r\n    @property(Sprite)\r\n    sp_flag_img: Sprite = null;\r\n    @property(EditBox)\r\n    edit_box_change_name:EditBox = null;//更改公会的名字\r\n    @property(Label)\r\n    lbl_cost_diamond: Label = null;\r\n    public curSelectFlagId: number = 0;\r\n    onShow(): void {\r\n        this.edit_box_change_name.string = AssociationData.ins.getAssocitionSimpleInfo().name;\r\n        this.curSelectFlagId = AssociationData.ins.getAssocitionSimpleInfo().flagId ? AssociationData.ins.getAssocitionSimpleInfo().flagId : 1;\r\n        this.lbl_cost_diamond.string = String(tab.getData().GetKeyValue_ConfigTable().GuildChangeNameCost);\r\n        if (RoleData.ins.diamond < tab.getData().GetKeyValue_ConfigTable().GuildChangeNameCost) {\r\n            this.lbl_cost_diamond.color = new Color().fromHEX(tab.getData().GetKeyValue_ConfigTable().InterfaceTxtRed);\r\n        }else{\r\n            this.lbl_cost_diamond.color = new Color().fromHEX(\"ffffff\");\r\n        }\r\n        this.refreshFlagId();\r\n    }\r\n    protected onDestroy(): void {\r\n        super.onDestroy();\r\n    }\r\n    register(): void {\r\n\r\n    }\r\n    unRegister(): void {\r\n        super.unRegister();\r\n    }\r\n    refreshFlagId() {\r\n        const flagtab = tab.getData().GuildFlagTableById.getValue(this.curSelectFlagId);\r\n        this.sp_flag_img.setTexture(flagtab.IconUrl);\r\n    }\r\n    /* 更换旗帜跟公会名字 */\r\n    onClickChangeInfo() {\r\n        if (RoleData.ins.diamond < tab.getData().GetKeyValue_ConfigTable().GuildChangeNameCost) {\r\n            ShowItemNotEnoughTips(1);\r\n            return;\r\n        }\r\n        if (this.edit_box_change_name.string.length === 0) {\r\n            console.log(\"更改信息名字不能为空\")\r\n            return;\r\n        }\r\n        AssociationControl.ins.reqSetGuildNameAndFlag(this.edit_box_change_name.string, this.curSelectFlagId);\r\n        this.onClose();\r\n    }\r\n    /* 点击更换旗帜 */\r\n    onClickChangeFlagId() {\r\n        UIMgr.ins.show({ viewName: ViewName.AssociationChangeFlagPop })\r\n    }\r\n}\r\n\r\n\r\n"]}