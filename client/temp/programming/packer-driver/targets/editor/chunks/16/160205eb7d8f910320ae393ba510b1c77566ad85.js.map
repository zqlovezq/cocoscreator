{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/home/battle/BattleMainEliteControl.ts"],"names":["_decorator","AbsControl","EventMgr","proto","UIMgr","ViewName","Net","BattleMainEliteData","ccclass","property","BattleMainEliteControl","ins","_instance","register","onMsg","Ptl","GetEliteStageInfoRsp","on_s2c_GetEliteStageInfoRsp","ReceiveEliteClearStageRewardsRsp","on_s2c_ReceiveEliteClearStageRewardsRsp","reqReceiveEliteClearStageRewards","stageId","msg","Msg_ReceiveEliteClearStageRewardsReq","Send","ReceiveEliteClearStageRewardsReq","initData","error","code","CommonErrorCode","Succeed","rewards","show","viewName","CongratulationPop","data"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,K,oBAAAA,K;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,mB,iBAAAA,mB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;wCAGjBU,sB,WADZF,OAAO,CAAC,wBAAD,C,2BAAR,MACaE,sBADb;AAAA;AAAA,oCACuD;AAE9B,mBAAHC,GAAG,GAAG;AACpB,cAAI,QAAQ,KAAKC,SAAjB,EAA4B;AACxB,iBAAKA,SAAL,GAAiB,IAAIF,sBAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKE,SAAZ;AACH;;AACDC,QAAAA,QAAQ,GAAS;AACb;AAAA;AAAA,oCAASC,KAAT,CAAe;AAAA;AAAA,8BAAMC,GAAN,CAAUC,oBAAzB,EAA+C,KAAKC,2BAApD,EAAiF,IAAjF;AACA;AAAA;AAAA,oCAASH,KAAT,CAAe;AAAA;AAAA,8BAAMC,GAAN,CAAUG,gCAAzB,EAA2D,KAAKC,uCAAhE,EAAyG,IAAzG;AACH;;AACDC,QAAAA,gCAAgC,CAACC,OAAD,EAAgB;AAC5C,cAAIC,GAAG,GAAG,IAAI;AAAA;AAAA,8BAAMC,oCAAV,EAAV;AACAD,UAAAA,GAAG,CAACD,OAAJ,GAAcA,OAAd;AACA;AAAA;AAAA,0BAAIG,IAAJ,CAAS;AAAA;AAAA,8BAAMT,GAAN,CAAUU,gCAAnB,EAAqDH,GAArD;AACH;;AACDL,QAAAA,2BAA2B,CAACK,GAAD,EAAqC;AAC5D;AACA;AAAA;AAAA,0DAAoBX,GAApB,CAAwBe,QAAxB,CAAiCJ,GAAjC;AACH;;AACDH,QAAAA,uCAAuC,CAACG,GAAD,EAAiD;AACpF,cAAIA,GAAG,CAACK,KAAJ,IAAaL,GAAG,CAACK,KAAJ,CAAUC,IAAV,IAAkB;AAAA;AAAA,8BAAMC,eAAN,CAAsBC,OAAzD,EAAkE;;AAClE,cAAIR,GAAG,CAACS,OAAR,EAAiB;AACb;AAAA;AAAA,gCAAMpB,GAAN,CAAUqB,IAAV,CAAe;AAAEC,cAAAA,QAAQ,EAAE;AAAA;AAAA,wCAASC,iBAArB;AAAwCC,cAAAA,IAAI,EAAEb,GAAG,CAACS;AAAlD,aAAf;AACH;AAEJ;;AA3BkD,O,UACpCnB,S","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { AbsControl } from '../../../../framework/base/IAbs';\r\nimport { EventMgr } from '../../../mgr/EventMgr';\r\nimport { proto } from 'client_protocol';\r\nimport { UIMgr } from '../../../mgr/UIMgr';\r\nimport { ViewName } from '../../../define/ViewDefine';\r\nimport { Net } from '../../../net/Net';\r\nimport { BattleMainEliteData } from './BattleMainEliteData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BattleMainEliteControl')\r\nexport class BattleMainEliteControl extends AbsControl {\r\n    private static _instance: BattleMainEliteControl;\r\n    public static get ins() {\r\n        if (null == this._instance) {\r\n            this._instance = new BattleMainEliteControl();\r\n        }\r\n        return this._instance;\r\n    }\r\n    register(): void {\r\n        EventMgr.onMsg(proto.Ptl.GetEliteStageInfoRsp, this.on_s2c_GetEliteStageInfoRsp, this);\r\n        EventMgr.onMsg(proto.Ptl.ReceiveEliteClearStageRewardsRsp, this.on_s2c_ReceiveEliteClearStageRewardsRsp, this);\r\n    }\r\n    reqReceiveEliteClearStageRewards(stageId:number){\r\n        let msg = new proto.Msg_ReceiveEliteClearStageRewardsReq ();\r\n        msg.stageId = stageId;\r\n        Net.Send(proto.Ptl.ReceiveEliteClearStageRewardsReq, msg);\r\n    }\r\n    on_s2c_GetEliteStageInfoRsp(msg: proto.Msg_GetEliteStageInfoRsp){\r\n        // 初始化精英关卡信息\r\n        BattleMainEliteData.ins.initData(msg);\r\n    }\r\n    on_s2c_ReceiveEliteClearStageRewardsRsp(msg: proto.Msg_ReceiveEliteClearStageRewardsRsp){\r\n        if (msg.error && msg.error.code != proto.CommonErrorCode.Succeed) return;\r\n        if (msg.rewards) {\r\n            UIMgr.ins.show({ viewName: ViewName.CongratulationPop, data: msg.rewards })\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}