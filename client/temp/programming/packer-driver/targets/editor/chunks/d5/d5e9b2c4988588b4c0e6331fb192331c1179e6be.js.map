{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/view/rogue/RogueInfo.ts"],"names":["_decorator","tab","RareBookData","ccclass","property","Math_RATIO","RogueInfo","constructor","itemId","Id","skillPowers","_config","backCount","heroItemId","isHeroLevel","level","skills","skillGroup","rogueTab","getData","RogueTableById","getValue","console","error","Level","addCount","ifFullId","GetKeyValue_ConfigTable","RogueFullBackupOption","isRemove","Backlimit","setParentPowers","powers","Skill","index","length","element","push","createTypeAnyId","PowerType","PowerType_SkillTable","BookId","bookInfo","ins","getBookInfoByItemId","bookStarTable","SkillId","SkillGroup","PowerType_SkillGroupTable"],"mappings":"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","sourcesContent":["import { _decorator, Component } from \"cc\";\nimport { tab } from \"../../../../Table/table_gen\";\nimport { SkillPowers } from \"../../power/SkillPowers\";\nimport { SkillTab } from \"../../power/powerTab/SkillTab\";\nimport { SkillGroupTab } from \"../../power/powerTab/SkillGroupTab\";\nimport { RareBookData } from \"../../../model/rareBook/RareBookData\";\n\nconst { ccclass, property } = _decorator;\nconst Math_RATIO = 10000;\n\n@ccclass('RogueInfo')\nexport class RogueInfo {\n    Id: number\n    skillPowers: SkillPowers //增强存储\n\n\n\n    private _config: tab.RogueTable\n\n    /** 放回次数 */\n    backCount: number = 0\n    heroItemId: number = 0\n    /** 是否升级 ToDo英雄通过属性直接升级 */\n    isHeroLevel: boolean = false\n    level: number = 0\n\n    skills: SkillTab[] = []\n    skillGroup: SkillGroupTab = null\n    constructor(itemId: number) {\n        this.Id = itemId\n        this.rogueTab\n    }\n\n    get rogueTab() {\n        if (this._config == null) {\n            this._config = tab.getData().RogueTableById.getValue(this.Id)\n            if (this._config == null) {\n                console.error(\"未找到rogueid\", this.Id)\n            }\n            if (this.heroItemId != 0) {\n                this.level = this._config.Level\n            }\n        }\n        return this._config\n    }\n\n    addCount() {\n        this.backCount += 1\n    }\n\n    ifFullId(){\n        return this.Id == tab.getData().GetKeyValue_ConfigTable().RogueFullBackupOption\n    }\n\n    isRemove() {\n        if (this.rogueTab.Backlimit == 0){\n            return this.backCount > this.rogueTab.Backlimit\n        }\n        return this.backCount >= this.rogueTab.Backlimit\n    }\n\n    setParentPowers(powers: SkillPowers) {\n        this.skillPowers = powers\n        if (powers) {\n            if (this.rogueTab.Skill) {\n                for (let index = 0; index < this.rogueTab.Skill.length; index++) {\n                    const element = this.rogueTab.Skill[index];\n                    this.skills.push(this.skillPowers.createTypeAnyId(tab.PowerType.PowerType_SkillTable, this.rogueTab.Skill[index]) as SkillTab)\n                }\n            }\n            if (this.rogueTab.BookId) {\n                let bookInfo = RareBookData.ins.getBookInfoByItemId(this.rogueTab.BookId)\n                if (bookInfo.bookStarTable.SkillId) {\n                    for (let index = 0; index < bookInfo.bookStarTable.SkillId.length; index++) {\n                        this.skills.push(this.skillPowers.createTypeAnyId(tab.PowerType.PowerType_SkillTable, bookInfo.bookStarTable.SkillId[index]) as SkillTab)\n                    }\n                }\n            }\n\n\n            if (this.rogueTab.SkillGroup) {\n                this.skillGroup = this.skillPowers.createTypeAnyId(tab.PowerType.PowerType_SkillGroupTable, this.rogueTab.SkillGroup) as SkillGroupTab\n            }\n        }\n    }\n}"]}