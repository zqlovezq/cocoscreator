{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/base/obj/role/role/state/RoleState7SkillCd.ts"],"names":["RoleState7SkillCd","AbsRoleState","AbsStateType","tab","constructor","RoleSkillCd","abs","enter","info","checkRemoveBuff","ClearType","ClearType_Breath","inSkillGroupCD","AttackType","AttackType_Attack","onCdEnd","bind","onSkillTrigger","Triggertype","Triggertype_BreathStart","updateCd","updateFrame","delteTime","normalGroupCD","getProgress","leave","avatarPlayComplete","animName","normalFillUp","Triggertype_BreathEnd","per","isRole","updateSkillCd"],"mappings":";;;+DAWaA,iB;;;;;;;;;;;;;;;;;;;;;;;;;;AATJC,MAAAA,Y,iBAAAA,Y;AAAwBC,MAAAA,Y,iBAAAA,Y;;AAKxBC,MAAAA,G,iBAAAA,G;;;;;;;mCAIIH,iB,GAAN,MAAMA,iBAAN;AAAA;AAAA,wCAA6C;AAEhDI,QAAAA,WAAW,GAAG;AACV,gBAAM;AAAA;AAAA,4CAAaC,WAAnB;AADU,eADdC,GACc;AAEb;;AACDC,QAAAA,KAAK,GAAY;AACb,eAAKD,GAAL,CAASE,IAAT,CAAcC,eAAd,CAA8B;AAAA;AAAA,0BAAIC,SAAJ,CAAcC,gBAA5C;AAEA,eAAKL,GAAL,CAASE,IAAT,CAAcI,cAAd,CAA6B;AAAA;AAAA,0BAAIC,UAAJ,CAAeC,iBAA5C,EAA+D,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA/D;AAEA,eAAKV,GAAL,CAASE,IAAT,CAAcS,cAAd,CAA6B;AAAA;AAAA,0BAAIC,WAAJ,CAAgBC,uBAA7C;AACA,eAAKC,QAAL,CAAc,CAAd;AACA,iBAAO,MAAMb,KAAN,EAAP;AACH;;AACDc,QAAAA,WAAW,CAACC,SAAD,EAA0B;AACjC,eAAKhB,GAAL,CAASE,IAAT,CAAce,aAAd,CAA4BF,WAA5B,CAAwCC,SAAxC;AACA,eAAKF,QAAL,CAAc,KAAKd,GAAL,CAASE,IAAT,CAAce,aAAd,CAA4BC,WAA5B,EAAd;AACH;;AAEDC,QAAAA,KAAK,GAAS;AACV,eAAKL,QAAL,CAAc,CAAd;AAEH;;AAEDL,QAAAA,OAAO,GAAG;AACN,eAAKW,kBAAL,CAAwB,EAAxB;AACH;;AAEDA,QAAAA,kBAAkB,CAACC,QAAD,EAAmB;AACjC,eAAKrB,GAAL,CAASE,IAAT,CAAcoB,YAAd,GADiC,CACL;;AAC5B,eAAKtB,GAAL,CAASE,IAAT,CAAcS,cAAd,CAA6B;AAAA;AAAA,0BAAIC,WAAJ,CAAgBW,qBAA7C;AACA,gBAAMH,kBAAN,CAAyBC,QAAzB;AACH;;AAEDP,QAAAA,QAAQ,CAACU,GAAD,EAAc;AAClB,cAAI,KAAKxB,GAAL,CAASyB,MAAT,EAAJ,EAAuB;AACnB,iBAAKzB,GAAL,CAAS0B,aAAT,CAAuBF,GAAvB;AACH;AACJ;;AAtC+C,O","sourcesContent":["import { AbsObj } from \"../../../AbsObj\"\nimport { AbsRole } from \"../../AbsRole\"\nimport { AbsRoleState, AbsState, AbsStateType } from \"../../../state/AbsState\"\nimport { CDTime } from \"../../../../cd/CDTime\"\nimport { Role } from \"../Role\"\nimport { EventMgr } from \"../../../../../../mgr/EventMgr\"\nimport { FightEvent } from \"../../../../../define/FightEvent\"\nimport { tab } from \"../../../../../../../Table/table_gen\"\nimport { FightMacro } from \"../../../../../define/FightDefine\"\nimport { SkillGroupCd } from \"../../../../skill/SkillGroupCd\"\n\nexport class RoleState7SkillCd extends AbsRoleState {\n    abs: Role\n    constructor() {\n        super(AbsStateType.RoleSkillCd)\n    }\n    enter(): boolean {\n        this.abs.info.checkRemoveBuff(tab.ClearType.ClearType_Breath)\n\n        this.abs.info.inSkillGroupCD(tab.AttackType.AttackType_Attack, this.onCdEnd.bind(this))\n\n        this.abs.info.onSkillTrigger(tab.Triggertype.Triggertype_BreathStart)\n        this.updateCd(0)\n        return super.enter()\n    }\n    updateFrame(delteTime: number): void {\n        this.abs.info.normalGroupCD.updateFrame(delteTime)\n        this.updateCd(this.abs.info.normalGroupCD.getProgress())\n    }\n\n    leave(): void {\n        this.updateCd(1)\n        \n    }\n\n    onCdEnd() {\n        this.avatarPlayComplete(\"\")\n    }\n\n    avatarPlayComplete(animName: string) {\n        this.abs.info.normalFillUp()//装填\n        this.abs.info.onSkillTrigger(tab.Triggertype.Triggertype_BreathEnd)\n        super.avatarPlayComplete(animName)\n    }\n\n    updateCd(per: number) {\n        if (this.abs.isRole()) {\n            this.abs.updateSkillCd(per)\n        }\n    }\n\n}"]}