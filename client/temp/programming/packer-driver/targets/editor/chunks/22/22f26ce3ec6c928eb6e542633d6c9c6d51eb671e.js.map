{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/mgr/EventMgr.ts"],"names":["EventMgr","_decorator","director","isValid","ccclass","property","EventType","emitMsg","ptl","buffer","emit","msg","emitLocal","message","arg1","arg2","arg3","arg4","arg5","local","String","emitFight","fight","emitNetState","netState","onMsg","callback","target","on","targetOff","call","onNetState","extraMsg","onLocal","once","onFight","unTarget","unMsg","off","unLocal","unFight"],"mappings":"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","sourcesContent":["import { Node, _decorator, director, isValid } from \"cc\";\nimport { LocalEvent, NetStateEvent } from \"../define/LocalEvent\";\nimport { FightEvent } from \"../fight/define/FightEvent\";\n\nconst { ccclass, property } = _decorator;\n\nenum EventType {\n    msg = \"msg_\",\n    netState = \"netState_\",\n    local = \"local_\",\n    fight = \"fight_\",\n}\n\nexport class EventMgr {\n\n    static emitMsg(ptl: number, buffer: any) {\n        director.emit(`${EventType.msg}${ptl}`, buffer, ptl);\n    }\n\n    public static emitLocal(message: LocalEvent, arg1?: any, arg2?: any, arg3?: any, arg4?: any, arg5?: any) {\n        director.emit(EventType.local + String(message), arg1, arg2, arg3, arg4, arg5);\n    }\n\n    public static emitFight(message: FightEvent, arg1?: any, arg2?: any, arg3?: any, arg4?: any, arg5?: any) {\n        director.emit(EventType.fight + String(message), arg1, arg2, arg3, arg4, arg5);\n    }\n\n    public static emitNetState(message: NetStateEvent, arg1?: any, arg2?: any, arg3?: any, arg4?: any, arg5?: any) {\n        director.emit(EventType.netState + String(message), arg1, arg2, arg3, arg4, arg5);\n    }\n\n    public static onMsg(ptl: number, callback: (buffer: any, ptl: number) => void, target: any) {\n        director.on(`${EventType.msg}${ptl}`, function (buffer: any, ptl: number) {\n            if (!isValid(target)) {\n                director.targetOff(target)\n                return;\n            }\n            callback.call(target, buffer, ptl);\n        }, target);\n    }\n\n    public static onNetState(extraMsg: NetStateEvent, callback: (extraMsg: NetStateEvent) => void, target: any) {\n        director.on(`${EventType.netState}${extraMsg}`, function (extraMsg: NetStateEvent) {\n            if (!isValid(target)) {\n                director.targetOff(target)\n                return;\n            }\n            callback.call(target, extraMsg);\n        }, target);\n    }\n    public static onLocal(message: LocalEvent, callback: (arg1?: any, arg2?: any, arg3?: any, arg4?: any, arg5?: any) => void, target: any, once = false) {\n        if (once) {\n            director.once(`${EventType.local}${message}`, callback, target)\n        } else {\n            director.on(`${EventType.local}${message}`, callback, target)\n        }\n    }\n\n    public static onFight(message: FightEvent, callback: (arg1?: any, arg2?: any, arg3?: any, arg4?: any, arg5?: any) => void, target: any, once = false) {\n        if (once) {\n            director.once(`${EventType.fight}${message}`, callback, target)\n        } else {\n            director.on(`${EventType.fight}${message}`, callback, target)\n        }\n    }\n\n    public static unTarget(target: any) {\n        director.targetOff(target)\n    }\n\n    public static unMsg(ptl: number, callback: any, target: any) {\n        director.off(`${EventType.msg}${ptl}`,callback, target)\n    }\n\n    public static unLocal(ptl: number, callback?: any, target?: any) {\n        director.off(`${EventType.local}${ptl}`, callback, target)\n    }\n\n    public static unFight(message: FightEvent, callback: any, target: any) {\n        director.off(`${EventType.fight}${message}`,callback, target)\n    }\n\n}"]}