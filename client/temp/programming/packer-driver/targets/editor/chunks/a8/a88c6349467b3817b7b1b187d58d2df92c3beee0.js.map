{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/fight/view/common/FightUITeamSkillItem.ts"],"names":["_decorator","Component","Label","Sprite","EventMgr","FightEvent","ccclass","property","FightUITeamSkillItem","skillGroup","onLoad","cdBar","fillRange","onFight","Fight_Skill_Cd_Progress","on_fight_Fight_Skill_Cd_Progress","Skill_Attack_Count_Change","on_fight_Skill_Attack_Count_Change","setSkill","spr","setTexture","Icon","updateCount","node","active","lab","string","getCanAttackCount","toString","skillGroupId","configId","progress"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;;AAC9BC,MAAAA,Q,iBAAAA,Q;;AAEAC,MAAAA,U,iBAAAA,U;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;sCAIjBQ,oB,WADZF,OAAO,CAAC,sBAAD,C,UAEHC,QAAQ,CAACJ,MAAD,C,UAGRI,QAAQ,CAACL,KAAD,C,UAGRK,QAAQ,CAACJ,MAAD,C,2BARb,MACaK,oBADb,SAC0CP,SAD1C,CACoD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAUhDQ,UAVgD;AAAA;;AAYtCC,QAAAA,MAAM,GAAS;AACrB,eAAKC,KAAL,CAAWC,SAAX,GAAuB,CAAvB;AACA;AAAA;AAAA,oCAASC,OAAT,CAAiB;AAAA;AAAA,wCAAWC,uBAA5B,EAAqD,KAAKC,gCAA1D,EAA4F,IAA5F;AACA;AAAA;AAAA,oCAASF,OAAT,CAAiB;AAAA;AAAA,wCAAWG,yBAA5B,EAAuD,KAAKC,kCAA5D,EAAgG,IAAhG;AACH;;AAEDC,QAAAA,QAAQ,CAACT,UAAD,EAA4B;AAChC,eAAKA,UAAL,GAAkBA,UAAlB;AACA,eAAKU,GAAL,CAASC,UAAT,CAAoB,KAAKX,UAAL,CAAgBY,IAApC;AACA,eAAKC,WAAL;AACA,eAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH;;AAEDF,QAAAA,WAAW,GAAG;AACV,eAAKG,GAAL,CAASC,MAAT,GAAkB,KAAKjB,UAAL,CAAgBkB,iBAAhB,GAAoCC,QAApC,EAAlB;AACH;;AAEDX,QAAAA,kCAAkC,CAACY,YAAD,EAAuB;AACrD,cAAI,KAAKpB,UAAL,IAAmB,KAAKA,UAAL,CAAgBqB,QAAhB,IAA4BD,YAAnD,EAAiE;AAC7D,iBAAKP,WAAL;AACH;AACJ;;AAEDP,QAAAA,gCAAgC,CAACc,YAAD,EAAuBE,QAAvB,EAAyC;AACrE,cAAI,KAAKtB,UAAL,IAAmB,KAAKA,UAAL,CAAgBqB,QAAhB,IAA4BD,YAAnD,EAAiE;AAC7D,iBAAKlB,KAAL,CAAWY,IAAX,CAAgBC,MAAhB,GAAyBO,QAAQ,IAAI,CAArC;AACA,iBAAKpB,KAAL,CAAWC,SAAX,GAAuB,IAAImB,QAA3B;AACH;AACJ;;AAxC+C,O;;;;;iBAElC,I;;;;;;;iBAGD,I;;;;;;;iBAGG,I","sourcesContent":["import { _decorator, Component, Label, Sprite } from \"cc\";\nimport { EventMgr } from \"../../../mgr/EventMgr\";\nimport { SkillGroupTab } from \"../../power/powerTab/SkillGroupTab\";\nimport { FightEvent } from \"../../define/FightEvent\";\n\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('FightUITeamSkillItem')\nexport class FightUITeamSkillItem extends Component {\n    @property(Sprite)\n    spr: Sprite = null\n\n    @property(Label)\n    lab: Label = null\n\n    @property(Sprite)\n    cdBar: Sprite = null\n\n    skillGroup: SkillGroupTab\n\n    protected onLoad(): void {\n        this.cdBar.fillRange = 0\n        EventMgr.onFight(FightEvent.Fight_Skill_Cd_Progress, this.on_fight_Fight_Skill_Cd_Progress, this)\n        EventMgr.onFight(FightEvent.Skill_Attack_Count_Change, this.on_fight_Skill_Attack_Count_Change, this)\n    }\n\n    setSkill(skillGroup: SkillGroupTab) {\n        this.skillGroup = skillGroup\n        this.spr.setTexture(this.skillGroup.Icon)\n        this.updateCount()\n        this.node.active = true\n    }\n\n    updateCount() {\n        this.lab.string = this.skillGroup.getCanAttackCount().toString()\n    }\n\n    on_fight_Skill_Attack_Count_Change(skillGroupId: number) {\n        if (this.skillGroup && this.skillGroup.configId == skillGroupId) {\n            this.updateCount()\n        }\n    }\n\n    on_fight_Fight_Skill_Cd_Progress(skillGroupId: number, progress: number) {\n        if (this.skillGroup && this.skillGroup.configId == skillGroupId) {\n            this.cdBar.node.active = progress != 1\n            this.cdBar.fillRange = 1 - progress\n        }\n    }\n}"]}