{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/SdkTestPop.ts"],"names":["_decorator","game","ViewPop","tab","ChannelMgr","Func","AdMgr","Global","P8PostEventName","ccclass","property","SdkTestPop","register","onLoginClick","login","params","console","log","code","onAdInitClick","initRewardedAd","retData","checkInt","onAdShowClick","ins","playVideoAd","AdType","AdType_MainChapterReward","getRoleInfo","t_obj","diamond","gold","roleID","roleName","roleLevel","vipLevel","serverID","serverName","createRoleTime","Math","round","Date","now","levelUpTime","partyName","onCreateRoleClick","createRole","onIntoServerClick","intoServer","onUpLvClick","roleLevelUp","onLogoutServer","roleLogoutServer","onRoleCompleteTutorial","roleCompleteTutorial","onAccountCenterClick","accountCenter","onExitGame","exitGame","onLogOut","logout","restart","onPay","orderId","onLineTime","objJson","gameOrderIdTst","isDebug","rechangeTab","getData","RechargeTableById","getValue","productld","channelTab","ProductType","ptPrice","getSdkRechargePrice","rmb","productDesc","Desc","extraInfo","svc_group","goodNum","ratio","buyTitle","buyName","pay","onOpenUrl","openURL","onShare","url","share","JSON","stringify","onComment","comment","onPostEvent","postEvent","test","onKefu","openCustomService","openActionWebView","onShopInfo","getShopInfo"],"mappings":"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","sourcesContent":["import { _decorator, Animation, AnimationClip, Color, director, game, Game, Graphics, instantiate, js, Label, Layers, Material, Node, Prefab, Rect, resources, sp, Sprite, SpriteAtlas, SpriteFrame, sys, Texture2D, v3 } from 'cc';\nimport { ViewPop } from '../../framework/base/ViewPop';\nimport { SceneMgr, ScenesName } from '../mgr/SceneMgr';\nimport { UIMgr } from '../mgr/UIMgr';\nimport { proto } from 'client_protocol';\nimport { MathAngle } from '../../framework/collision/Maths';\nimport { ViewName } from '../define/ViewDefine';\nimport { LoadResAsync, ResMgr } from '../mgr/ResMgr';\nimport { tab } from '../../Table/table_gen';\nimport { Field } from 'protobufjs';\nimport Fixed from '../../framework/collision/Fixed';\nimport { CommonTipsPop, CommonTipsPopCloseType } from './common/CommonTipsPop';\nimport { FPSAvatar } from '../fight/animation/FPSAvatar';\nimport { Loading } from './Loading';\nimport { Random } from '../fight/util/Random';\nimport { Bridge } from '../../framework/Bridge';\nimport { ChannelMgr } from '../../channel/ChannelMgr';\nimport { Func } from '../utils/Func';\nimport { AdMgr } from './AdMgr';\nimport { LoginControl } from './login/LoginControl';\nimport { Global } from '../../Global';\nimport { P8PostEventName } from '../../channel/ChannelDefine';\nconst { ccclass, property } = _decorator;\n\n@ccclass('SdkTestPop')\nexport class SdkTestPop extends ViewPop {\n\n    register(): void {\n    }\n\n\n    onLoginClick() {\n        ChannelMgr.login({}, (params: any) => {\n            console.log(\"sdkLoginClick\")\n            if (params.code == 0) {\n                // LoginControl.ins.sdkLogin()\n            } else {\n                console.log(\"登录失败\")\n            }\n        })\n    }\n\n    onAdInitClick() {\n        ChannelMgr.initRewardedAd({}, (retData: any) => {\n            if (retData) {\n                retData.code = Func.checkInt(retData.code)\n            }\n        })\n    }\n    onAdShowClick() {\n        AdMgr.ins.playVideoAd(tab.AdType.AdType_MainChapterReward, () => {\n            console.log(\"播放成功\")\n        })\n    }\n\n    getRoleInfo() {\n        let t_obj: any = {}\n\n        t_obj.diamond = 100\n        t_obj.gold = 100\n\n        t_obj.roleID = \"test_sdk_roleId\"\n        t_obj.roleName = \"test_sdk_roleName\"\n        t_obj.roleLevel = 1\n        t_obj.vipLevel = 1\n        t_obj.serverID = 1\n        t_obj.serverName = \"test_sdk_1服\"\n        t_obj.createRoleTime = Math.round(Date.now() / 1000) ;\n        t_obj.levelUpTime = Math.round(Date.now() / 1000);\n        t_obj.partyName = \"无\"\n        return t_obj\n    }\n\n    onCreateRoleClick() {\n        ChannelMgr.createRole(this.getRoleInfo())\n    }\n    onIntoServerClick() {\n        ChannelMgr.intoServer(this.getRoleInfo())\n    }\n    onUpLvClick() {\n        ChannelMgr.roleLevelUp(this.getRoleInfo())\n    }\n    onLogoutServer(){\n        ChannelMgr.roleLogoutServer(this.getRoleInfo())\n    }\n    onRoleCompleteTutorial(){\n        ChannelMgr.roleCompleteTutorial(this.getRoleInfo())\n    }\n    onAccountCenterClick() {\n        ChannelMgr.accountCenter(this.getRoleInfo())\n    }\n\n    onExitGame() {\n        ChannelMgr.exitGame(true, \"\");\n    }\n    onLogOut() {\n        ChannelMgr.logout(\"\", () => {\n\n            console.log(\"重启游戏代码\")\n            game.restart()\n        });\n    }\n\n    onPay() {\n        //SDK支付\n        let t_obj: any = this.getRoleInfo()\n\n\n        let orderId = \"sdasdas\"\n        t_obj.onLineTime = \"1\"\n\n        t_obj.objJson = orderId\n        t_obj.orderId = orderId\n\n        t_obj.gameOrderIdTst = Global.isDebug ? 1 : 0//@\"0\"是正式环境订单  @\"1\" 是测试环境订单\n\n        let rechangeTab = tab.getData().RechargeTableById.getValue(1)\n\n        t_obj.productld = rechangeTab[ChannelMgr.channelTab.ProductType]//    \"com.cjxd2.0.99\"\n        t_obj.ptPrice = ChannelMgr.getSdkRechargePrice(rechangeTab)\n        t_obj.rmb = ChannelMgr.getSdkRechargePrice(rechangeTab)\n        t_obj.productDesc = rechangeTab.Desc\n        t_obj.extraInfo = { svc_group: \"test\" } //@\"0.01\"\n        t_obj.goodNum = 1;\n        t_obj.ratio=10;\n        t_obj.buyTitle=rechangeTab.Desc;\n        t_obj.buyName=rechangeTab.Desc;\n        t_obj.productDesc=rechangeTab.Desc;\n        ChannelMgr.pay(t_obj)\n    }\n\n    onOpenUrl(){\n        ChannelMgr.openURL(\"https://www.facebook.com/cjxd.re.tw/\")\n    }\n    onShare(){\n        console.log(\"js调用分享\")\n        let t_obj:any = {}\n        t_obj.roleID = \"roleid_test\"\n        t_obj.serverID = \"7\" //sdk需要是逻辑服id\n        t_obj.url = \"\"\n\n        ChannelMgr.share(t_obj, (retData) => {\n           console.log(\"################ share \" + JSON.stringify(retData));\n            if (retData.code == 0) {\n                // this.testLoopTask();\n            }\n        });\n    }\n    onComment(){\n        console.log(\"js调用商店评分\")\n        ChannelMgr.comment(\"{}\", (retData) => {\n            // console.log(\"##################### comment ret\" + JSON.stringify(retData));\n            console.log(\"商店评分============\"+retData)\n            if (retData.code == 0) {\n                // MeControl.getInstance().setClintData(TypeClientData.REPUTATION, 1);\n                // SceneViewReputation.getInstance().hideScene();\n                // console.log(\"商店评分============回调\")\n            }\n        });\n    }\n    onPostEvent(){\n        ChannelMgr.postEvent(P8PostEventName.test)\n    }\n\n    onKefu(){\n        ChannelMgr.openCustomService()\n    }\n\n    openActionWebView(){\n        ChannelMgr.openActionWebView(\"https://www.facebook.com/cjxd.re.tw/\")\n    }\n\n    onShopInfo(){\n        ChannelMgr.getShopInfo()\n    }\n}\n\n\n"]}