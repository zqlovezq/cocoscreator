{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/jade/JadeSkillPreviewPop.ts"],"names":["_decorator","instantiate","Node","Prefab","ViewPop","JadeSkillItem","tab","ccclass","property","JadeSkillPreviewPop","currTag","skillItems","baseSkills","highSkills","register","start","initView","tables","getData","EquipSkillTable","value","Group","push","initSkillItem","skills","key","node","active","skillItemPrefab","parent","contentNode","getComponent","initSkill","onClickToggle","event","type","tag","Number"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;;AAC1CC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,G,iBAAAA,G;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;qCAGjBS,mB,WADZF,OAAO,CAAC,qBAAD,C,UAGHC,QAAQ,CAACN,IAAD,C,UAERM,QAAQ,CAACL,MAAD,C,2BALb,MACaM,mBADb;AAAA;AAAA,8BACiD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQrCC,OARqC,GAQtB,CARsB;AAAA,eASrCC,UATqC;AAAA,eAUrCC,UAVqC;AAAA,eAWrCC,UAXqC;AAAA;;AAY7CC,QAAAA,QAAQ,GAAS,CAEhB;;AACDC,QAAAA,KAAK,GAAG;AACJ,eAAKC,QAAL;AAEH;;AACDA,QAAAA,QAAQ,GAAE;AACN,eAAKJ,UAAL,GAAgB,EAAhB;AACA,eAAKC,UAAL,GAAgB,EAAhB;AACA,eAAKF,UAAL,GAAgB,EAAhB;AACA,cAAIM,MAAM,GAAC;AAAA;AAAA,0BAAIC,OAAJ,GAAcC,eAAzB;;AACA,eAAI,IAAIC,KAAR,IAAiBH,MAAjB,EAAwB;AACpB,gBAAGG,KAAK,CAACC,KAAN,IAAa,aAAhB,EAA8B;AAC1B,mBAAKT,UAAL,CAAgBU,IAAhB,CAAqBF,KAArB;AACH,aAFD,MAEM,IAAGA,KAAK,CAACC,KAAN,IAAa,YAAhB,EAA6B;AAC/B,mBAAKR,UAAL,CAAgBS,IAAhB,CAAqBF,KAArB;AACH;AACJ;;AACD,eAAKG,aAAL;AAIH;;AACDA,QAAAA,aAAa,GAAE;AACX,cAAIC,MAAM,GAAC,EAAX;;AACA,cAAG,KAAKd,OAAL,IAAc,CAAjB,EAAmB;AACfc,YAAAA,MAAM,GAAC,KAAKZ,UAAZ;AACH,WAFD,MAEK;AACDY,YAAAA,MAAM,GAAC,KAAKX,UAAZ;AACH;;AACD,eAAI,IAAIY,GAAR,IAAe,KAAKd,UAApB,EAA+B;AAC3B,iBAAKA,UAAL,CAAgBc,GAAhB,EAAqBC,IAArB,CAA0BC,MAA1B,GAAiC,KAAjC;AACH;;AAGD,eAAI,IAAIF,GAAR,IAAeD,MAAf,EAAsB;AAClB,gBAAG,CAAC,KAAKb,UAAL,CAAgBc,GAAhB,CAAJ,EAAyB;AACrB,kBAAIC,IAAS,GAACzB,WAAW,CAAC,KAAK2B,eAAN,CAAzB;AACAF,cAAAA,IAAI,CAACG,MAAL,GAAY,KAAKC,WAAjB;AACA,mBAAKnB,UAAL,CAAgBW,IAAhB,CAAqBI,IAAI,CAACK,YAAL;AAAA;AAAA,iDAArB;AACH;;AACD,iBAAKpB,UAAL,CAAgBc,GAAhB,EAAqBC,IAArB,CAA0BC,MAA1B,GAAiC,IAAjC;AACA,iBAAKhB,UAAL,CAAgBc,GAAhB,EAAqBO,SAArB,CAA+BR,MAAM,CAACC,GAAD,CAArC;AAEH;AACJ;;AAEDQ,QAAAA,aAAa,CAACC,KAAD,EAAOC,IAAP,EAAY;AACrB,cAAIC,GAAG,GAACC,MAAM,CAACF,IAAD,CAAd;;AACA,cAAG,KAAKzB,OAAL,IAAc0B,GAAjB,EAAqB;AACjB,iBAAK1B,OAAL,GAAa0B,GAAb;AACA,iBAAKb,aAAL;AACH;AACJ;;AAlE4C,O;;;;;iBAGrB,I;;;;;;;iBAED,I","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { JadeSkillItem } from './JadeSkillItem';\r\nimport { tab } from '../../../Table/table_gen';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('JadeSkillPreviewPop')\r\nexport class JadeSkillPreviewPop extends ViewPop {\r\n\r\n    @property(Node)\r\n    public contentNode:Node=null;\r\n    @property(Prefab)\r\n    skillItemPrefab:Prefab=null;\r\n\r\n\r\n    private currTag:number=1;\r\n    private skillItems:Array<JadeSkillItem>;\r\n    private baseSkills:Array<tab.EquipSkillTable>;\r\n    private highSkills:Array<tab.EquipSkillTable>;\r\n    register(): void {\r\n        \r\n    }\r\n    start() {\r\n        this.initView();\r\n\r\n    }\r\n    initView(){\r\n        this.baseSkills=[];\r\n        this.highSkills=[];\r\n        this.skillItems=[];\r\n        let tables=tab.getData().EquipSkillTable;\r\n        for(let value of tables){\r\n            if(value.Group==\"skill_basic\"){\r\n                this.baseSkills.push(value);\r\n            }else if(value.Group==\"skill_high\"){\r\n                this.highSkills.push(value);\r\n            }\r\n        }\r\n        this.initSkillItem();\r\n\r\n        \r\n\r\n    }\r\n    initSkillItem(){\r\n        let skills=[];\r\n        if(this.currTag==1){\r\n            skills=this.baseSkills;\r\n        }else{\r\n            skills=this.highSkills;\r\n        }\r\n        for(let key in this.skillItems){\r\n            this.skillItems[key].node.active=false;\r\n        }\r\n\r\n\r\n        for(let key in skills){\r\n            if(!this.skillItems[key]){\r\n                let node:Node=instantiate(this.skillItemPrefab);\r\n                node.parent=this.contentNode;\r\n                this.skillItems.push(node.getComponent(JadeSkillItem));\r\n            }\r\n            this.skillItems[key].node.active=true;\r\n            this.skillItems[key].initSkill(skills[key]);\r\n\r\n        }\r\n    }\r\n\r\n    onClickToggle(event,type){\r\n        let tag=Number(type);\r\n        if(this.currTag!=tag){\r\n            this.currTag=tag;\r\n            this.initSkillItem();\r\n        }\r\n    }\r\n   \r\n}\r\n\r\n\r\n"]}