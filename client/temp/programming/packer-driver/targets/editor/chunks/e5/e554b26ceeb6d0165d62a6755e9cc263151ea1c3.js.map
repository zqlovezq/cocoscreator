{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/framework/editor/SupportSpineRunInEditor38X.js"],"names":["_cjsLoader","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","cc","game","once","Game","EVENT_ENGINE_INITED","window","js","mixin","internal","SpineSkeleton","prototype","updateAnimation","dt","markForUpdateRenderData","paused","_timeScale","isAnimationCached","_isAniComplete","_animationQueue","length","_headAniInfo","frameCache","_animCache","isInvalid","updateToFrame","frames","_curFrame","shift","_accTime","delay","aniInfo","setAnimation","animationName","loop","_updateCache","_instance","_cjsExports"],"mappings":";;;;;;;;;AAAOA,MAAAA,U;;;8BAEDC,Y,GAAe,cAAYC,G;;AACjCF,MAAAA,UAAU,CAACG,MAAX,CAAkBF,YAAlB,EAAgC,UAAUG,OAAV,EAAmBC,OAAnB,EAA4BC,MAA5B,EAAoCC,UAApC,EAAgDC,SAAhD,EAA2D;AAC3F;AAGCC,QAAAA,EAAE,CAACC,IAAH,CAAQC,IAAR,CAAaF,EAAE,CAACG,IAAH,CAAQC,mBAArB,EAA0C,YAAY;AAClD,cAAI,CAACC,MAAM,CAAC,QAAD,CAAX,EAAuB;AACnB;AACH;;AACDL,UAAAA,EAAE,CAACM,EAAH,CAAMC,KAAN,CAAYP,EAAE,CAACQ,QAAH,CAAYC,aAAZ,CAA0BC,SAAtC,EAAiD;AAC7CC,YAAAA,eAAe,CAACC,EAAD,EAAK;AAChB,mBAAKC,uBAAL,GADgB,CAEhB;;AACA,kBAAI,KAAKC,MAAT,EAAiB;AACjBF,cAAAA,EAAE,IAAI,KAAKG,UAAL,GAAkB,GAAxB;;AACA,kBAAI,KAAKC,iBAAL,EAAJ,EAA8B;AAC1B,oBAAI,KAAKC,cAAT,EAAyB;AAAA;;AACrB,sBAAI,KAAKC,eAAL,CAAqBC,MAArB,KAAgC,CAAhC,IAAqC,CAAC,KAAKC,YAA/C,EAA6D;AACzD,0BAAMC,UAAU,GAAG,KAAKC,UAAxB;;AACA,wBAAID,UAAU,IAAIA,UAAU,CAACE,SAAX,EAAlB,EAA0C;AACtCF,sBAAAA,UAAU,CAACG,aAAX,CAAyB,CAAzB;AACA,4BAAMC,MAAM,GAAGJ,UAAU,CAACI,MAA1B;AACA,2BAAKC,SAAL,GAAiBD,MAAM,CAACA,MAAM,CAACN,MAAP,GAAgB,CAAjB,CAAvB;AACH;;AACD;AACH;;AACD,sBAAI,CAAC,KAAKC,YAAV,EAAwB;AACpB,yBAAKA,YAAL,GAAoB,KAAKF,eAAL,CAAqBS,KAArB,EAApB;AACH;;AACD,uBAAKC,QAAL,IAAiBhB,EAAjB;;AACA,sBAAI,KAAKgB,QAAL,0BAAgB,KAAKR,YAArB,qBAAgB,mBAAmBS,KAAnC,CAAJ,EAA8C;AAC1C,0BAAMC,OAAO,GAAG,KAAKV,YAArB;AACA,yBAAKA,YAAL,GAAoB,IAApB;AACA,yBAAKW,YAAL,CAAkB,CAAlB,EAAqBD,OAArB,oBAAqBA,OAAO,CAAEE,aAA9B,EAA6CF,OAA7C,oBAA6CA,OAAO,CAAEG,IAAtD;AACH;;AACD;AACH;;AACD,qBAAKC,YAAL,CAAkBtB,EAAlB;AACH,eAvBD,MAuBO;AACH,qBAAKuB,SAAL,CAAexB,eAAf,CAA+BC,EAA/B;AACH;AACJ;;AAhC4C,WAAjD;AAkCH,SAtCD,EAJ0F,CA6C3F;;AAEA,2BAAAwB,WAAW,GAAGvC,MAAM,CAACF,OAArB;AAGC,OAlDD,EAkDG,EAlDH","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n cc.game.once(cc.Game.EVENT_ENGINE_INITED, function () {\n     if (!window[\"EDITOR\"]) {\n         return\n     }\n     cc.js.mixin(cc.internal.SpineSkeleton.prototype, {\n         updateAnimation(dt) {\n             this.markForUpdateRenderData();\n             // if (EDITOR_NOT_IN_PREVIEW) return;\n             if (this.paused) return;\n             dt *= this._timeScale * 1.0;\n             if (this.isAnimationCached()) {\n                 if (this._isAniComplete) {\n                     if (this._animationQueue.length === 0 && !this._headAniInfo) {\n                         const frameCache = this._animCache;\n                         if (frameCache && frameCache.isInvalid()) {\n                             frameCache.updateToFrame(0);\n                             const frames = frameCache.frames;\n                             this._curFrame = frames[frames.length - 1];\n                         }\n                         return;\n                     }\n                     if (!this._headAniInfo) {\n                         this._headAniInfo = this._animationQueue.shift();\n                     }\n                     this._accTime += dt;\n                     if (this._accTime > this._headAniInfo?.delay) {\n                         const aniInfo = this._headAniInfo;\n                         this._headAniInfo = null;\n                         this.setAnimation(0, aniInfo?.animationName, aniInfo?.loop);\n                     }\n                     return;\n                 }\n                 this._updateCache(dt);\n             } else {\n                 this._instance.updateAnimation(dt);\n             }\n         }\n     });\n })\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, {});\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}