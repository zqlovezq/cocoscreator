{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/common/ItemGetWayPop.ts"],"names":["_decorator","instantiate","Label","Node","Prefab","ViewPop","CommonItem","tab","ItemInfo","LangMgr","ItemGetWayItem","OpenFunctionMgr","ccclass","property","ItemGetWayPop","_itemId","onShow","openData","itemId","itemData","getData","ItemTableById","getValue","itemInfo","num","item","initData","setSelectState","lbl_name","string","getLab","Name","lbl_desc","Desc","createItem","AcquireWay","onDestroy","register","unRegister","opNames","node_content","destroyAllChildren","i","length","opName","isOpen","ins","checkFunctionIsOpen","pfb_item","parent","itemTs","getComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;;AACjDC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,Q,iBAAAA,Q;;AAEAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,e,iBAAAA,e;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBb,U;;+BAGjBc,a,WADZF,OAAO,CAAC,eAAD,C,UAEHC,QAAQ;AAAA;AAAA,mC,UAERA,QAAQ,CAACX,KAAD,C,UAERW,QAAQ,CAACX,KAAD,C,UAERW,QAAQ,CAACV,IAAD,C,UAERU,QAAQ,CAACT,MAAD,C,2BAVb,MACaU,aADb;AAAA;AAAA,8BAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAW/BC,OAX+B,GAWb,CAXa;AAAA;;AAYvCC,QAAAA,MAAM,GAAS;AACX,eAAKD,OAAL,GAAe,KAAKE,QAAL,CAAcC,MAA7B;AACA,gBAAMC,QAAQ,GAAG;AAAA;AAAA,0BAAIC,OAAJ,GAAcC,aAAd,CAA4BC,QAA5B,CAAqC,KAAKP,OAA1C,CAAjB;AACA,cAAIQ,QAAQ,GAAG;AAAA;AAAA,qCAAf;AACAA,UAAAA,QAAQ,CAACL,MAAT,GAAkB,KAAKH,OAAvB;AACAQ,UAAAA,QAAQ,CAACC,GAAT,GAAe,CAAf;AACA,eAAKC,IAAL,CAAUC,QAAV,CAAmBH,QAAnB;AACA,eAAKE,IAAL,CAAUE,cAAV,CAAyB,KAAzB;AACA,eAAKC,QAAL,CAAcC,MAAd,GAAuB;AAAA;AAAA,kCAAQC,MAAR,CAAeX,QAAQ,CAACY,IAAxB,CAAvB;AACA,eAAKC,QAAL,CAAcH,MAAd,GAAuB;AAAA;AAAA,kCAAQC,MAAR,CAAeX,QAAQ,CAACc,IAAxB,CAAvB,CATW,CAWX;;AACA,eAAKC,UAAL,CAAgBf,QAAQ,CAACgB,UAAzB;AACH;;AACSC,QAAAA,SAAS,GAAS;AACxB,gBAAMA,SAAN;AACH;;AACDC,QAAAA,QAAQ,GAAS,CAEhB;;AACDC,QAAAA,UAAU,GAAS;AACf,gBAAMA,UAAN;AACH;;AACDJ,QAAAA,UAAU,CAACK,OAAD,EAAgC;AACtC,eAAKC,YAAL,CAAkBC,kBAAlB;;AACA,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,OAAO,CAACI,MAAtB,EAA6BD,CAAC,EAA9B,EAAiC;AAC7B,kBAAME,MAAM,GAAGL,OAAO,CAACG,CAAD,CAAtB;AACA,kBAAMG,MAAM,GAAG;AAAA;AAAA,oDAAgBC,GAAhB,CAAoBC,mBAApB,CAAwCH,MAAxC,CAAf;;AACA,gBAAGC,MAAH,EAAU;AACN,oBAAMpB,IAAI,GAAGxB,WAAW,CAAC,KAAK+C,QAAN,CAAxB;AACAvB,cAAAA,IAAI,CAACwB,MAAL,GAAc,KAAKT,YAAnB;AACA,oBAAMU,MAAM,GAAGzB,IAAI,CAAC0B,YAAL;AAAA;AAAA,mDAAf;AACAD,cAAAA,MAAM,CAACxB,QAAP,CAAgBa,OAAO,CAACG,CAAD,CAAvB;AACH;AACJ;AACJ;;AA/CsC,O;;;;;iBAEpB,I;;;;;;;iBAED,I;;;;;;;iBAEA,I;;;;;;;iBAEE,I;;;;;;;iBAEF,I","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, Prefab } from 'cc';\r\nimport { ViewPop } from '../../../framework/base/ViewPop';\r\nimport { CommonItem } from '../item/CommonItem';\r\nimport { tab } from '../../../Table/table_gen';\r\nimport { ItemInfo } from '../item/ItemInfo';\r\nimport { ItemData } from '../item/ItemData';\r\nimport { LangMgr } from '../../mgr/LangMgr';\r\nimport { ItemGetWayItem } from './ItemGetWayItem';\r\nimport { OpenFunctionMgr } from '../../../Common/component/OpenFunctionMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ItemGetWayPop')\r\nexport class ItemGetWayPop extends ViewPop {\r\n    @property(CommonItem)\r\n    item: CommonItem = null;\r\n    @property(Label)\r\n    lbl_name: Label = null;\r\n    @property(Label)\r\n    lbl_desc: Label = null;\r\n    @property(Node)\r\n    node_content:Node = null;\r\n    @property(Prefab)\r\n    pfb_item:Prefab = null;\r\n    private _itemId: number = 0;\r\n    onShow(): void {\r\n        this._itemId = this.openData.itemId;\r\n        const itemData = tab.getData().ItemTableById.getValue(this._itemId)\r\n        let itemInfo = new ItemInfo();\r\n        itemInfo.itemId = this._itemId;\r\n        itemInfo.num = 0;\r\n        this.item.initData(itemInfo);\r\n        this.item.setSelectState(false);\r\n        this.lbl_name.string = LangMgr.getLab(itemData.Name);\r\n        this.lbl_desc.string = LangMgr.getLab(itemData.Desc);\r\n\r\n        // 获取途径\r\n        this.createItem(itemData.AcquireWay);\r\n    }\r\n    protected onDestroy(): void {\r\n        super.onDestroy();\r\n    }\r\n    register(): void {\r\n        \r\n    }\r\n    unRegister(): void {\r\n        super.unRegister()\r\n    }\r\n    createItem(opNames:tab.OpenFunctionName[]){\r\n        this.node_content.destroyAllChildren();\r\n        for(let i=0;i<opNames.length;i++){\r\n            const opName = opNames[i];\r\n            const isOpen = OpenFunctionMgr.ins.checkFunctionIsOpen(opName);\r\n            if(isOpen){\r\n                const item = instantiate(this.pfb_item);\r\n                item.parent = this.node_content;\r\n                const itemTs = item.getComponent(ItemGetWayItem);\r\n                itemTs.initData(opNames[i]);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}