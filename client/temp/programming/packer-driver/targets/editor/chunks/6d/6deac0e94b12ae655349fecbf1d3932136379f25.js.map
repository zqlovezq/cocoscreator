{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/hero/herobag/HeroAutoAscendPopItem.ts"],"names":["_decorator","Component","Label","Node","Toggle","HeroInfo","HeroData","HeroItem","EventMgr","LocalEvent","ccclass","property","HeroAutoAscendPopItem","_isCheck","_heroId","initData","materialArr","heroId","toggle_select","isChecked","heroInfo","ins","getById","materialHeroInfo","nextHeroInfo","itemId","id","level","getHeroLevel","star","lv","lbl_material_count","string","length","createItem","node_need","node_material","node_next","node","item","children","ts","getComponent","UpdateContent","setSelect","setLevel","clickSelect","emitLocal","Delete_Star_Up_Hero"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, log, Node, Toggle } from 'cc';\r\nimport { HeroInfo } from '../HeroInfo';\r\nimport { HeroData } from '../HeroData';\r\nimport { HeroItem } from '../../item/HeroItem';\r\nimport { EventMgr } from '../../../mgr/EventMgr';\r\nimport { LocalEvent } from '../../../define/LocalEvent';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HeroAutoAscendPopItem')\r\nexport class HeroAutoAscendPopItem extends Component {\r\n    @property(Node)\r\n    node_next:Node = null;\r\n    @property(Node)\r\n    node_need:Node = null;\r\n    @property(Node)\r\n    node_material:Node = null;\r\n\r\n    @property(Label)\r\n    lbl_material_count:Label = null;\r\n\r\n    @property(Toggle)\r\n    toggle_select:Toggle = null;\r\n\r\n    private _isCheck:boolean = true;\r\n    private _heroId:number = 0;\r\n    initData(materialArr:HeroInfo[],heroId:number){\r\n        this._isCheck = true;\r\n        this.toggle_select.isChecked = true;\r\n        /* 初始化要升星的heroid */\r\n        this._heroId = heroId;\r\n        let heroInfo = HeroData.ins.getById(heroId);\r\n        let materialHeroInfo = materialArr[0];\r\n        let nextHeroInfo = new HeroInfo();\r\n        nextHeroInfo.itemId = heroInfo.itemId;\r\n        nextHeroInfo.id = 0;\r\n        nextHeroInfo.level = heroInfo.getHeroLevel();\r\n        nextHeroInfo.star = heroInfo.star+1;\r\n\r\n        let lv = heroInfo.getHeroLevel();\r\n        this.lbl_material_count.string = \"x\"+materialArr.length;\r\n\r\n        this.createItem(heroInfo,this.node_need);\r\n        this.createItem(materialHeroInfo,this.node_material,0);\r\n        this.createItem(nextHeroInfo,this.node_next,lv)\r\n    }\r\n    createItem(heroInfo:HeroInfo,node:Node,lv?:number){\r\n        let item = node.children[0];\r\n        let ts:HeroItem = item.getComponent(HeroItem)\r\n        ts.UpdateContent(heroInfo);\r\n        ts.setSelect(false);\r\n        ts.setLevel(0);\r\n    }\r\n    clickSelect(){\r\n        this._isCheck = !this._isCheck;\r\n        this.toggle_select.isChecked = this._isCheck;\r\n        EventMgr.emitLocal(LocalEvent.Delete_Star_Up_Hero,this._heroId,!this._isCheck);\r\n    }\r\n}\r\n\r\n\r\n"]}