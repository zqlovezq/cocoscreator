{"version":3,"sources":["file:///C:/chickenStarClient/client/assets/scripts/logic/model/mail/MailInfo.ts"],"names":["_decorator","proto","Func","RedMgr","RedDotType","ccclass","property","MailInfo","Mail","_isRead","merge","item","key","b","getItem","id","Number","isRead","setItem","refreshEvent","isCanReceived","IsRewardsReceived","Rewards","length"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,K,oBAAAA,K;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;0BAGaO,Q,WADZF,OAAO,CAAC,UAAD,C,gBAAR,MACaE,QADb,SAC8B;AAAA;AAAA,0BAAMC,IADpC,CACyC;AAAA;AAAA;;AACrC;AACJ;AACA;AAHyC,eAI7BC,OAJ6B;AAAA;;AAKrCC,QAAAA,KAAK,CAACC,IAAD,EAAmB;AACpB,eAAK,MAAMC,GAAX,IAAkBD,IAAlB,EAAwB;AACpB,iBAAKC,GAAL,IAAYD,IAAI,CAACC,GAAD,CAAhB;AACH;;AACD,cAAIC,CAAC,GAAC;AAAA;AAAA,4BAAKC,OAAL,CAAa,mBAAiB,KAAKC,EAAnC,CAAN;;AACA,cAAGF,CAAH,EAAK;AACD,iBAAKJ,OAAL,GAAa,IAAb;AACH,WAFD,MAEK;AACD,iBAAKA,OAAL,GAAa,KAAb;AACH;;AACD,eAAKM,EAAL,GAAQC,MAAM,CAAC,KAAKD,EAAN,CAAd;AAEH;;AAES,YAANE,MAAM,GAAE;AACR,iBAAO,KAAKR,OAAZ;AACH;;AACS,YAANQ,MAAM,CAACJ,CAAD,EAAW;AACjB,cAAGA,CAAC,IAAE,KAAKJ,OAAX,EAAmB;AACf;AAAA;AAAA,8BAAKS,OAAL,CAAa,mBAAiB,KAAKH,EAAnC,EAAsCF,CAAC,GAAC,CAAD,GAAG,CAA1C;;AACA,gBAAGA,CAAH,EAAK;AACD;AAAA;AAAA,oCAAOM,YAAP,CAAoB;AAAA;AAAA,4CAAWX,IAA/B;AACH;AACJ;;AACD,eAAKC,OAAL,GAAaI,CAAb;AAEH;;AACgB,YAAbO,aAAa,GAAE;AACf,iBAAO,CAAC,KAAKC,iBAAN,IAAyB,KAAKC,OAAL,CAAaC,MAAb,GAAoB,CAApD;AACH;;AAlCoC,O","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { proto } from 'client_protocol';\r\nimport { Func } from '../../utils/Func';\r\nimport { RedMgr } from '../../mgr/RedMgr';\r\nimport { RedDotType } from '../../red/RedDotType';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * \r\n * MailInfo\r\n * zhudingchao\r\n * Mon Jun 03 2024 11:18:21 GMT+0800 (中国标准时间)\r\n * db://assets/scripts/logic/model/mail/MailInfo.ts\r\n *\r\n */\r\n\r\n@ccclass('MailInfo')\r\nexport class MailInfo extends proto.Mail {\r\n    /**\r\n     * 是否已读\r\n     */\r\n    private _isRead:boolean; \r\n    merge(item: proto.Mail) {\r\n        for (const key in item) {\r\n            this[key] = item[key]\r\n        }\r\n        let b=Func.getItem(\"mailreadState_\"+this.id);\r\n        if(b){\r\n            this._isRead=true;\r\n        }else{\r\n            this._isRead=false;\r\n        }\r\n        this.id=Number(this.id);\r\n       \r\n    }\r\n\r\n    get isRead(){\r\n        return this._isRead;\r\n    }\r\n    set isRead(b:boolean){\r\n        if(b!=this._isRead){\r\n            Func.setItem(\"mailreadState_\"+this.id,b?1:0);\r\n            if(b){\r\n                RedMgr.refreshEvent(RedDotType.Mail);\r\n            }\r\n        }\r\n        this._isRead=b;\r\n       \r\n    }\r\n    get isCanReceived(){\r\n        return !this.IsRewardsReceived&&this.Rewards.length>0;\r\n    }\r\n}"]}